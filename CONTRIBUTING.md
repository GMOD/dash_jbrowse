This project was generated by the
[dash-component-boilerplate](https://github.com/plotly/dash-component-boilerplate)
it contains the minimal set of code required to create your own custom Dash
component.

# CONTRIBUTING

Thank you for your interest in contributing to Dash JBrowse. This short guide
will help you get started.

### Quick start

```
git clone https://github.com/GMOD/dash_jbrowse
cd dash_jbrowse
npm install
pip install -r requirements.txt
python usage.py
```

Visit http://localhost:8050 in your web browser

This will start a flask server with a configured dash_jbrowse component. Check
out our [README](./README.md) for documentation.

### Install dependencies

1. Install npm packages
   ```
   $ npm install
   ```
2. Create a virtual env and activate (you can also use conda).

   ```
   $ virtualenv venv
   $ . venv/bin/activate
   ```

   _Note: venv\Scripts\activate for windows_

3. Install python packages required to build components.
   ```
   $ pip install -r requirements.txt
   ```
4. Install the python packages for testing (optional)
   ```
   $ pip install -r tests/requirements.txt
   ```

### Write your component code in `src/`.

- The demo app is in `src/demo` and you will import your example component code
  into your demo app.
- Test your code in a Python environment:
  1. Build your code
     ```
     $ npm run build
     ```
  2. Run and modify the `usage.py` sample dash app:
     ```
     $ python usage.py
     ```
- Write tests for your component.
  - A sample test is available in `tests/test_usage.py`, it will load `usage.py`
    and you can then automate interactions with selenium.
  - Run the tests with `$ pytest tests`.
  - The Dash team uses these types of integration tests extensively. Browse the
    Dash component code on GitHub for more examples of testing (e.g.
    https://github.com/plotly/dash-core-components)
- Add custom styles to your component by putting your custom CSS files into your
  distribution folder (`dash_jbrowse`).
  - Make sure that they are referenced in `MANIFEST.in` so that they get
    properly included when you're ready to publish your component.
  - Make sure the stylesheets are added to the `_css_dist` dict in
    `dash_jbrowse/__init__.py` so dash will serve them automatically when the
    component suite is requested.
- [Review your code](./review_checklist.md)

### Contributing and Peer Review:

1. Build your code:
   ```
   $ npm run build
   ```
2. Create a Python distribution

   ```
   $ python setup.py sdist bdist_wheel
   ```

   This will create source and wheel distribution in the generated the `dist/`
   folder. See
   [PyPA](https://packaging.python.org/guides/distributing-packages-using-setuptools/#packaging-your-project)
   for more information.

3. Test your tarball by copying it into a new environment and installing it
   locally:
   ```
   $ pip install dash_jbrowse-<version>.tar.gz
   ```
4. If it works, create a pull request on this repo to main and contact the
   JBrowse team!

<!-- 5. Share your component with the community! https://community.plotly.com/c/dash
    1. Publish this repository to GitHub
    2. Tag your GitHub repository with the plotly-dash tag so that it appears here: https://github.com/topics/plotly-dash
    3. Create a post in the Dash community forum: https://community.plotly.com/c/dash -->

There are two main workflows in this repo that facilitate the deployments of the
package to both test PyPI and production PyPI. The main.yml is a workflow that
gets triggered when a PR gets merged into main. This workflow will create a
build and upload the distribution to the test pypi environment. You can then
test that build before creating a release.
