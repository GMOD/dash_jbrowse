/*! For license information please see async-CircularGenomeView.js.LICENSE.txt */
(window.webpackJsonpdash_jbrowse=window.webpackJsonpdash_jbrowse||[]).push([[1],{113:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(10)),u=(0,a.default)((function e(t){(0,o.default)(this,e),(0,i.default)(this,"name",""),this.name=t.name}));t.default=u},114:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(10)),u=function(){function e(){(0,a.default)(this,e),(0,i.default)(this,"name",void 0),(0,i.default)(this,"url",void 0),(0,i.default)(this,"version",void 0),(0,i.default)(this,"configurationSchema",void 0)}return(0,o.default)(e,[{key:"install",value:function(e){}},{key:"configure",value:function(e){}}]),e}();t.default=u},115:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableCreate=function(e,t){return n.Observable.create((function(t){try{var r=e(t);r&&r.catch&&r.catch((function(e){return t.error(e)}))}catch(e){t.error(e)}})).pipe((0,a.takeUntil)((0,o.observeAbortSignal)(t)))};var n=r(142),a=r(51),o=r(32)},127:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={isViewContainer:!0,isSessionModel:!0,isSessionModelWithConfigEditing:!0,isSessionWithAddTracks:!0,isSessionModelWithWidgets:!0,isSessionModelWithConnections:!0,isSessionWithSessionPlugins:!0,isSelectionContainer:!0,isViewModel:!0,isTrackModel:!0,isDisplayModel:!0,isTrackViewModel:!0,isAppRootModel:!0,isAbstractMenuManager:!0,isUriLocation:!0,AuthNeededError:!0,RetryError:!0,isAuthNeededException:!0,isRetryException:!0};t.RetryError=t.AuthNeededError=void 0,t.isAbstractMenuManager=function(e){return"object"===(0,d.default)(e)&&null!==e&&"appendMenu"in e&&"appendToSubMenu"in e},t.isAppRootModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"isAssemblyEditing"in e&&"findAppropriateInternetAccount"in e},t.isAuthNeededException=function(e){return e instanceof Error&&("AuthNeededError"===e.name||void 0!==e.url)},t.isDisplayModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"configuration"in e&&e.configuration.displayId},t.isRetryException=function(e){return"RetryError"===e.name||void 0!==e.internetAccountId},t.isSelectionContainer=function(e){return"object"===(0,d.default)(e)&&null!==e&&"selection"in e&&"setSelection"in e},t.isSessionModel=h,t.isSessionModelWithConfigEditing=function(e){return h(e)&&"editConfiguration"in e},t.isSessionModelWithConnections=function(e){return h(e)&&"addConnectionConf"in e},t.isSessionModelWithWidgets=function(e){return h(e)&&"widgets"in e},t.isSessionWithAddTracks=function(e){return h(e)&&"addTrackConf"in e},t.isSessionWithSessionPlugins=function(e){return h(e)&&"sessionPlugins"in e},t.isTrackModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"configuration"in e&&e.configuration.trackId},t.isTrackViewModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"showTrack"in e&&"hideTrack"in e},t.isUriLocation=function(e){return"object"===(0,d.default)(e)&&null!==e&&"locationType"in e&&"uri"in e},t.isViewContainer=function(e){return(0,p.isStateTreeNode)(e)&&"removeView"in e&&"addView"in e&&"views"in e},t.isViewModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"width"in e&&"setWidth"in e};var o=n(r(16)),i=n(r(15)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(176)),d=n(r(11)),p=r(17),m=r(2052);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function h(e){return"object"===(0,d.default)(e)&&null!==e&&"rpcManager"in e&&"configuration"in e}Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=function(e){(0,l.default)(r,e);var t=g(r);function r(e,n){var a;return(0,i.default)(this,r),(a=t.call(this,e)).message=e,a.url=n,a.name="AuthNeededError",Object.setPrototypeOf((0,u.default)(a),r.prototype),a}return(0,o.default)(r)}((0,f.default)(Error));t.AuthNeededError=v;var y=function(e){(0,l.default)(r,e);var t=g(r);function r(e,n){var a;return(0,i.default)(this,r),(a=t.call(this,e)).message=e,a.internetAccountId=n,a.name="RetryError",a}return(0,o.default)(r)}((0,f.default)(Error));t.RetryError=y},128:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.RESIZE_HANDLE_HEIGHT=t.INTER_REGION_PADDING_WIDTH=t.HEADER_OVERVIEW_HEIGHT=t.HEADER_BAR_HEIGHT=void 0,Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"RefNameAutocomplete",{enumerable:!0,get:function(){return R.default}}),t.SPACING=t.SCALE_BAR_HEIGHT=void 0,Object.defineProperty(t,"SearchBox",{enumerable:!0,get:function(){return D.default}}),t.WIDGET_HEIGHT=void 0,Object.defineProperty(t,"renderToSvg",{enumerable:!0,get:function(){return T.renderToSvg}}),t.stateModelFactory=function(e){return y.types.compose(s.BaseViewModel,y.types.model("LinearGenomeView",{id:f.ElementId,type:y.types.literal("LinearGenomeView"),offsetPx:0,bpPerPx:1,displayedRegions:y.types.array(f.Region),tracks:y.types.array(e.pluggableMstType("track","stateModel")),hideHeader:!1,hideHeaderOverview:!1,hideNoTracksActive:!1,trackSelectorType:y.types.optional(y.types.enumeration(["hierarchical"]),"hierarchical"),trackLabels:y.types.optional(y.types.string,(function(){return L("lgv-trackLabels")||"overlapping"})),showCenterLine:y.types.optional(y.types.boolean,(function(){var e=L("lgv-showCenterLine");return null!=e&&!!+e})),showCytobandsSetting:y.types.optional(y.types.boolean,(function(){var e=L("lgv-showCytobands");return null==e||!!+e}))})).volatile((function(){return{volatileWidth:void 0,minimumBlockWidth:3,draggingTrackId:void 0,volatileError:void 0,afterDisplayedRegionsSetCallbacks:[],scaleFactor:1,trackRefs:{},coarseDynamicBlocks:[],coarseTotalBp:0,leftOffset:void 0,rightOffset:void 0,searchResults:void 0,searchQuery:void 0,seqDialogDisplayed:!1}})).views((function(e){return{get width(){if(void 0===e.volatileWidth)throw new Error("width undefined, make sure to check for model.initialized");return e.volatileWidth},get interRegionPaddingWidth(){return 2},get assemblyNames(){return(0,u.default)(new Set(e.displayedRegions.map((function(e){return e.assemblyName}))))}}})).views((function(e){return{get assemblyErrors(){var t=(0,p.getSession)(e).assemblyManager;return e.assemblyNames.map((function(e){var r;return null===(r=t.get(e))||void 0===r?void 0:r.error})).filter((function(e){return!!e})).join(", ")},get assembliesInitialized(){var t=(0,p.getSession)(e).assemblyManager;return e.assemblyNames.every((function(e){var r;return null===(r=t.get(e))||void 0===r?void 0:r.initialized}))},get initialized(){return void 0!==e.volatileWidth&&this.assembliesInitialized},get hasDisplayedRegions(){return e.displayedRegions.length>0},get isSearchDialogDisplayed(){return void 0!==e.searchResults},get scaleBarHeight(){return 20},get headerHeight(){return e.hideHeader?0:e.hideHeaderOverview?48:68},get trackHeights(){return e.tracks.map((function(e){return e.displays[0].height})).reduce((function(e,t){return e+t}),0)},get trackHeightsWithResizeHandles(){return this.trackHeights+3*e.tracks.length},get height(){return this.trackHeightsWithResizeHandles+this.headerHeight+this.scaleBarHeight},get totalBp(){return e.displayedRegions.reduce((function(e,t){return e+t.end-t.start}),0)},get maxBpPerPx(){return this.totalBp/(.9*e.width)},get minBpPerPx(){return.02},get error(){return e.volatileError||this.assemblyErrors},get maxOffset(){return this.displayedRegionsTotalPx-10},get minOffset(){return 30-e.width},get displayedRegionsTotalPx(){return this.totalBp/e.bpPerPx},renderProps:function(){return B(B({},(0,h.getParentRenderProps)(e)),{},{bpPerPx:e.bpPerPx,highResolutionScaling:(0,c.getConf)((0,p.getSession)(e),"highResolutionScaling")})},searchScope:function(t){return{assemblyName:t,includeAggregateIndexes:!0,tracks:e.tracks}},bpToPx:function(t){var r=t.refName,n=t.coord,a=t.regionNumber;return(0,p.viewBpToPx)({refName:r,coord:n,regionNumber:a,self:e})},pxToBp:function(t){var r=0,n=(e.offsetPx+t)*e.bpPerPx,a=e.displayedRegions.length;if(n<0){var o=e.displayedRegions[0],i=n;return B(B({},(0,y.getSnapshot)(o)),{},{oob:!0,coord:o.reversed?Math.floor(o.end-i)+1:Math.floor(o.start+i)+1,offset:i,index:0})}for(var u=e.interRegionPaddingWidth*e.bpPerPx,l=e.minimumBlockWidth*e.bpPerPx,c=0;c<e.displayedRegions.length;c+=1){var s=e.displayedRegions[c],f=s.end-s.start,d=n-r;if(f+r>n&&r<=n)return B(B({},(0,y.getSnapshot)(s)),{},{oob:!1,offset:d,coord:s.reversed?Math.floor(s.end-d)+1:Math.floor(s.start+d)+1,index:c});s.end-s.start>l&&d/e.bpPerPx>0&&d/e.bpPerPx<e.width?r+=f+u:r+=f}if(n>=r){var p=e.displayedRegions[a-1],m=n-r+(p.end-p.start);return B(B({},(0,y.getSnapshot)(p)),{},{oob:!0,offset:m,coord:p.reversed?Math.floor(p.end-m)+1:Math.floor(p.start+m)+1,index:a-1})}return{coord:0,index:0,refName:"",oob:!0,assemblyName:"",offset:0,start:0,end:0,reversed:!1}},getTrack:function(t){return e.tracks.find((function(e){return e.configuration.trackId===t}))},rankSearchResults:function(t){var r=e.tracks.map((function(e){return e.configuration.trackId}));return t.forEach((function(e){r.includes(e.trackId)&&e.updateScore(e.getScore()+1)})),t},rewriteOnClicks:function(t,r){var n=this;r.forEach((function(r){if("subMenu"in r&&n.rewriteOnClicks(t,r.subMenu),"onClick"in r){var a=r.onClick;r.onClick=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.tracks.forEach((function(e){e.type===t&&a.apply(e,[e].concat(n))}))}}}))},get trackTypeActions(){var t=this,r=new Map;return e.tracks.forEach((function(e){if(!r.get(e.type)){var n=(0,w.default)(e.viewMenuActions);t.rewriteOnClicks(e.type,n),r.set(e.type,n)}})),r},get centerLineInfo(){return e.displayedRegions.length?this.pxToBp(e.width/2):void 0}}})).actions((function(t){return{setShowCytobands:function(e){t.showCytobandsSetting=e,localStorage.setItem("lgv-showCytobands","".concat(+e))},setWidth:function(e){t.volatileWidth=e},setError:function(e){t.volatileError=e},toggleHeader:function(){t.hideHeader=!t.hideHeader},toggleHeaderOverview:function(){t.hideHeaderOverview=!t.hideHeaderOverview},toggleNoTracksActive:function(){t.hideNoTracksActive=!t.hideNoTracksActive},scrollTo:function(e){var r=(0,p.clamp)(e,t.minOffset,t.maxOffset);return t.offsetPx=r,r},zoomTo:function(e){var r=(0,p.clamp)(e,t.minBpPerPx,t.maxBpPerPx);if(r===t.bpPerPx)return r;var n=t.bpPerPx;if(t.bpPerPx=r,Math.abs(n-r)<1e-6)return console.warn("zoomTo bpPerPx rounding error"),n;var a=t.width;return this.scrollTo(Math.round((t.offsetPx+a/2)*n/r-a/2)),r},setOffsets:function(e,r){t.leftOffset=e,t.rightOffset=r},setSearchResults:function(e,r){t.searchResults=e,t.searchQuery=r},setSequenceDialogOpen:function(e){t.seqDialogDisplayed=e},setNewView:function(e,t){this.zoomTo(e),this.scrollTo(t)},horizontallyFlip:function(){t.displayedRegions=(0,y.cast)(t.displayedRegions.slice().reverse().map((function(e){return B(B({},e),{},{reversed:!e.reversed})}))),this.scrollTo(t.totalBp/t.bpPerPx-t.offsetPx-t.width)},showTrack:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.pluggableConfigSchemaType("track"),i=(0,y.resolveIdentifier)(o,(0,y.getRoot)(t),r);if(!i)throw new Error('Could not resolve identifier "'.concat(r,'"'));var u=e.getTrackType(null==i?void 0:i.type);if(!u)throw new Error("Unknown track type ".concat(i.type));var l=e.getViewType(t.type),c=l.displayTypes.map((function(e){return e.name})),s=i.displays.find((function(e){return c.includes(e.type)}));if(!s)throw new Error("Could not find a compatible display for view type ".concat(t.type));var f=t.tracks.filter((function(e){return e.configuration===i}));if(0===f.length){var d=u.stateModel.create(B(B({},n),{},{type:i.type,configuration:i,displays:[B({type:s.type,configuration:s},a)]}));return t.tracks.push(d),d}return f[0]},hideTrack:function(r){var n=e.pluggableConfigSchemaType("track"),a=(0,y.resolveIdentifier)(n,(0,y.getRoot)(t),r),o=t.tracks.filter((function(e){return e.configuration===a}));return(0,v.transaction)((function(){return o.forEach((function(e){return t.tracks.remove(e)}))})),o.length}}})).actions((function(e){return{moveTrack:function(t,r){var n=e.tracks.findIndex((function(e){return e.id===t}));if(-1===n)throw new Error("Track ID ".concat(t," not found"));var a=e.tracks.findIndex((function(e){return e.id===r}));if(-1===a)throw new Error("Track ID ".concat(r," not found"));var o=(0,y.getSnapshot)(e.tracks[n]);e.tracks.splice(n,1),e.tracks.splice(a,0,o)},closeView:function(){var t=(0,p.getContainingView)(e);t?(0,p.isViewContainer)(t)&&t.removeView(e):(0,p.getSession)(e).removeView(e)},toggleTrack:function(t){e.hideTrack(t)||e.showTrack(t)},setTrackLabels:function(t){e.trackLabels=t,localStorage.setItem("lgv-trackLabels",t)},toggleCenterLine:function(){e.showCenterLine=!e.showCenterLine,localStorage.setItem("lgv-showCenterLine","".concat(+e.showCenterLine))},setDisplayedRegions:function(t){e.displayedRegions=(0,y.cast)(t),e.zoomTo(e.bpPerPx)},activateTrackSelector:function(){if("hierarchical"===e.trackSelectorType){var t=(0,p.getSession)(e);if((0,p.isSessionModelWithWidgets)(t)){var r=t.addWidget("HierarchicalTrackSelectorWidget","hierarchicalTrackSelector",{view:e});return t.showWidget(r),r}}throw new Error("invalid track selector type ".concat(e.trackSelectorType))},navToLocString:function(t,r){var n,a,o=e.assemblyNames,u=(0,p.getSession)(e).assemblyManager,l=u.isValidRefName,c=r||o[0],s=t.split(/(\s+)/).map((function(e){return e.trim()})).filter((function(e){return!!e}));try{a=s.map((function(e){return(0,p.parseLocString)(e,(function(e){return l(e,c)}))}))}catch(e){var f=(0,i.default)(s,3),d=f[0],m=f[1],g=f[2];if(!("".concat(e).match(/Unknown reference sequence/)&&Number.isInteger(+m)&&Number.isInteger(+g)))throw e;a=[(0,p.parseLocString)(d+":"+m+".."+g,(function(e){return l(e,c)}))]}var h=null===(n=a)||void 0===n?void 0:n.map((function(e){var t=e.assemblyName||c,r=u.get(t),n=e.refName;if(!r)throw new Error("assembly ".concat(t," not found"));var a=r.regions;if(!a)throw new Error("regions not loaded yet for ".concat(t));var o=r.getCanonicalRefName(e.refName);if(!o)throw new Error("Could not find refName ".concat(n," in ").concat(r.name));var i=a.find((function(e){return e.refName===o}));if(!i)throw new Error("Could not find refName ".concat(n," in ").concat(t));return B(B({},e),{},{assemblyName:t,parentRegion:i})}));if(1===h.length){var v=h[0];this.setDisplayedRegions([B({reversed:v.reversed},v.parentRegion)]);var y=v.start,b=v.end,w=v.parentRegion;this.navTo(B(B({},v),{},{start:(0,p.clamp)(null!=y?y:0,0,w.end),end:(0,p.clamp)(null!=b?b:w.end,0,w.end)}))}else this.setDisplayedRegions(h.map((function(e){return void 0===e.start?e.parentRegion:e}))),this.showAllRegions()},navTo:function(e){this.navToMultiple([e])},navToMultiple:function(t){var r=t[0],n=r.refName,a=r.start,o=r.end,i=r.assemblyName,u=void 0===i?e.assemblyNames[0]:i;if(void 0!==a&&void 0!==o&&a>o)throw new Error('start "'.concat(a+1,'" is greater than end "').concat(o,'"'));var l=(0,p.getSession)(e).assemblyManager.get(u);if(l){var c=l.getCanonicalRefName(n);c&&(n=c)}for(var s,f=a,d=o,m=!1,g=function(e){if(n===e.refName){if(m=!0,void 0===f&&(f=e.start),void 0===d&&(d=e.end),f>=e.start&&f<=e.end&&d<=e.end&&d>=e.start)return!0;f=a,d=o}return!1},h=(0,p.findLastIndex)(e.displayedRegions,g);s!==h;)try{var v=s;if(s=e.displayedRegions.slice(void 0===v?0:v+1).findIndex(g),void 0!==v&&(s+=v+1),!m)throw new Error('could not find a region with refName "'.concat(n,'"'));if(void 0===f)throw new Error('could not find a region with refName "'.concat(n,'" that contained an end position ').concat(d));if(void 0===d)throw new Error('could not find a region with refName "'.concat(n,'" that contained a start position ').concat(f+1));if(-1===s)throw new Error('could not find a region that completely contained "'.concat((0,p.assembleLocString)(r),'"'));if(1===t.length){var y=e.displayedRegions[s];return void this.moveTo({index:s,offset:y.reversed?y.end-d:f-y.start},{index:s,offset:y.reversed?y.end-f:d-y.start})}for(var b=0,w=0,k=0;b<t.length;b++){var O=t[b],P=e.displayedRegions[s+b];if(w=O.start||P.start,k=O.end||P.end,O.refName!==P.refName)throw new Error("Entered location ".concat((0,p.assembleLocString)(O)," does not match with displayed regions"))}b-=1;var E=e.displayedRegions[s],S=e.displayedRegions[s+b];return void this.moveTo({index:s,offset:E.reversed?E.end-d:f-E.start},{index:s+b,offset:S.reversed?S.end-w:k-S.start})}catch(e){if(s===h)throw e}},zoomToDisplayedRegions:function(t,r){if(void 0!==t&&void 0!==r){if(t.refName===r.refName&&t.index===r.index&&r.offset<t.offset||t.index>r.index){var n=[r,t];t=n[0],r=n[1]}var a={start:t.start,end:t.end,index:t.index,offset:t.offset},o={start:r.start,end:r.end,index:r.index,offset:r.offset};if(a&&o)this.moveTo(a,o);else(0,p.getSession)(e).notify("No regions found to navigate to","warning")}},getSelectedRegions:function(t,r){var n=b.default.create(B(B({},(0,y.getSnapshot)(e)),{},{interRegionPaddingWidth:e.interRegionPaddingWidth}));return n.setVolatileWidth(e.width),n.zoomToDisplayedRegions(t,r),n.dynamicBlocks.contentBlocks.map((function(e){return B(B({},e),{},{start:Math.floor(e.start),end:Math.ceil(e.end)})}))},afterDisplayedRegionsSet:function(t){e.afterDisplayedRegionsSetCallbacks.push(t)},moveTo:function(t,r){var n=0;if(t.index===r.index)n+=r.offset-t.offset;else{var a=e.displayedRegions[t.index];if(n+=a.end-a.start-t.offset,r.index-t.index>=2)for(var o=t.index+1;o<r.index;o+=1)n+=e.displayedRegions[o].end-e.displayedRegions[o].start;n+=r.offset}var i=n/(e.width-e.interRegionPaddingWidth*(r.index-t.index)),u=e.zoomTo(i),l=0;i<u&&(l=(u-i)*e.width/2);for(var c=-l,s=0;s<e.displayedRegions.length;s+=1){var f=e.displayedRegions[s];if(t.index===s){c+=t.offset;break}c+=f.end-f.start}e.scrollTo(Math.round(c/e.bpPerPx)+e.interRegionPaddingWidth*t.index)},horizontalScroll:function(t){var r=e.offsetPx;return e.scrollTo(e.offsetPx+t)-r},centerAt:function(t,r,n){var a=e.bpToPx({refName:r,coord:t,regionNumber:n});a&&e.scrollTo(Math.round(a.offsetPx-e.width/2))},center:function(){var t=e.totalBp/2;e.scrollTo(Math.round(t/e.bpPerPx-e.width/2))},showAllRegions:function(){e.zoomTo(e.maxBpPerPx),this.center()},showAllRegionsInAssembly:function(t){var r=(0,p.getSession)(e),n=r.assemblyManager;if(!t){var a=(0,u.default)(new Set(e.displayedRegions.map((function(e){return e.assemblyName}))));if(a.length>1)return void r.notify("Can't perform this with multiple assemblies currently");t=(0,i.default)(a,1)[0]}var o=n.get(t);if(o){var l=o.regions;l&&(this.setDisplayedRegions(l),e.zoomTo(e.maxBpPerPx),this.center())}},setDraggingTrackId:function(t){e.draggingTrackId=t},setScaleFactor:function(t){e.scaleFactor=t}}})).actions((function(e){var t=function(){};return{slide:function(r){var n=(0,p.springAnimate)(e.offsetPx,e.offsetPx+e.width*r,e.scrollTo),a=(0,i.default)(n,2),o=a[0],u=a[1];t(),t=u,o()}}})).actions((function(e){var t=function(){};return{zoom:function(r){if(e.zoomTo(e.bpPerPx),!(r<e.bpPerPx&&e.bpPerPx===e.minBpPerPx||r>e.bpPerPx&&e.bpPerPx===e.maxBpPerPx)){var n=e.bpPerPx/r,a=(0,p.springAnimate)(1,n,e.setScaleFactor,(function(){e.zoomTo(r),e.setScaleFactor(1)})),o=(0,i.default)(a,2),u=o[0],l=o[1];t(),t=l,u()}}}})).views((function(e){return{get canShowCytobands(){return 1===e.displayedRegions.length&&this.anyCytobandsExist},get showCytobands(){return this.canShowCytobands&&e.showCytobandsSetting},get anyCytobandsExist(){var t=(0,p.getSession)(e).assemblyManager;return e.assemblyNames.some((function(e){var r,n;return null===(r=t.get(e))||void 0===r||null===(n=r.cytobands)||void 0===n?void 0:n.length}))},get cytobandOffset(){return this.showCytobands?(0,p.measureText)(e.displayedRegions[0].refName,12)+15:0}}})).views((function(e){return{menuItems:function(){var t,r=e.canShowCytobands,n=e.showCytobands,a=[{label:"Return to import form",onClick:function(){(0,p.getSession)(e).queueDialog((function(t){return[d.ReturnToImportFormDialog,{model:e,handleClose:t}]}))},icon:x.default},{label:"Export SVG",icon:C.default,onClick:function(){(0,p.getSession)(e).queueDialog((function(t){return[A.default,{model:e,handleClose:t}]}))}},{label:"Open track selector",onClick:e.activateTrackSelector,icon:O.TrackSelector},{label:"Horizontally flip",icon:P.default,onClick:e.horizontallyFlip},{type:"divider"},{label:"Show all regions in assembly",icon:E.default,onClick:e.showAllRegionsInAssembly},{label:"Show center line",icon:E.default,type:"checkbox",checked:e.showCenterLine,onClick:e.toggleCenterLine},{label:"Show header",icon:E.default,type:"checkbox",checked:!e.hideHeader,onClick:e.toggleHeader},{label:"Show header overview",icon:E.default,type:"checkbox",checked:!e.hideHeaderOverview,onClick:e.toggleHeaderOverview,disabled:e.hideHeader},{label:"Show no tracks active button",icon:E.default,type:"checkbox",checked:!e.hideNoTracksActive,onClick:e.toggleNoTracksActive},{label:"Track labels",icon:S.default,subMenu:[{label:"Overlapping",icon:E.default,type:"radio",checked:"overlapping"===e.trackLabels,onClick:function(){return e.setTrackLabels("overlapping")}},{label:"Offset",icon:E.default,type:"radio",checked:"offset"===e.trackLabels,onClick:function(){return e.setTrackLabels("offset")}},{label:"Hidden",icon:E.default,type:"radio",checked:"hidden"===e.trackLabels,onClick:function(){return e.setTrackLabels("hidden")}}]}].concat((0,u.default)(r?[{label:n?"Hide ideogram":"Show ideograms",onClick:function(){e.setShowCytobands(!n)}}]:[])),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e.trackTypeActions.entries());try{for(o.s();!(t=o.n()).done;){var l=(0,i.default)(t.value,2),c=l[0],s=l[1];s.length&&(a.push({type:"divider"},{type:"subHeader",label:c}),s.forEach((function(e){a.push(e)})))}}catch(e){o.e(e)}finally{o.f()}return a}}})).views((function(e){var t,r="";return{get staticBlocks(){var n=(0,g.default)(e),a=JSON.stringify(n);return r!==a&&(t=n,r=a),t},get dynamicBlocks(){return(0,m.default)(e)},get roundedDynamicBlocks(){return this.dynamicBlocks.contentBlocks.map((function(e){return B(B({},e),{},{start:Math.floor(e.start),end:Math.ceil(e.end)})}))},get visibleLocStrings(){return F(this.dynamicBlocks.contentBlocks)},get coarseVisibleLocStrings(){return F(e.coarseDynamicBlocks)}}})).actions((function(e){return{clearView:function(){e.setDisplayedRegions([]),e.tracks.clear(),e.scrollTo(0),e.zoomTo(10)},setCoarseDynamicBlocks:function(t){e.coarseDynamicBlocks=t.contentBlocks,e.coarseTotalBp=t.totalBp},afterAttach:function(){var t=this;(0,y.addDisposer)(e,(0,v.autorun)((function(){e.initialized&&t.setCoarseDynamicBlocks(e.dynamicBlocks)}),{delay:150}))}}})).actions((function(e){return{exportSvg:function(){var t=arguments;return(0,o.default)(a.default.mark((function r(){var n,o,i;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,(0,T.renderToSvg)(e,n);case 3:o=r.sent,i=new Blob([o],{type:"image/svg+xml"}),(0,k.saveAs)(i,n.filename||"image.svg");case 6:case"end":return r.stop()}}),r)})))()}}})).views((function(e){return{rubberBandMenuItems:function(){return[{label:"Zoom to region",icon:j.default,onClick:function(){var t=e.leftOffset,r=e.rightOffset;t&&r&&e.moveTo(t,r)}},{label:"Get sequence",icon:M.default,onClick:function(){e.setSequenceDialogOpen(!0)}}]}}}))};var a=n(r(19)),o=n(r(20)),i=n(r(12)),u=n(r(33)),l=n(r(10)),c=r(29),s=r(96),f=r(70),d=r(83),p=r(32),m=n(r(924)),g=n(r(925)),h=r(65),v=r(43),y=r(17),b=n(r(362)),w=n(r(331)),k=r(338),O=r(208),P=n(r(784)),E=n(r(265)),S=n(r(785)),x=n(r(786)),C=n(r(787)),j=n(r(139)),M=n(r(264)),T=r(2176),R=n(r(528)),D=n(r(942)),A=n(r(2180)),I=n(r(943));function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){if(!e.length)return"";var t=e.every((function(t){return t.assemblyName===e[0].assemblyName}));return e.map((function(e){return(0,p.assembleLocString)(B(B({},e),{},{start:Math.round(e.start),end:Math.round(e.end),assemblyName:t?void 0:e.assemblyName}))})).join(" ")}t.HEADER_BAR_HEIGHT=48;t.HEADER_OVERVIEW_HEIGHT=20;t.SCALE_BAR_HEIGHT=17;t.RESIZE_HANDLE_HEIGHT=3;t.INTER_REGION_PADDING_WIDTH=2;t.SPACING=7;function L(e){return"undefined"!=typeof localStorage?localStorage.getItem(e):void 0}t.WIDGET_HEIGHT=32},140:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(16)),u=n(r(15)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var m=function(e){(0,c.default)(r,e);var t=p(r);function r(e){var n;if((0,u.default)(this,r),n=t.call(this,e),(0,d.default)((0,l.default)(n),"AdapterClass",void 0),(0,d.default)((0,l.default)(n),"getAdapterClass",void 0),(0,d.default)((0,l.default)(n),"configSchema",void 0),(0,d.default)((0,l.default)(n),"adapterCapabilities",void 0),(0,d.default)((0,l.default)(n),"adapterMetadata",void 0),"AdapterClass"in e)n.AdapterClass=e.AdapterClass,n.getAdapterClass=(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.AdapterClass);case 1:case"end":return t.stop()}}),t)})));else{if(!("getAdapterClass"in e))throw new Error("no AdapterClass or getAdapterClass is defined for adapter type ".concat(n.name));n.getAdapterClass=e.getAdapterClass}return n.configSchema=e.configSchema,n.adapterCapabilities=e.adapterCapabilities||[],n.adapterMetadata=e.adapterMetadata,n}return(0,i.default)(r)}(n(r(113)).default);t.default=m},141:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseLinearDisplay",{enumerable:!0,get:function(){return E.BaseLinearDisplay}}),Object.defineProperty(t,"BaseLinearDisplayComponent",{enumerable:!0,get:function(){return E.BaseLinearDisplayComponent}}),Object.defineProperty(t,"RefNameAutocomplete",{enumerable:!0,get:function(){return x.RefNameAutocomplete}}),Object.defineProperty(t,"SearchBox",{enumerable:!0,get:function(){return x.SearchBox}}),Object.defineProperty(t,"baseLinearDisplayConfigSchema",{enumerable:!0,get:function(){return E.baseLinearDisplayConfigSchema}}),t.default=void 0,Object.defineProperty(t,"linearBareDisplayConfigSchemaFactory",{enumerable:!0,get:function(){return S.configSchemaFactory}}),Object.defineProperty(t,"linearBasicDisplayConfigSchemaFactory",{enumerable:!0,get:function(){return C.configSchema}}),Object.defineProperty(t,"linearBasicDisplayModelFactory",{enumerable:!0,get:function(){return C.modelFactory}}),Object.defineProperty(t,"renderToSvg",{enumerable:!0,get:function(){return x.renderToSvg}});var o=n(r(19)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(1),g=r(43),h=r(29),v=r(96),y=n(r(162)),b=n(r(205)),w=n(r(276)),k=n(r(114)),O=r(32),P=n(r(781)),E=r(278),S=r(2173),x=r(128),C=r(2194);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var T=function(e){(0,s.default)(n,e);var t=M(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"name","LinearGenomeViewPlugin"),(0,p.default)((0,c.default)(e),"exports",{BaseLinearDisplayComponent:E.BaseLinearDisplayComponent,BaseLinearDisplay:E.BaseLinearDisplay,baseLinearDisplayConfigSchema:E.baseLinearDisplayConfigSchema}),e}return(0,l.default)(n,[{key:"install",value:function(e){e.addTrackType((function(){var t=(0,h.ConfigurationSchema)("FeatureTrack",{},{baseConfiguration:(0,v.createBaseTrackConfig)(e),explicitIdentifier:"trackId"});return new y.default({name:"FeatureTrack",configSchema:t,stateModel:(0,v.createBaseTrackModel)(e,"FeatureTrack",t)})})),e.addTrackType((function(){var t=(0,h.ConfigurationSchema)("BasicTrack",{},{baseConfiguration:(0,v.createBaseTrackConfig)(e),explicitIdentifier:"trackId"});return new y.default({name:"BasicTrack",configSchema:t,stateModel:(0,v.createBaseTrackModel)(e,"BasicTrack",t)})})),e.addDisplayType((function(){var t=(0,S.configSchemaFactory)(e);return new b.default({name:"LinearBareDisplay",configSchema:t,stateModel:(0,S.stateModelFactory)(t),trackType:"BasicTrack",viewType:"LinearGenomeView",ReactComponent:E.BaseLinearDisplayComponent})})),e.addDisplayType((function(){var t=(0,C.configSchema)(e);return new b.default({name:"LinearBasicDisplay",configSchema:t,stateModel:(0,C.modelFactory)(t),trackType:"FeatureTrack",viewType:"LinearGenomeView",ReactComponent:E.BaseLinearDisplayComponent})})),e.addViewType((function(){return new w.default({name:"LinearGenomeView",stateModel:(0,x.stateModelFactory)(e),ReactComponent:(0,m.lazy)((function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(943))}))}))})})),e.addToExtensionPoint("LaunchView-LinearGenomeView",function(){var e=(0,i.default)(o.default.mark((function e(t){var r,n,a,i,u,l,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.session,n=t.assembly,a=t.loc,i=t.tracks,u=void 0===i?[]:i,e.prev=1,l=r.assemblyManager,c=r.addView("LinearGenomeView",{}),e.next=6,(0,g.when)((function(){return!!c.volatileWidth}));case 6:if(n){e.next=8;break}throw new Error("No assembly provided when launching linear genome view");case 8:return e.next=10,l.waitForAssembly(n);case 10:if(e.sent){e.next=13;break}throw new Error('Assembly "'.concat(n,'" not found when launching linear genome view'));case 13:if(c.navToLocString(a,n),s=[],u.forEach((function(e){try{c.showTrack(e)}catch(t){if(!"".concat(t).match("Could not resolve identifier"))throw t;s.push(e)}})),!s.length){e.next=18;break}throw new Error("Could not resolve identifiers: ".concat(s.join(",")));case 18:e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(1),r.notify("".concat(e.t0),"error"),e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"configure",value:function(e){(0,O.isAbstractMenuManager)(e.rootModel)&&e.rootModel.appendToSubMenu(["Add"],{label:"Linear genome view",icon:P.default,onClick:function(e){e.addView("LinearGenomeView",{})}})}}]),n}(k.default);t.default=T},161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultValue=function(e){if(!(0,n.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue},t.getEnumerationValues=function(e){return o(e).map((function(e){return e.value}))},t.getPropertyType=function(e,t){return e.properties[t]},t.getSubType=a,t.getUnionSubTypes=o,t.resolveLateType=function(e){if(!(0,n.isUnionType)(e)&&!(0,n.isArrayType)(e)&&(0,n.isLateType)(e))return e.getSubType();return e};var n=r(17);function a(e){var t;if((0,n.isOptionalType)(e))t=e._subtype||e.type;else{if(!(0,n.isArrayType)(e)&&!(0,n.isMapType)(e)){if("function"==typeof e.getSubType)return e.getSubType();throw new TypeError("unsupported mst type")}t=e._subtype||e._subType||e.subType}if(!t)throw new Error("failed to get subtype");return t}function o(e){if(!(0,n.isUnionType)(e))throw new TypeError("not an MST union type");var t=e._types||e.types||a(e)._types||a(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}},162:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10)),f=n(r(113)),d=r(161);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,a.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"displayTypes",[]),n.stateModel=e.stateModel,n.configSchema=e.configSchema,!n.stateModel)throw new Error("no stateModel defined for track ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for track ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var o=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(o," is not explicitlyTyped"))}return n}return(0,o.default)(r,[{key:"addDisplayType",value:function(e){this.displayTypes.push(e)}}]),r}(f.default);t.default=m},163:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"heading",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"HeadingComponent",void 0),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"stateModel",void 0),n.heading=e.heading,n.HeadingComponent=e.HeadingComponent,n.configSchema=e.configSchema,n.stateModel=e.stateModel,n.ReactComponent=e.ReactComponent,!n.ReactComponent)throw new Error("no ReactComponent defined for widget ".concat(n.name));if(!n.stateModel)throw new Error("no stateModel defined for widget ".concat(n.name));return n}return(0,a.default)(r)}(n(r(113)).default);t.default=d},204:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemEndDecoration=O,t.default=void 0;var o=n(r(36)),i=n(r(45)),u=n(r(10)),l=n(r(12)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),s=r(23),f=n(r(301)),d=n(r(674)),p=n(r(675)),m=n(r(676)),g=n(r(302)),h=r(32),v=["open","onClose","menuItems","onMenuItemClick"];function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=(0,s.makeStyles)({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function O(e){var t,r,n,a=k(),o=e.type;if("checked"in e&&(t=e.checked,r=e.disabled),"subMenu"===o)n=c.default.createElement(f.default,{color:"action"});else if("checkbox"===o)if(t){var i=r?"inherit":"secondary";n=c.default.createElement(d.default,{color:i})}else n=c.default.createElement(p.default,{color:"action"});else if("radio"===o)if(t){var u=r?"inherit":"secondary";n=c.default.createElement(m.default,{color:u})}else n=c.default.createElement(g.default,{color:"action"});return c.default.createElement("div",{className:a.menuItemEndDecoration},n)}var P=c.default.forwardRef((function(e,t){var r=(0,c.useState)(),n=(0,l.default)(r,2),a=n[0],o=n[1],i=(0,c.useState)(),u=(0,l.default)(i,2),f=u[0],d=u[1],p=(0,c.useState)(!1),m=(0,l.default)(p,2),g=m[0],v=m[1],y=(0,c.useState)(),b=(0,l.default)(y,2),E=b[0],S=b[1],x=(0,c.useState)(),C=(0,l.default)(x,2),j=C[0],M=C[1],T=(0,c.useRef)(),R=k(),D=e.menuItems,A=e.onMenuItemClick,I=e.open,_=e.onClose,N=e.anchorEl,B=e.top,F=void 0!==B&&B;(0,c.useEffect)((function(){I||(o(void 0),d(void 0))}),[I]),(0,c.useEffect)((function(){var e,t=I&&Boolean(a);return t&&!g?e=setTimeout((function(){v(!0)}),300):!t&&g&&(e=setTimeout((function(){v(!1)}),300)),function(){clearTimeout(e)}}),[g,I,a]),(0,c.useEffect)((function(){if(N){var e=N.getBoundingClientRect();j&&e.top===j.top&&e.left+e.width===j.left||M({top:e.top,left:e.left+e.width})}else j||M({})}),[j,N]);var L=D.some((function(e){return"icon"in e&&e.icon})),W={};var z=c.default.createElement(c.default.Fragment,null,c.default.createElement(s.MenuList,{autoFocusItem:I&&!g},D.sort((function(e,t){return(t.priority||0)-(e.priority||0)})).map((function(e,t){if("divider"===e.type)return c.default.createElement(s.Divider,{key:"divider-".concat(t),component:"li"});if("subHeader"===e.type)return c.default.createElement(s.ListSubheader,{key:"subHeader-".concat(e.label,"-").concat(t)},e.label);var r=null,n=null;if(e.icon){var a=e.icon;r=c.default.createElement(s.ListItemIcon,null,c.default.createElement(a,null))}"subMenu"in e?n=c.default.createElement(O,{type:"subMenu"}):"checkbox"!==e.type&&"radio"!==e.type||(n=c.default.createElement(O,{type:e.type,checked:e.checked,disabled:e.disabled}));var i,u="onClick"in e?(i=e.onClick,function(e){A(e,i)}):void 0;return c.default.createElement(s.MenuItem,{key:e.label,style:W,selected:t===E,onClick:u,onMouseMove:function(r){r.currentTarget!==document.activeElement&&(r.currentTarget.focus(),S(t)),"subMenu"in e?f!==t&&(o(r.currentTarget),d(t)):(o(void 0),d(void 0))},onKeyDown:function(r){if("ArrowLeft"===r.key||"Escape"===r.key)_&&_(r,"escapeKeyDown");else if("ArrowUp"===r.key)S(function(e,t){return(0,h.findLastIndex)(e.slice(0,t),(function(e){return"divider"!==e.type&&"subHeader"!==e.type&&!e.disabled}))}(D,t));else if("ArrowDown"===r.key){var n=function(e,t){var r=e.slice(t+1).findIndex((function(e){return"divider"!==e.type&&"subHeader"!==e.type&&!e.disabled}));return-1===r?r:t+1+r}(D,t);S(n)}else"subMenu"in e&&("ArrowRight"!==r.key&&"Enter"!==r.key||(o(r.currentTarget),d(t),v(!0)))},disabled:Boolean(e.disabled)},r,c.default.createElement(s.ListItemText,{primary:e.label,secondary:e.subLabel,inset:L&&!e.icon}),c.default.createElement("div",{style:{flexGrow:1,minWidth:10}}),n)}))),D.map((function(e,t){var r=null;return"subMenu"in e&&(r=c.default.createElement(P,{key:e.label,anchorEl:a,open:g&&f===t,onClose:function(){v(!1),o(void 0)},onMenuItemClick:A,menuItems:e.subMenu})),r})));return F?z:c.default.createElement(s.Grow,{in:I,style:{transformOrigin:"0 0 0"},ref:t},c.default.createElement(s.Paper,{elevation:8,ref:T,className:R.paper,style:w({},j)},z))}));var E=function(e){var t=e.open,r=e.onClose,n=e.menuItems,a=e.onMenuItemClick,u=(0,i.default)(e,v);return c.default.createElement(s.Popover,(0,o.default)({transitionDuration:0,open:t,onClose:r,BackdropProps:{invisible:!0}},u),c.default.createElement(P,{open:t,onClose:r,menuItems:n,onMenuItemClick:a,top:!0}))};t.default=E},2043:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JBrowseCircularGenomeView",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"createModel",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"createViewState",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"loadPlugins",{enumerable:!0,get:function(){return u.default}});var a=n(r(2044)),o=n(r(916)),i=n(r(2252)),u=n(r(2253))},2044:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(2045))},2045:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),i=r(14),u=r(17),l=r(29),c=r(83),s=r(23),f=n(r(374)),d=n(r(2063)),p=n(r(2064));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=(0,s.makeStyles)((function(){return{avoidParentStyle:{all:"initial"}}})),h=(0,i.observer)((function(e){var t=e.viewState,r=g(),n=t.session,a=n.view,i=(0,u.getEnv)(n).pluginManager.getViewType(a.type);if(!i)throw new Error("unknown view type ".concat(a.type));var m=i.ReactComponent,h=(0,c.createJBrowseTheme)((0,l.readConfObject)(t.config.configuration,"theme"));return o.default.createElement(s.ThemeProvider,{theme:h},o.default.createElement("div",{className:r.avoidParentStyle},o.default.createElement(f.default,null,o.default.createElement(p.default,{key:"view-".concat(a.id),view:a},o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null,"Loading...")},o.default.createElement(m,{model:a,session:n}))),o.default.createElement(d.default,{session:n}))))}));t.default=h},2046:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=t.description,n=void 0===r?"":r,u=t.model,s=t.type,f=t.defaultValue,m=t.contextVariable,g=void 0===m?[]:m;if(!s)throw new Error("type name required");u||(u=l[s]);if(!u)throw new Error('no builtin config slot type "'.concat(s,"\", and no 'model' param provided"));if(void 0===f)throw new Error("no 'defaultValue' provided");var h="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1),"ConfigSlot"),v=o.types.model(h,{name:o.types.literal(e),description:o.types.literal(n),type:o.types.literal(s),value:o.types.optional(o.types.union(p,u),f)}).volatile((function(){return{contextVariable:g}})).views((function(e){return{get isCallback(){return String(e.value).startsWith("jexl:")}}})).views((function(e){return{get expr(){if(e.isCallback){var t=(0,o.getEnv)(e).pluginManager;return t||"undefined"!=typeof jest||console.warn("no pluginManager detected on config env (if you dynamically instantiate a config, for example in renderProps for your display model, check that you add the env argument)"),(0,i.stringToJexlExpression)(String(e.value),null==t?void 0:t.jexl)}return{evalSync:function(){return e.value}}},get valueJSON(){var t;if(!e.isCallback)return(t=e.value)&&t.toJSON?t.toJSON():'"'.concat(t,'"')}}})).preProcessSnapshot((function(t){return"object"===(0,a.default)(t)&&t.name===e?t:{name:e,description:n,type:s,value:t}})).postProcessSnapshot((function(e){return"object"===(0,a.default)(e.value)?JSON.stringify(e.value)!==JSON.stringify(f)?e.value:void 0:e.value!==f?e.value:void 0})).actions((function(e){return{set:function(t){e.value=t},reset:function(){e.value=f},convertToCallback:function(){e.isCallback||(e.value="jexl:".concat(e.valueJSON||"''"))},convertToValue:function(){if(e.isCallback){try{var t=e.expr.evalSync();if(void 0!==t)return void(e.value=t)}catch(e){}if(e.value=f,e.isCallback){if(!(s in c))throw new Error("no fallbackDefault defined for type ".concat(s));e.value=c[s]}}}}}));d[s]&&(v=v.extend(d[s]));var y=o.types.optional(v,{name:e,type:s,description:n,value:f});return Object.defineProperty(y,"isJBrowseConfigurationSlot",{value:!0}),y};var a=n(r(11)),o=r(17),i=r(514),u=r(70);var l={stringArray:o.types.array(o.types.string),stringArrayMap:o.types.map(o.types.array(o.types.string)),numberMap:o.types.map(o.types.number),boolean:o.types.boolean,color:o.types.refinement("Color",o.types.string,(function(){return!0})),integer:o.types.integer,number:o.types.number,string:o.types.string,text:o.types.string,fileLocation:u.FileLocation,frozen:o.types.frozen()},c={stringArray:[],stringArrayMap:{},numberMap:{},boolean:!0,color:"black",integer:1,number:1,string:"",text:"",fileLocation:{uri:"/path/to/resource.txt",locationType:"UriLocation"},frozen:{}},s=function(e){return{views:{get valueJSON(){return e.value}}}},f=function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}}}},d={fileLocation:f,number:s,integer:s,boolean:s,frozen:f,stringArray:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t){e.value.push(t)},removeAtIndex:function(t){e.value.splice(t,1)},setAtIndex:function(t,r){e.value[t]=r}}}},stringArrayMap:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t,r){e.value.set(t,r)},remove:function(t){e.value.delete(t)},addToKey:function(t,r){var n=e.value.get(t);if(!n)throw new Error("".concat(t," not found"));n.push(r)},removeAtKeyIndex:function(t,r){var n=e.value.get(t);if(!n)throw new Error("".concat(t," not found"));n.splice(r,1)},setAtKeyIndex:function(t,r,n){var a=e.value.get(t);if(!a)throw new Error("".concat(t," not found"));a[r]=n}}}},numberMap:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t,r){e.value.set(t,r)},remove:function(t){e.value.delete(t)}}}}},p=o.types.refinement("JexlString",o.types.string,(function(e){return e.startsWith("jexl:")}))},2047:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createJBrowseDefaultOverrides=p,t.createJBrowseDefaultProps=d,t.createJBrowseTheme=function(e){var t,r;if(!e)return(0,i.createTheme)(m);null!==(t=e.palette)&&void 0!==t&&t.tertiary&&(e=c(c({},e),{},{palette:c(c({},e.palette),{},{tertiary:s.palette.augmentColor(e.palette.tertiary)})}));null!==(r=e.palette)&&void 0!==r&&r.quaternary&&(e=c(c({},e),{},{palette:c(c({},e.palette),{},{quaternary:s.palette.augmentColor(e.palette.quaternary)})}));return e=c(c({},e),{},{props:(0,u.default)({MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}},e.props||{}),overrides:(0,u.default)(p(e.palette),e.overrides||{})}),(0,i.createTheme)((0,u.default)(m,e))},t.jbrowseDefaultPalette=t.jbrowseBaseTheme=void 0;var a=n(r(10)),o=r(210),i=r(34),u=(r(616),n(r(296)));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=(0,i.createTheme)(),f={primary:{main:"#0D233F"},secondary:{main:"#721E63"},tertiary:s.palette.augmentColor({main:"#135560"}),quaternary:s.palette.augmentColor({main:"#FFB11D"}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:s.palette.augmentColor(o.green),C:s.palette.augmentColor(o.blue),G:s.palette.augmentColor(o.amber),T:s.palette.augmentColor(o.red)}};function d(){return{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.default)(f,e);return{MuiIconButton:{colorSecondary:{color:t.tertiary.main}},MuiButton:{textSecondary:{color:t.tertiary.main}},MuiFab:{secondary:{backgroundColor:t.quaternary.main}},MuiLink:{root:{color:t.tertiary.main}},MuiAccordion:{root:{margin:0,"&$expanded":{margin:0}}},MuiAccordionSummary:{root:{backgroundColor:t.tertiary.main+" !important",width:"100%","&$expanded":{minHeight:0,color:t.tertiary.contrastText,backgroundColor:t.tertiary.main},minHeight:0},content:{"&$expanded":{margin:"8px 8px"},margin:"8px 8px",color:t.tertiary.contrastText}},MuiMenuItem:{root:{paddingTop:3,paddingBottom:3}},MuiListItemIcon:{root:{minWidth:32}},MuiListItemText:{inset:{paddingLeft:32}}}}t.jbrowseDefaultPalette=f;var m={palette:f,typography:{fontSize:12},spacing:4,props:{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}},overrides:p()};t.jbrowseBaseTheme=m},2048:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=n(r(664)),c=r(14),s=r(17),f=r(29),d=n(r(2049)),p=n(r(2051)),m=n(r(516)),g=r(907),h=n(r(2054)),v=n(r(2055));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}var b=(0,u.makeStyles)((function(e){return{"@global":{html:{"font-family":"Roboto"},"*":{"scrollbar-width":"auto","scrollbar-color":"rgba(0,0,0,.5) rgba(128,128,128)"},"*::-webkit-scrollbar":{"-webkit-appearance":"none",width:"12px"},"*::-webkit-scrollbar-thumb":{"background-color":"rgba(0,0,0,.5)","-webkit-box-shadow":"0 0 1px rgba(255,255,255,.5)"}},root:{display:"grid",height:"100vh",width:"100%"},fabLeft:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),left:e.spacing(2)},fabRight:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},menuBarAndComponents:{gridColumn:"main",display:"grid",gridTemplateRows:"[menubar] min-content [components] auto",height:"100vh"},menuBar:{gridRow:"menubar"},components:{overflowY:"auto",gridRow:"components"},appBar:{flexGrow:1},grow:{flexGrow:1},inputBase:{color:e.palette.primary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.primary.light}},inputFocused:{borderColor:e.palette.secondary.main,backgroundColor:e.palette.primary.light},selectPaper:{padding:e.spacing(4)}}})),w=(0,c.observer)((function(e){var t=e.session.configuration,r=(0,f.readConfObject)(t,"logoPath");return null!=r&&r.uri?i.default.createElement("img",{src:r.uri,alt:"Custom logo"}):i.default.createElement(g.LogoFull,{variant:"white"})})),k=(0,c.observer)((function(e){var t,r,n=e.session,a=e.HeaderButtons,c=void 0===a?i.default.createElement("div",null):a,f=b(),g=(0,s.getEnv)(n).pluginManager,y=g.getElementTypeRecord("view").all(),k=(0,i.useState)(null===(t=y[0])||void 0===t?void 0:t.name),O=(0,o.default)(k,2),P=O[0],E=O[1],S=n.visibleWidget,x=n.drawerWidth,C=n.minimized,j=n.activeWidgets,M=n.savedSessionNames,T=n.name,R=n.menus,D=n.views,A=n.drawerPosition;var I,_=S&&!C;return"right"===A?I=["[main] 1fr",_?"[drawer] ".concat(x,"px"):void 0]:"left"===A&&(I=[_?"[drawer] ".concat(x,"px"):void 0,"[main] 1fr"]),i.default.createElement("div",{className:f.root,style:{gridTemplateColumns:null===(r=I)||void 0===r?void 0:r.filter((function(e){return!!e})).join(" ")}},_&&"left"===A?i.default.createElement(d.default,{session:n}):null,n.DialogComponent?i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(n.DialogComponent,n.DialogProps)):null,i.default.createElement("div",{className:f.menuBarAndComponents},i.default.createElement("div",{className:f.menuBar},i.default.createElement(u.AppBar,{className:f.appBar,position:"static"},i.default.createElement(u.Toolbar,null,R.map((function(e){return i.default.createElement(p.default,{key:e.label,menuTitle:e.label,menuItems:e.menuItems,session:n})})),i.default.createElement("div",{className:f.grow}),i.default.createElement(u.Tooltip,{title:"Rename Session",arrow:!0},i.default.createElement(m.default,{value:T,setValue:function(e){null!=M&&M.includes(e)?n.notify('Cannot rename session to "'.concat(e,'", a saved session with that name already exists'),"warning"):n.renameCurrentSession(e)},variant:"body1",classes:{inputBase:f.inputBase,inputRoot:f.inputRoot,inputFocused:f.inputFocused}})),c,i.default.createElement("div",{className:f.grow}),i.default.createElement("div",{style:{width:150,maxHeight:48}},i.default.createElement(w,{session:n}))))),i.default.createElement("div",{className:f.components},D.length?D.map((function(e){var t=g.getViewType(e.type);if(!t)throw new Error("unknown view type ".concat(e.type));var r=t.ReactComponent;return i.default.createElement(v.default,{key:"view-".concat(e.id),view:e,onClose:function(){return n.removeView(e)}},i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(r,{model:e,session:n,getTrackType:g.getTrackType})))})):i.default.createElement(u.Paper,{className:f.selectPaper},i.default.createElement(u.Typography,null,"Select a view to launch"),i.default.createElement(u.Select,{value:P,onChange:function(e){return E(e.target.value)}},y.map((function(e){var t=e.name;return i.default.createElement(u.MenuItem,{key:t,value:t},t)}))),i.default.createElement(u.Button,{onClick:function(){n.addView(P,{})},variant:"contained",color:"primary"},"Launch view")),i.default.createElement("div",{style:{height:300}}))),j.size>0&&C?i.default.createElement(u.Tooltip,{title:"Open drawer widget"},i.default.createElement(u.Fab,{className:"right"===A?f.fabRight:f.fabLeft,color:"primary","data-testid":"drawer-maximize",onClick:function(){return n.showWidgetDrawer()}},i.default.createElement(l.default,null))):null,_&&"right"===A?i.default.createElement(d.default,{session:n}):null,i.default.createElement(h.default,{session:n}))}));t.default=k},2049:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=r(14),c=r(17),s=n(r(108)),f=n(r(41)),d=n(r(672)),p=n(r(300)),m=n(r(2050));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,u.makeStyles)((function(e){return{drawerActions:{float:"right","&:hover":{backgroundColor:(0,u.alpha)(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},drawerToolbar:{paddingLeft:e.spacing(2)},spacer:{flexGrow:1},drawerSelect:{color:e.palette.secondary.contrastText},drawerLoading:{margin:e.spacing(2)},dropDownIcon:{color:e.palette.secondary.contrastText},header:{background:e.palette.secondary.main}}})),v=(0,l.observer)((function(e){var t=e.session,r=e.setToolbarHeight,n=(0,c.getEnv)(t).pluginManager,a=t.visibleWidget,l=t.activeWidgets,m=t.drawerPosition,g=h(),v=i.default.useState(null),y=(0,o.default)(v,2),b=y[0],w=y[1];return i.default.createElement(u.AppBar,{position:"sticky",className:g.header,ref:function(e){return r((null==e?void 0:e.getBoundingClientRect().height)||0)}},i.default.createElement(u.Toolbar,{disableGutters:!0,className:g.drawerToolbar},i.default.createElement(u.Select,{value:null==a?void 0:a.id,"data-testid":"widget-drawer-selects",className:g.drawerSelect,classes:{icon:g.dropDownIcon},renderValue:function(e){var r=t.activeWidgets.get(e);if(!r)return i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},"Unknown widget");var a=n.getWidgetType(r.type),o=a.HeadingComponent,l=a.heading;return o?i.default.createElement(o,{model:r}):i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},l)},onChange:function(e){var r=t.activeWidgets.get(e.target.value);r||t.notify("Widget not found "+e.target.value,"warning"),t.showWidget(r)}},Array.from(l.values()).map((function(e){var r=n.getWidgetType(e.type),a=r.HeadingComponent,o=r.heading;return i.default.createElement(u.MenuItem,{"data-testid":"widget-drawer-selects-item-".concat(e.type),key:e.id,value:e.id},a?i.default.createElement(a,{model:e}):i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},o),i.default.createElement(u.ListItemSecondaryAction,null,i.default.createElement(u.IconButton,{"data-testid":"".concat(e.type,"-drawer-delete"),color:"inherit","aria-label":"Delete",onClick:function(){t.hideWidget(e)}},i.default.createElement(s.default,null))))}))),i.default.createElement("div",{className:g.spacer}),i.default.createElement("div",null,i.default.createElement(u.IconButton,{"data-testid":"drawer-close",color:"inherit",onClick:function(e){return w(e.currentTarget)}},i.default.createElement(p.default,null)),i.default.createElement(u.Tooltip,{title:"Minimize drawer"},i.default.createElement(u.IconButton,{"data-testid":"drawer-minimize",color:"inherit",onClick:function(){t.notify("Drawer minimized, click button on ".concat(m," side of screen to re-open"),"info"),t.minimizeWidgetDrawer()}},i.default.createElement(d.default,null))),i.default.createElement(u.Tooltip,{title:"Close drawer"},i.default.createElement(u.IconButton,{"data-testid":"drawer-close",color:"inherit",onClick:function(){t.hideWidget(a)}},i.default.createElement(f.default,null))))),i.default.createElement(u.Menu,{anchorEl:b,open:Boolean(b),onClose:function(){return w(null)}},["left","right"].map((function(e){return i.default.createElement(u.MenuItem,{key:e,selected:"option"===m,onClick:function(){t.setDrawerPosition(e),w(null)}},e)}))))})),y=(0,l.observer)((function(e){var t=e.session,r=t.visibleWidget,n=(0,c.getEnv)(t).pluginManager,a=r?n.getWidgetType(r.type).ReactComponent:null,u=(0,i.useState)(0),l=(0,o.default)(u,2),s=l[0],f=l[1];return i.default.createElement(m.default,{session:t},i.default.createElement(v,{session:t,setToolbarHeight:f}),i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(a,{model:r,session:t,toolbarHeight:s})))}));t.default=y},205:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10)),f=n(r(113)),d=r(161);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"trackType",void 0),(0,s.default)((0,i.default)(n),"viewType",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,n.ReactComponent=e.ReactComponent,n.trackType=e.trackType,n.viewType=e.viewType,!n.stateModel)throw new Error("no stateModel defined for display ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for display ".concat(n.name));if(!n.ReactComponent)throw new Error("no ReactComponent provided for display ".concat(n.name));if(!n.trackType)throw new Error("no trackType provided for display ".concat(n.name));if(!n.viewType)throw new Error("no viewType provided for display ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var a=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(a," is not explicitlyTyped"))}return n}return(0,a.default)(r)}(f.default);t.default=m},2050:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=n(r(55)),i=r(34),u=r(14),l=n(r(908)),c=(0,i.makeStyles)((function(e){return{paper:{overflowY:"auto",height:"100%",zIndex:e.zIndex.drawer,outline:"none",background:e.palette.background.default},resizeHandle:{width:4,position:"fixed",top:0,zIndex:e.zIndex.drawer+1}}}));var s=(0,u.observer)((function(e){var t=e.children,r=e.session,n=r.drawerPosition,i=r.drawerWidth,u=c();return a.default.createElement(o.default,{className:u.paper,elevation:16,square:!0},"right"===n?a.default.createElement(l.default,{onDrag:r.resizeDrawer,className:u.resizeHandle,vertical:!0}):null,t,"left"===n?a.default.createElement(l.default,{onDrag:r.resizeDrawer,className:u.resizeHandle,style:{left:i},vertical:!0}):null)}));t.default=s},2051:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=r(34),c=n(r(173)),s=r(14),f=n(r(0)),d=n(r(204));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var m=(0,l.makeStyles)((function(e){return{root:{display:"flex"},buttonRoot:{"&:hover":{backgroundColor:(0,l.alpha)(e.palette.primary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}));function g(e){var t=e.menuTitle,r=e.session,n=e.menuItems,a=(0,i.useState)(!1),l=(0,o.default)(a,2),s=l[0],f=l[1],p=(0,i.useRef)(null),g=m();function h(){f(!1)}return i.default.createElement("div",{className:g.root},i.default.createElement(u.Button,{ref:p,onClick:function(){f(!s)},color:"inherit","data-testid":"dropDownMenuButton",classes:{root:g.buttonRoot}},t,i.default.createElement(c.default,null)),i.default.createElement(d.default,{anchorEl:p.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},onMenuItemClick:function(e,t){t(r),h()},open:s,onClose:h,menuItems:n}))}g.propTypes={menuTitle:f.default.string.isRequired,menuItems:s.PropTypes.arrayOrObservableArray.isRequired,session:s.PropTypes.objectOrObservableObject.isRequired};var h=(0,s.observer)(g);t.default=h},2052:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2053:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.when=l,t.whenPresent=function(e){return c.apply(this,arguments)};var a=n(r(19)),o=n(r(20)),i=r(43),u=r(909);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timeout,n=t.signal,a=t.name;return new Promise((function(t,o){var l,c=!1,s=(0,i.when)(e),f=function(){};r&&(l=setTimeout((function(){c||(c=!0,s.cancel(),o(new Error("timed out waiting for ".concat(a||"whenPresent"))))}),r),f=function(){return l&&clearTimeout(l)}),n&&n.addEventListener("abort",(function(){c||(c=!0,s.cancel(),f(),o((0,u.makeAbortError)()))})),s.then((function(){c||(c=!0,f(),t(!0))})).catch((function(e){c||(c=!0,f(),o(e))}))}))}function c(){return c=(0,o.default)(a.default.mark((function e(t){var r,n=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,l((function(){var e=t();return null!=e}),r);case 3:return e.abrupt("return",t());case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},2054:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=n(r(41)),c=n(r(235));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,r(14).observer)((function(e){var t=e.session,r=(0,i.useState)(!1),n=(0,o.default)(r,2),a=n[0],s=n[1],f=(0,i.useState)(),d=(0,o.default)(f,2),p=d[0],m=d[1],g=t.popSnackbarMessage,h=t.snackbarMessages,v=h.length?h[h.length-1]:null;(0,i.useEffect)((function(){var e;return p?v?p[0]!==v[0]&&(s(!1),e=setTimeout((function(){m(v),s(!0)}),100)):m(void 0):v&&(m(v),s(!0)),function(){clearTimeout(e)}}),[v,p]);var y=function(e,t){"clickaway"!==t&&(g(),s(!1))},b=p||[],w=(0,o.default)(b,3),k=w[0],O=w[1],P=w[2];return i.default.createElement(u.Snackbar,{open:a&&!!k,onClose:y},i.default.createElement(c.default,{onClose:y,action:P?i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Button,{color:"inherit",onClick:function(e){P.onClick(),y()}},P.name),i.default.createElement(u.IconButton,{"aria-label":"close",color:"inherit",onClick:y},i.default.createElement(l.default,null))):null,severity:O||"warning"},k))}));t.default=f},2055:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(10)),i=n(r(36)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(23),s=r(14),f=r(17),d=n(r(321)),p=n(r(41)),m=n(r(182)),g=n(r(516)),h=n(r(204));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=(0,c.makeStyles)((function(e){return{viewContainer:{overflow:"hidden",background:e.palette.secondary.main,margin:e.spacing(.5)},icon:{color:e.palette.secondary.contrastText},grow:{flexGrow:1},iconRoot:{"&:hover":{backgroundColor:(0,c.alpha)(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},input:{paddingBottom:0,paddingTop:2},inputBase:{color:e.palette.secondary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.secondary.light}},inputFocused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.secondary.light}}})),k=(0,s.observer)((function(e){var t=e.model,r=e.IconButtonProps,n=e.IconProps,a=(0,l.useState)(),o=(0,u.default)(a,2),s=o[0],f=o[1],d=t.menuItems,p="function"==typeof d?d():d;return null!=p&&p.length?l.default.createElement(l.default.Fragment,null,l.default.createElement(c.IconButton,(0,i.default)({},r,{"aria-label":"more","aria-controls":"view-menu","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},"data-testid":"view_menu_icon"}),l.default.createElement(m.default,n)),l.default.createElement(h.default,{anchorEl:s,open:Boolean(s),onMenuItemClick:function(e,t){t(),f(void 0)},onClose:function(){f(void 0)},menuItems:t.menuItems()})):null})),O=(0,s.observer)((function(e){var t=e.view,r=e.onClose,n=e.style,a=e.children,o=w(),i=(0,c.useTheme)().spacing(1),s=(0,d.default)(),m=(0,u.default)(s,2),h=m[0],v=m[1].width;(0,l.useEffect)((function(){v&&(0,f.isAlive)(t)&&t.setWidth(v-2*i)}),[i,t,v]);var y=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e,t;null===(e=y.current)||void 0===e||null===(t=e.scrollIntoView)||void 0===t||t.call(e,{block:"center"})}),[]),l.default.createElement(c.Paper,{ref:h,elevation:12,className:o.viewContainer,style:b(b({},n),{},{padding:"0px ".concat(i,"px ").concat(i,"px")})},l.default.createElement("div",{ref:y,style:{display:"flex"}},l.default.createElement(k,{model:t,IconButtonProps:{classes:{root:o.iconRoot},edge:"start"},IconProps:{className:o.icon}}),l.default.createElement("div",{className:o.grow}),l.default.createElement(c.Tooltip,{title:"Rename view",arrow:!0},l.default.createElement(g.default,{value:t.displayName||(t.assemblyNames?t.assemblyNames.join(","):"Untitled view"),setValue:function(e){t.setDisplayName(e)},variant:"body2",classes:{input:o.input,inputBase:o.inputBase,inputRoot:o.inputRoot,inputFocused:o.inputFocused}})),l.default.createElement("div",{className:o.grow}),l.default.createElement(c.IconButton,{"data-testid":"close_view",classes:{root:o.iconRoot},edge:"end",onClick:r},l.default.createElement(p.default,{className:o.icon}))),l.default.createElement(c.Paper,null,a))}));t.default=O},2056:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(34),u=r(23),l=n(r(41)),c=(0,i.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));var s=(0,o.observer)((function(e){var t=e.model,r=e.handleClose,n=c();return a.default.createElement(u.Dialog,{maxWidth:"xl",open:!0,onClose:r},a.default.createElement(u.DialogTitle,null,"Reference sequence",r?a.default.createElement(u.IconButton,{className:n.closeButton,onClick:function(){return r()}},a.default.createElement(l.default,null)):null),a.default.createElement(u.Divider,null),a.default.createElement(u.DialogContent,null,a.default.createElement(u.Typography,null,"Are you sure you want to return to the import form? This will lose your current view")),a.default.createElement(u.DialogActions,null,a.default.createElement(u.Button,{onClick:function(){t.clearView(),r()},variant:"contained",color:"primary",autoFocus:!0},"OK"),a.default.createElement(u.Button,{onClick:function(){return r()},color:"secondary",variant:"contained"},"Cancel")))}));t.default=s},2057:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(33)),i=n(r(36)),u=n(r(10)),l=n(r(12)),c=n(r(45)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(23),d=r(209),p=r(14),m=r(127),g=n(r(173)),h=n(r(2058)),v=n(r(2059)),y=["title","children"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=e.title,r=e.children,n=(0,c.default)(e,y);return s.default.createElement(f.Tooltip,{title:t||""},s.default.createElement(d.ToggleButton,n,r))}function P(e,t){return"string"==typeof e&&e.length>t?"".concat(e.substring(0,t),"…"):e}var E=(0,p.observer)((function(e){var t=e.location,r=e.name,n=e.description,a=e.rootModel,u=e.setLocation,c=!t||(0,m.isUriLocation)(t)?"url":"file",p=(0,s.useState)(t&&"internetAccountId"in t&&t.internetAccountId?t.internetAccountId:c),y=(0,l.default)(p,2),b=y[0],w=y[1],E=(0,m.isAppRootModel)(a)?a.internetAccounts.slice():[],S=(0,s.useState)(E.slice(0,2)),x=(0,l.default)(S,2),C=x[0],j=x[1],M=(0,s.useState)(E.slice(2)),T=(0,l.default)(M,2),R=T[0],D=T[1],A=(0,s.useState)(null),I=(0,l.default)(A,2),_=I[0],N=I[1],B=E.find((function(e){return e.internetAccountId===b})),F=function(e){u(k(k({},e),{},{internetAccountId:B?B.internetAccountId:void 0}))};t&&B&&(0,m.isUriLocation)(t)&&t.internetAccountId!==B.internetAccountId&&F(t);var L=s.default.createElement(v.default,(0,i.default)({},e,{setLocation:F,label:null==B?void 0:B.selectorLabel}));if("file"===b&&(L=s.default.createElement(h.default,e)),null!=B&&B.SelectorComponent){var W=B.SelectorComponent;L=s.default.createElement(W,(0,i.default)({},e,{setLocation:F}))}return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Box,{display:"flex"},s.default.createElement(f.InputLabel,{shrink:!0},r)),s.default.createElement(f.Box,{display:"flex",flexDirection:"row"},s.default.createElement(f.Box,null,s.default.createElement(d.ToggleButtonGroup,{value:b,exclusive:!0,onChange:function(e,r){r&&w(r),(0,m.isUriLocation)(t)&&F(t)},"aria-label":"file, url, or account picker"},new URLSearchParams(window.location.search).get("adminKey")?null:s.default.createElement(d.ToggleButton,{value:"file","aria-label":"local file"},"File"),s.default.createElement(d.ToggleButton,{value:"url","aria-label":"url"},"URL"),C.map((function(e){var t=e.internetAccountId,r=e.toggleContents,n=e.name;return s.default.createElement(O,{key:t,value:t,"aria-label":n,title:n},"string"==typeof r?P(r,5):r||P(n,5))})),R.length?s.default.createElement(d.ToggleButton,{onClick:function(e){return N(e.target)},selected:!1},"More",s.default.createElement(g.default,null)):null),s.default.createElement(f.Menu,{open:Boolean(_),anchorEl:_,onClose:function(){return N(null)},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},null==R?void 0:R.map((function(e,t){return s.default.createElement(f.MenuItem,{key:e.internetAccountId,value:e.internetAccountId,onClick:function(){var r=C[C.length-1];j([].concat((0,o.default)(C.slice(0,C.length-1)),[e])),D([r].concat((0,o.default)(R.slice(0,t)),(0,o.default)(R.slice(t+1)))),w(e.internetAccountId),N(null)}},e.name)}))))),L,s.default.createElement(f.FormHelperText,null,n))}));t.default=E},2058:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23),i=r(32),u=r(65);function l(e){return"blobId"in e}var c=(0,o.makeStyles)((function(e){return{filename:{marginLeft:e.spacing(1)}}}));var s=function(e){var t=c(),r=e.location,n=e.setLocation,s=r&&(l(r)&&r.name||function(e){return"localPath"in e}(r)&&r.localPath),f=r&&l(r)&&!(0,u.getBlob)(r.blobId);return a.default.createElement(o.Box,{display:"flex",flexDirection:"row",alignItems:"center"},a.default.createElement(o.Box,null,a.default.createElement(o.FormControl,{fullWidth:!0},a.default.createElement(o.Button,{variant:"outlined",component:"label"},"Choose File",a.default.createElement("input",{type:"file",hidden:!0,onChange:function(e){var t=e.target,r=t&&t.files&&t.files[0];r&&(i.isElectron?n({localPath:r.path,locationType:"LocalPathLocation"}):n((0,u.storeBlobLocation)({blob:r})))}})))),a.default.createElement(o.Box,null,a.default.createElement(o.Typography,{component:"span",className:t.filename,color:s?"initial":"textSecondary"},s||"No file chosen"),f?a.default.createElement(o.Typography,{color:"error"},"(need to reload)"):null))};t.default=s},2059:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23),i=r(14),u=r(127);var l=(0,i.observer)((function(e){var t=e.location,r=e.setLocation,n=e.label;return a.default.createElement(a.default.Fragment,null,a.default.createElement(o.TextField,{fullWidth:!0,variant:"outlined",inputProps:{"data-testid":"urlInput"},defaultValue:t&&(0,u.isUriLocation)(t)?t.uri:"",label:n||"Enter URL",onChange:function(e){r({uri:e.target.value.trim(),locationType:"UriLocation"})}}))}));t.default=l},206:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.InterRegionPaddingBlock=t.ElidedBlock=t.ContentBlock=t.BlockSet=t.BaseBlock=void 0;var a=n(r(30)),o=n(r(25)),i=n(r(26)),u=n(r(24)),l=n(r(10)),c=n(r(15)),s=n(r(16));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,c.default)(this,e),this.blocks=t}return(0,s.default)(e,[{key:"push",value:function(e){if(e instanceof v&&this.blocks.length){var t=this.blocks[this.blocks.length-1];if(t instanceof v)return void t.push(e)}this.blocks.push(e)}},{key:"getBlocks",value:function(){return this.blocks}},{key:"getRegions",value:function(){return this.blocks.map((function(e){return e.toRegion()}))}},{key:"map",value:function(e,t){return this.blocks.map(e,t)}},{key:"forEach",value:function(e,t){return this.blocks.forEach(e,t)}},{key:"length",get:function(){return this.blocks.length}},{key:"totalWidthPx",get:function(){return this.blocks.length?this.blocks.map((function(e){return e.widthPx})).reduce((function(e,t){return e+t})):0}},{key:"totalWidthPxWithoutBorders",get:function(){return this.blocks.length?this.blocks.filter((function(e){return"boundary"!==e.variant})).map((function(e){return e.widthPx})).reduce((function(e,t){return e+t})):0}},{key:"offsetPx",get:function(){return this.blocks.length?this.blocks[0].offsetPx:0}},{key:"contentBlocks",get:function(){return this.blocks.filter((function(e){return e instanceof h}))}},{key:"totalBp",get:function(){return this.contentBlocks.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)}}]),e}();t.BlockSet=m;var g=function(){function e(t){(0,c.default)(this,e),(0,l.default)(this,"regionNumber",void 0),(0,l.default)(this,"reversed",void 0),(0,l.default)(this,"refName",void 0),(0,l.default)(this,"start",void 0),(0,l.default)(this,"end",void 0),(0,l.default)(this,"assemblyName",void 0),(0,l.default)(this,"key",void 0),(0,l.default)(this,"offsetPx",void 0),(0,l.default)(this,"widthPx",0),(0,l.default)(this,"variant",void 0),(0,l.default)(this,"isLeftEndOfDisplayedRegion",void 0),Object.assign(this,t),this.assemblyName=t.assemblyName,this.refName=t.refName,this.start=t.start,this.end=t.end,this.key=t.key,this.offsetPx=t.offsetPx}return(0,s.default)(e,[{key:"renameReference",value:function(e){return this.refName&&e!==this.refName?new this.constructor(p(p({},this),{},{refName:e})):this}},{key:"toRegion",value:function(){return{refName:this.refName,start:this.start,end:this.end,assemblyName:this.assemblyName,reversed:this.reversed}}}]),e}();t.BaseBlock=g;var h=function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r)}(g);t.ContentBlock=h;var v=function(e){(0,o.default)(r,e);var t=f(r);function r(e){var n;return(0,c.default)(this,r),n=t.call(this,e),(0,l.default)((0,a.default)(n),"widthPx",void 0),(0,l.default)((0,a.default)(n),"elidedBlockCount",0),n.widthPx=e.widthPx,n}return(0,s.default)(r,[{key:"push",value:function(e){this.elidedBlockCount+=1,e&&(this.refName="",this.start=0,this.end=0,this.widthPx+=e.widthPx)}}]),r}(g);t.ElidedBlock=v;var y=function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r)}(g);t.InterRegionPaddingBlock=y},2060:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(10)),i=n(r(0)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(515);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){var t=e.width,r=e.height,n=e.highResolutionScaling,a=e.style,o=e.imageData,i=e.blockKey,c=e.showSoftClip,s=(0,u.useRef)(null);(0,u.useEffect)((function(){if(o){var e=s.current;if(e){var t=e.getContext("2d");t&&(0,l.drawImageOntoCanvasContext)(o,t)}}}),[o]);var d=i?"_"+i:"",p="prerendered_canvas".concat(c?"_softclipped":"").concat(d);return u.default.createElement("canvas",{"data-testid":p,ref:s,width:t*n,height:r*n,style:f({width:t,height:r},a)})}d.propTypes={height:i.default.number.isRequired,width:i.default.number.isRequired,highResolutionScaling:i.default.number,style:i.default.objectOf(i.default.any),imageData:i.default.any},d.defaultProps={imageData:void 0,highResolutionScaling:1,style:{}};var p=d;t.default=p},2061:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=r(14),c=r(29);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,u.makeStyles)({hoverLabel:{border:"1px solid black",position:"absolute",background:"#fffa",pointerEvents:"none",zIndex:1e4}}),d=(0,l.observer)((function(e){var t=e.offsetX,r=e.offsetY,n=e.configuration,a=e.feature,u=e.timeout,l=void 0===u?300:u,s=f(),d=(0,i.useState)(!1),p=(0,o.default)(d,2),m=p[0],g=p[1];if((0,i.useEffect)((function(){var e=setTimeout((function(){return g(!0)}),l);return function(){return clearTimeout(e)}})),a&&m){var h=(0,c.readConfObject)(n,"mouseover",{feature:a});return i.default.createElement("div",{className:s.hoverLabel,style:{left:t,top:r}},h)}return null}));t.default=d},2062:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=n(r(71)),u=n(r(101)),l=n(r(153)),c=n(r(122)),s=n(r(121)),f=n(r(0)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),p=n(r(913));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=function(e){var t=e.onFactoryReset,r=e.resetButtonText,n=(0,d.useState)(!1),a=(0,o.default)(n,2),u=a[0],l=a[1];return d.default.createElement(d.default.Fragment,null,d.default.createElement(i.default,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:function(){return l(!0)}},r),d.default.createElement(p.default,{onClose:function(){return l(!1)},open:u,onFactoryReset:t}))};g.propTypes={onFactoryReset:f.default.func.isRequired,resetButtonText:f.default.string.isRequired};var h=function(e){var t=e.componentStack,r=e.error,n=e.onFactoryReset,a=e.resetButtonText;return d.default.createElement(u.default,{open:!0},d.default.createElement(s.default,{style:{backgroundColor:"#e88"}},"Fatal error"),d.default.createElement(c.default,null,d.default.createElement("pre",null,r.toString(),t)),d.default.createElement(l.default,null,d.default.createElement(i.default,{color:"secondary",variant:"contained",onClick:function(){return window.location.reload()}},"Refresh"),d.default.createElement(g,{onFactoryReset:n,resetButtonText:a})))};h.propTypes={componentStack:f.default.string,error:f.default.shape({}),onFactoryReset:f.default.func.isRequired,resetButtonText:f.default.string},h.defaultProps={error:{message:"No error message provided"},componentStack:"",resetButtonText:"Factory Reset"};var v=h;t.default=v},2063:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),i=r(23),u=r(14),l=r(17),c=n(r(374));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,i.makeStyles)({paper:{overflow:"auto"}}),d=(0,u.observer)((function(e){var t=e.session,r=t.visibleWidget;if(!r)return o.default.createElement(i.AppBar,{position:"relative"},o.default.createElement(i.Toolbar,null));var n=(0,l.getEnv)(t).pluginManager.getWidgetType(r.type),a=n.ReactComponent,u=n.HeadingComponent,s=n.heading;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.AppBar,{position:"static"},o.default.createElement(i.Toolbar,null,u?o.default.createElement(u,{model:r}):o.default.createElement(i.Typography,{variant:"h6"},s))),r&&a?o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null,"Loading...")},o.default.createElement(c.default,null,o.default.createElement(a,{model:r,session:t,overrideDimensions:{height:5*window.innerHeight/8,width:800}}))):null)})),p=(0,u.observer)((function(e){var t=e.session,r=f(),n=t.visibleWidget,a=t.hideAllWidgets;return o.default.createElement(i.Dialog,{open:Boolean(n),onClose:a,maxWidth:"xl"},o.default.createElement(i.Paper,{className:r.paper},o.default.createElement(d,{session:t})))}));t.default=p},2064:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36)),i=n(r(12)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(23),c=n(r(182)),s=r(14),f=r(17),d=n(r(321)),p=r(83),m=r(32);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,l.makeStyles)((function(e){return{viewContainer:{overflow:"hidden",background:e.palette.secondary.main,margin:e.spacing(1)},icon:{color:e.palette.secondary.contrastText},displayName:{marginTop:2,color:e.palette.secondary.contrastText},grow:{flexGrow:1},iconRoot:{"&:hover":{backgroundColor:(0,l.alpha)(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}})),v=(0,s.observer)((function(e){var t,r=e.model,n=e.IconButtonProps,a=e.IconProps,s=(0,u.useState)(),f=(0,i.default)(s,2),d=f[0],m=f[1];return null!==(t=r.menuItems())&&void 0!==t&&t.length?u.default.createElement(u.default.Fragment,null,u.default.createElement(l.IconButton,(0,o.default)({},n,{"aria-label":"more","aria-controls":"view-menu","aria-haspopup":"true",onClick:function(e){return m(e.currentTarget)},"data-testid":"view_menu_icon"}),u.default.createElement(c.default,a)),u.default.createElement(p.Menu,{anchorEl:d,open:Boolean(d),onMenuItemClick:function(e,t){t(),m(void 0)},onClose:function(){return m(void 0)},menuItems:r.menuItems()})):null})),y=(0,s.observer)((function(e){var t=e.view,r=e.children,n=h(),a=(0,l.useTheme)(),o=(0,m.getSession)(t),c=(0,d.default)(),s=(0,i.default)(c,2),g=s[0],y=s[1].width,b=a.spacing(1);return(0,u.useEffect)((function(){y&&(0,f.isAlive)(t)&&t.setWidth(y-2*b)}),[b,t,y]),u.default.createElement(l.Paper,{elevation:12,ref:g,className:n.viewContainer,style:{padding:"0px ".concat(b,"px ").concat(b,"px")}},o.DialogComponent?u.default.createElement(u.Suspense,{fallback:u.default.createElement("div",null)},u.default.createElement(o.DialogComponent,o.DialogProps)):null,u.default.createElement("div",{style:{display:"flex"}},u.default.createElement(v,{model:t,IconButtonProps:{classes:{root:n.iconRoot},edge:"start"},IconProps:{className:n.icon}}),u.default.createElement("div",{className:n.grow}),t.displayName?u.default.createElement(l.Typography,{variant:"body2",className:n.displayName},t.displayName):null,u.default.createElement("div",{className:n.grow}),u.default.createElement("div",{style:{width:20,height:20}},u.default.createElement(p.Logomark,{variant:"white"}))),u.default.createElement(l.Paper,null,r))}));t.default=y},2065:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new u.default([].concat((0,o.default)(f.default),(0,o.default)(e)).map((function(e){return new e})));t.createPluggableElements();var r=(0,p.default)(t),n=(0,i.assemblyConfigSchemaFactory)(t),a=(0,i.default)(n,t);return{model:s.types.model("ReactCircularGenomeView",{config:(0,d.default)(t,n),session:r,assemblyManager:a}).volatile((function(){return{error:void 0}})).actions((function(e){return{setSession:function(t){e.session=(0,s.cast)(t)},renameCurrentSession:function(t){if(e.session){var r=JSON.parse(JSON.stringify((0,s.getSnapshot)(e.session)));r.name=t,this.setSession(r)}},setError:function(t){e.error=t}}})).views((function(e){return{get jbrowse(){return e.config},get pluginManager(){return t}}})).volatile((function(e){return{rpcManager:new l.default(t,e.config.configuration.rpc,{MainThreadRpcDriver:{}}),textSearchManager:new c.default(t)}})),pluginManager:t}};var o=n(r(33)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(2066)),u=n(r(2070)),l=n(r(932)),c=n(r(2099)),s=r(17),f=n(r(2100)),d=n(r(949)),p=n(r(950));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}},2066:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"assemblyConfigSchemaFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(2067)),o=n(r(2069))},2067:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,f.default)(e,t);return l.types.model({assemblies:l.types.array(r)}).views((function(e){return{get:function(t){return e.assemblies.find((function(e){return e.hasName(t)}))},get assemblyNamesList(){return this.assemblyList.map((function(e){return e.name}))},get assemblyList(){var t=(0,l.getParent)(e),r=t.jbrowse.assemblies,n=t.session,a=(n=void 0===n?{}:n).sessionAssemblies,o=void 0===a?[]:a;return[].concat((0,i.default)(r),(0,i.default)(o))},get rpcManager(){return(0,l.getParent)(e).rpcManager},get pluginManager(){return(0,l.getParent)(e).pluginManager},get allPossibleRefNames(){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e.assemblies);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!a.allRefNames)return;r=r.concat(a.allRefNames)}}catch(e){n.e(e)}finally{n.f()}return r}}})).views((function(e){return{waitForAssembly:function(t){return(0,o.default)(a.default.mark((function r(){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}throw new Error("no assembly name supplied to waitForAssembly");case 2:if(n=e.get(t)){r.next=5;break}return r.abrupt("return",void 0);case 5:return r.next=7,(0,c.when)((function(){return Boolean(n.regions&&n.refNameAliases)||!!n.error}));case 7:if(!n.error){r.next=9;break}throw n.error;case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})))()},getRefNameMapForAdapter:function(e,t,r){var n=this;return(0,o.default)(a.default.mark((function o(){var i;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,n.waitForAssembly(t);case 3:return i=a.sent,a.abrupt("return",null==i?void 0:i.getRefNameMapForAdapter(e,r));case 5:return a.abrupt("return",{});case 6:case"end":return a.stop()}}),o)})))()},getReverseRefNameMapForAdapter:function(e,t,r){var n=this;return(0,o.default)(a.default.mark((function o(){var i;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,n.waitForAssembly(t);case 3:return i=a.sent,a.abrupt("return",null==i?void 0:i.getReverseRefNameMapForAdapter(e,r));case 5:return a.abrupt("return",{});case 6:case"end":return a.stop()}}),o)})))()},isValidRefName:function(t,r){if(r){var n=e.get(r);if(n)return n.isValidRefName(t);throw new Error("isValidRefName for ".concat(r," failed, assembly does not exist"))}if(!e.allPossibleRefNames)throw new Error("isValidRefName not available, assemblyManager has not yet finished loading. If you are looking for a refname in a specific assembly, pass assembly argument");return e.allPossibleRefNames.includes(t)}}})).actions((function(e){return{removeAssembly:function(t){e.assemblies.remove(t)},afterAttach:function(){var t=this;(0,l.addDisposer)(e,(0,u.reaction)((function(){return e.assemblyList}),(function(r){e.assemblies.forEach((function(e){e.configuration||t.removeAssembly(e)})),r.forEach((function(r){-1===e.assemblies.findIndex((function(e){return e.name===(0,s.readConfObject)(r,"name")}))&&t.addAssembly(r)}))}),{fireImmediately:!0,name:"assemblyManagerAfterAttach"}))},addAssembly:function(t){e.assemblies.push({configuration:t})},replaceAssembly:function(t,r){e.assemblies[t]=(0,l.cast)({configuration:r})}}}))};var a=n(r(19)),o=n(r(20)),i=n(r(33)),u=r(43),l=r(17),c=r(32),s=r(29),f=n(r(2068));function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},2068:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new d.default({cache:new g.default({maxSize:1e3}),fill:function(e,t,r){return(0,c.default)(i.default.mark((function n(){var a,o,u;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.adapterConf,o=e.self,u=e.options,n.abrupt("return",k(o,a,y(y({},u),{},{statusCallback:r}),t));case 2:case"end":return n.stop()}}),n)})))()}});return f.types.model({configuration:f.types.safeReference(e)}).volatile((function(){return{error:void 0,regions:void 0,refNameAliases:void 0,lowerCaseRefNameAliases:void 0,cytobands:void 0}})).views((function(e){return{get initialized(){return!!e.refNameAliases},get name(){return(0,p.getConf)(e,"name")},get aliases(){return(0,p.getConf)(e,"aliases")},hasName:function(e){return this.allAliases.includes(e)},get allAliases(){return[this.name].concat((0,u.default)(this.aliases))},get refNames(){var t;return null===(t=e.regions)||void 0===t?void 0:t.map((function(e){return e.refName}))},get allRefNames(){return e.refNameAliases?Object.keys(e.refNameAliases):void 0},get rpcManager(){return(0,f.getParent)(e,2).rpcManager},get refNameColors(){var t=(0,p.getConf)(e,"refNameColors");return 0===t.length?w:t}}})).views((function(e){return{getCanonicalRefName:function(t){if(!e.refNameAliases||!e.lowerCaseRefNameAliases)throw new Error("aliases not loaded, we expect them to be loaded before getCanonicalRefName can be called");return e.refNameAliases[t]||e.lowerCaseRefNameAliases[t]},getRefNameColor:function(t){var r,n=null===(r=e.refNames)||void 0===r?void 0:r.findIndex((function(e){return e===t}));if(void 0!==n&&-1!==n)return e.refNameColors[n%e.refNameColors.length]},isValidRefName:function(t){if(!e.refNameAliases)throw new Error("isValidRefName cannot be called yet, the assembly has not finished loading");return!!this.getCanonicalRefName(t)}}})).actions((function(e){return{setLoading:function(){},setLoaded:function(e){var t=e.adapterRegionsWithAssembly,r=e.refNameAliases,n=e.lowerCaseRefNameAliases,a=e.cytobands;this.setRegions(t),this.setRefNameAliases(r,n),this.setCytobands(a)},setError:function(t){console.error(t),e.error=t},setRegions:function(t){e.regions=t},setRefNameAliases:function(t,r){e.refNameAliases=t,e.lowerCaseRefNameAliases=r},setCytobands:function(t){e.cytobands=t},afterAttach:function(){(0,m.makeAbortableReaction)(e,function(e){return function(t){if(t.configuration){var r=t.configuration,n=r.sequence,a=r.refNameAliases,o=r.cytobands,i=n.adapter,u=null==a?void 0:a.adapter,l=null==o?void 0:o.adapter;return{sequenceAdapterConfig:i,assemblyName:t.name,refNameAliasesAdapterConfig:u,cytobandAdapterConfig:l,pluginManager:e}}}}(t),E,{name:"".concat(e.name," assembly loading"),fireImmediately:!0},this.setLoading,this.setLoaded,this.setError)}}})).views((function(e){return{getAdapterMapEntry:function(t,n){n.signal;var a=n.statusCallback,i=(0,o.default)(n,h);if(!n.sessionId)throw new Error("sessionId is required");var u=function(e){return(0,s.default)(e)}(t);return r.get(u,{adapterConf:t,self:e,options:i},void 0,a)},getRefNameMapForAdapter:function(e,t){var r=this;return(0,c.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.sessionId){n.next=2;break}throw new Error("sessionId is required");case 2:return n.next=4,r.getAdapterMapEntry(e,t);case 4:return a=n.sent,n.abrupt("return",a.forwardMap);case 6:case"end":return n.stop()}}),n)})))()},getReverseRefNameMapForAdapter:function(e,t){var r=this;return(0,c.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getAdapterMapEntry(e,t);case 2:return a=n.sent,n.abrupt("return",a.reverseMap);case 4:case"end":return n.stop()}}),n)})))()}}}))};var a=n(r(12)),o=n(r(45)),i=n(r(19)),u=n(r(33)),l=n(r(10)),c=n(r(20)),s=n(r(712)),f=r(17),d=n(r(85)),p=r(29),m=r(32),g=n(r(519)),h=["signal","statusCallback"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=new RegExp("[0-9A-Za-z!#$%&+./:;?@^_|~-][0-9A-Za-z!#$%&*+./:;=?@^_|~-]*"),w=["rgb(153, 102, 0)","rgb(102, 102, 0)","rgb(153, 153, 30)","rgb(204, 0, 0)","rgb(255, 0, 0)","rgb(255, 0, 204)","rgb(165, 132, 132)","rgb(204, 122, 0)","rgb(178, 142, 0)","rgb(153, 153, 0)","rgb(122, 153, 0)","rgb(0, 165, 0)","rgb(53, 128, 0)","rgb(0, 0, 204)","rgb(96, 145, 242)","rgb(107, 142, 178)","rgb(0, 165, 165)","rgb(122, 153, 153)","rgb(153, 0, 204)","rgb(204, 51, 255)","rgb(173, 130, 216)","rgb(102, 102, 102)","rgb(145, 145, 145)","rgb(142, 142, 142)","rgb(142, 142, 107)","rgb(96, 163, 48)"];function k(e,t,r,n){return O.apply(this,arguments)}function O(){return(O=(0,c.default)(i.default.mark((function e(t,r,n,o){var u,l,c,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.sessionId,e.next=3,(0,m.when)((function(){return Boolean(t.regions&&t.refNameAliases)}),{signal:o,name:"when assembly ready"});case 3:return e.next=5,t.rpcManager.call(u,"CoreGetRefNames",y({adapterConfig:r,signal:o},n),{timeout:1e6});case 5:if(l=e.sent,t.refNameAliases){e.next=9;break}throw new Error("error loading assembly ".concat(t.name,"'s refNameAliases"));case 9:return c=Object.fromEntries(l.map((function(e){return P(e),[t.getCanonicalRefName(e),e]}))),s=Object.fromEntries(Object.entries(c).map((function(e){var t=(0,a.default)(e,2),r=t[0];return[t[1],r]}))),e.abrupt("return",{forwardMap:c,reverseMap:s});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){if(!e.match(b))throw new Error('Encountered invalid refName: "'.concat(e,'"'))}function E(e,t){return S.apply(this,arguments)}function S(){return(S=(0,c.default)(i.default.mark((function e(t,r){var n,o,u,l,c,s,f,d,p,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.sequenceAdapterConfig,o=t.assemblyName,u=t.refNameAliasesAdapterConfig,l=t.cytobandAdapterConfig,c=t.pluginManager,e.next=5,T(n,c,r);case 5:return s=e.sent,f=s.map((function(e){return P(e.refName),y(y({},e),{},{assemblyName:o})})),d={},e.next=10,x(u,c,r);case 10:return p=e.sent,e.next=13,j(l,c);case 13:return m=e.sent,p.forEach((function(e){var t=e.refName;e.aliases.forEach((function(e){P(e),d[e]=t}))})),f.forEach((function(e){d[e.refName]=e.refName})),g=Object.fromEntries(Object.entries(d).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return[r.toLowerCase(),n]}))),e.abrupt("return",{adapterRegionsWithAssembly:f,refNameAliases:d,lowerCaseRefNameAliases:g,cytobands:m});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,r){return C.apply(this,arguments)}function C(){return(C=(0,c.default)(i.default.mark((function e(t,r,n){var a,o,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.getAdapterType(t.type),e.next=3,null===(a=o.getAdapterClass)||void 0===a?void 0:a.call(o);case 3:return u=e.sent,l=new u(t,void 0,r),e.abrupt("return",l.getRefNameAliases({signal:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return M.apply(this,arguments)}function M(){return(M=(0,c.default)(i.default.mark((function e(t,r){var n,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getAdapterType(t.type),e.next=3,n.getAdapterClass();case 3:return a=e.sent,o=new a(t,void 0,r),e.abrupt("return",o.getData());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,r){return R.apply(this,arguments)}function R(){return(R=(0,c.default)(i.default.mark((function e(t,r,n){var a,o,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getAdapterType(t.type),e.next=3,a.getAdapterClass();case 3:return o=e.sent,u=new o(t,void 0,r),e.abrupt("return",u.getRegions({signal:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2069:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(29);t.default=function(e){return(0,n.ConfigurationSchema)("BaseAssembly",{aliases:{type:"stringArray",defaultValue:[],description:"Other possible names for the assembly"},sequence:e.getTrackType("ReferenceSequenceTrack").configSchema,refNameColors:{type:"stringArray",defaultValue:[],description:"Define custom colors for each reference sequence. Will cycle through this list if there are not enough colors for every sequence."},refNameAliases:(0,n.ConfigurationSchema)("RefNameAliases",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:function(e){return e.adapter?e:{adapter:{type:"RefNameAliasAdapter"}}}}),cytobands:(0,n.ConfigurationSchema)("Cytoband",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:function(e){return e.adapter?e:{adapter:{type:"CytobandAdapter"}}}}),displayName:{type:"string",defaultValue:"",description:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)" while the assembly name may just be "hg38"'}},{explicitIdentifier:"name"})}},207:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NewFeatureRendererType=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(10)),u=n(r(15)),l=n(r(16)),c=n(r(50)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=r(51),m=r(32),g=n(r(95)),h=r(363),v=n(r(277));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var k=function(e){(0,s.default)(i,e);var t,r,n=w(i);function i(){return(0,u.default)(this,i),n.apply(this,arguments)}return(0,l.default)(i,[{key:"serializeArgsInClient",value:function(e){var t=e.displayModel,r=e.regions,n=b(b({},e),{},{displayModel:t&&{id:t.id,selectedFeatureId:t.selectedFeatureId},regions:JSON.parse(JSON.stringify(r))});return(0,c.default)((0,d.default)(i.prototype),"serializeArgsInClient",this).call(this,n)}},{key:"deserializeResultsInClient",value:function(e,t){var r=new Map;e.features.forEach((function(e){var t=g.default.fromJSON(e);r.set(String(t.id()),t)}));var n=(0,c.default)((0,d.default)(i.prototype),"deserializeResultsInClient",this).call(this,b(b({},e),{},{features:r}),t);return b(b({},n),{},{blockKey:t.blockKey,features:r})}},{key:"serializeResultsInWorker",value:function(e,t){var r=(0,c.default)((0,d.default)(i.prototype),"serializeResultsInWorker",this).call(this,e,t),n=e.features;return b(b({},r),{},{features:(0,m.iterMap)(n.values(),(function(e){return e.toJSON()}),n.size)})}},{key:"getExpandedRegion",value:function(e,t){return e}},{key:"getFeatures",value:(r=(0,o.default)(a.default.mark((function e(t){var r,n,o,i,u,l,c,s,f,d,g,v=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signal,n=t.regions,o=t.sessionId,i=t.adapterConfig,e.next=3,(0,h.getAdapter)(this.pluginManager,o,i);case 3:if(u=e.sent,l=u.dataAdapter,c=new Map,n&&0!==n.length){e.next=8;break}return e.abrupt("return",c);case 8:return s=n.map((function(e){var t=b({},e);return t.start&&(t.start=Math.floor(t.start)),t.end&&(t.end=Math.ceil(t.end)),t})),f=s[0],d=1===s.length?l.getFeatures(this.getExpandedRegion(f,t),t):l.getFeaturesInMultipleRegions(s,t),e.next=13,d.pipe((0,p.toArray)()).toPromise();case 13:return g=e.sent,(0,m.checkAbortSignal)(r),e.abrupt("return",new Map(g.filter((function(e){return v.featurePassesFilters(t,e)})).map((function(e){return[e.id(),e]}))));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"featurePassesFilters",value:function(e,t){return!e.filters||e.filters.passes(t,e)}},{key:"render",value:(t=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.features,e.t0){e.next=5;break}return e.next=4,this.getFeatures(t);case 4:e.t0=e.sent;case 5:return r=e.t0,e.next=8,(0,c.default)((0,d.default)(i.prototype),"render",this).call(this,b(b({},t),{},{features:r}));case 8:return n=e.sent,e.abrupt("return",b(b({},n),{},{features:r}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(v.default);t.default=k;var O=function(e){(0,s.default)(r,e);var t=w(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,l.default)(r)}(v.default);t.NewFeatureRendererType=O},2070:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(33)),u=n(r(12)),l=n(r(15)),c=n(r(16)),s=n(r(10)),f=r(17),d=n(r(275)),p=n(r(140)),m=n(r(162)),g=n(r(205)),h=n(r(276)),v=n(r(163)),y=n(r(520)),b=n(r(360)),w=n(r(918)),k=n(r(919)),O=r(29),P=n(r(114)),E=n(r(920)),S=n(r(2093)),x=n(r(905));function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(){function e(){(0,l.default)(this,e),(0,s.default)(this,"phaseCallbacks",new Map),(0,s.default)(this,"phaseOrder",[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.phaseOrder=r}return(0,c.default)(e,[{key:"add",value:function(e,t){if(!this.phaseOrder.includes(e))throw new Error("unknown phase ".concat(e));var r=this.phaseCallbacks.get(e);r||(r=[],this.phaseCallbacks.set(e,r)),r.push(t)}},{key:"run",value:function(){var e=this;this.phaseOrder.forEach((function(t){var r;null===(r=e.phaseCallbacks.get(t))||void 0===r||r.forEach((function(e){return e()}))}))}}]),e}(),T=function(){function e(t,r){(0,l.default)(this,e),this.typeName=t,this.baseClass=r,(0,s.default)(this,"registeredTypes",{})}return(0,c.default)(e,[{key:"add",value:function(e,t){this.registeredTypes[e]=t}},{key:"has",value:function(e){return e in this.registeredTypes}},{key:"get",value:function(e){if(!this.has(e))throw new Error("".concat(this.typeName," '").concat(e,"' not found, perhaps its plugin is not loaded or its plugin has not added it."));return this.registeredTypes[e]}},{key:"all",value:function(){return Object.values(this.registeredTypes)}}]),e}(),R=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,l.default)(this,e),(0,s.default)(this,"plugins",[]),(0,s.default)(this,"jexl",(0,x.default)()),(0,s.default)(this,"pluginMetadata",{}),(0,s.default)(this,"runtimePluginDefinitions",[]),(0,s.default)(this,"elementCreationSchedule",new M("renderer","adapter","text search adapter","display","track","connection","view","widget","rpc method","internet account")),(0,s.default)(this,"rendererTypes",new T("RendererType",d.default)),(0,s.default)(this,"adapterTypes",new T("AdapterType",p.default)),(0,s.default)(this,"textSearchAdapterTypes",new T("TextSearchAdapterType",k.default)),(0,s.default)(this,"trackTypes",new T("TrackType",m.default)),(0,s.default)(this,"displayTypes",new T("DisplayType",g.default)),(0,s.default)(this,"connectionTypes",new T("ConnectionType",y.default)),(0,s.default)(this,"viewTypes",new T("ViewType",h.default)),(0,s.default)(this,"widgetTypes",new T("WidgetType",v.default)),(0,s.default)(this,"rpcMethods",new T("RpcMethodType",b.default)),(0,s.default)(this,"internetAccountTypes",new T("InternetAccountType",w.default)),(0,s.default)(this,"configured",!1),(0,s.default)(this,"rootModel",void 0),(0,s.default)(this,"extensionPoints",new Map),(0,s.default)(this,"jbrequireCache",new Map),(0,s.default)(this,"lib",E.default),(0,s.default)(this,"load",(function(e){return t.jbrequireCache.has(e)||t.jbrequireCache.set(e,e(t)),t.jbrequireCache.get(e)})),(0,s.default)(this,"jbrequire",(function(e){if("string"==typeof e){var r=t.lib[e];if(!r)throw new TypeError("No jbrequire re-export defined for package '".concat(e,"'. If this package must be shared between plugins, add it to ReExports.js. If it does not need to be shared, just import it normally."));return r}if("function"==typeof e)return t.load(e);if(e.default)return t.jbrequire(e.default);throw new TypeError("lib passed to jbrequire must be either a string or a function")})),this.addPlugin({plugin:new S.default,metadata:{isCore:!0}}),r.forEach((function(e){t.addPlugin(e)}))}var t;return(0,c.default)(e,[{key:"pluginConfigurationSchemas",value:function(){var e={};return this.plugins.forEach((function(t){t.configurationSchema&&(e[t.name]=t.configurationSchema)})),e}},{key:"addPlugin",value:function(e){if(this.configured)throw new Error("JBrowse already configured, cannot add plugins");var t=e instanceof P.default?[e,{}]:[e.plugin,e.metadata],r=(0,u.default)(t,2),n=r[0],a=r[1],o=void 0===a?{}:a;if(this.plugins.includes(n))throw new Error("plugin already installed");return this.pluginMetadata[n.name]=o,"definition"in e&&this.runtimePluginDefinitions.push(e.definition),n.install(this),this.plugins.push(n),this}},{key:"getPlugin",value:function(e){return this.plugins.find((function(t){return t.name===e}))}},{key:"hasPlugin",value:function(e){return void 0!==this.getPlugin(e)}},{key:"createPluggableElements",value:function(){return this.elementCreationSchedule&&(this.elementCreationSchedule.run(),delete this.elementCreationSchedule),this}},{key:"setRootModel",value:function(e){this.rootModel=e}},{key:"configure",value:function(){var e=this;if(this.configured)throw new Error("already configured");return this.plugins.forEach((function(t){return t.configure(e)})),this.configured=!0,this}},{key:"getElementTypeRecord",value:function(e){switch(e){case"adapter":return this.adapterTypes;case"text search adapter":return this.textSearchAdapterTypes;case"connection":return this.connectionTypes;case"widget":return this.widgetTypes;case"renderer":return this.rendererTypes;case"display":return this.displayTypes;case"track":return this.trackTypes;case"view":return this.viewTypes;case"rpc method":return this.rpcMethods;case"internet account":return this.internetAccountTypes;default:throw new Error("invalid element type '".concat(e,"'"))}}},{key:"addElementType",value:function(e,t){var r=this;if("function"!=typeof t)throw new Error("must provide a callback function that returns the new type object");var n=this.getElementTypeRecord(e);return this.elementCreationSchedule&&this.elementCreationSchedule.add(e,(function(){var a=t(r);if(!a.name)throw new Error("cannot add a ".concat(e," with no name"));if(n.has(a.name))throw new Error("".concat(e," ").concat(a.name," already registered, cannot register it again"));a=r.evaluateExtensionPoint("Core-extendPluggableElement",a),n.add(a.name,a)})),this}},{key:"getElementType",value:function(e,t){return this.getElementTypeRecord(e).get(t)}},{key:"getElementTypesInGroup",value:function(e){return this.getElementTypeRecord(e).all()}},{key:"pluggableMstType",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.types.maybe(f.types.null),n=this.getElementTypeRecord(e).all().map((function(e){return e[t]})).filter((function(e){return(0,f.isType)(e)&&(0,f.isModelType)(e)}));return 0===n.length?(console.warn("No JBrowse pluggable types found matching ('".concat(e,"','").concat(t,"')")),r):f.types.union.apply(f.types,(0,i.default)(n))}},{key:"pluggableConfigSchemaType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"configSchema",r=this.getElementTypeRecord(e).all().map((function(e){return e[t]})).filter((function(e){return(0,O.isBareConfigurationSchemaType)(e)}));return 0===r.length&&r.push((0,O.ConfigurationSchema)("Null",{})),f.types.union.apply(f.types,(0,i.default)(r))}},{key:"getRendererType",value:function(e){return this.rendererTypes.get(e)}},{key:"getRendererTypes",value:function(){return this.rendererTypes.all()}},{key:"getAdapterType",value:function(e){return this.adapterTypes.get(e)}},{key:"getTextSearchAdapterType",value:function(e){return this.textSearchAdapterTypes.get(e)}},{key:"getTrackType",value:function(e){return this.trackTypes.get(e)}},{key:"getDisplayType",value:function(e){return this.displayTypes.get(e)}},{key:"getViewType",value:function(e){return this.viewTypes.get(e)}},{key:"getWidgetType",value:function(e){return this.widgetTypes.get(e)}},{key:"getConnectionType",value:function(e){return this.connectionTypes.get(e)}},{key:"getRpcMethodType",value:function(e){return this.rpcMethods.get(e)}},{key:"getInternetAccountType",value:function(e){return this.internetAccountTypes.get(e)}},{key:"addRendererType",value:function(e){return this.addElementType("renderer",e)}},{key:"addAdapterType",value:function(e){return this.addElementType("adapter",e)}},{key:"addTextSearchAdapterType",value:function(e){return this.addElementType("text search adapter",e)}},{key:"addTrackType",value:function(e){var t=this;return this.addElementType("track",(function(){var r=e(t);return t.getElementTypesInGroup("display").forEach((function(e){e.trackType!==r.name||r.displayTypes.includes(e)||r.addDisplayType(e)})),r}))}},{key:"addDisplayType",value:function(e){return this.addElementType("display",e)}},{key:"addViewType",value:function(e){var t=this;return this.addElementType("view",(function(){var r=e(t);return t.getElementTypesInGroup("display").forEach((function(e){e.viewType!==r.name||r.displayTypes.includes(e)||r.addDisplayType(e)})),r}))}},{key:"addWidgetType",value:function(e){return this.addElementType("widget",e)}},{key:"addConnectionType",value:function(e){return this.addElementType("connection",e)}},{key:"addRpcMethod",value:function(e){return this.addElementType("rpc method",e)}},{key:"addInternetAccountType",value:function(e){return this.addElementType("internet account",e)}},{key:"addToExtensionPoint",value:function(e,t){var r=this.extensionPoints.get(e);r||(r=[],this.extensionPoints.set(e,r)),r.push(t)}},{key:"evaluateExtensionPoint",value:function(e,t){var r=this.extensionPoints.get(e),n=t;if(r){var a,o=C(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;try{n=i(n)}catch(e){console.error(e)}}}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"evaluateAsyncExtensionPoint",value:(t=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.extensionPoints.get(t),o=r,!n){e.next=27;break}i=C(n),e.prev=4,i.s();case 6:if((u=i.n()).done){e.next=19;break}return l=u.value,e.prev=8,e.next=11,l(o);case 11:o=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.error(e.t0);case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(4),i.e(e.t1);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return e.abrupt("return",o);case 28:case"end":return e.stop()}}),e,this,[[4,21,24,27],[8,14]])}))),function(e,r){return t.apply(this,arguments)})}]),e}();t.default=R},2071:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=Pe(r(6)),u=Pe(r(43)),l=Pe(r(17)),c=Pe(r(14)),s=n(r(0)),f=Pe(r(34)),d=Pe(r(23)),p=Pe(r(46)),m=n(r(124)),g=Pe(r(209)),h=Pe(r(184)),v=n(r(222)),y=n(r(71)),b=n(r(241)),w=n(r(242)),k=n(r(243)),O=n(r(185)),P=n(r(244)),E=n(r(101)),S=n(r(186)),x=n(r(131)),C=n(r(187)),j=n(r(188)),M=n(r(245)),T=n(r(246)),R=n(r(58)),D=n(r(247)),A=n(r(189)),I=n(r(190)),_=n(r(248)),N=n(r(183)),B=n(r(102)),F=n(r(249)),L=n(r(224)),W=n(r(135)),z=n(r(250)),H=n(r(191)),V=n(r(86)),q=n(r(154)),G=n(r(52)),U=n(r(251)),J=n(r(252)),X=Pe(r(89)),Y=Pe(r(361)),K=n(r(362)),$=Pe(r(2073)),Z=n(r(276)),Q=n(r(140)),ee=n(r(205)),te=n(r(162)),re=n(r(163)),ne=Pe(r(96)),ae=Pe(r(277)),oe=n(r(364)),ie=Pe(r(926)),ue=Pe(r(207)),le=Pe(r(275)),ce=Pe(r(29)),se=n(r(114)),fe=Pe(r(83)),de=Pe(r(32)),pe=Pe(r(523)),me=Pe(r(2087)),ge=Pe(r(65)),he=Pe(r(97)),ve=Pe(r(161)),ye=Pe(r(115)),be=Pe(r(2091)),we=Pe(r(70)),ke=n(r(2092));function Oe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Oe=function(e){return e?r:t})(e)}function Pe(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=Oe(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var Ee={mobx:u,"mobx-state-tree":l,react:o.default,"react-dom":i,"mobx-react":c,"prop-types":s.default,"@material-ui/core":d,"@material-ui/core/SvgIcon":m.default,"@material-ui/core/utils":p,"@material-ui/lab":g,"@mui/x-data-grid":h,"@material-ui/data-grid":h,"@material-ui/core/colors":be,"@material-ui/core/styles":f,"@material-ui/core/Box":v.default,"@material-ui/core/Button":y.default,"@material-ui/core/ButtonGroup":b.default,"@material-ui/core/Card":w.default,"@material-ui/core/CardContent":k.default,"@material-ui/core/Container":P.default,"@material-ui/core/Checkbox":O.default,"@material-ui/core/Dialog":E.default,"@material-ui/core/FormGroup":j.default,"@material-ui/core/FormLabel":S.default,"@material-ui/core/FormControl":x.default,"@material-ui/core/FormControlLabel":C.default,"@material-ui/core/Grid":M.default,"@material-ui/core/Icon":T.default,"@material-ui/core/IconButton":R.default,"@material-ui/core/InputAdornment":D.default,"@material-ui/core/LinearProgress":A.default,"@material-ui/core/ListItemIcon":I.default,"@material-ui/core/ListItemText":_.default,"@material-ui/core/Menu":N.default,"@material-ui/core/MenuItem":B.default,"@material-ui/core/RadioGroup":L.default,"@material-ui/core/Radio":F.default,"@material-ui/core/Select":W.default,"@material-ui/core/Snackbar":z.default,"@material-ui/core/SnackbarContent":H.default,"@material-ui/core/TextField":V.default,"@material-ui/core/Tooltip":q.default,"@material-ui/core/Typography":G.default,"@material-ui/lab/ToggleButton":U.default,"@material-ui/lab/ToggleButtonGroup":J.default,"@jbrowse/core/Plugin":se.default,"@jbrowse/core/pluggableElementTypes":$,"@jbrowse/core/pluggableElementTypes/ViewType":Z.default,"@jbrowse/core/pluggableElementTypes/AdapterType":Q.default,"@jbrowse/core/pluggableElementTypes/DisplayType":ee.default,"@jbrowse/core/pluggableElementTypes/TrackType":te.default,"@jbrowse/core/pluggableElementTypes/WidgetType":re.default,"@jbrowse/core/pluggableElementTypes/models":ne,"@jbrowse/core/pluggableElementTypes/renderers/ServerSideRendererType":ae,"@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType":oe.default,"@jbrowse/core/pluggableElementTypes/renderers/BoxRendererType":ie,"@jbrowse/core/pluggableElementTypes/renderers/FeatureRendererType":ue,"@jbrowse/core/pluggableElementTypes/renderers/RendererType":le,"@jbrowse/core/configuration":ce,"@jbrowse/core/util/types/mst":we,"@jbrowse/core/ui":fe,"@jbrowse/core/util":de,"@jbrowse/core/util/color":pe,"@jbrowse/core/util/layouts":me,"@jbrowse/core/util/tracks":ge,"@jbrowse/core/util/Base1DViewModel":K.default,"@jbrowse/core/util/io":he,"@jbrowse/core/util/mst-reflection":ve,"@jbrowse/core/util/rxjs":ye,"@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail":Y,"@jbrowse/core/data_adapters/BaseAdapter":X};ke.default.forEach((function(e){if(!(e in Ee))throw new Error("ReExports/modules is missing ".concat(e))}));var Se=Ee;t.default=Se},2072:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.SequencePanel=void 0,t.default=function(e){var t,r=e.model,n=e.feature,a=w(),l=n,c=null===(t=l.subfeatures)||void 0===t?void 0:t.find((function(e){return"CDS"===e.type})),h=(0,s.useRef)(null),v=(0,d.useInView)(),y=v.ref,b=v.inView,k=(0,s.useState)(),O=(0,u.default)(k,2),P=O[0],E=O[1],S=(0,s.useState)(),C=(0,u.default)(S,2),j=C[0],M=C[1],T=(0,s.useState)(c?"cds":"cdna"),R=(0,u.default)(T,2),D=R[0],A=R[1],I=(0,s.useState)(!1),_=(0,u.default)(I,2),N=_[0],B=_[1],F=(0,s.useState)(!1),L=(0,u.default)(F,2),W=L[0],z=L[1];(0,s.useEffect)((function(){var e,t=!1;if(!r||!b)return function(){};var a=(0,m.getSession)(r),l=a.assemblyManager,c=a.rpcManager,s=(null===(e=r.view)||void 0===e?void 0:e.assemblyNames)||[],f=(0,u.default)(s,1)[0];function d(e,t,r){return p.apply(this,arguments)}function p(){return(p=(0,i.default)(o.default.mark((function e(t,r,n){var a,i,s,d,p,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.waitForAssembly(f);case 2:if(a=e.sent){e.next=5;break}throw new Error("assembly not found");case 5:return i="getSequence",e.next=8,c.call(i,"CoreGetFeatures",{adapterConfig:(0,g.getConf)(a,["sequence","adapter"]),sessionId:i,regions:[{start:t,end:r,refName:a.getCanonicalRefName(n)}]});case 8:if(s=e.sent,d=s,p=(0,u.default)(d,1),m=p[0]){e.next=12;break}throw new Error("sequence not found for feature with refName:".concat(n));case 12:return e.abrupt("return",m.get("seq"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.default)(o.default.mark((function e(){var r,a,i,u,l,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(r=n).start,i=r.end,u=r.refName,e.next=4,d(a,i,u);case 4:return l=e.sent,e.next=7,d(Math.max(0,a-500),a,u);case 7:return c=e.sent,e.next=10,d(i,i+500,u);case 10:s=e.sent,t||E({seq:l,upstream:c,downstream:s}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),M(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))(),function(){t=!0}}),[n,b,r]);var H=!P;return s.default.createElement("div",{ref:y},s.default.createElement(f.Select,{value:D,onChange:function(e){return A(e.target.value)}},c?s.default.createElement(f.MenuItem,{value:"cds"},"CDS"):null,c?s.default.createElement(f.MenuItem,{value:"protein"},"Protein"):null,s.default.createElement(f.MenuItem,{value:"gene"},"Gene w/ introns"),s.default.createElement(f.MenuItem,{value:"gene_collapsed_intron"},"Gene w/ 10bp of intron"),s.default.createElement(f.MenuItem,{value:"gene_updownstream"},"Gene w/ 500bp up+down stream"),s.default.createElement(f.MenuItem,{value:"gene_updownstream_collapsed_intron"},"Gene w/ 500bp up+down stream w/ 10bp intron"),s.default.createElement(f.MenuItem,{value:"cdna"},"cDNA")),s.default.createElement(f.Button,{className:a.button,type:"button",variant:"contained",onClick:function(){var e=h.current;e&&((0,p.default)(e.textContent||"",{format:"text/plain"}),B(!0),setTimeout((function(){return B(!1)}),1e3))}},N?"Copied to clipboard!":"Copy as plaintext"),s.default.createElement(f.Tooltip,{title:"Note that 'Copy as HTML' can retain the colors but cannot be pasted into some programs like notepad that only expect plain text"},s.default.createElement(f.Button,{className:a.button,type:"button",variant:"contained",onClick:function(){var e=h.current;e&&((0,p.default)(e.innerHTML,{format:"text/html"}),z(!0),setTimeout((function(){return z(!1)}),1e3))}},W?"Copied to clipboard!":"Copy as HTML")),s.default.createElement("div",{"data-testid":"feature_sequence"},j?s.default.createElement(f.Typography,{color:"error"},"".concat(j)):H?s.default.createElement("div",null,"Loading gene sequence..."):P?s.default.createElement(x,{ref:h,feature:l,mode:D,sequence:P}):s.default.createElement("div",null,"No sequence found")))};var o=n(r(19)),i=n(r(20)),u=n(r(12)),l=n(r(10)),c=n(r(33)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(23),d=r(722),p=n(r(137)),m=r(32),g=r(29),h=r(923);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=(0,f.makeStyles)((function(e){return{button:{margin:e.spacing(1)}}})),k="rgb(220,220,180)",O="rgba(250,200,200)";function P(e){var t=e.cds,r=e.sequence;return s.default.createElement("span",{style:{background:k}},(0,h.stitch)(t,r))}function E(e){for(var t=e.cds,r=e.sequence,n=e.codonTable,a=(0,h.stitch)(t,r),o="",i=0;i<a.length;i+=3)o+=n[a.slice(i,i+3)]||"&";return s.default.createElement("span",{style:{background:"rgb(220,160,220)"}},o)}function S(e){var t=e.utr,r=e.cds,n=e.exons,a=e.sequence,o=e.upstream,i=e.downstream,u=e.includeIntrons,l=e.collapseIntron,f=r.length?[].concat((0,c.default)(r),(0,c.default)(t)).sort((function(e,t){return e.start-t.start})):n;return s.default.createElement(s.default.Fragment,null,o?s.default.createElement("span",{style:{background:O}},o):null,f.filter((function(e){return e.start!==e.end})).map((function(e,t){var r,n=a.slice(e.end,null===(r=f[t+1])||void 0===r?void 0:r.start);return s.default.createElement(s.default.Fragment,{key:JSON.stringify(e)},s.default.createElement("span",{style:{background:"CDS"===e.type?k:"rgb(200,240,240)"}},a.slice(e.start,e.end)),u&&t<f.length-1?s.default.createElement("span",{style:{background:undefined}},l&&n.length>20?"".concat(n.slice(0,10),"...").concat(n.slice(-10)):n):null)})),i?s.default.createElement("span",{style:{background:O}},i):null)}var x=s.default.forwardRef((function(e,t){var r=e.feature,n=e.mode,a=e.sequence,o=a.seq,i=a.upstream,u=void 0===i?"":i,l=a.downstream,c=void 0===l?"":l,f=r.subfeatures,d=(0,m.generateCodonTable)(m.defaultCodonTable);if(!f)return null;var p=f.sort((function(e,t){return e.start-t.start})).map((function(e){return b(b({},e),{},{start:e.start-r.start,end:e.end-r.start})})),g=(0,h.dedupe)(p.filter((function(e){return"CDS"===e.type}))),v=(0,h.dedupe)(p.filter((function(e){return e.type.match(/utr/i)}))),y=(0,h.dedupe)(p.filter((function(e){return"exon"===e.type})));if(!v.length&&g.length&&y.length&&(v=(0,h.calculateUTRs)(g,y)),-1===r.strand){var w=[(0,m.revcom)(o),(0,m.revcom)(c),(0,m.revcom)(u)];o=w[0],u=w[1],c=w[2],g=(0,h.revlist)(g,o.length),y=(0,h.revlist)(y,o.length),v=(0,h.revlist)(v,o.length)}return s.default.createElement("div",{ref:t,"data-testid":"sequence_panel"},s.default.createElement("div",{style:{fontFamily:"monospace",wordWrap:"break-word",maxWidth:600}},">".concat(r.name||r.id||"unknown","-").concat(n,"\n"),"cds"===n?s.default.createElement(P,{cds:g,sequence:o}):"cdna"===n?s.default.createElement(S,{exons:y,cds:g,utr:v,sequence:o}):"protein"===n?s.default.createElement(E,{cds:g,codonTable:d,sequence:o}):"gene"===n?s.default.createElement(S,{exons:y,cds:g,utr:v,sequence:o,includeIntrons:!0}):"gene_collapsed_intron"===n?s.default.createElement(S,{exons:y,cds:g,sequence:o,utr:v,includeIntrons:!0,collapseIntron:!0}):"gene_updownstream"===n?s.default.createElement(S,{exons:y,cds:g,sequence:o,utr:v,upstream:u,downstream:c,includeIntrons:!0}):"gene_updownstream_collapsed_intron"===n?s.default.createElement(S,{exons:y,cds:g,sequence:o,utr:v,upstream:u,downstream:c,includeIntrons:!0,collapseIntron:!0}):s.default.createElement("div",null,"Unknown type")))}));t.SequencePanel=x},2073:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={AdapterType:!0,ConnectionType:!0,RendererType:!0,WidgetType:!0,TrackType:!0,DisplayType:!0,ViewType:!0,RpcMethodType:!0,InternetAccountType:!0,TextSearchAdapterType:!0};Object.defineProperty(t,"AdapterType",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ConnectionType",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DisplayType",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"InternetAccountType",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"RendererType",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"RpcMethodType",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"TextSearchAdapterType",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"TrackType",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ViewType",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"WidgetType",{enumerable:!0,get:function(){return l.default}});var o=n(r(140)),i=n(r(520)),u=n(r(275)),l=n(r(163)),c=n(r(162)),s=n(r(205)),f=n(r(276)),d=n(r(360)),p=n(r(918)),m=n(r(919)),g=r(2074);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var h=r(96);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}))},2074:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoxRendererType",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"CircularChordRendererType",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ComparativeServerSideRendererType",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"FeatureRendererType",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"RendererType",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ServerSideRenderedContent",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ServerSideRendererType",{enumerable:!0,get:function(){return s.default}});var a=n(r(926)),o=n(r(364)),i=n(r(2076)),u=n(r(207)),l=n(r(275)),c=n(r(930)),s=n(r(277))},2075:function(e,t,r){"use strict";var n=r(729),a=r(1);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=60106,u=60107,l=60108,c=60114,s=60109,f=60110,d=60112,p=60113,m=60120,g=60115,h=60116,v=60121,y=60117,b=60119,w=60129,k=60131;if("function"==typeof Symbol&&Symbol.for){var O=Symbol.for;i=O("react.portal"),u=O("react.fragment"),l=O("react.strict_mode"),c=O("react.profiler"),s=O("react.provider"),f=O("react.context"),d=O("react.forward_ref"),p=O("react.suspense"),m=O("react.suspense_list"),g=O("react.memo"),h=O("react.lazy"),v=O("react.block"),y=O("react.fundamental"),b=O("react.scope"),w=O("react.debug_trace_mode"),k=O("react.legacy_hidden")}function P(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case i:return"Portal";case c:return"Profiler";case l:return"StrictMode";case p:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case s:return(e._context.displayName||"Context")+".Provider";case d:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case g:return P(e.type);case v:return P(e._render);case h:t=e._payload,e=e._init;try{return P(e(t))}catch(e){}}return null}var E=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S={};function x(e,t){for(var r=0|e._threadCount;r<=t;r++)e[r]=e._currentValue2,e._threadCount=r+1}for(var C=new Uint16Array(16),j=0;15>j;j++)C[j]=j+1;C[15]=0;var M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T=Object.prototype.hasOwnProperty,R={},D={};function A(e){return!!T.call(D,e)||!T.call(R,e)&&(M.test(e)?D[e]=!0:(R[e]=!0,!1))}function I(e,t,r,n,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){_[e]=new I(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];_[t]=new I(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){_[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){_[e]=new I(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){_[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){_[e]=new I(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){_[e]=new I(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){_[e]=new I(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){_[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)}));var N=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(N,B);_[t]=new I(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(N,B);_[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(N,B);_[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){_[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)})),_.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){_[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)}));var F=/["'&<>]/;function L(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=F.exec(e);if(t){var r,n="",a=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==r&&(n+=e.substring(a,r)),a=r+1,n+=t}e=a!==r?n+e.substring(a,r):n}return e}function W(e,t){var r,n=_.hasOwnProperty(e)?_[e]:null;return(r="style"!==e)&&(r=null!==n?0===n.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),r||function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,n,!1)?"":null!==n?(e=n.attributeName,3===(r=n.type)||4===r&&!0===t?e+'=""':(n.sanitizeURL&&(t=""+t),e+'="'+L(t)+'"')):A(e)?e+'="'+L(t)+'"':""}var z="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},H=null,V=null,q=null,G=!1,U=!1,J=null,X=0;function Y(){if(null===H)throw Error(o(321));return H}function K(){if(0<X)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function $(){return null===q?null===V?(G=!1,V=q=K()):(G=!0,q=V):null===q.next?(G=!1,q=q.next=K()):(G=!0,q=q.next),q}function Z(e,t,r,n){for(;U;)U=!1,X+=1,q=null,r=e(t,n);return Q(),r}function Q(){H=null,U=!1,V=null,X=0,q=J=null}function ee(e,t){return"function"==typeof t?t(e):t}function te(e,t,r){if(H=Y(),q=$(),G){var n=q.queue;if(t=n.dispatch,null!==J&&void 0!==(r=J.get(n))){J.delete(n),n=q.memoizedState;do{n=e(n,r.action),r=r.next}while(null!==r);return q.memoizedState=n,[n,t]}return[q.memoizedState,t]}return e=e===ee?"function"==typeof t?t():t:void 0!==r?r(t):t,q.memoizedState=e,e=(e=q.queue={last:null,dispatch:null}).dispatch=ne.bind(null,H,e),[q.memoizedState,e]}function re(e,t){if(H=Y(),t=void 0===t?null:t,null!==(q=$())){var r=q.memoizedState;if(null!==r&&null!==t){var n=r[1];e:if(null===n)n=!1;else{for(var a=0;a<n.length&&a<t.length;a++)if(!z(t[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),q.memoizedState=[e,t],e}function ne(e,t,r){if(!(25>X))throw Error(o(301));if(e===H)if(U=!0,e={action:r,next:null},null===J&&(J=new Map),void 0===(r=J.get(t)))J.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}}function ae(){}var oe=null,ie={readContext:function(e){var t=oe.threadID;return x(e,t),e[t]},useContext:function(e){Y();var t=oe.threadID;return x(e,t),e[t]},useMemo:re,useReducer:te,useRef:function(e){H=Y();var t=(q=$()).memoizedState;return null===t?(e={current:e},q.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return re((function(){return e}),t)},useImperativeHandle:ae,useEffect:ae,useDebugValue:ae,useDeferredValue:function(e){return Y(),e},useTransition:function(){return Y(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(oe.identifierPrefix||"")+"R:"+(oe.uniqueID++).toString(36)},useMutableSource:function(e,t){return Y(),t(e._source)}},ue="http://www.w3.org/1999/xhtml";function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ce={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},se=n({menuitem:!0},ce),fe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(fe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var pe=/([A-Z])/g,me=/^ms-/,ge=a.Children.toArray,he=E.ReactCurrentDispatcher,ve={listing:!0,pre:!0,textarea:!0},ye=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},we={};var ke=Object.prototype.hasOwnProperty,Oe={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Pe(e,t){if(void 0===e)throw Error(o(152,P(t)||"Component"))}function Ee(e,t,r){function i(a,i){var u=i.prototype&&i.prototype.isReactComponent,l=function(e,t,r,n){if(n&&"object"==typeof(n=e.contextType)&&null!==n)return x(n,r),n[r];if(e=e.contextTypes){for(var a in r={},e)r[a]=t[a];t=r}else t=S;return t}(i,t,r,u),c=[],s=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(e,t){s=!0,c=[t]},enqueueSetState:function(e,t){if(null===c)return null;c.push(t)}};if(u){if(u=new i(a.props,l,f),"function"==typeof i.getDerivedStateFromProps){var d=i.getDerivedStateFromProps.call(null,a.props,u.state);null!=d&&(u.state=n({},u.state,d))}}else if(H={},u=i(a.props,l,f),null==(u=Z(i,a.props,u,l))||null==u.render)return void Pe(e=u,i);if(u.props=a.props,u.context=l,u.updater=f,void 0===(f=u.state)&&(u.state=f=null),"function"==typeof u.UNSAFE_componentWillMount||"function"==typeof u.componentWillMount)if("function"==typeof u.componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&u.UNSAFE_componentWillMount(),c.length){f=c;var p=s;if(c=null,s=!1,p&&1===f.length)u.state=f[0];else{d=p?f[0]:u.state;var m=!0;for(p=p?1:0;p<f.length;p++){var g=f[p];null!=(g="function"==typeof g?g.call(u,d,a.props,l):g)&&(m?(m=!1,d=n({},d,g)):n(d,g))}u.state=d}}else c=null;if(Pe(e=u.render(),i),"function"==typeof u.getChildContext&&"object"==typeof(a=i.childContextTypes)){var h=u.getChildContext();for(var v in h)if(!(v in a))throw Error(o(108,P(i)||"Unknown",v))}h&&(t=n({},t,h))}for(;a.isValidElement(e);){var u=e,l=u.type;if("function"!=typeof l)break;i(u,l)}return{child:e,context:t}}var Se=function(){function e(e,t,r){a.isValidElement(e)?e.type!==u?e=[e]:(e=e.props.children,e=a.isValidElement(e)?[e]:ge(e)):e=ge(e),e={type:null,domNamespace:ue,children:e,childIndex:0,context:S,footer:""};var n=C[0];if(0===n){var i=C,l=2*(n=i.length);if(!(65536>=l))throw Error(o(304));var c=new Uint16Array(l);for(c.set(i),(C=c)[0]=n+1,i=n;i<l-1;i++)C[i]=i+1;C[l-1]=0}else C[0]=C[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=r&&r.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;C[e]=C[0],C[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,r=e.type._context,n=this.threadID;x(r,n);var a=r[n];this.contextStack[t]=r,this.contextValueStack[t]=a,r[n]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],r=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=r},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=oe;oe=this;var r=he.current;he.current=ie;try{for(var n=[""],a=!1;n[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;C[i]=C[0],C[0]=i;break}var u=this.stack[this.stack.length-1];if(a||u.childIndex>=u.children.length){var l=u.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===u.type)this.currentSelectValue=null;else if(null!=u.type&&null!=u.type.type&&u.type.type.$$typeof===s)this.popProvider(u.type);else if(u.type===p){this.suspenseDepth--;var c=n.pop();if(a){a=!1;var f=u.fallbackFrame;if(!f)throw Error(o(303));this.stack.push(f),n[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}n[this.suspenseDepth]+=c}n[this.suspenseDepth]+=l}else{var d=u.children[u.childIndex++],m="";try{m+=this.render(d,u.context,u.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(o(294));throw e}n.length<=this.suspenseDepth&&n.push(""),n[this.suspenseDepth]+=m}}return n[0]}finally{he.current=r,oe=t,Q()}},t.render=function(e,t,r){if("string"==typeof e||"number"==typeof e)return""===(r=""+e)?"":this.makeStaticMarkup?L(r):this.previousWasTextNode?"\x3c!-- --\x3e"+L(r):(this.previousWasTextNode=!0,L(r));if(e=(t=Ee(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((r=e.$$typeof)===i)throw Error(o(257));throw Error(o(258,r.toString()))}return e=ge(e),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}var v=e.type;if("string"==typeof v)return this.renderDOM(e,t,r);switch(v){case k:case w:case l:case c:case m:case u:return e=ge(e.props.children),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case p:throw Error(o(294));case b:throw Error(o(343))}if("object"==typeof v&&null!==v)switch(v.$$typeof){case d:H={};var O=v.render(e.props,e.ref);return O=Z(v.render,e.props,O,e.ref),O=ge(O),this.stack.push({type:null,domNamespace:r,children:O,childIndex:0,context:t,footer:""}),"";case g:return e=[a.createElement(v.type,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case s:return r={type:e,domNamespace:r,children:v=ge(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(r),"";case f:v=e.type,O=e.props;var P=this.threadID;return x(v,P),v=ge(O.children(v[P])),this.stack.push({type:e,domNamespace:r,children:v,childIndex:0,context:t,footer:""}),"";case y:throw Error(o(338));case h:return v=(O=(v=e.type)._init)(v._payload),e=[a.createElement(v,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}throw Error(o(130,null==v?v:typeof v,""))},t.renderDOM=function(e,t,r){var i=e.type.toLowerCase();if(r===ue&&le(i),!be.hasOwnProperty(i)){if(!ye.test(i))throw Error(o(65,i));be[i]=!0}var u=e.props;if("input"===i)u=n({type:void 0},u,{defaultChecked:void 0,defaultValue:void 0,value:null!=u.value?u.value:u.defaultValue,checked:null!=u.checked?u.checked:u.defaultChecked});else if("textarea"===i){var l=u.value;if(null==l){l=u.defaultValue;var c=u.children;if(null!=c){if(null!=l)throw Error(o(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(o(93));c=c[0]}l=""+c}null==l&&(l="")}u=n({},u,{value:void 0,children:""+l})}else if("select"===i)this.currentSelectValue=null!=u.value?u.value:u.defaultValue,u=n({},u,{value:void 0});else if("option"===i){c=this.currentSelectValue;var s=function(e){if(null==e)return e;var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(u.children);if(null!=c){var f=null!=u.value?u.value+"":s;if(l=!1,Array.isArray(c)){for(var d=0;d<c.length;d++)if(""+c[d]===f){l=!0;break}}else l=""+c===f;u=n({selected:void 0,children:void 0},u,{selected:l,children:s})}}if(l=u){if(se[i]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(o(137,i));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(o(60));if("object"!=typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=l.style&&"object"!=typeof l.style)throw Error(o(62))}l=u,c=this.makeStaticMarkup,s=1===this.stack.length,f="<"+e.type;e:if(-1===i.indexOf("-"))d="string"==typeof l.is;else switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":d=!1;break e;default:d=!0}for(k in l)if(ke.call(l,k)){var p=l[k];if(null!=p){if("style"===k){var m=void 0,g="",h="";for(m in p)if(p.hasOwnProperty(m)){var v=0===m.indexOf("--"),y=p[m];if(null!=y){if(v)var b=m;else if(b=m,we.hasOwnProperty(b))b=we[b];else{var w=b.replace(pe,"-$1").toLowerCase().replace(me,"-ms-");b=we[b]=w}g+=h+b+":",h=m,g+=v=null==y||"boolean"==typeof y||""===y?"":v||"number"!=typeof y||0===y||fe.hasOwnProperty(h)&&fe[h]?(""+y).trim():y+"px",h=";"}}p=g||null}m=null,d?Oe.hasOwnProperty(k)||(m=A(m=k)&&null!=p?m+'="'+L(p)+'"':""):m=W(k,p),m&&(f+=" "+m)}}c||s&&(f+=' data-reactroot=""');var k=f;l="",ce.hasOwnProperty(i)?k+="/>":(k+=">",l="</"+e.type+">");e:{if(null!=(c=u.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break e}}else if("string"==typeof(c=u.children)||"number"==typeof c){c=L(c);break e}c=null}return null!=c?(u=[],ve.hasOwnProperty(i)&&"\n"===c.charAt(0)&&(k+="\n"),k+=c):u=ge(u.children),e=e.type,r=null==r||"http://www.w3.org/1999/xhtml"===r?le(e):"http://www.w3.org/2000/svg"===r&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":r,this.stack.push({domNamespace:r,type:i,children:u,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,k},e}();t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){e=new Se(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){e=new Se(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},2076:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(10)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(50)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=r(51),m=n(r(277)),g=r(363);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var b=function(e){(0,s.default)(f,e);var t,r,n,o=y(f);function f(){return(0,u.default)(this,f),o.apply(this,arguments)}return(0,l.default)(f,[{key:"renameRegionsIfNeeded",value:(n=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"serializeArgsInClient",value:function(e){var t=v(v({},e),{},{displayModel:{}});return(0,c.default)((0,d.default)(f.prototype),"serializeArgsInClient",this).call(this,t)}},{key:"deserializeResultsInClient",value:function(e,t){return v(v({},(0,c.default)((0,d.default)(f.prototype),"deserializeResultsInClient",this).call(this,e,t)),{},{blockKey:t.blockKey})}},{key:"renderInClient",value:(r=(0,i.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.call(r.sessionId,"ComparativeRender",r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"featurePassesFilters",value:function(e,t){return!e.filters||e.filters.passes(t,e)}},{key:"getFeatures",value:(t=(0,i.default)(a.default.mark((function e(t){var r,n,o,i,u,l,c=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.sessionId,n=t.adapterConfig,e.next=3,(0,g.getAdapter)(this.pluginManager,r,n);case 3:if(o=e.sent,i=o.dataAdapter,u=[],(u=t.regions)&&0!==u.length){e.next=10;break}return console.warn("no regions supplied to comparative renderer"),e.abrupt("return",[]);case 10:return l=u.map((function(e){var t=v({},e);return t.start&&(t.start=Math.floor(t.start)),t.end&&(t.end=Math.floor(t.end)),t})),e.abrupt("return",i.getFeaturesInMultipleRegions(l,t).pipe((0,p.filter)((function(e){return c.featurePassesFilters(t,e)})),(0,p.toArray)()).toPromise());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),f}(m.default);t.default=b},2077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("BaseConnection",{name:{type:"string",defaultValue:"nameOfConnection",description:"a unique name for this connection"},assemblyNames:{type:"stringArray",defaultValue:[],description:"optional list of names of assemblies in this connection"}},{explicitlyTyped:!0,explicitIdentifier:"connectionId"});t.default=n},2078:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(33)),o=r(17);t.default=function(e){return o.types.model("Connection",{name:o.types.identifier,tracks:o.types.array(e.pluggableConfigSchemaType("track"))}).actions((function(e){return{afterAttach:function(){e.tracks.length||e.connect(e.configuration)},addTrackConf:function(t){var r=e.tracks.push(t);return e.tracks[r-1]},addTrackConfs:function(t){var r,n=(r=e.tracks).push.apply(r,(0,a.default)(t));return e.tracks.slice(n-1-t.length,n-1)},setTrackConfs:function(t){return e.tracks=t,e.tracks},clear:function(){}}}))}},2079:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),a=r(70),o=n.types.model("BaseView",{id:a.ElementId,displayName:n.types.maybe(n.types.string)}).volatile((function(){return{width:800}})).views((function(){return{menuItems:function(){return[]}}})).actions((function(e){return{setDisplayName:function(t){e.displayName=t},setWidth:function(t){e.width=t}}}));t.default=o},208:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.Cable=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z"}))},t.ContentCopy=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"}))},t.ContentCut=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z"}))},t.ContentPaste=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"}))},t.DNA=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z"}))},t.Indexing=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z"}))},t.Save=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}))},t.SaveAs=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z"}))},t.TrackSelector=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"}))};var a=n(r(124)),o=n(r(1))},2080:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDisplay=void 0;var a=n(r(10)),o=r(17),i=r(29),u=r(65),l=r(70);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=o.types.model("BaseDisplay",{id:l.ElementId,type:o.types.string,rpcDriverName:o.types.maybe(o.types.string)}).volatile((function(){return{rendererTypeName:"",error:void 0}})).views((function(e){return{get RenderingComponent(){return(0,o.getEnv)(e).pluginManager.getDisplayType(e.type).ReactComponent},get DisplayBlurb(){return null},get adapterConfig(){return(0,i.getConf)(this.parentTrack,"adapter")},get parentTrack(){for(var t=(0,o.getParent)(e);!t.configuration||!(0,i.getConf)(t,"trackId");){if((0,o.isRoot)(t))throw new Error("No parent track found for ".concat(e.type," ").concat(e.id));t=(0,o.getParent)(t)}return t},renderProps:function(){return s(s({},(0,u.getParentRenderProps)(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e})},get rendererType(){var t=(0,o.getEnv)(e).pluginManager.getRendererType(e.rendererTypeName);if(!t)throw new Error('renderer "'.concat(e.rendererTypeName,'" not found'));if(!t.ReactComponent)throw new Error("renderer ".concat(e.rendererTypeName," has no ReactComponent, it may not be completely implemented yet"));return t},get DisplayMessageComponent(){},trackMenuItems:function(){return[]},get viewMenuActions(){return[]},regionCannotBeRendered:function(){}}})).actions((function(e){return{setError:function(t){e.error=t},setRpcDriverName:function(t){e.rpcDriverName=t},reload:function(){}}}));t.BaseDisplay=f},2081:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.InternetAccount=void 0;var a=n(r(19)),o=n(r(10)),i=n(r(20)),u=r(17),l=r(29),c=r(97),s=r(70);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p="undefined"==typeof sessionStorage,m=u.types.model("InternetAccount",{id:s.ElementId,type:u.types.string}).views((function(e){return{get name(){return(0,l.getConf)(e,"name")},get description(){return(0,l.getConf)(e,"description")},get internetAccountId(){return(0,l.getConf)(e,"internetAccountId")},get authHeader(){return(0,l.getConf)(e,"authHeader")},get tokenType(){return(0,l.getConf)(e,"tokenType")},get domains(){return(0,l.getConf)(e,"domains")},get toggleContents(){return null},get SelectorComponent(){},get selectorLabel(){}}})).views((function(e){return{handlesLocation:function(t){return e.domains.some((function(e){return null==t?void 0:t.uri.includes(e)}))},get tokenKey(){return"".concat(e.internetAccountId,"-token")}}})).actions((function(e){return{getTokenFromUser:function(e,t){throw new Error("getTokenFromUser must be implemented by extending model")},storeToken:function(t){sessionStorage.setItem(e.tokenKey,t)},removeToken:function(){sessionStorage.removeItem(e.tokenKey)},retrieveToken:function(){return sessionStorage.getItem(e.tokenKey)},validateToken:function(e,t){return(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))()}}})).actions((function(e){var t=void 0;return{getToken:function(r){return(0,i.default)(a.default.mark((function n(){var o,i,u;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return",t);case 2:if(!(u=null==r||null===(o=r.internetAccountPreAuthorization)||void 0===o||null===(i=o.authInfo)||void 0===i?void 0:i.token)){n.next=6;break}return t=Promise.resolve(u),n.abrupt("return",t);case 6:if(!p){n.next=8;break}throw new Error("Did not get internet account pre-authorization info in worker");case 8:if(!(u=e.retrieveToken())){n.next=12;break}return t=Promise.resolve(u),n.abrupt("return",t);case 12:return t=new Promise((function(t,r){e.getTokenFromUser((function(r){e.storeToken(r),t(r)}),(function(t){e.removeToken(),r(t)}))})),n.abrupt("return",t);case 14:case"end":return n.stop()}}),n)})))()}}})).actions((function(e){return{addAuthHeaderToInit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=e.tokenType?"".concat(e.tokenType," ").concat(r):r,a=new Headers(t.headers||{});return a.append(e.authHeader,n),d(d({},t),{},{headers:a})},getPreAuthorizationInformation:function(t){return(0,i.default)(a.default.mark((function r(){var n,o;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getToken(t);case 2:return n=r.sent,r.prev=3,r.next=6,e.validateToken(n,t);case 6:o=r.sent,r.next=13;break;case 9:throw r.prev=9,r.t0=r.catch(3),e.removeToken(),r.t0;case 13:return r.abrupt("return",{internetAccountType:e.type,authInfo:{token:o,configuration:(0,l.getConf)(e)}});case 14:case"end":return r.stop()}}),r,null,[[3,9]])})))()}}})).actions((function(e){return{getFetcher:function(t){return function(){var r=(0,i.default)(a.default.mark((function r(n,o){var i,u;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getToken(t);case 2:return i=r.sent,u=e.addAuthHeaderToInit(o,i),r.abrupt("return",fetch(n,u));case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}}})).actions((function(e){return{openLocation:function(t){return new c.RemoteFileWithRangeCache(t.uri,{fetch:e.getFetcher(t)})}}}));t.InternetAccount=m},2082:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteFileWithRangeCache=void 0,t.clearCache=function(){P.reset()};var a=n(r(19)),o=n(r(10)),i=n(r(12)),u=n(r(20)),l=n(r(15)),c=n(r(16)),s=n(r(50)),f=n(r(25)),d=n(r(26)),p=n(r(24)),m=r(734),g=r(40),h=r(211);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O={};var P=new m.HttpRangeFetcher({fetch:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=O[e];if(!a)throw new Error("fetch not registered for ".concat(e));return a(e,t,r,n)},size:500*Math.pow(1024,2),chunkSize:15872,maxFetchSize:100*Math.pow(1024,2),minimumTTL:864e5});var E=function(e){(0,f.default)(o,e);var t,r,n=k(o);function o(){return(0,l.default)(this,o),n.apply(this,arguments)}return(0,c.default)(o,[{key:"fetch",value:(r=(0,u.default)(a.default.mark((function e(t,r){var n,u,l,c,f,d,m,g,h,v,y,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O[String(t)]||(O[String(t)]=this.fetchBinaryRange.bind(this)),(n=r&&r.headers)&&(n instanceof Headers?u=n.get("range"):Array.isArray(n)?(l=n.find((function(e){return"range"===(0,i.default)(e,1)[0]}))||[void 0,void 0],c=(0,i.default)(l,2),u=c[1]):u=n.range),!u){e.next=14;break}if(!(f=/bytes=(\d+)-(\d+)/.exec(u))){e.next=14;break}return d=(0,i.default)(f,3),m=d[1],g=d[2],h=parseInt(m,10),v=parseInt(g,10),e.next=11,P.getRange(t,h,v-h+1,{signal:r&&r.signal});case 11:return y=e.sent,b=y.headers,e.abrupt("return",new Response(y.buffer,{status:206,headers:b}));case 14:return e.abrupt("return",(0,s.default)((0,p.default)(o.prototype),"fetch",this).call(this,t,r));case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchBinaryRange",value:(t=(0,u.default)(a.default.mark((function e(t,r,n){var u,l,c,f,d,m,h,y,b,k,O,P,E,S,x=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=x.length>3&&void 0!==x[3]?x[3]:{},l=new Date,c=w(w({},u.headers),{},{range:"bytes=".concat(r,"-").concat(n)}),e.next=5,(0,s.default)((0,p.default)(o.prototype),"fetch",this).call(this,t,w(w({},u),{},{headers:c}));case 5:if(f=e.sent,d=new Date,206===f.status){e.next=11;break}throw m="HTTP ".concat(f.status," (").concat(f.statusText,") when fetching ").concat(t," bytes ").concat(r,"-").concat(n),h=" (should be 206 for range requests)",new Error("".concat(m).concat(200===f.status?h:""));case 11:y={},b=v(f.headers.entries());try{for(b.s();!(k=b.n()).done;)O=(0,i.default)(k.value,2),P=O[0],E=O[1],y[P]=E}catch(e){b.e(e)}finally{b.f()}return e.next=16,f.arrayBuffer();case 16:return S=e.sent,e.abrupt("return",{headers:y,requestDate:l,responseDate:d,buffer:g.Buffer.from(S)});case 18:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),o}(h.RemoteFile);t.RemoteFileWithRangeCache=E},2083:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInternetAccountConfig=void 0;var n=(0,r(29).ConfigurationSchema)("InternetAccount",{name:{description:"descriptive name of the internet account",type:"string",defaultValue:""},description:{description:"a description of the internet account",type:"string",defaultValue:""},authHeader:{description:"request header for credentials",type:"string",defaultValue:"Authorization"},tokenType:{description:"a custom name for a token to include in the header",type:"string",defaultValue:""},domains:{description:"array of valid domains the url can contain to use this account",type:"stringArray",defaultValue:[]}},{explicitIdentifier:"internetAccountId",explicitlyTyped:!0});t.BaseInternetAccountConfig=n},2084:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createBaseTrackModel=function(e,t,r){return u.types.model(t,{id:f.ElementId,type:u.types.literal(t),configuration:(0,l.ConfigurationReference)(r),displays:u.types.array(e.pluggableMstType("display","stateModel"))}).views((function(e){return{get rpcSessionId(){return e.configuration.trackId},get name(){return(0,l.getConf)(e,"name")},get textSearchAdapter(){return(0,l.getConf)(e,"textSearchAdapter")},get adapterType(){var t=(0,l.getConf)(e,"adapter"),r=(0,u.getEnv)(e).pluginManager;if(!t)throw new Error("no adapter configuration provided for ".concat(e.type));var n=r.getAdapterType(t.type);if(!n)throw new Error("unknown adapter type ".concat(t.type));return n},get viewMenuActions(){var t=[];return e.displays.forEach((function(e){t.push.apply(t,(0,o.default)(e.viewMenuActions))})),t},get canConfigure(){var t=(0,c.getSession)(e);return(0,s.isSessionModelWithConfigEditing)(t)&&(t.adminMode||t.sessionTracks.find((function(t){return t.trackId===e.configuration.trackId})))}}})).actions((function(t){return{activateConfigurationUI:function(){var e=(0,c.getSession)(t),r=(0,c.getContainingView)(t);if((0,s.isSessionModelWithConfigEditing)(e)){var n=e.editTrackConfiguration(t.configuration);n&&n!==t.configuration&&(r.hideTrack(t.configuration),r.showTrack(n))}},showDisplay:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.pluggableConfigSchemaType("display"),o=(0,u.resolveIdentifier)(a,(0,u.getRoot)(t),r),i=e.getDisplayType(o.type);if(!i)throw new Error("unknown display type ".concat(o.type));var l=i.stateModel.create(p(p({},n),{},{type:o.type,configuration:o}));t.displays.push(l)},hideDisplay:function(r){var n=e.pluggableConfigSchemaType("display"),a=(0,u.resolveIdentifier)(n,(0,u.getRoot)(t),r),o=t.displays.filter((function(e){return e.configuration===a}));return(0,i.transaction)((function(){return o.forEach((function(e){return t.displays.remove(e)}))})),o.length},replaceDisplay:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.displays.findIndex((function(e){return e.configuration.displayId===r}));if(-1===o)throw new Error("could not find display id ".concat(r," to replace"));var i=e.pluggableConfigSchemaType("display"),l=(0,u.resolveIdentifier)(i,(0,u.getRoot)(t),n),c=e.getDisplayType(l.type);if(!c)throw new Error("unknown display type ".concat(l.type));t.displays.splice(o,1,p(p({},a),{},{type:l.type,configuration:l}))}}})).views((function(t){return{trackMenuItems:function(){var r=[];t.displays.forEach((function(e){r.push.apply(r,(0,o.default)(e.trackMenuItems()))}));var n=[],a=(0,c.getContainingView)(t),i=e.getViewType(a.type).displayTypes.map((function(e){return e.name})),u=t.configuration.displays.filter((function(e){return i.includes(e.type)})),l=t.displays[0].configuration.displayId;return u.length>1&&(n.push({type:"divider"},{type:"subHeader",label:"Display types"}),u.forEach((function(e){n.push({type:"radio",label:e.type,checked:e.displayId===l,onClick:function(){return t.replaceDisplay(l,e.displayId)}})}))),[].concat(r,n)}}}))};var a=n(r(10)),o=n(r(33)),i=r(43),u=r(17),l=r(29),c=r(32),s=r(127),f=r(70);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2085:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createBaseTrackConfig=function(e){return(0,i.ConfigurationSchema)("BaseTrack",{name:{description:"descriptive name of the track",type:"string",defaultValue:"Track"},assemblyNames:{description:"name of the assembly (or assemblies) track belongs to",type:"stringArray",defaultValue:["assemblyName"]},description:{description:"a description of the track",type:"string",defaultValue:""},category:{description:"the category and sub-categories of a track",type:"stringArray",defaultValue:[]},metadata:{type:"frozen",description:"anything to add about this track",defaultValue:{}},adapter:e.pluggableConfigSchemaType("adapter"),textSearching:(0,i.ConfigurationSchema)("textSearching",{indexingAttributes:{type:"stringArray",description:"list of which feature attributes to index for text searching",defaultValue:["Name","ID"]},indexingFeatureTypesToExclude:{type:"stringArray",description:"list of feature types to exclude in text search index",defaultValue:["CDS","exon"]},textSearchAdapter:e.pluggableConfigSchemaType("text search adapter")}),displays:o.types.array(e.pluggableConfigSchemaType("display")),formatDetails:(0,i.ConfigurationSchema)("FormatDetails",{feature:{type:"frozen",description:"adds extra fields to the feature details",defaultValue:{},contextVariable:["feature"]},subfeatures:{type:"frozen",description:"adds extra fields to the subfeatures of a feature",defaultValue:{},contextVariable:["feature"]},depth:{type:"number",defaultValue:2,description:"depth to iterate on subfeatures"}})},{preProcessSnapshot:function(t){var r=JSON.parse(JSON.stringify(t)),n=new Set,a=r.displays,o=void 0===a?[]:a;"placeholderId"!==r.trackId&&(o.forEach((function(e){return e&&n.add(e.type)})),e.getTrackType(r.type).displayTypes.forEach((function(e){n.has(e.name)||o.push({displayId:"".concat(r.trackId,"-").concat(e.name),type:e.name})})));return l(l({},r),{},{displays:o})},explicitIdentifier:"trackId",explicitlyTyped:!0,actions:function(e){return{addDisplayConf:function(t){var r=t.type;if(!r)throw new Error("unknown display type ".concat(r));var n=e.displays.find((function(e){return e&&e.displayId===t.displayId}));if(n)return n;var a=e.displays.push(t);return e.displays[a-1]}}}})};var a=n(r(10)),o=r(17),i=r(29);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2086:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNamedColor=function(e){return!!n[e]},t.namedColorToHex=function(e){return n[e]};var n={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}},2087:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={GranularRectLayout:!0,MultiLayout:!0,PrecomputedLayout:!0,PrecomputedMultiLayout:!0,SceneGraph:!0};Object.defineProperty(t,"GranularRectLayout",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"MultiLayout",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"PrecomputedLayout",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PrecomputedMultiLayout",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"SceneGraph",{enumerable:!0,get:function(){return s.default}});var o=r(2088);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(r(927)),u=n(r(521)),l=n(r(522)),c=n(r(2089)),s=n(r(2090))},2088:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2089:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(25)),i=n(r(26)),u=n(r(24)),l=n(r(16)),c=n(r(15)),s=n(r(521)),f=n(r(522));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var p=(0,l.default)((function e(){throw(0,c.default)(this,e),new Error("invalid layout name")})),m=function(e){(0,o.default)(r,e);var t=d(r);function r(e){var n;return(0,c.default)(this,r),n=t.call(this,p),Object.entries(e).forEach((function(e){var t=(0,a.default)(e,2),r=t[0],o=t[1];n.subLayouts.set(r,new f.default(o))})),n}return(0,l.default)(r)}(s.default);t.default=m},2090:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(10)),u=r(32);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(t,r,n,o,l,c){if((0,a.default)(this,e),this.name=t,this.left=r,this.top=n,this.width=o,this.height=l,this.data=c,(0,i.default)(this,"children",void 0),(0,i.default)(this,"absoluteCache",void 0),(0,i.default)(this,"parent",void 0),u.inDevelopment&&("string"!=typeof t||"number"!=typeof r||Number.isNaN(r)||"number"!=typeof n||Number.isNaN(n)||"number"!=typeof o||Number.isNaN(o)||"number"!=typeof l||Number.isNaN(l)))throw new TypeError("invalid SceneGraph arguments");this.children=new Map,this.absoluteCache={dirty:!0}}return(0,o.default)(e,[{key:"addChild",value:function(t,r,n,a,o,i){var u;if(!((u=t instanceof e?t:new e(t,r,n,a,o,i))instanceof e))throw new TypeError("argument to addChild must be an array or a SceneGraph");if(this.children.has(u.name))throw new Error('child named "'.concat(u.name,'" already exists'));u.parent=this;var l=u.absolute,c=l.left,s=l.right,f=l.top,d=l.bottom;return void 0!==c&&void 0!==s&&void 0!==f&&void 0!==d&&(this.expand(c,s,f,d),this.children.set(u.name,u)),u}},{key:"getSubRecord",value:function(e){return this.children.get(e)}},{key:"expand",value:function(e,t,r,n){var a=this.absolute,o=a.left,i=a.right,u=a.top,l=a.bottom;if(void 0!==o&&e<o){var c=o-e;this.width+=c,this.left-=c}if(void 0!==i&&t>i&&(this.width+=t-i),void 0!==u&&r<u){var s=u-r;this.height+=s,this.top-=s}void 0!==l&&n>l&&(this.height+=n-l),this.parent&&this.parent.expand(e,t,r,n),this.absoluteCache.dirty=!0}},{key:"bottom",get:function(){return this.top+this.height}},{key:"right",get:function(){return this.left+this.width}},{key:"walkParents",value:function(e){this.parent&&(e(this.parent),this.parent.walkParents(e))}},{key:"walkChildren",value:function(e){var t,r=l(this.children.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;e(n),n.walkChildren(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"absolute",get:function(){if(this.absoluteCache.dirty){var e=0,t=0;this.walkParents((function(r){e+=r.left,t+=r.top})),this.absoluteCache={dirty:!1,left:this.left+e,right:this.right+e,top:this.top+t,bottom:this.bottom+t,width:this.width,height:this.height}}return this.absoluteCache}},{key:"move",value:function(e,t){this.left+=e,this.top+=t,this.absoluteCache.dirty=!0,this.walkChildren((function(e){e.absoluteCache.dirty=!0}));var r=this.absolute,n=r.left,a=r.right,o=r.top,i=r.bottom;void 0!==n&&void 0!==a&&void 0!==o&&void 0!==i&&this.expand(n,a,o,i)}}]),e}();t.default=s},2091:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"amber",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"blue",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"blueGrey",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"brown",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"cyan",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"deepOrange",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"deepPurple",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"green",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"grey",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"indigo",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"lightBlue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"lightGreen",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"lime",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"orange",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"pink",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"purple",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"red",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"teal",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"yellow",{enumerable:!0,get:function(){return h.default}});var a=n(r(413)),o=n(r(412)),i=n(r(738)),u=n(r(739)),l=n(r(411)),c=n(r(415)),s=n(r(740)),f=n(r(741)),d=n(r(742)),p=n(r(416)),m=n(r(743)),g=n(r(744)),h=n(r(745)),v=n(r(746)),y=n(r(414)),b=n(r(747)),w=n(r(748)),k=n(r(410)),O=n(r(749))},2092:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=["mobx","mobx-state-tree","react","react-dom","mobx-react","prop-types","@material-ui/core","@material-ui/core/SvgIcon","@material-ui/core/utils","@material-ui/lab","@mui/x-data-grid","@jbrowse/core/Plugin","@jbrowse/core/pluggableElementTypes","@jbrowse/core/pluggableElementTypes/ViewType","@jbrowse/core/pluggableElementTypes/AdapterType","@jbrowse/core/pluggableElementTypes/DisplayType","@jbrowse/core/pluggableElementTypes/TrackType","@jbrowse/core/pluggableElementTypes/WidgetType","@jbrowse/core/pluggableElementTypes/models","@jbrowse/core/pluggableElementTypes/renderers/ServerSideRendererType","@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType","@jbrowse/core/pluggableElementTypes/renderers/BoxRendererType","@jbrowse/core/pluggableElementTypes/renderers/FeatureRendererType","@jbrowse/core/pluggableElementTypes/renderers/RendererType","@jbrowse/core/configuration","@jbrowse/core/util/types/mst","@jbrowse/core/ui","@jbrowse/core/util","@jbrowse/core/util/color","@jbrowse/core/util/layouts","@jbrowse/core/util/tracks","@jbrowse/core/util/Base1DViewModel","@jbrowse/core/util/io","@jbrowse/core/util/mst-reflection","@jbrowse/core/util/rxjs","@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail","@jbrowse/core/data_adapters/BaseAdapter"]},2093:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(15)),i=n(r(16)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(10)),d=r(1),p=r(931),m=n(r(114)),g=w(r(2094)),h=n(r(140)),v=n(r(163)),y=r(2095);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var O=function(e){(0,l.default)(n,e);var t=k(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","CorePlugin"),e}return(0,i.default)(n,[{key:"install",value:function(e){Object.values(g).forEach((function(t){e.addRpcMethod((function(){return new t(e)}))})),e.addAdapterType((function(){return new h.default({name:"CytobandAdapter",configSchema:y.configSchema,AdapterClass:y.DataAdapter})})),e.addWidgetType((function(){return new v.default({name:"BaseFeatureWidget",heading:"Feature details",configSchema:p.configSchema,stateModel:(0,p.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return w(r(361))}))}))})}))}}]),n}(m.default);t.default=O},2094:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CoreRender=t.CoreGetRefNames=t.CoreGetMetadata=t.CoreGetFileInfo=t.CoreGetFeatures=t.CoreGetFeatureDetails=t.CoreFreeResources=t.CoreEstimateRegionStats=void 0;var a=n(r(19)),o=n(r(50)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(51),g=r(363),h=n(r(360)),v=n(r(277)),y=r(89),b=r(32),w=n(r(95));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var E=function(e){(0,s.default)(n,e);var t,r=P(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,c.default)(e),"name","CoreGetRefNames"),e}return(0,l.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,g.getAdapter)(this.pluginManager,o,i);case 6:if(u=e.sent,!((l=u.dataAdapter)instanceof y.BaseFeatureDataAdapter)){e.next=10;break}return e.abrupt("return",l.getRefNames(n));case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(h.default);t.CoreGetRefNames=E;var S=function(e){(0,s.default)(n,e);var t,r=P(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,c.default)(e),"name","CoreGetInfo"),e}return(0,l.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,g.getAdapter)(this.pluginManager,o,i);case 6:return u=e.sent,l=u.dataAdapter,e.abrupt("return",(0,y.isFeatureAdapter)(l)?l.getHeader(n):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(h.default);t.CoreGetFileInfo=S;var x=function(e){(0,s.default)(n,e);var t,r=P(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,c.default)(e),"name","CoreGetMetadata"),e}return(0,l.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,g.getAdapter)(this.pluginManager,o,i);case 6:return u=e.sent,l=u.dataAdapter,e.abrupt("return",(0,y.isFeatureAdapter)(l)?l.getMetadata(n):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(h.default);t.CoreGetMetadata=x;var C=function(e){(0,s.default)(h,e);var t,r,n,f=P(h);function h(){var e;(0,u.default)(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=f.call.apply(f,[this].concat(r)),(0,p.default)((0,c.default)(e),"name","CoreGetFeatures"),e}return(0,l.default)(h,[{key:"deserializeReturn",value:(n=(0,i.default)(a.default.mark((function e(t,r,n){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)((0,d.default)(h.prototype),"deserializeReturn",this).call(this,t,r,n);case 2:return i=e.sent,e.abrupt("return",i.map((function(e){return new w.default(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"serializeArguments",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,i,u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=null===(n=this.pluginManager.rootModel)||void 0===n||null===(i=n.session)||void 0===i?void 0:i.assemblyManager)){e.next=7;break}return e.next=4,(0,b.renameRegionsIfNeeded)(u,t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:return l=e.t0,e.next=11,(0,o.default)((0,d.default)(h.prototype),"serializeArguments",this).call(this,l,r);case 11:return c=e.sent,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l,c,s,f,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.signal,i=n.sessionId,u=n.adapterConfig,l=n.regions,c=n.opts,e.next=6,(0,g.getAdapter)(this.pluginManager,i,u);case 6:if(s=e.sent,f=s.dataAdapter,(0,y.isFeatureAdapter)(f)){e.next=10;break}return e.abrupt("return",[]);case 10:return d=f.getFeaturesInMultipleRegions(l,O(O({},c),{},{signal:o})),e.next=13,d.pipe((0,m.toArray)()).toPromise();case 13:return p=e.sent,e.abrupt("return",p.map((function(e){return e.toJSON()})));case 15:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),h}(h.default);t.CoreGetFeatures=C;var j=function(e){(0,s.default)(o,e);var t,r,n=P(o);function o(){var e;(0,u.default)(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,c.default)(e),"name","CoreFreeResources"),e}return(0,l.default)(o,[{key:"execute",value:(r=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,r+=(0,g.freeAdapterResources)(t),this.pluginManager.getRendererTypes().forEach((function(e){var t=e.freeResources();t&&(r+=t)})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"serializeArguments",value:(t=(0,i.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),o}(h.default);t.CoreFreeResources=j;var M=function(e){(0,s.default)(f,e);var t,r,n=P(f);function f(){var e;(0,u.default)(this,f);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,c.default)(e),"name","CoreEstimateRegionStats"),e}return(0,l.default)(f,[{key:"serializeArguments",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null===(n=this.pluginManager.rootModel)||void 0===n||null===(i=n.session)||void 0===i?void 0:i.assemblyManager){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,(0,b.renameRegionsIfNeeded)(u,O(O({},t),{},{filters:t.filters&&t.filters.toJSON().filters}));case 5:return l=e.sent,e.abrupt("return",(0,o.default)((0,d.default)(f.prototype),"serializeArguments",this).call(this,l,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.adapterConfig,i=n.sessionId,u=n.regions,e.next=6,(0,g.getAdapter)(this.pluginManager,i,o);case 6:if(l=e.sent,!((c=l.dataAdapter)instanceof y.BaseFeatureDataAdapter)){e.next=10;break}return e.abrupt("return",c.estimateRegionsStats(u,n));case 10:throw new Error("Data adapter not found");case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(h.default);t.CoreEstimateRegionStats=M;var T=function(e){(0,s.default)(m,e);var t,r,n,f=P(m);function m(){var e;(0,u.default)(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=f.call.apply(f,[this].concat(r)),(0,p.default)((0,c.default)(e),"name","CoreRender"),e}return(0,l.default)(m,[{key:"serializeArguments",value:(n=(0,i.default)(a.default.mark((function e(t,r){var n,i,u,l,c,s,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=null===(n=this.pluginManager.rootModel)||void 0===n||null===(i=n.session)||void 0===i?void 0:i.assemblyManager)){e.next=7;break}return e.next=4,(0,b.renameRegionsIfNeeded)(u,t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:return l=e.t0,e.next=11,(0,o.default)((0,d.default)(m.prototype),"serializeArguments",this).call(this,l,r);case 11:if(c=e.sent,"MainThreadRpcDriver"!==r){e.next=14;break}return e.abrupt("return",c);case 14:return s=t.rendererType,f=D(s,this.pluginManager.getRendererType(s)),e.abrupt("return",f.serializeArgsInClient(c));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"execute",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l,c,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,"MainThreadRpcDriver"===r){e.next=5;break}return e.next=4,this.deserializeArguments(t,r);case 4:n=e.sent;case 5:if(i=(o=n).sessionId,u=o.rendererType,l=o.signal,i){e.next=8;break}throw new Error("must pass a unique session id");case 8:if((0,b.checkAbortSignal)(l),c=D(u,this.pluginManager.getRendererType(u)),"MainThreadRpcDriver"!==r){e.next=16;break}return e.next=13,c.render(n);case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,c.renderInWorker(n);case 18:e.t0=e.sent;case 19:return s=e.t0,(0,b.checkAbortSignal)(l),e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deserializeReturn",value:(t=(0,i.default)(a.default.mark((function e(t,r,n){var i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)((0,d.default)(m.prototype),"deserializeReturn",this).call(this,t,r,n);case 2:if(i=e.sent,"MainThreadRpcDriver"!==n){e.next=5;break}return e.abrupt("return",i);case 5:return u=r.rendererType,l=D(u,this.pluginManager.getRendererType(u)),e.abrupt("return",l.deserializeResultsInClient(i,r));case 8:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),m}(h.default);t.CoreRender=T;var R=function(e){(0,s.default)(f,e);var t,r,n=P(f);function f(){var e;(0,u.default)(this,f);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,c.default)(e),"name","CoreGetFeatureDetails"),e}return(0,l.default)(f,[{key:"serializeArguments",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,i,u,l,c,s,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=null===(n=this.pluginManager.rootModel)||void 0===n||null===(i=n.session)||void 0===i?void 0:i.assemblyManager)){e.next=7;break}return e.next=4,(0,b.renameRegionsIfNeeded)(u,t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:return l=e.t0,e.next=11,(0,o.default)((0,d.default)(f.prototype),"serializeArguments",this).call(this,l,r);case 11:if(c=e.sent,"MainThreadRpcDriver"!==r){e.next=14;break}return e.abrupt("return",c);case 14:return s=t.rendererType,p=D(s,this.pluginManager.getRendererType(s)),e.abrupt("return",p.serializeArgsInClient(c));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,l,c,s,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,"MainThreadRpcDriver"===r){e.next=5;break}return e.next=4,this.deserializeArguments(t,r);case 4:n=e.sent;case 5:return i=(o=n).rendererType,u=o.featureId,l=D(i,this.pluginManager.getRendererType(i)),c=l.sessions[(0,b.getLayoutId)(t)],s=c.cachedLayout.layout,f=s.getDataByID(u),e.abrupt("return",{feature:f.toJSON()});case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(h.default);function D(e,t){if(!t)throw new Error('renderer "'.concat(e,'" not found'));if(!t.ReactComponent)throw new Error("renderer ".concat(e," has no ReactComponent, it may not be completely implemented yet"));if(!(t instanceof v.default))throw new Error("CoreRender requires a renderer that is a subclass of ServerSideRendererType");return t}t.CoreGetFeatureDetails=R},2095:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=t.DataAdapter=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(95)),p=r(29),m=r(97),g=r(89);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var v=(0,p.ConfigurationSchema)("CytobandAdapter",{cytobandLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/cytoband.txt.gz"}}},{explicitlyTyped:!0});t.configSchema=v;var y=function(e){(0,c.default)(n,e);var t,r=h(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,l.default)(n,[{key:"getData",value:(t=(0,i.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=(0,p.readConfObject)(this.config,"cytobandLocation")).uri&&"/path/to/cytoband.txt.gz"!==t.uri){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,(0,m.openLocation)(t).readFile("utf8");case 5:return r=e.sent,e.abrupt("return",r.split("\n").filter((function(e){return!!e.trim()})).map((function(e){var t=e.split("\t"),r=(0,o.default)(t,5),n=r[0],a=r[1],i=r[2],u=r[3],l=r[4];return new d.default({uniqueId:e,refName:n,start:+a,end:+i,name:u,type:l})})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(g.BaseAdapter);t.DataAdapter=y},2096:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),a=r(29),o=(0,a.ConfigurationSchema)("BaseRpcDriver",{workerCount:{type:"number",description:"The number of workers to use. If 0 (the default) JBrowse will decide how many workers to use.",defaultValue:0}},{explicitlyTyped:!0}),i=(0,a.ConfigurationSchema)("MainThreadRpcDriver",{},{explicitlyTyped:!0,baseConfiguration:o}),u=(0,a.ConfigurationSchema)("WebWorkerRpcDriver",{},{explicitlyTyped:!0,baseConfiguration:o}),l=(0,a.ConfigurationSchema)("RpcOptions",{defaultDriver:{type:"string",description:"the RPC driver to use for tracks and tasks that are not configured to use a specific RPC backend",defaultValue:"MainThreadRpcDriver"},drivers:n.types.optional(n.types.map(n.types.union(i,u)),{MainThreadRpcDriver:{type:"MainThreadRpcDriver"}})},{actions:function(e){return{addDriverConfig:function(t,r){e.drivers.set(t,r)}}}});t.default=l},2097:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(30)),i=n(r(10)),u=n(r(20)),l=n(r(15)),c=n(r(16)),s=n(r(50)),f=n(r(25)),d=n(r(26)),p=n(r(24)),m=n(r(751)),g=n(r(298)),h=n(r(933));function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var w=function(e){(0,f.default)(n,e);var t,r=b(n);function n(){return(0,l.default)(this,n),r.apply(this,arguments)}return(0,c.default)(n,[{key:"destroy",value:function(){this.workers[0].terminate()}},{key:"call",value:(t=(0,u.default)(a.default.mark((function e(t,r,o){var i,u,l,c,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.statusCallback,u=o.rpcDriverClassName,l="message-".concat(g.default.generate()),c=function(e){i&&i(e)},this.on(l,c),e.next=6,(0,s.default)((0,p.default)(n.prototype),"call",this).call(this,t,y(y({},r),{},{channel:l,rpcDriverClassName:u}),o);case 6:return f=e.sent,this.off(l,c),e.abrupt("return",f);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),n}(m.default.Client),k=function(e){(0,f.default)(n,e);var t,r=b(n);function n(e,t){var a;return(0,l.default)(this,n),(a=r.call(this,e)).workerBootConfiguration=t,(0,i.default)((0,o.default)(a),"name","WebWorkerRpcDriver"),(0,i.default)((0,o.default)(a),"makeWorkerInstance",void 0),a.makeWorkerInstance=e.makeWorkerInstance,a}return(0,c.default)(n,[{key:"makeWorker",value:(t=(0,u.default)(a.default.mark((function e(){var t,r,n,o=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.makeWorkerInstance(),r=new w({workers:[t]}),n=new Promise((function(e,t){r.workers[0].onmessage=function(n){"ready"===n.data?e(r):"readyForConfig"===n.data?r.workers[0].postMessage(o.workerBootConfiguration):t()}})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(h.default);t.default=k},2098:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(30)),i=n(r(25)),u=n(r(26)),l=n(r(24)),c=n(r(10)),s=n(r(20)),f=n(r(15)),d=n(r(16)),p=n(r(933));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var g=function(){function e(){(0,f.default)(this,e)}var t;return(0,d.default)(e,[{key:"destroy",value:function(){}},{key:"call",value:(t=(0,s.default)(a.default.mark((function e(t,r){var n=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>2&&void 0!==n[2]&&n[2],e.abrupt("return",void 0);case 2:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),h=function(e){(0,i.default)(n,e);var t,r=m(n);function n(e){var t;return(0,f.default)(this,n),t=r.call(this,e),(0,c.default)((0,o.default)(t),"name","MainThreadRpcDriver"),(0,c.default)((0,o.default)(t),"makeWorker",void 0),t.makeWorker=(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new g);case 1:case"end":return e.stop()}}),e)}))),t}return(0,d.default)(n,[{key:"call",value:(t=(0,s.default)(a.default.mark((function e(t,r,n,o){var i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new TypeError("sessionId is required");case 2:return i=t.getRpcMethodType(n),e.next=5,i.serializeArguments(o,this.name);case 5:return u=e.sent,e.next=8,i.execute(u,this.name);case 8:return l=e.sent,e.abrupt("return",i.deserializeReturn(l,o,this.name));case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),n}(p.default);t.default=h},2099:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(33)),u=n(r(15)),l=n(r(16)),c=n(r(10)),s=n(r(519)),f=r(29),d=function(){function e(t){(0,u.default)(this,e),this.pluginManager=t,(0,c.default)(this,"adapterCache",void 0),this.adapterCache=new s.default({maxSize:15})}var t;return(0,l.default)(e,[{key:"loadTextSearchAdapters",value:function(e){var t=this;return this.relevantAdapters(e).map((function(e){var r=(0,f.readConfObject)(e,"textSearchAdapterId");if(t.adapterCache.has(r))return t.adapterCache.get(r);var n=new(0,t.pluginManager.getTextSearchAdapterType(e.type).AdapterClass)(e,void 0,t.pluginManager);return t.adapterCache.set(r,n),n}))}},{key:"relevantAdapters",value:function(e){var t,r=null===(t=this.pluginManager.rootModel)||void 0===t?void 0:t.jbrowse,n=r.aggregateTextSearchAdapters,a=r.tracks,o=e.assemblyName;return[].concat((0,i.default)(this.getAdaptersWithAssembly(o,n)),(0,i.default)(this.getTrackAdaptersWithAssembly(o,a)))}},{key:"getAdaptersWithAssembly",value:function(e,t){return t.filter((function(t){var r;return null===(r=(0,f.readConfObject)(t,"assemblyNames"))||void 0===r?void 0:r.includes(e)}))}},{key:"getTrackAdaptersWithAssembly",value:function(e,t){return t.filter((function(t){var r;return null===(r=(0,f.readConfObject)(t,["textSearching","textSearchAdapter","assemblyNames"]))||void 0===r?void 0:r.includes(e)})).map((function(e){return e.textSearching.textSearchAdapter}))}},{key:"search",value:(t=(0,o.default)(a.default.mark((function e(t,r,n){var o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.loadTextSearchAdapters(r),e.next=3,Promise.all(o.map((function(e){return e.searchIndex(t)})));case 3:return i=e.sent,e.abrupt("return",this.sortResults(i.flat(),n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"sortResults",value:function(e,t){return t(e.sort((function(e,t){return-t.getLabel().localeCompare(e.getLabel())}))).sort((function(e,t){return e.getScore()-t.getScore()}))}}]),e}();t.default=d},2100:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(524)),o=n(r(2117)),i=n(r(526)),u=n(r(2165)),l=n(r(2218)),c=n(r(2235)),s=[a.default,o.default,i.default,u.default,l.default,c.default];t.default=s},2101:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=t.HeadingComponent=void 0,Object.defineProperty(t,"stateModelFactory",{enumerable:!0,get:function(){return u.default}});var a=r(14),o=r(17),i=r(29),u=n(r(2102)),l=(0,i.ConfigurationSchema)("ConfigurationEditorWidget",{});t.configSchema=l;var c=(0,a.observer)((function(e){var t=e.model;if(null!=t&&t.target){if(t.target.type)return"".concat(t.target.type," settings");if((0,o.isStateTreeNode)(t.target)){var r=(0,o.getType)(t.target);if(null!=r&&r.name)return"".concat(r.name.replace("ConfigurationSchema","")," settings")}}return"Settings"}));t.HeadingComponent=c},2102:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),a=r(70);t.default=function(e){return n.types.model("ConfigurationEditorWidget",{id:a.ElementId,type:n.types.literal("ConfigurationEditorWidget"),target:n.types.safeReference(e.pluggableConfigSchemaType("track"))}).actions((function(e){return{setTarget:function(t){e.target=t}}}))}},2103:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AdapterClass",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"RegionsAdapterClass",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SequenceAdapterClass",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return u.configSchema}}),Object.defineProperty(t,"regionsConfigSchema",{enumerable:!0,get:function(){return u.regionsConfigSchema}}),Object.defineProperty(t,"sequenceConfigSchema",{enumerable:!0,get:function(){return u.sequenceConfigSchema}});var a=n(r(525)),o=n(r(2104)),i=n(r(2105)),u=r(2106)},2104:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=r(29),h=n(r(525));function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var w=function(e){(0,s.default)(n,e);var t,r=b(n);function n(e,t,a){var o;(0,u.default)(this,n),o=r.call(this,e,t,a),(0,p.default)((0,c.default)(o),"features",void 0);var i=(0,g.readConfObject)(e,"features");return o.features=h.default.makeFeatures(i||[]),o}return(0,l.default)(n,[{key:"getRegions",value:(t=(0,i.default)(a.default.mark((function e(){var t,r,n,i,u,l,c,s,f,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=v(this.features);try{for(r.s();!(n=r.n()).done;){i=(0,o.default)(n.value,2),u=i[0],l=i[1],c=void 0,s=v(l);try{for(s.s();!(f=s.n()).done;)d=f.value,c&&c.end>=d.get("start")&&c.start<=d.get("end")?c.end=d.get("end"):(c&&t.push(c),c={refName:u,start:d.get("start"),end:d.get("end")})}catch(e){s.e(e)}finally{s.f()}c&&t.push(c)}}catch(e){r.e(e)}finally{r.f()}return t.sort((function(e,t){return e.refName.localeCompare(t.refName)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(m.BaseAdapter);t.default=w},2105:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(10)),u=n(r(20)),l=n(r(15)),c=n(r(16)),s=n(r(50)),f=n(r(25)),d=n(r(26)),p=n(r(24)),m=n(r(95)),g=r(115),h=r(51);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O=function(e){(0,f.default)(n,e);var t,r=k(n);function n(){return(0,l.default)(this,n),r.apply(this,arguments)}return(0,c.default)(n,[{key:"getFeatures",value:function(e){var t=this,r=(0,s.default)((0,p.default)(n.prototype),"getFeatures",this);return(0,g.ObservableCreate)(function(){var n=(0,u.default)(a.default.mark((function n(o){var i,u;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.call(t,e).pipe((0,h.toArray)()).toPromise();case 2:i=n.sent,u=i[0],o.next(new m.default(w(w({},u.toJSON()),{},{uniqueId:"".concat(u.id(),":").concat(e.start,"-").concat(e.end),end:e.end,start:e.start,seq:u.get("seq").slice(Math.max(e.start-u.get("start"),0),Math.max(e.end-u.get("start"),0))}))),o.complete();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"getRegions",value:(t=(0,u.default)(a.default.mark((function e(){var t,r,n,i,u,l,c,s,f,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=v(this.features);try{for(r.s();!(n=r.n()).done;){i=(0,o.default)(n.value,2),u=i[0],l=i[1],c=void 0,s=v(l);try{for(s.s();!(f=s.n()).done;)d=f.value,c&&c.end>=d.get("start")&&c.start<=d.get("end")?c.end=d.get("end"):(c&&t.push(c),c={refName:u,start:d.get("start"),end:d.get("end")})}catch(e){s.e(e)}finally{s.f()}c&&t.push(c)}}catch(e){r.e(e)}finally{r.f()}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(n(r(525)).default);t.default=O},2106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequenceConfigSchema=t.regionsConfigSchema=t.configSchema=void 0;var n=r(29),a=(0,n.ConfigurationSchema)("FromConfigAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"});t.configSchema=a;var o=(0,n.ConfigurationSchema)("FromConfigRegionsAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"});t.regionsConfigSchema=o;var i=(0,n.ConfigurationSchema)("FromConfigSequenceAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"});t.sequenceConfigSchema=i},2107:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AdapterClass",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return o.default}});var a=n(r(2108)),o=n(r(2109))},2108:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=r(89),p=r(97),m=r(29);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,c.default)(s,e);var t,r,n=g(s);function s(){return(0,u.default)(this,s),n.apply(this,arguments)}return(0,l.default)(s,[{key:"getRefNameAliases",value:(r=(0,i.default)(a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=(0,m.readConfObject)(this.config,"location")).uri&&"/path/to/my/aliases.txt"!==t.uri){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,(0,p.openLocation)(t).readFile("utf8");case 5:return r=e.sent,n=(0,m.readConfObject)(this.config,"refNameColumn"),e.abrupt("return",r.trim().split("\n").filter((function(e){return!!e&&!e.startsWith("#")})).map((function(e){var t=e.split("\t"),r=t.splice(n,1);return{refName:(0,o.default)(r,1)[0],aliases:t.filter((function(e){return!!e.trim()}))}})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"freeResources",value:(t=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),s}(d.BaseAdapter);t.default=h},2109:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("RefNameAliasAdapter",{location:{type:"fileLocation",defaultValue:{uri:"/path/to/my/aliases.txt",locationType:"UriLocation"}},refNameColumn:{type:"number",defaultValue:0}},{explicitlyTyped:!0});t.default=n},2110:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.contents,r=e.setContents,n=g(),a=(0,f.useTheme)();return(0,o.useEffect)((function(){u.Light.registerLanguage("json",l.default)}),[]),o.default.createElement(i.default,{className:n.callbackEditor,value:t,onValueChange:r,highlight:function(e){return o.default.createElement(u.Light,{language:"json",style:"dark"===a.palette.type?c.default:s.default,className:n.syntaxHighlighter,customStyle:{background:"none",padding:0}},e)},padding:10,style:{}})};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),i=n(r(935)),u=r(952),l=n(r(858)),c=n(r(859)),s=n(r(860)),f=r(23);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p="12px",m='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',g=(0,f.makeStyles)((function(e){return{callbackEditor:{fontFamily:m,fontSize:p,background:e.palette.background.default,overflowX:"auto",marginTop:"16px",border:"1px solid rgba(0,0,0,0.42)"},syntaxHighlighter:{margin:0,fontFamily:m,fontSize:p}}}))},2111:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(33)),i=n(r(36)),u=n(r(1)),l=r(29),c=r(23),s=r(14),f=r(17),d=r(861),p=n(r(136)),m=n(r(936)),g=n(r(2116)),h=(0,c.makeStyles)((function(e){return{expandIcon:{color:"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:"1px solid ".concat(e.palette.text.primary)}}})),v=(0,s.observer)((function(e){var t,r=h(),n=e.slotName,a=e.slotSchema,s=e.schema,f=e.slot,b=void 0===f?s[n]:f,w=e.path,k=void 0===w?[]:w;if((0,l.isConfigurationSchemaType)(a)){if(b.length)return b.map((function(t,r){var a="".concat((0,d.singular)(n)," ").concat(r+1);return u.default.createElement(v,(0,i.default)({},e,{key:a,slot:t,slotName:a}))}));var O=(0,l.getTypeNamesFromExplicitlyTypedUnion)(a);return O.length&&(t=u.default.createElement(g.default,{typeNameChoices:O,slotName:n,slot:b,onChange:function(e){e.target.value!==b.type&&s.setSubschema(n,{type:e.target.value})}})),u.default.createElement(c.Accordion,{defaultExpanded:!0,className:r.accordion,TransitionProps:{unmountOnExit:!0,timeout:150}},u.default.createElement(c.AccordionSummary,{expandIcon:u.default.createElement(p.default,{className:r.expandIcon})},u.default.createElement(c.Typography,null,[].concat((0,o.default)(k),[n]).join("🡒"))),u.default.createElement(c.AccordionDetails,{className:r.expansionPanelDetails},t,u.default.createElement(c.FormGroup,null,u.default.createElement(y,{schema:b,path:[].concat((0,o.default)(k),[n])}))))}return(0,l.isConfigurationSlotType)(a)?u.default.createElement(m.default,{key:n,slot:b,slotSchema:a}):null})),y=(0,s.observer)((function(e){var t=e.schema,r=e.path,n=void 0===r?[]:r,o=(0,f.getMembers)(t).properties;return Object.entries(o).map((function(e){var r=(0,a.default)(e,2),o=r[0],i=r[1];return u.default.createElement(v,{key:o,slotName:o,slotSchema:i,path:n,schema:t})}))})),b=(0,s.observer)((function(e){var t=e.model,r=h(),n=t.target&&(0,l.readConfObject)(t.target,"trackId"),a=t.target&&(0,l.readConfObject)(t.target,"name");return u.default.createElement(u.default.Fragment,null,u.default.createElement(c.Accordion,{key:n,defaultExpanded:!0,className:r.accordion,TransitionProps:{unmountOnExit:!0,timeout:150}},u.default.createElement(c.AccordionSummary,{expandIcon:u.default.createElement(p.default,{className:r.expandIcon})},u.default.createElement(c.Typography,null,a||"Configuration")),u.default.createElement(c.AccordionDetails,{className:r.expansionPanelDetails,"data-testid":"configEditor"},t.target?u.default.createElement(y,{schema:t.target}):"no target set")),u.default.createElement("div",{style:{height:300}}))}));t.default=b},2112:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(23),c=n(r(108));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,u.observer)((function(e){var t=e.slot,r=(0,i.useState)(""),n=(0,o.default)(r,2),a=n[0],u=n[1],s=(0,i.useState)(!1),f=(0,o.default)(s,2),d=f[0],p=f[1];return i.default.createElement(i.default.Fragment,null,t.name?i.default.createElement(l.InputLabel,null,t.name):null,i.default.createElement(l.List,{disablePadding:!0},t.value.map((function(e,r){return i.default.createElement(l.ListItem,{key:r,disableGutters:!0},i.default.createElement(l.TextField,{value:e,onChange:function(e){return t.setAtIndex(r,e.target.value)},InputProps:{endAdornment:i.default.createElement(l.InputAdornment,{position:"end"},i.default.createElement(l.IconButton,{color:"secondary",onClick:function(){return t.removeAtIndex(r)}},i.default.createElement(c.default,null)))}}))})),d?i.default.createElement(l.ListItem,{disableGutters:!0},i.default.createElement(l.TextField,{value:a,placeholder:"add new",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:i.default.createElement(l.InputAdornment,{position:"end"},i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Button,{color:"primary",variant:"contained",style:{margin:2},"data-testid":"stringArrayAdd-".concat(t.name),onClick:function(){p(!1),t.add(a),u("")}},"OK"),i.default.createElement(l.Button,{color:"primary",variant:"contained",style:{margin:2},onClick:function(){p(!1),u("")}},"Cancel")))}})):null,i.default.createElement(l.Button,{color:"primary",variant:"contained",style:{margin:4},disabled:d,onClick:function(){return p(!0)}},"Add item")),i.default.createElement(l.FormHelperText,null,t.description))}));t.default=f},2113:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(32),l=r(514),c=r(23),s=n(r(340)),f=r(17),d=r(14),p=n(r(935));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=(0,c.makeStyles)((function(e){return{callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),fontFamily:'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',fontSize:"12px"}}}));function h(e){var t=e.slot,r=g(),n=(0,i.useState)(t.value),a=(0,o.default)(n,2),d=a[0],m=a[1],h=(0,i.useState)(),v=(0,o.default)(h,2),y=v[0],b=v[1],w=(0,u.useDebounce)(d,400);return(0,i.useEffect)((function(){try{var e,r=w.startsWith("jexl:")?w:"jexl:".concat(w);(0,l.stringToJexlExpression)(r,null===(e=(0,f.getEnv)(t).pluginManager)||void 0===e?void 0:e.jexl),t.set(r),b(null)}catch(e){console.error({e:e}),b(e)}}),[w,t]),i.default.createElement(i.default.Fragment,null,i.default.createElement(c.FormControl,null,i.default.createElement(c.InputLabel,{shrink:!0,htmlFor:"callback-editor"},t.name),i.default.createElement(p.default,{className:r.callbackEditor,value:d.startsWith("jexl:")?d.split("jexl:")[1]:d,onValueChange:function(e){return m(e)},highlight:function(e){return e},padding:10,style:{background:y?"#fdd":void 0}}),y?i.default.createElement(c.FormHelperText,{style:{color:"#f00"}},"".concat(y)):null,i.default.createElement(c.FormHelperText,null,t.description)),i.default.createElement(c.Tooltip,{title:i.default.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",i.default.createElement("br",null)," Names of available context items: ",t.contextVariable),arrow:!0},i.default.createElement(c.IconButton,{color:"primary",onClick:function(){var e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},i.default.createElement(s.default,null))))}h.propTypes={slot:d.PropTypes.objectOrObservableObject.isRequired};var v=(0,d.observer)(h);t.default=v},2114:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ColorSlot=void 0;var a=n(r(11)),o=n(r(36)),i=n(r(12)),u=d(r(1)),l=r(14),c=n(r(0)),s=n(r(86));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var p=(0,u.lazy)((function(){return Promise.resolve().then((function(){return d(r(2115))}))}));var m=function(e){var t=e.value,r=e.label,n=e.TextFieldProps,a=e.onChange,l=(0,u.useState)(!1),c=(0,i.default)(l,2),f=c[0],d=c[1];return u.default.createElement(u.default.Fragment,null,u.default.createElement(s.default,(0,o.default)({value:t,label:r,InputProps:{style:{color:t,borderRightWidth:"25px",borderRightStyle:"solid",borderRightColor:t}},onClick:function(){return d(!f)},onChange:function(e){a(e.target.value)}},n)),f?u.default.createElement(u.default.Suspense,{fallback:u.default.createElement("div",null)},u.default.createElement(p,{color:t,onChange:function(e){a(function(e){if(e instanceof Object){var t=e,r=t.r,n=t.g,a=t.b,o=t.a;return void 0===o?"rgb(".concat(r,",").concat(n,",").concat(a,")"):"rgba(".concat(r,",").concat(n,",").concat(a,",").concat(o,")")}return e}(e.rgb))}})):null)};function g(e){var t=e.slot;return u.default.createElement(m,{label:t.name,value:t.value,onChange:function(e){t.set(e)},TextFieldProps:{helperText:t.description,fullWidth:!0}})}t.ColorSlot=m,m.propTypes={onChange:c.default.func.isRequired,label:c.default.string,TextFieldProps:c.default.shape({}),value:c.default.string},m.defaultProps={label:"",value:"#000",TextFieldProps:{}},g.propTypes={slot:c.default.shape({name:c.default.string.isRequired,description:c.default.string,value:c.default.string.isRequired,set:c.default.func.isRequired}).isRequired};var h=(0,l.observer)(g);t.default=h},2115:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=d,t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(34),l=n(r(0)),c=r(369);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,u.makeStyles)({popover:{position:"absolute",zIndex:2},cover:{position:"fixed",top:0,right:0,bottom:0,left:0}});function d(e){var t=e.color,r=e.onChange,n=f(),a=(0,i.useState)(!0),u=(0,o.default)(a,2),l=u[0],s=u[1];return i.default.createElement("div",null,l?i.default.createElement("div",{className:n.popover},i.default.createElement("div",{role:"presentation",className:n.cover,onClick:function(){s(!1)}}),i.default.createElement(c.ChromePicker,{color:t,onChange:r})):null)}d.propTypes={color:l.default.string.isRequired,onChange:l.default.func.isRequired};var p=d;t.default=p},2116:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(102)),o=n(r(55)),i=n(r(86)),u=r(14),l=n(r(1)),c=r(936),s=(0,u.observer)((function(e){var t=e.typeNameChoices,r=e.slot,n=e.slotName,u=e.onChange,s=(0,c.useSlotEditorStyles)();return l.default.createElement(o.default,{className:s.paper},l.default.createElement("div",{className:s.paperContent},l.default.createElement(i.default,{value:r.type,label:"Type",select:!0,helperText:"Type of ".concat(n," to use"),fullWidth:!0,onChange:u},t.map((function(e){return l.default.createElement(a.default,{key:e,value:e},e)})))))}));t.default=s},2117:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SetDefaultSession=t.AssemblyManager=void 0;var a=n(r(11)),o=n(r(15)),i=n(r(16)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(10)),d=r(1),p=n(r(520)),m=n(r(163)),g=n(r(114)),h=r(2118),v=r(2122),y=r(2124),b=r(2126),w=r(2128);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var E=(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(2134))}))}));t.SetDefaultSession=E;var S=(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(2136))}))}));t.AssemblyManager=S;var x=function(e){(0,l.default)(n,e);var t=k(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","DataManagementPlugin"),(0,f.default)((0,u.default)(e),"exports",{AssemblyManager:S,SetDefaultSession:E}),e}return(0,i.default)(n,[{key:"install",value:function(e){e.addConnectionType((function(){return new p.default({name:"UCSCTrackHubConnection",configSchema:h.configSchema,stateModel:(0,h.modelFactory)(e),displayName:"UCSC Track Hub",description:"A track or assembly hub in the Track Hub format",url:"//genome.ucsc.edu/goldenPath/help/hgTrackHubHelp.html#Intro"})})),e.addWidgetType((function(){return new m.default({name:"HierarchicalTrackSelectorWidget",heading:"Available tracks",configSchema:b.configSchema,stateModel:(0,b.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(2141))}))}))})})),e.addWidgetType((function(){return new m.default({name:"AddTrackWidget",heading:"Add a track",configSchema:v.configSchema,stateModel:(0,v.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(2146))}))}))})})),e.addWidgetType((function(){return new m.default({name:"AddConnectionWidget",heading:"Add a connection",configSchema:y.configSchema,stateModel:y.stateModel,ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(2149))}))}))})})),e.addWidgetType((function(){return new m.default({name:"PluginStoreWidget",heading:"Plugin store",configSchema:w.configSchema,stateModel:(0,w.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return P(r(938))}))}))})}))}},{key:"configure",value:function(e){}}]),n}(g.default);t.default=x},2118:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"modelFactory",{enumerable:!0,get:function(){return a.default}});var a=n(r(2119)),o=n(r(937))},2119:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.types.compose("UCSCTrackHubConnection",(0,o.BaseConnectionModelFactory)(e),l.types.model({configuration:(0,i.ConfigurationReference)(c.default),type:l.types.literal("UCSCTrackHubConnection")}).actions((function(e){return{connect:function(){var t=(0,i.getConf)(e,"name"),r=(0,i.getConf)(e,"hubTxtLocation"),n=(0,u.getSession)(e);(0,s.fetchHubFile)(r).then((function(e){var t=r.uri?{uri:new URL(e.get("genomesFile"),r.uri).href,locationType:"UriLocation"}:{localPath:e.get("genomesFile"),locationType:"LocalPathLocation"};return Promise.all([e,(0,s.fetchGenomesFile)(t)])})).then((function(o){var u,l=(0,a.default)(o,2),c=l[0],d=l[1],p=[],m=f(d);try{var g=function(){var o=(0,a.default)(u.value,2),l=o[0],f=o[1],d=(0,i.getConf)(e,"assemblyNames");if(d.length>0&&!d.includes(l))return"break";var m=n.assemblies.find((function(e){return(0,i.readConfObject)(e,"name")===l}));if(!m)throw new Error('Cannot find assembly for "'.concat(l,'" from the genomes file for connection "').concat(t,'"'));var g=r.uri?{uri:new URL(f.get("trackDb"),new URL(c.get("genomesFile"),r.uri)).href,locationType:"UriLocation"}:{localPath:f.get("trackDb"),locationType:"LocalPathLocation"};p.push(Promise.all([g,(0,s.fetchTrackDbFile)(g),l,m]))};for(m.s();!(u=m.n()).done;){if("break"===g())break}}catch(e){m.e(e)}finally{m.f()}return Promise.all([].concat(p))})).then((function(t){var r,n=f(t);try{for(n.s();!(r=n.n()).done;){var o=(0,a.default)(r.value,4),u=o[0],l=o[1],c=o[2],d=o[3],p=(0,i.readConfObject)(d,["sequence","adapter"]),m=(0,s.generateTracks)(l,u,c,p);e.addTrackConfs(m)}}catch(e){n.e(e)}finally{n.f()}})).catch((function(t){console.error(t),n.notify('There was a problem connecting to the UCSC Track Hub "'.concat(e.name,'". Please make sure you have entered a valid hub.txt file. The error that was thrown is: "').concat(t,'"'),"error"),n.breakConnection(e.configuration)}))}}})))};var a=n(r(12)),o=r(96),i=r(29),u=r(32),l=r(17),c=n(r(937)),s=r(2120);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},2120:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchGenomesFile=function(e){return g.apply(this,arguments)},t.fetchHubFile=function(e){return m.apply(this,arguments)},t.fetchTrackDbFile=function(e){return h.apply(this,arguments)},t.generateTracks=function(e,t,r,n){var a=[];return e.forEach((function(o,u){var c=Array.from(o.keys()),f=["superTrack","compositeTrack","container","view"];if(!c.some((function(e){return f.includes(e)}))){var d=[],p=u;do{if(p=e.get(p).get("parent")){var m=p.split(" ");p=(0,i.default)(m,1)[0],d.push(e.get(p))}}while(p);d.reverse();var g=function(e,t,r,n,a){var o=e.get("type");o||(o=n.get(e.get("parent")).get("type"));var i,u,l=o.split(" ")[0];"bam"===l&&e.get("bigDataUrl").toLowerCase().endsWith("cram")&&(l="cram");i=r.uri?{uri:new URL(e.get("bigDataUrl"),r.uri).href,locationType:"UriLocation"}:{localPath:e.get("bigDataUrl"),locationType:"LocalPathLocation"};switch(l){case"bam":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".bai"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".bai"),locationType:"LocalPathLocation"},{type:"AlignmentsTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BamAdapter",bamLocation:i,index:{location:u}}};case"bed":case"bed5FloatScore":case"bedGraph":case"bedRnaElements":case"broadPeak":case"coloredExon":case"gvf":case"ld2":case"narrowPeak":case"peptideMapping":case"wig":case"wigMaf":case"halSnake":return(0,s.generateUnsupportedTrackConf)(e.get("shortLabel"),l,t);case"bigBarChart":case"bigChain":case"bigInteract":case"bigMaf":case"bigPsl":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i},renderer:{type:"SvgFeatureRenderer"}};case"bigBed":case"bigGenePred":case"bigNarrowPeak":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i}};case"bigWig":return{type:"QuantitativeTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigWigAdapter",bigWigLocation:i}};case"cram":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".crai"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".crai"),locationType:"LocalPathLocation"},{type:"AlignmentsTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"CramAdapter",cramLocation:i,craiLocation:u,sequenceAdapter:a}};case"vcfTabix":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".tbi"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".tbi"),locationType:"LocalPathLocation"},{type:"VariantTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"VcfTabixAdapter",vcfGzLocation:i,index:{location:u}}};case"hic":return{type:"HicTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"HicAdapter",hicLocation:i}};default:return(0,s.generateUnknownTrackConf)(e.get("shortLabel"),l,t)}}(o,d.map((function(e){return e.get("shortLabel")})),t,e,n);g.trackId="ucsc-trackhub-".concat((0,l.objectHash)(g)),g.assemblyNames=[r],a.push(g)}})),a},Object.defineProperty(t,"ucscAssemblies",{enumerable:!0,get:function(){return f.default}});var o=n(r(19)),i=n(r(12)),u=n(r(20)),l=r(32),c=r(97),s=r(65),f=n(r(2121));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function m(){return(m=(0,u.default)(o.default.mark((function e(t){var n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.openLocation)(t).readFile("utf8");case 3:return n=e.sent,e.next=6,Promise.resolve().then((function(){return p(r(200))}));case 6:return a=e.sent,i=a.HubFile,e.abrupt("return",new i(n));case 11:throw e.prev=11,e.t0=e.catch(0),new Error("Not a valid hub.txt file, got error: '".concat(e.t0,"'"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function g(){return(g=(0,u.default)(o.default.mark((function e(t){var n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openLocation)(t).readFile("utf8");case 2:return n=e.sent,e.next=5,Promise.resolve().then((function(){return p(r(200))}));case 5:return a=e.sent,i=a.GenomesFile,e.abrupt("return",new i(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,u.default)(o.default.mark((function e(t){var n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openLocation)(t).readFile("utf8");case 2:return n=e.sent,e.next=5,Promise.resolve().then((function(){return p(r(200))}));case 5:return a=e.sent,i=a.TrackDbFile,e.abrupt("return",new i(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="ailMel1\nallMis1\nanoCar1\nanoCar2\nanoGam1\nanoGam3\napiMel1\napiMel2\naplCal1\naptMan1\naquChr2\nbalAcu1\nbisBis1\nbosTau2\nbosTau3\nbosTau4\nbosTau6\nbosTau7\nbosTau8\nbraFlo1\ncaeJap1\ncaePb1\ncaePb2\ncaeRem2\ncaeRem3\ncalJac1\ncalJac3\ncalMil1\ncanFam1\ncanFam3\ncavPor3\ncb3\nce10\nce11\nce2\nce4\nce6\ncerSim1\nchlSab2\nchoHof1\nchrPic1\nci1\nci2\nci3\ncriGri1\ncriGriChoV1\ndanRer10\ndanRer11\ndanRer3\ndanRer4\ndanRer5\ndanRer6\ndanRer7\ndasNov3\ndipOrd1\ndm1\ndm2\ndm3\ndm6\ndp2\ndp3\ndroAna1\ndroAna2\ndroEre1\ndroGri1\ndroMoj1\ndroMoj2\ndroPer1\ndroSec1\ndroSim1\ndroVir1\ndroVir2\ndroYak1\ndroYak2\neboVir3\nechTel1\nechTel2\nequCab1\nequCab2\neriEur1\neriEur2\nfelCat3\nfelCat4\nfelCat5\nfelCat8\nfr1\nfr2\nfr3\ngadMor1\ngalGal2\ngalGal3\ngalGal4\ngalGal5\ngalGal6\ngalVar1\ngasAcu1\ngeoFor1\ngorGor3\ngorGor4\ngorGor5\nhetGla1\nhetGla2\nhg16\nhg18\nhg19\nhg38\nlatCha1\nloxAfr3\nmacEug2\nmacFas5\nmanPen1\nmelGal1\nmelGal5\nmelUnd1\nmicMur1\nmicMur2\nmm10\nmm7\nmm8\nmm9\nmonDom2\nmonDom4\nmonDom5\nmusFur1\nmyoLuc2\nnanPar1\nnasLar1\nnomLeu1\nnomLeu2\nnomLeu3\nochPri2\nochPri3\noreNil2\nornAna1\nornAna2\noryCun2\noryLat2\notoGar3\noviAri1\noviAri3\noviAri4\npanPan1\npanPan2\npanTro1\npanTro2\npanTro3\npanTro4\npanTro5\npanTro6\npapAnu2\npapHam1\npetMar1\npetMar2\nponAbe2\nponAbe3\npriPac1\nproCap1\npteVam1\nrheMac2\nrheMac3\nrheMac8\nrhiRox1\nrn4\nrn5\nrn6\nsacCer1\nsacCer2\nsacCer3\nsaiBol1\nsarHar1\nsorAra1\nsorAra2\nspeTri2\nstrPur1\nstrPur2\nsusScr11\nsusScr2\nsusScr3\ntaeGut1\ntaeGut2\ntarSyr1\ntarSyr2\ntetNig1\ntetNig2\nthaSir1\ntriMan1\ntupBel1\nturTru2\nventer1\nvicPac1\nvicPac2\nxenLae2\nxenTro1\nxenTro2\nxenTro3\nxenTro7\nxenTro9".split(/\r?\n/);t.default=n},2122:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,Object.defineProperty(t,"stateModelFactory",{enumerable:!0,get:function(){return o.default}});var a=r(29),o=n(r(2123)),i=(0,a.ConfigurationSchema)("AddTrackWidget",{});t.configSchema=i},2123:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.types.model("AddTrackModel",{id:a.ElementId,type:n.types.literal("AddTrackWidget"),view:n.types.safeReference(e.pluggableMstType("view","stateModel"))}).volatile((function(){return{trackSource:"fromFile",trackData:void 0,indexTrackData:void 0,altAssemblyName:"",altTrackName:"",altTrackType:"",adapterHint:"",textIndexTrack:!0,textIndexingConf:void 0}})).actions((function(e){return{setAdapterHint:function(t){e.adapterHint=t},setTrackSource:function(t){e.trackSource=t},setTextIndexingConf:function(t){e.textIndexingConf=t},setTextIndexTrack:function(t){e.textIndexTrack=t},setTrackData:function(t){e.trackData=t},setIndexTrackData:function(t){e.indexTrackData=t},setAssembly:function(t){e.altAssemblyName=t},setTrackName:function(t){e.altTrackName=t},setTrackType:function(t){e.altTrackType=t},clearData:function(){e.trackSource="",e.altTrackName="",e.altTrackType="",e.altAssemblyName="",e.adapterHint="",e.indexTrackData=void 0,e.trackData=void 0,e.textIndexingConf=void 0,e.textIndexTrack=!0}}})).views((function(e){return{get trackAdapter(){var t=e.trackData,r=e.indexTrackData,n=e.adapterHint;return t?(0,o.guessAdapter)(t,r,n,e):void 0},get trackName(){return e.altTrackName||(e.trackData?(0,o.getFileName)(e.trackData):"")},get isFtp(){var t,r,n=e.trackData,a=e.indexTrackData;return!!(null!=a&&null!==(t=a.uri)&&void 0!==t&&t.startsWith("ftp://")||null!=n&&null!==(r=n.uri)&&void 0!==r&&r.startsWith("ftp://"))},get isRelativeTrackUrl(){var t,r=null===(t=e.trackData)||void 0===t?void 0:t.uri;return!!r&&!i(r)},get isRelativeIndexUrl(){var t,r=null===(t=e.indexTrackData)||void 0===t?void 0:t.uri;return!!r&&!i(r)},get isRelativeUrl(){return this.isRelativeIndexUrl||this.isRelativeTrackUrl},get trackHttp(){var t,r;return null===(t=e.trackData)||void 0===t||null===(r=t.uri)||void 0===r?void 0:r.startsWith("http://")},get indexHttp(){var t,r;return null===(t=e.indexTrackData)||void 0===t||null===(r=t.uri)||void 0===r?void 0:r.startsWith("http://")},get wrongProtocol(){return"https:"===window.location.protocol&&(this.trackHttp||this.indexHttp)},get unsupported(){var e;return(null===(e=this.trackAdapter)||void 0===e?void 0:e.type)===o.UNSUPPORTED},get assembly(){var t;return e.altAssemblyName||(null===(t=e.view.assemblyNames)||void 0===t?void 0:t[0])},get trackType(){return e.altTrackType||(this.trackAdapter?(0,o.guessTrackType)(this.trackAdapter.type,e):"")}}})).views((function(e){return{get warningMessage(){return e.isFtp?"Warning: JBrowse cannot access files using the ftp protocol":e.isRelativeUrl?"Warning: one or more of your files do not provide the protocol e.g.\n          https://, please provide an absolute URL unless you are sure a\n          relative URL is intended.":e.wrongProtocol?"Warning: You entered a http:// resources but we cannot access HTTP\n          resources from JBrowse when it is running on https. Please use an\n          https URL for your track, or access the JBrowse app from the http\n          protocol":""}}}))};var n=r(17),a=r(70),o=r(65);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return new URL(e),!0}catch(t){return e.startsWith("/")}}},2124:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,Object.defineProperty(t,"stateModel",{enumerable:!0,get:function(){return o.default}});var a=r(29),o=n(r(2125)),i=(0,a.ConfigurationSchema)("AddConnectionWidget",{});t.configSchema=i},2125:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),a=r(70),o=n.types.model("AddConnectionModel",{id:a.ElementId,type:n.types.literal("AddConnectionWidget")});t.default=o},2126:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,Object.defineProperty(t,"stateModelFactory",{enumerable:!0,get:function(){return o.default}});var a=r(29),o=n(r(2127)),i=(0,a.ConfigurationSchema)("HierarchicalTrackSelectorWidget",{});t.configSchema=i},2127:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.types.model("HierarchicalTrackSelectorWidget",{id:c.ElementId,type:i.types.literal("HierarchicalTrackSelectorWidget"),collapsed:i.types.map(i.types.boolean),filterText:"",view:i.types.safeReference(e.pluggableMstType("view","stateModel"))}).actions((function(e){return{setView:function(t){e.view=t},toggleCategory:function(t){e.collapsed.set(t,!e.collapsed.get(t))},clearFilterText:function(){e.filterText=""},setFilterText:function(t){e.filterText=t}}})).views((function(t){return{getRefSeqTrackConf:function(r){var n=(0,l.getSession)(t).assemblyManager.get(r),o=null==n?void 0:n.configuration.sequence,i=e.getViewType(t.view.type);if(o){var u,c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(o.displays);try{var f=function(){var e=u.value;if(i.displayTypes.find((function(t){return t.name===e.type})))return{v:o}};for(c.s();!(u=c.n()).done;){var d=f();if("object"===(0,a.default)(d))return d.v}}catch(e){c.e(e)}finally{c.f()}}}}})).views((function(t){return{trackConfigurations:function(r){if(!t.view)return[];var n=(0,l.getSession)(t),a=n.tracks,i=n.assemblyManager.get(r);if(!i)return[];var c=t.getRefSeqTrackConf(r);return(c?[c]:[]).concat((0,o.default)(a.filter((function(e){var t=(0,u.readConfObject)(e,"assemblyNames");return f(i.allAliases,t)})).filter((function(r){return f(e.getViewType(t.view.type).displayTypes.map((function(e){return e.name})),r.displays.map((function(e){return e.type})))}))))},get assemblyNames(){var e;return(null===(e=t.view)||void 0===e?void 0:e.assemblyNames)||[]},connectionTrackConfigurations:function(r,n){if(!t.view)return[];var a=n.tracks,o=(0,l.getSession)(t).assemblyManager.get(r);return o&&o.initialized?a.filter((function(e){var t=(0,u.readConfObject)(e,"assemblyNames");return f(o.allAliases,t)})).filter((function(r){return f(e.getViewType(t.view.type).displayTypes.map((function(e){return e.name})),r.displays.map((function(e){return e.type})))})):[]}}})).views((function(e){return{hierarchy:function(t){var r=this,n=p(e,e.trackConfigurations(t),e.collapsed),a=(0,l.getSession)(e),i=a.connections,c=a.connectionInstances,s=(null==c?void 0:c.filter((function(e){var r=(0,u.getConf)(e,"assemblyNames");return 0===r.length||r.includes(t)})).map((function(e,n){var a=i[n];return{id:a.connectionId,name:(0,u.readConfObject)(a,"name"),children:r.connectionHierarchy(t,e),state:{expanded:!0}}})))||[];return{name:"Root",id:"Root",children:[{name:"Tracks",id:"Tracks",children:n}].concat((0,o.default)(s))}},connectionHierarchy:function(t,r){return p(e,e.connectionTrackConfigurations(t,r),e.collapsed)}}}))},t.generateHierarchy=p;var a=n(r(11)),o=n(r(33)),i=r(17),u=r(29),l=r(32),c=r(70);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!e.find((function(e){return t.includes(e)}))}function d(e){if(!e.trackId)throw new Error("not a track");return(0,u.readConfObject)(e,"name")||"Reference sequence (".concat((0,u.readConfObject)((0,i.getParent)(e),"name"),")")}function p(e,t,r){var n={children:[]},a=e.filterText,i=e.view;return t.filter((function(e){return t=a,r=e,n=(0,u.readConfObject)(r,"category"),o=t.toLowerCase(),d(r).toLowerCase().includes(o)||(null==n?void 0:n.filter((function(e){return e.toLowerCase().includes(o)})).length);var t,r,n,o})).forEach((function(e){var t=(0,o.default)((0,u.readConfObject)(e,"category")||[]);e.trackId.endsWith("sessionTrack")&&t.unshift(" Session tracks");for(var a=n,l=function(e){var n=t[e],o=a.children.find((function(e){return e.name===n})),i=t.slice(0,e+1).join(",");if(o)a=o;else{var u={children:[],name:n,id:i,isOpenByDefault:!r.get(i)};a.children.push(u),a=u}},c=0;c<t.length;c++)l(c);var s=i.tracks;a.children.splice(a.children.findIndex((function(e){return e.children.length})),0,{id:e.trackId,name:d(e),conf:e,checked:!!s.find((function(t){return t.configuration===e})),children:[]})})),n.children}},2128:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return o.default}}),t.configSchema=void 0,Object.defineProperty(t,"stateModelFactory",{enumerable:!0,get:function(){return i.default}});var a=r(29),o=n(r(938)),i=n(r(2133)),u=(0,a.ConfigurationSchema)("PluginStoreWidget",{});t.configSchema=u},2129:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(23),u=n(r(2130));var l=(0,o.observer)((function(e){var t=e.pluginManager,r=e.model,n=t.plugins,o=n.filter((function(e){var r;return null===(r=t.pluginMetadata[e.name])||void 0===r?void 0:r.isCore})).map((function(e){return e.name})),l=n.filter((function(e){return!o.includes(e.name)}));return a.default.createElement(i.List,null,l.length?l.filter((function(e){return e.name.toLowerCase().includes(r.filterText.toLowerCase())})).map((function(e){return a.default.createElement(u.default,{key:e.name,plugin:e,model:r,pluginManager:t})})):a.default.createElement(i.Typography,null,"No plugins currently installed"))}));t.default=l},2130:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(17),c=r(23),s=n(r(41)),f=n(r(866)),d=r(32),p=r(127);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=(0,c.makeStyles)((function(){return{closeDialog:{position:"absolute",right:0,top:0},dialogContainer:{margin:15},lockedPluginTooltip:{marginRight:"0.5rem"}}}));function h(){var e=g();return i.default.createElement(c.Tooltip,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},i.default.createElement(f.default,null))}function v(e){var t=e.onClose,r=e.plugin,n=g();return i.default.createElement(c.Dialog,{open:!0,onClose:function(){return t()}},i.default.createElement(c.DialogTitle,null,i.default.createElement(c.IconButton,{className:n.closeDialog,"aria-label":"close-dialog",onClick:function(){return t()}},i.default.createElement(s.default,null))),i.default.createElement(c.DialogContent,null,i.default.createElement(c.Typography,null,"Please confirm that you want to remove ",r,". Note: if any resources in this session still use this plugin, it may cause your session to crash"),i.default.createElement(c.DialogActions,null,i.default.createElement(c.Button,{variant:"contained",color:"primary",onClick:function(){window.setTimeout((function(){t(r)}),500)}},"Confirm"),i.default.createElement(c.Button,{variant:"contained",color:"secondary",onClick:function(){t()}},"Cancel"))))}var y=(0,u.observer)((function(e){var t=e.plugin,r=e.model,n=e.pluginManager,a=(0,i.useState)(),u=(0,o.default)(a,2),f=u[0],m=u[1],g=(0,d.getSession)(r),y=g.sessionPlugins,b=null==y?void 0:y.some((function(e){return n.pluginMetadata[t.name].url===e.url})),w=(0,l.getParent)(r,3),k=w.jbrowse,O=w.adminMode;return i.default.createElement(i.default.Fragment,null,f?i.default.createElement(v,{plugin:f,onClose:function(e){if(e){var r=n.pluginMetadata[t.name];O?k.removePlugin(r):(0,p.isSessionWithSessionPlugins)(g)&&g.removeSessionPlugin(r)}m(void 0)}}):null,i.default.createElement(c.ListItem,{key:t.name},O||b?i.default.createElement(c.IconButton,{"aria-label":"removePlugin","data-testid":"removePlugin-".concat(t.name),onClick:function(){return m(t.name)}},i.default.createElement(s.default,null)):i.default.createElement(h,null),i.default.createElement(c.Typography,null,t.name)))}));t.default=y},2131:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(17),c=r(32),s=r(127),f=r(23),d=n(r(867)),p=n(r(94)),m=n(r(868));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,f.makeStyles)((function(){return{card:{margin:"1em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center",margin:"0.4em 0em"}}}));var v=(0,u.observer)((function(e){var t=e.plugin,r=e.model,n=e.adminMode,a=h(),u=(0,c.getSession)(r),g=(0,l.getEnv)(r).pluginManager,v=Boolean(g.runtimePluginDefinitions.find((function(e){return e.url===t.url}))),y=(0,i.useState)(!1),b=(0,o.default)(y,2),w=b[0],k=b[1],O=v||w,P=(0,l.getParent)(r,3).jbrowse;return i.default.createElement(f.Card,{variant:"outlined",key:t.name,className:a.card},i.default.createElement(f.CardContent,null,i.default.createElement("div",{className:a.dataField},i.default.createElement(f.Typography,{variant:"h5"},i.default.createElement(f.Link,{href:"".concat(t.location,"#readme"),target:"_blank",rel:"noopener"},t.name))),i.default.createElement("div",{className:a.dataField},i.default.createElement(d.default,{style:{marginRight:"0.5em"}}),i.default.createElement(f.Typography,null,t.authors.join(", "))),i.default.createElement(f.Typography,{className:a.bold},"Description:"),i.default.createElement(f.Typography,null,t.description)),i.default.createElement(f.CardActions,null,i.default.createElement(f.Button,{variant:"contained",color:"primary",disabled:O,startIcon:v?i.default.createElement(m.default,null):i.default.createElement(p.default,null),onClick:function(){n?P.addPlugin({name:t.name,url:t.url}):(0,s.isSessionWithSessionPlugins)(u)&&u.addSessionPlugin(t),k(!0)}},v?"Installed":"Install")))}));t.default=v},2132:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(10)),i=n(r(12)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(14),c=r(17),s=n(r(21)),f=r(23),d=n(r(58)),p=n(r(41)),m=n(r(136));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,f.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},dialogContent:{display:"flex",flexDirection:"column"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var v=(0,l.observer)((function(e){var t=e.open,r=e.onClose,n=e.model,a=h(),l=(0,u.useState)(""),g=(0,i.default)(l,2),v=g[0],y=g[1],b=(0,u.useState)(""),w=(0,i.default)(b,2),k=w[0],O=w[1],P=(0,u.useState)(""),E=(0,i.default)(P,2),S=E[0],x=E[1],C=(0,u.useState)(""),j=(0,i.default)(C,2),M=j[0],T=j[1],R=(0,u.useState)(!1),D=(0,i.default)(R,2),A=D[0],I=D[1];function _(e){var t=e.target,r=t.name,n=t.value;"umdName"===r&&y(n),"umdUrl"===r&&O(n),"esmUrl"===r&&x(n),"cjsUrl"===r&&T(n)}var N=(0,c.getRoot)(n).jbrowse,B=Boolean(v&&k||S||M);function F(){if(B){var e={};v&&k&&(e.name=v,e.umdUrl=k),S&&(e.esmUrl=S),M&&(e.cjsUrl=M),N.addPlugin(e)}}function L(){y(""),O(""),x(""),T(""),r()}return u.default.createElement(f.Dialog,{open:t,onClose:L},u.default.createElement(f.DialogTitle,null,"Add custom plugin",u.default.createElement(d.default,{size:"medium",className:a.closeButton,onClick:function(){return r()}},u.default.createElement(p.default,null))),u.default.createElement("form",{onSubmit:F},u.default.createElement(f.DialogContent,{className:a.dialogContent},u.default.createElement(f.DialogContentText,null,"Enter the name of the plugin and its URL. The name should match what is defined in the plugin's build."),u.default.createElement(f.TextField,{id:"umd-name-input",name:"umdName",label:"Plugin name",variant:"outlined",value:v,onChange:_}),u.default.createElement(f.TextField,{id:"umd-url-input",name:"umdUrl",label:"Plugin URL",variant:"outlined",value:k,onChange:_}),u.default.createElement(f.DialogContentText,{onClick:function(){I(!A)}},u.default.createElement(d.default,{className:(0,s.default)(a.expand,(0,o.default)({},a.expandOpen,A)),"aria-expanded":A,"aria-label":"show more"},u.default.createElement(m.default,null)),"Advanced options"),u.default.createElement(f.Collapse,{in:A},u.default.createElement("div",{className:a.dialogContent},u.default.createElement(f.DialogContentText,null,"The above fields assume that the plugin is built in UMD format. If your plugin is in another format, or you have additional builds you want to add (such as a CJS build for using NodeJS APIs in desktop), you can enter the URLs for those builds below."),u.default.createElement(f.TextField,{id:"esm-url-input",name:"esmUrl",label:"ESM build URL",variant:"outlined",value:S,onChange:_}),u.default.createElement(f.TextField,{id:"cjs-url-input",name:"cjsUrl",label:"CJS build URL",variant:"outlined",value:M,onChange:_})))),u.default.createElement(f.DialogActions,null,u.default.createElement(f.Button,{variant:"contained",onClick:L},"Cancel"),u.default.createElement(f.Button,{variant:"contained",color:"primary",onClick:F,disabled:!B},"Submit"))))}));t.default=v},2133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.types.model("PluginStoreModel",{id:a.ElementId,type:n.types.literal("PluginStoreWidget"),filterText:"",view:n.types.safeReference(e.pluggableMstType("view","stateModel"))}).actions((function(e){return{clearFilterText:function(){e.filterText=""},setFilterText:function(t){e.filterText=t}}}))};var n=r(17),a=r(70)},2134:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(2135))},2135:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11)),o=n(r(1)),i=r(14),u=r(23);var l=(0,i.observer)((function(e){var t,r=e.rootModel,n=e.onClose;if(!r)return null;if(t=r,"object"!==(0,a.default)(t)||!t||!("jbrowse"in t))return console.error("Incorrect rootmodel"),null;var i=r.jbrowse,l=r.session;return o.default.createElement(u.Dialog,{open:!0,onClose:n},o.default.createElement(u.DialogTitle,null,"Set default session"),o.default.createElement(u.DialogContent,null,o.default.createElement(u.Typography,null,'Select "Set current session as default" to make your current session saved to the config file. You can also hit "Clear default session", which would remove the default session from the config.')),o.default.createElement(u.DialogActions,null,o.default.createElement(u.Button,{variant:"contained",onClick:function(){i.setDefaultSessionConf({name:"New session"}),n()}},"Clear default session"),o.default.createElement(u.Button,{color:"secondary",variant:"contained",onClick:function(){return n()}},"Cancel"),o.default.createElement(u.Button,{color:"primary",variant:"contained",onClick:function(){i.setDefaultSessionConf(l),n()}},"Set current session as default")))}));t.default=l},2136:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(2137))},2137:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(34),c=r(23),s=n(r(869)),f=n(r(41)),d=n(r(94)),p=n(r(2138)),m=n(r(2139)),g=n(r(2140));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var v=(0,l.makeStyles)((function(e){return{titleBox:{color:"#fff",backgroundColor:e.palette.primary.main,textAlign:"center"},dialogContent:{width:"100%"},backButton:{color:"#fff",position:"absolute",left:e.spacing(4),top:e.spacing(4)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));var y=(0,u.observer)((function(e){var t=e.rootModel,r=e.onClose,n=v(),a=(0,i.useState)(!1),u=(0,o.default)(a,2),l=u[0],h=u[1],y=(0,i.useState)(!1),b=(0,o.default)(y,2),w=b[0],k=b[1],O=(0,i.useState)(),P=(0,o.default)(O,2),E=P[0],S=P[1],x=!l&&!w;return i.default.createElement(c.Dialog,{open:!0,onClose:function(){return r(!1)}},i.default.createElement(c.DialogTitle,{className:n.titleBox},x?"Assembly manager":null,l?i.default.createElement(i.default.Fragment,null,i.default.createElement(c.IconButton,{"aria-label":"back",className:n.backButton,onClick:function(){return h(!1)}},i.default.createElement(s.default,null)),"Add new assembly"):null,w?i.default.createElement(i.default.Fragment,null,i.default.createElement(c.IconButton,{"aria-label":"back",className:n.backButton,onClick:function(){return k(!1)}},i.default.createElement(s.default,null)),function(e){if(void 0!==e)return e.name;return null}(E)):null,i.default.createElement(c.IconButton,{"aria-label":"close",className:n.closeButton,onClick:function(){return r(!1)}},i.default.createElement(f.default,null))),i.default.createElement(c.DialogContent,null,i.default.createElement("div",{className:n.dialogContent},x?i.default.createElement(p.default,{rootModel:t,setIsAssemblyBeingEdited:k,setAssemblyBeingEdited:S}):null,w?i.default.createElement(g.default,{assembly:E}):null,l?i.default.createElement(m.default,{rootModel:t,setFormOpen:h}):null)),i.default.createElement(c.DialogActions,null,x?i.default.createElement(i.default.Fragment,null,i.default.createElement(c.Button,{color:"secondary",variant:"contained",onClick:function(){return r(!1)}},"Close"),i.default.createElement(c.Button,{variant:"contained",color:"secondary",startIcon:i.default.createElement(d.default,null),onClick:function(){return h(!0)}},"Add new assembly")):null))}));t.default=y},2138:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(23),u=n(r(870)),l=n(r(108)),c=r(29),s=(0,i.makeStyles)((function(){return{table:{minWidth:500,minHeight:150},buttonCell:{padding:3},button:{display:"inline-block",padding:3,minHeight:0,minWidth:0}}})),f=(0,o.observer)((function(e){var t=e.rootModel,r=e.setIsAssemblyBeingEdited,n=e.setAssemblyBeingEdited,o=s();var f=t.jbrowse.assemblies.map((function(e){var s=(0,c.readConfObject)(e,"name"),f=(0,c.readConfObject)(e,"displayName"),d=(0,c.readConfObject)(e,"aliases");return a.default.createElement(i.TableRow,{key:s},a.default.createElement(i.TableCell,null,s),a.default.createElement(i.TableCell,null,f),a.default.createElement(i.TableCell,null,d?d.toString():""),a.default.createElement(i.TableCell,{className:o.buttonCell},a.default.createElement(i.IconButton,{"data-testid":"".concat(s,"-edit"),className:o.button,onClick:function(){r(!0),n(e)}},a.default.createElement(u.default,{color:"primary"})),a.default.createElement(i.IconButton,{"data-testid":"".concat(s,"-delete"),className:o.button,onClick:function(){!function(e){t.jbrowse.removeAssemblyConf(e)}(s)}},a.default.createElement(l.default,{color:"error"}))))}));return a.default.createElement(i.TableContainer,{component:i.Paper},a.default.createElement(i.Table,{className:o.table},a.default.createElement(i.TableHead,null,a.default.createElement(i.TableRow,null,a.default.createElement(i.TableCell,null,a.default.createElement(i.Typography,{variant:"h5"},"Name")),a.default.createElement(i.TableCell,null,a.default.createElement(i.Typography,{variant:"h5"},"Display name")),a.default.createElement(i.TableCell,null,a.default.createElement(i.Typography,{variant:"h5"},"Aliases")),a.default.createElement(i.TableCell,null,a.default.createElement(i.Typography,{variant:"h5"},"Actions")))),a.default.createElement(i.TableBody,null,f)))}));t.default=f},2139:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=n(r(912)),c=r(23),s=n(r(94));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,c.makeStyles)((function(e){return{root:{flexGrow:1,overflow:"hidden",padding:e.spacing(0,3)},paper:{margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2)},createButton:{marginTop:"1em",justifyContent:"center"},paperContent:{flex:"auto",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(1),overflow:"auto"}}})),p=(0,u.observer)((function(e){var t=e.adapterSelection,r=e.setAdapterSelection,n=e.adapterTypes;return i.default.createElement(c.TextField,{value:t,label:"Type",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:function(e){r(e.target.value)}},n.map((function(e){return i.default.createElement(c.MenuItem,{key:e,value:e},e)})))})),m=(0,u.observer)((function(e){var t=e.adapterSelection,r=e.fastaLocation,n=e.setFastaLocation,a=e.faiLocation,o=e.setFaiLocation,u=e.gziLocation,s=e.setGziLocation,f=e.twoBitLocation,d=e.setTwoBitLocation,p=e.chromSizesLocation,m=e.setChromSizesLocation;return"IndexedFastaAdapter"===t||"BgzipFastaAdapter"===t?i.default.createElement(c.Grid,{container:!0,spacing:2},i.default.createElement(c.Grid,{item:!0},i.default.createElement(l.default,{name:"fastaLocation",location:r,setLocation:function(e){return n(e)}})),i.default.createElement(c.Grid,{item:!0},i.default.createElement(l.default,{name:"faiLocation",location:a,setLocation:function(e){return o(e)}})),"BgzipFastaAdapter"===t?i.default.createElement(c.Grid,{item:!0},i.default.createElement(l.default,{name:"gziLocation",location:u,setLocation:function(e){return s(e)}})):null):"TwoBitAdapter"===t?i.default.createElement(c.Grid,{container:!0,spacing:2},i.default.createElement(c.Grid,{item:!0},i.default.createElement(l.default,{name:"twoBitLocation",location:f,setLocation:function(e){return d(e)}})),i.default.createElement(c.Grid,{item:!0},i.default.createElement(l.default,{name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:p,setLocation:function(e){return m(e)}}))):null})),g={uri:""},h=(0,u.observer)((function(e){var t=e.rootModel,r=e.setFormOpen,n=d(),a=["IndexedFastaAdapter","BgzipFastaAdapter","TwoBitAdapter"],u=(0,i.useState)(""),l=(0,o.default)(u,2),f=l[0],h=l[1],v=(0,i.useState)(""),y=(0,o.default)(v,2),b=y[0],w=y[1],k=(0,i.useState)(a[0]),O=(0,o.default)(k,2),P=O[0],E=O[1],S=(0,i.useState)(g),x=(0,o.default)(S,2),C=x[0],j=x[1],M=(0,i.useState)(g),T=(0,o.default)(M,2),R=T[0],D=T[1],A=(0,i.useState)(g),I=(0,o.default)(A,2),_=I[0],N=I[1],B=(0,i.useState)(g),F=(0,o.default)(B,2),L=F[0],W=F[1],z=(0,i.useState)(g),H=(0,o.default)(z,2),V=H[0],q=H[1];return i.default.createElement("div",{className:n.root},i.default.createElement(c.Paper,{className:n.paper},i.default.createElement(c.TextField,{id:"assembly-name",inputProps:{"data-testid":"assembly-name"},label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:f,onChange:function(e){return h(e.target.value)}}),i.default.createElement(c.TextField,{id:"assembly-name",inputProps:{"data-testid":"assembly-display-name"},label:"Assembly display name",helperText:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:b,onChange:function(e){return w(e.target.value)}}),i.default.createElement(p,{adapterSelection:P,setAdapterSelection:E,adapterTypes:a}),i.default.createElement("div",{className:n.paperContent},i.default.createElement(m,{adapterSelection:P,fastaLocation:C,setFastaLocation:j,faiLocation:R,setFaiLocation:D,gziLocation:_,setGziLocation:N,twoBitLocation:L,setTwoBitLocation:W,chromSizesLocation:V,setChromSizesLocation:q}))),i.default.createElement(c.Grid,{container:!0,className:n.createButton},i.default.createElement(c.Grid,{item:!0},i.default.createElement(c.Button,{variant:"contained",color:"secondary",startIcon:i.default.createElement(s.default,null),onClick:function(){var e;""===f?t.session.notify("Can't create an assembly without a name"):(r(!1),"IndexedFastaAdapter"===P?e={name:f,displayName:b,sequence:{adapter:{type:"IndexedFastaAdapter",fastaLocation:C,faiLocation:R}}}:"BgzipFastaAdapter"===P?e={name:f,displayName:b,sequence:{adapter:{type:"BgzipFastaAdapter",fastaLocation:C,faiLocation:R,gziLocation:_}}}:"TwoBitAdapter"===P&&(e={name:f,displayName:b,sequence:{adapter:{type:"TwoBitAdapter",twoBitLocation:L,chromSizesLocation:V}}}),t.jbrowse.addAssemblyConf(e),t.session.notify("Successfully added ".concat(f," assembly to JBrowse 2"),"success"))}},"Create new assembly"))))}));t.default=h},2140:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(524),u=(0,o.observer)((function(e){var t=e.assembly;return a.default.createElement(i.ConfigurationEditor,{model:{target:t}})}));t.default=u},2141:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(11)),i=n(r(12)),u=n(r(10)),l=x(r(1)),c=r(23),s=n(r(357)),f=n(r(94)),d=n(r(173)),p=n(r(301)),m=n(r(182)),g=n(r(871)),h=r(208),v=n(r(872)),y=n(r(204)),b=r(32),w=r(29),k=r(14),O=r(2259);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,o.default)(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var C=(0,l.lazy)((function(){return Promise.resolve().then((function(){return x(r(2142))}))})),j=(0,l.lazy)((function(){return Promise.resolve().then((function(){return x(r(2143))}))})),M=(0,l.lazy)((function(){return Promise.resolve().then((function(){return x(r(2144))}))})),T=(0,l.lazy)((function(){return Promise.resolve().then((function(){return x(r(2145))}))})),R=(0,c.makeStyles)((function(e){var t,r;return{searchBox:{margin:e.spacing(2)},menuIcon:{marginRight:e.spacing(1),marginBottom:0},fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)},compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:"#eee"}},accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:null===(t=e.palette.tertiary)||void 0===t?void 0:t.main,color:null===(r=e.palette.tertiary)||void 0===r?void 0:r.contrastText,width:"100%",display:"flex",paddingLeft:5},accordionText:{margin:"auto 0"}}}));function D(e){var t=e.data,r=e.isOpen,n=e.style,a=e.setOpen,o=t.isLeaf,i=t.nestingLevel,u=t.checked,s=t.id,f=t.name,m=t.onChange,h=t.toggleCollapse,v=t.conf,y=t.onMoreInfo,b=t.drawerPosition,k=R(),O=10*i+(o?10:0),P=(null==f?void 0:f.endsWith("(Unsupported)"))||(null==f?void 0:f.endsWith("(Unknown)")),E=v&&(0,w.readConfObject)(v,["description"])||"";return l.default.createElement("div",{style:n,className:o?void 0:k.accordionBase},new Array(i).fill(0).map((function(e,t){return l.default.createElement("div",{key:"mark-".concat(t),style:{left:10*t+4,height:null==n?void 0:n.height},className:k.nestingLevelMarker})})),l.default.createElement("div",{className:o?void 0:k.accordionCard,onClick:function(){h(s),a(!r)},style:{marginLeft:O,whiteSpace:"nowrap",width:"100%"}},l.default.createElement("div",{className:o?void 0:k.accordionColor},o?l.default.createElement(l.default.Fragment,null,l.default.createElement(c.Tooltip,{title:E,placement:"left"===b?"right":"left"},l.default.createElement(c.FormControlLabel,{className:k.checkboxLabel,control:l.default.createElement(c.Checkbox,{className:k.compactCheckbox,checked:u,onChange:function(){return m(s)},color:"primary",disabled:P,inputProps:{"data-testid":"htsTrackEntry-".concat(s)}}),label:f})),l.default.createElement(c.IconButton,{onClick:function(e){return y({target:e.currentTarget,id:s,conf:v})},color:"secondary","data-testid":"htsTrackEntryMenu-".concat(s)},l.default.createElement(g.default,null))):l.default.createElement("div",{className:k.accordionText},l.default.createElement(c.Typography,null,r?l.default.createElement(d.default,null):l.default.createElement(p.default,null),f)))))}function A(e,t,r){var n=!!e.conf;return{data:E(E({defaultHeight:n?22:40,isLeaf:n,isOpenByDefault:!0,nestingLevel:t},e),r),nestingLevel:t,node:e}}var I=(0,k.observer)((function(e){var t,r=e.height,n=e.tree,o=e.model,u=o.filterText,c=o.view,s=(0,l.useRef)(null),f=(0,l.useState)(),d=(0,i.default)(f,2),p=d[0],m=d[1],g=(0,b.getSession)(o),h=g.drawerPosition,v=(0,l.useMemo)((function(){return{onChange:function(e){return c.toggleTrack(e)},toggleCollapse:function(e){return o.toggleCategory(e)},onMoreInfo:m,drawerPosition:h}}),[c,o,h]),w=(0,l.useCallback)(a.default.mark((function e(){var t,r,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.children.length)){e.next=8;break}return r=n.children[t],e.next=5,A(r,0,v);case 5:t++,e.next=1;break;case 8:return void(e.next=11);case 11:o=e.sent,i=0;case 13:if(!(i<o.node.children.length)){e.next=20;break}return u=o.node.children[i],e.next=17,A(u,o.nestingLevel+1,v);case 17:i++,e.next=13;break;case 20:e.next=8;break;case 22:case"end":return e.stop()}}),e)})),[n,v]),k=null==p?void 0:p.conf,P=k&&(null===(t=g.getTrackActionMenuItems)||void 0===t?void 0:t.call(g,k))||[];return(0,l.useEffect)((function(){s.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})}),[n,u]),l.default.createElement(l.default.Fragment,null,l.default.createElement(O.VariableSizeTree,{ref:s,treeWalker:w,height:r},D),l.default.createElement(y.default,{anchorEl:null==p?void 0:p.target,menuItems:P,onMenuItemClick:function(e,t){t(),m(void 0)},open:Boolean(p),onClose:function(){return m(void 0)}}))})),_=function(e){var t=e.tree,r=e.model,n=e.offset;return"undefined"==typeof jest?l.default.createElement(v.default,{disableWidth:!0},(function(e){var a=e.height;return l.default.createElement(I,{height:a-n,model:r,tree:t})})):l.default.createElement(I,{height:9e3,model:r,tree:t})},N=function(e){var t=e.overrideDimensions,r=e.children;return t?l.default.createElement("div",{style:E({},t)},r):l.default.createElement(l.default.Fragment,null,r)},B=(0,k.observer)((function(e){var t=e.model,r=e.toolbarHeight,n=e.overrideDimensions,a=R(),o=(0,b.getSession)(t),u=(0,l.useState)(null),s=(0,i.default)(u,2),d=s[0],p=s[1];function m(){p(null)}var g=(0,b.isSessionModelWithConnections)(o),h=(0,b.isSessionWithAddTracks)(o);return l.default.createElement(N,{overrideDimensions:n},l.default.createElement(L,{model:t,toolbarHeight:r}),h||g?l.default.createElement(l.default.Fragment,null,l.default.createElement(c.Fab,{color:"secondary",className:a.fab,onClick:function(e){return p(e.currentTarget)}},l.default.createElement(f.default,null)),l.default.createElement(c.Menu,{anchorEl:d,open:Boolean(d),onClose:function(){return p(null)}},g?l.default.createElement(c.MenuItem,{onClick:function(){m(),(0,b.isSessionModelWithWidgets)(o)&&o.showWidget(o.addWidget("AddConnectionWidget","addConnectionWidget"))}},"Add connection"):null,h?l.default.createElement(c.MenuItem,{onClick:function(){m(),(0,b.isSessionModelWithWidgets)(o)&&o.showWidget(o.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id}))}},"Add track"):null)):null)})),F=(0,k.observer)((function(e){var t=e.model,r=e.setHeaderHeight,n=e.setAssemblyIdx,a=e.assemblyIdx,o=R(),u=(0,b.getSession)(t),f=(0,l.useState)(),d=(0,i.default)(f,2),p=d[0],g=d[1],v=(0,l.useState)(),k=(0,i.default)(v,2),O=k[0],P=k[1],E=(0,l.useState)(),S=(0,i.default)(E,2),x=S[0],D=S[1],A=(0,l.useState)(),I=(0,i.default)(A,2),_=I[0],N=I[1],B=(0,l.useState)(!1),F=(0,i.default)(B,2),L=F[0],W=F[1],z=(0,l.useState)(!1),H=(0,i.default)(z,2),V=H[0],q=H[1],G=t.assemblyNames,U=G[a];function J(e,t){var r=(0,w.readConfObject)(e,"name"),n=u.prepareToBreakConnection(e);if(n){var a=(0,i.default)(n,2),o=a[0],l=a[1];Object.keys(l).length>0?D({connectionConf:e,safelyBreakConnection:o,dereferenceTypeCount:l,name:r}):o()}t&&N({name:r,connectionConf:e})}var X=[{label:"Turn on/off connections...",onClick:function(){return q(!0)}}];(0,b.isSessionModelWithConnections)(u)&&(X.unshift({label:"Add connection",onClick:function(){if((0,b.isSessionModelWithWidgets)(u)){var e=u.addWidget("AddConnectionWidget","addConnectionWidget");u.showWidget(e)}}}),X.push({label:"Delete connections...",onClick:function(){return W(!0)}}));var Y=G.length>1?[{label:"Select assembly...",subMenu:G.map((function(e,t){return{label:e,onClick:function(){return n(t)}}}))}]:[],K=[{label:"Add track...",onClick:function(){if((0,b.isSessionModelWithWidgets)(u)){var e=u.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id});u.showWidget(e)}}}].concat(Y);return l.default.createElement("div",{ref:function(e){return r((null==e?void 0:e.getBoundingClientRect().height)||0)},"data-testid":"hierarchical_track_selector"},l.default.createElement("div",{style:{display:"flex"}},(0,b.isSessionWithAddTracks)(u)&&l.default.createElement(c.IconButton,{className:o.menuIcon,onClick:function(e){return P(e.currentTarget)}},l.default.createElement(m.default,null)),u.makeConnection&&l.default.createElement(c.IconButton,{className:o.menuIcon,onClick:function(e){return g(e.currentTarget)}},l.default.createElement(h.Cable,null)),l.default.createElement(c.TextField,{className:o.searchBox,label:"Filter tracks",value:t.filterText,onChange:function(e){return t.setFilterText(e.target.value)},fullWidth:!0,InputProps:{endAdornment:l.default.createElement(c.InputAdornment,{position:"end"},l.default.createElement(c.IconButton,{color:"secondary",onClick:t.clearFilterText},l.default.createElement(s.default,null)))}})),l.default.createElement(y.default,{anchorEl:p,open:Boolean(p),onMenuItemClick:function(e,t){t(),g(void 0)},onClose:function(){return g(void 0)},menuItems:X}),l.default.createElement(y.default,{anchorEl:O,open:Boolean(O),onMenuItemClick:function(e,t){t(),P(void 0)},onClose:function(){return P(void 0)},menuItems:K}),l.default.createElement(l.Suspense,{fallback:l.default.createElement("div",null)},x?l.default.createElement(C,{modalInfo:x,setModalInfo:D}):_?l.default.createElement(j,{handleClose:function(){return N(void 0)},deleteDialogDetails:_,session:u}):null,L?l.default.createElement(M,{handleClose:function(){return W(!1)},breakConnection:J,session:u}):null,V?l.default.createElement(T,{handleClose:function(){return q(!1)},session:u,breakConnection:J,assemblyName:U}):null))})),L=(0,k.observer)((function(e){var t=e.model,r=e.toolbarHeight,n=void 0===r?0:r,a=(0,l.useState)(0),o=(0,i.default)(a,2),u=o[0],c=o[1],s=(0,l.useState)(0),f=(0,i.default)(s,2),d=f[0],p=f[1],m=t.assemblyNames[u];return m?l.default.createElement(l.default.Fragment,null,l.default.createElement(F,{model:t,setHeaderHeight:p,setAssemblyIdx:c,assemblyIdx:u}),l.default.createElement(_,{tree:t.hierarchy(m),model:t,offset:n+d})):null})),W=B;t.default=W},2142:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(1)),i=r(23);var u=(0,r(14).observer)((function(e){var t=e.modalInfo,r=void 0===t?{}:t,n=e.setModalInfo,u=r.name,l=r.dereferenceTypeCount,c=r.safelyBreakConnection;return o.default.createElement(i.Dialog,{open:!0},o.default.createElement(i.DialogTitle,null,'Close connection "',u,'"'),o.default.createElement(i.DialogContent,null,l?o.default.createElement(o.default.Fragment,null,o.default.createElement(i.DialogContentText,null,"Closing this connection will close:"),o.default.createElement(i.List,null,Object.entries(l).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return o.default.createElement(i.ListItem,{key:r},"".concat(n," ").concat(r))})))):null,o.default.createElement(i.DialogContentText,null,"Are you sure you want to close this connection?")),o.default.createElement(i.DialogActions,null,o.default.createElement(i.Button,{onClick:function(){return n()},color:"primary"},"Cancel"),o.default.createElement(i.Button,{variant:"contained",onClick:r?function(){null==c||c(),n()}:function(){},color:"primary"},"OK")))}));t.default=u},2143:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23);var i=(0,r(14).observer)((function(e){var t=e.deleteDialogDetails,r=e.session,n=e.handleClose,i=t.connectionConf,u=t.name;return a.default.createElement(o.Dialog,{open:!0},a.default.createElement(o.DialogTitle,null,'Delete connection "',u,'"'),a.default.createElement(o.DialogContent,null,a.default.createElement(o.DialogContentText,null,"Are you sure you want to delete this connection?")),a.default.createElement(o.DialogActions,null,a.default.createElement(o.Button,{onClick:function(){return n()},color:"primary"},"Cancel"),a.default.createElement(o.Button,{variant:"contained",color:"primary",onClick:function(){var e;i&&(null===(e=r.deleteConnection)||void 0===e||e.call(r,i));n()}},"OK")))}));t.default=i},2144:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23),i=n(r(41)),u=r(14),l=r(29),c=(0,o.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{margin:e.spacing(4),width:500}}}));var s=(0,u.observer)((function(e){var t=e.session,r=e.handleClose,n=e.breakConnection,u=c(),s=t.adminMode,f=t.connections,d=t.sessionConnections;return a.default.createElement(o.Dialog,{open:!0,onClose:r,maxWidth:"lg"},a.default.createElement(o.DialogTitle,null,"Delete connections",a.default.createElement(o.IconButton,{className:u.closeButton,onClick:function(){return r()}},a.default.createElement(i.default,null))),a.default.createElement(o.DialogContent,null,a.default.createElement(o.Typography,null,"Click the X icon to delete the connection from your config completely"),a.default.createElement("div",{className:u.connectionContainer},f.map((function(e){var t=(0,l.readConfObject)(e,"name");return a.default.createElement("div",{key:"conn-".concat(t)},a.default.createElement(o.Typography,null,s||null!=d&&d.includes(e)?a.default.createElement(o.IconButton,{onClick:function(){return n(e,!0)}},a.default.createElement(i.default,{color:"error"})):a.default.createElement(o.Tooltip,{title:"Unable to delete connection in config file as non-admin user"},a.default.createElement(o.IconButton,null,a.default.createElement(i.default,{color:"disabled"}))),t))})),f.length?null:a.default.createElement(o.Typography,null,"No connections found"))),a.default.createElement(o.DialogActions,null,a.default.createElement(o.Button,{onClick:function(){return r()},variant:"contained",color:"primary"},"Close")))}));t.default=s},2145:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23),i=n(r(41)),u=r(14),l=r(29),c=(0,o.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{width:500,margin:e.spacing(4)}}}));var s=(0,u.observer)((function(e){var t=e.session,r=e.handleClose,n=e.assemblyName,u=e.breakConnection,s=c(),f=t.connections,d=t.connectionInstances,p=void 0===d?[]:d,m=f.filter((function(e){var t=(0,l.readConfObject)(e,"assemblyNames");return 0===t.length||t.includes(n)}));return a.default.createElement(o.Dialog,{open:!0,onClose:r,maxWidth:"lg"},a.default.createElement(o.DialogTitle,null,"Turn on/off connections",a.default.createElement(o.IconButton,{className:s.closeButton,onClick:function(){return r()}},a.default.createElement(i.default,null))),a.default.createElement(o.DialogContent,null,a.default.createElement(o.Typography,null,"Use the checkbox to turn on/off connections"),a.default.createElement("div",{className:s.connectionContainer},m.map((function(e){var r=(0,l.readConfObject)(e,"name"),n=p.find((function(e){return r===e.name}));return a.default.createElement(o.FormControlLabel,{key:e.connectionId,control:a.default.createElement(o.Checkbox,{checked:!!n,onChange:function(){var r;n?u(e):null===(r=t.makeConnection)||void 0===r||r.call(t,e)},color:"primary"}),label:r})})),m.length?null:a.default.createElement(o.Typography,null,"No connections found for ",n))),a.default.createElement(o.DialogActions,null,a.default.createElement(o.Button,{onClick:function(){return r()},variant:"contained",color:"primary"},"Close")))}));t.default=s},2146:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(19)),i=n(r(10)),u=n(r(20)),l=n(r(12)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),s=r(23),f=r(32),d=r(29),p=r(14),m=r(17),g=r(209),h=n(r(2147)),v=n(r(2148));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=(0,s.makeStyles)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),O=["Enter track data","Confirm track type"];var P=(0,p.observer)((function(e){var t=e.model,r=(0,c.useState)(0),n=(0,l.default)(r,2),a=n[0],i=n[1],p=k(),y=(0,f.getSession)(t),b=(0,m.getEnv)(y).pluginManager.rootModel.jobsManager,P=t.assembly,E=t.trackAdapter,S=t.trackData,x=t.trackName,C=t.trackType,j=t.textIndexTrack,M=t.textIndexingConf,T=(0,c.useState)(),R=(0,l.default)(T,2),D=R[0],A=R[1];function I(){return _.apply(this,arguments)}function _(){return(_=(0,u.default)(o.default.mark((function e(){var r,n,u,l,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===O.length-1){e.next=3;break}return i(a+1),e.abrupt("return");case 3:r="".concat(x.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(y.adminMode?"":"-sessionTrack"),n=y.assemblyManager.get(P),E&&"UNKNOWN"!==E.type?(y.addTrackConf({trackId:r,type:C,name:x,assemblyNames:[P],adapter:w(w({},E),{},{sequenceAdapter:(0,d.getConf)(n,["sequence","adapter"])})}),u={attributes:["Name","ID"],exclude:["CDS","exon"]},t.view?(t.view.showTrack(r),f.isElectron&&j&&(0,f.supportedIndexingAdapters)(E.type)&&(l=x+"-index",c=w(w({},M||u),{},{assemblies:[P],tracks:[r],indexType:"perTrack",name:l,timestamp:(new Date).toISOString()}),s={indexingParams:c,name:l,cancelCallback:function(){b.abortJob()}},b.queueJob(s))):y.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),t.clearData(),y.hideWidget(t)):A("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){A(void 0),i(a-1)}function B(){switch(a){case 0:return!S;case 1:return!(x&&C&&null!=E&&E.type&&P);default:return!0}}return c.default.createElement("div",{className:p.root},c.default.createElement(s.Stepper,{className:p.stepper,activeStep:a,orientation:"vertical"},O.map((function(e,r){return c.default.createElement(s.Step,{key:e},c.default.createElement(s.StepLabel,null,e),c.default.createElement(s.StepContent,null,function(e){switch(e){case 0:return c.default.createElement(v.default,{model:t});case 1:return c.default.createElement(h.default,{model:t});default:return c.default.createElement(s.Typography,null,"Unknown step")}}(r),c.default.createElement("div",{className:p.actionsContainer},c.default.createElement(s.Button,{disabled:0===a,onClick:N,className:p.button},"Back"),c.default.createElement(s.Button,{disabled:B(),variant:"contained",color:"primary",onClick:I,className:p.button,"data-testid":"addTrackNextButton"},a===O.length-1?"Add":"Next")),D?c.default.createElement("div",{className:p.alertContainer},c.default.createElement(g.Alert,{severity:"error"},D)):null))}))))}));t.default=P},2147:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(29),l=r(32),c=r(23),s=n(r(108)),f=n(r(94)),d=r(14),p=r(17),m=r(65);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,c.makeStyles)((function(e){return{spacing:{marginBottom:e.spacing(3)},paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)},card:{marginTop:e.spacing(1)}}}));function v(e){var t,r=e.trackAdapter,n=e.trackType,a=h();return"SNPCoverageAdapter"===r.type?i.default.createElement(c.Typography,{className:a.spacing},"Selected ",i.default.createElement("code",null,n),". Using adapter"," ",i.default.createElement("code",null,r.type)," with subadapter"," ",i.default.createElement("code",null,null===(t=r.subadapter)||void 0===t?void 0:t.type),". Please enter a track name and, if necessary, update the track type."):i.default.createElement(c.Typography,{className:a.spacing},"Using adapter ",i.default.createElement("code",null,r.type)," and guessing track type"," ",i.default.createElement("code",null,n),". Please enter a track name and, if necessary, update the track type.")}var y=(0,d.observer)((function(e){var t=e.model,r=h(),n=(0,i.useState)(""),a=(0,o.default)(n,2),u=a[0],l=a[1],d=(0,i.useState)(""),p=(0,o.default)(d,2),m=p[0],g=p[1],v=(0,i.useState)(["Name","ID"]),y=(0,o.default)(v,2),b=y[0],w=y[1],k=(0,i.useState)(["CDS","exon"]),O=(0,o.default)(k,2),P=O[0],E=O[1],S=[{label:"Indexing attributes",values:b},{label:"Feature types to exclude",values:P}];return(0,i.useEffect)((function(){t.setTextIndexingConf({attributes:b,exclude:P})}),[t,b,P]),i.default.createElement(c.Paper,{className:r.paper},i.default.createElement(c.InputLabel,null,"Indexing configuration"),S.map((function(e,t){return i.default.createElement(c.Card,{raised:!0,key:e.label,className:r.card},i.default.createElement(c.CardContent,null,i.default.createElement(c.InputLabel,null,e.label),i.default.createElement(c.List,{disablePadding:!0},e.values.map((function(r,n){return i.default.createElement(c.ListItem,{key:n,disableGutters:!0},i.default.createElement(c.TextField,{value:r,InputProps:{endAdornment:i.default.createElement(c.InputAdornment,{position:"end"},i.default.createElement(c.IconButton,{color:"secondary",onClick:function(){var r=e.values.filter((function(e,t){return t!==n}));0===t?w(r):E(r)}},i.default.createElement(s.default,null)))}}))})),i.default.createElement(c.ListItem,{disableGutters:!0},i.default.createElement(c.TextField,{value:0===t?u:m,placeholder:"add new",onChange:function(e){0===t?l(e.target.value):g(e.target.value)},InputProps:{endAdornment:i.default.createElement(c.InputAdornment,{position:"end"},i.default.createElement(c.IconButton,{onClick:function(){if(0===t){var e=b;e.push(u),w(e),l("")}else{var r=P;r.push(m),E(r),g("")}},disabled:0===t?""===u:""===m,color:"secondary","data-testid":"stringArrayAdd-Feat"},i.default.createElement(f.default,null)))}})))))})))})),b=(0,d.observer)((function(e){var t,r,n,a=e.model,o=h(),u=(0,l.getSession)(a),s=a.trackAdapter,f=(0,p.getEnv)(u).pluginManager.getElementTypesInGroup("adapter");return i.default.createElement(c.TextField,{className:o.spacing,value:"UNKNOWN"!==(null==s?void 0:s.type)?null==s?void 0:s.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){a.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}}},f.filter((function(e){var t,r;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI||null!==(r=e.adapterMetadata)&&void 0!==r&&r.category)})).map((function(e){var t,r;return i.default.createElement(c.MenuItem,{key:e.name,value:e.name},null!==(t=e.adapterMetadata)&&void 0!==t&&t.displayName?null===(r=e.adapterMetadata)||void 0===r?void 0:r.displayName:e.name)})),(t=f.filter((function(e){var t;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI)})),r="",n=[],t.forEach((function(e){var t,a,o,u,l,s,f,d;null!==(t=e.adapterMetadata)&&void 0!==t&&t.category&&(r!==(null===(a=e.adapterMetadata)||void 0===a?void 0:a.category)&&(r=null===(l=e.adapterMetadata)||void 0===l?void 0:l.category,n.push(i.default.createElement(c.ListSubheader,{key:null===(s=e.adapterMetadata)||void 0===s?void 0:s.category,value:null===(f=e.adapterMetadata)||void 0===f?void 0:f.category},null===(d=e.adapterMetadata)||void 0===d?void 0:d.category))),n.push(i.default.createElement(c.MenuItem,{key:e.name,value:e.name},null!==(o=e.adapterMetadata)&&void 0!==o&&o.displayName?null===(u=e.adapterMetadata)||void 0===u?void 0:u.displayName:e.name)))})),n))}));function w(e){var t=e.model,r=h();return i.default.createElement(i.default.Fragment,null,i.default.createElement(c.Typography,{className:r.spacing},"JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",i.default.createElement(c.Link,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse to see if they support this data type or"," ",i.default.createElement(c.Link,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."),i.default.createElement(b,{model:t}))}var k=(0,d.observer)((function(e){var t=e.model,r=h(),n=(0,l.getSession)(t),a=t.trackType,o=(0,p.getEnv)(n).pluginManager.getElementTypesInGroup("track");return i.default.createElement(c.TextField,{className:r.spacing,value:a,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){t.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}}},o.map((function(e){var t=e.name;return i.default.createElement(c.MenuItem,{key:t,value:t},t)})))})),O=(0,d.observer)((function(e){var t=e.model,r=(0,l.getSession)(t),n=t.assembly;return i.default.createElement(c.TextField,{value:n,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return t.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}},r.assemblies.map((function(e){return(0,u.readConfObject)(e,"name")})).map((function(e){return i.default.createElement(c.MenuItem,{key:e,value:e},e)})))}));var P=(0,d.observer)((function(e){var t=e.model,r=h(),n=(0,i.useState)(!0),a=(0,o.default)(n,2),u=a[0],s=a[1],f=t.trackName,d=t.trackAdapter,p=t.trackType,g=t.warningMessage,P=t.adapterHint;if(t.unsupported)return i.default.createElement(c.Typography,{className:r.spacing},"This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",i.default.createElement(c.Link,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse or"," ",i.default.createElement(c.Link,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type.");if((null==d?void 0:d.type)===m.UNKNOWN)return i.default.createElement(w,{model:t});if(""===P&&d&&t.setAdapterHint(d.type),null==d||!d.type)return i.default.createElement(c.Typography,null,"Could not recognize this data type.");var E=(0,l.supportedIndexingAdapters)(null==d?void 0:d.type);return i.default.createElement("div",null,d?i.default.createElement(v,{trackAdapter:d,trackType:p}):null,g?i.default.createElement(c.Typography,{style:{color:"orange"}},g):null,i.default.createElement(c.TextField,{className:r.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:f,onChange:function(e){return t.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),i.default.createElement(b,{model:t}),i.default.createElement(k,{model:t}),i.default.createElement(O,{model:t}),l.isElectron&&E&&i.default.createElement(c.FormControl,null,i.default.createElement(c.FormControlLabel,{label:"Index track for text searching?",control:i.default.createElement(c.Checkbox,{checked:u,onChange:function(e){s(e.target.checked),t.setTextIndexTrack(e.target.checked)}})})),l.isElectron&&u&&E?i.default.createElement(y,{model:t}):null)}));t.default=P},2148:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(83),i=r(23),u=r(17),l=r(14),c=(0,i.makeStyles)((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));var s=(0,l.observer)((function(e){var t=e.model,r=c(),n=(0,u.getRoot)(t);return a.default.createElement(i.Paper,{className:r.paper},a.default.createElement(o.FileSelector,{name:"Main file",description:"",location:t.trackData,setLocation:t.setTrackData,setName:t.setTrackName,rootModel:n}),a.default.createElement("div",{className:r.spacer}),a.default.createElement(o.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:t.indexTrackData,setLocation:t.setIndexTrackData,setName:t.setTrackName,rootModel:n}))}));t.default=s},2149:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=r(32),u=n(r(71)),l=n(r(271)),c=n(r(272)),s=n(r(202)),f=n(r(273)),d=r(34),p=n(r(52)),m=r(14),g=r(17),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),v=n(r(2150)),y=n(r(2151));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}var w=(0,d.makeStyles)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}}})),k=["Select a Connection Type","Configure Connection"];function O(e){var t=e.model,r=(0,h.useState)({}),n=(0,o.default)(r,2),a=n[0],d=n[1],m=(0,h.useState)({}),b=(0,o.default)(m,2),O=b[0],P=b[1],E=(0,h.useState)(!0),S=(0,o.default)(E,2),x=S[0],C=S[1],j=(0,h.useState)(0),M=(0,o.default)(j,2),T=M[0],R=M[1],D=w(),A=(0,i.getSession)(t),I=(0,g.getEnv)(A).pluginManager;function _(e){d(e),P(e.configSchema.create({connectionId:"".concat(e.name,"-").concat(Date.now())},(0,g.getEnv)(t)))}function N(){var e;T===k.length-1?(e=A.addConnectionConf(O),A.makeConnection(e),A.hideWidget(t)):R(T+1)}function B(){R(T-1)}return h.default.createElement("div",{className:D.root},h.default.createElement(f.default,{className:D.stepper,activeStep:T,orientation:"vertical"},k.map((function(e){return h.default.createElement(l.default,{key:e},h.default.createElement(s.default,null,e),h.default.createElement(c.default,null,function(){switch(T){case 0:return h.default.createElement(y.default,{connectionTypeChoices:I.getElementTypesInGroup("connection"),connectionType:a,setConnectionType:_});case 1:return h.default.createElement(v.default,{connectionType:a,model:O,setModelReady:C});default:return h.default.createElement(p.default,null,"Unknown step")}}(),h.default.createElement("div",{className:D.actionsContainer},h.default.createElement(u.default,{disabled:0===T,onClick:B,className:D.button},"Back"),h.default.createElement(u.default,{disabled:!(0===T&&a.name||1===T&&O&&x),variant:"contained",color:"primary",onClick:N,className:D.button,"data-testid":"addConnectionNext"},T===k.length-1?"Connect":"Next"))))}))))}O.propTypes={model:m.PropTypes.observableObject.isRequired};var P=(0,m.observer)(O);t.default=P},2150:function(e,t,r){"use strict";var n=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e,r&&r.set(e,a);return a}(r(1)),o=r(524);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var u=(0,r(14).observer)((function(e){var t=e.connectionType,r=e.model,n=e.setModelReady,i=t.configEditorComponent||o.ConfigurationEditor;return a.default.createElement(a.Suspense,{fallback:a.default.createElement("div",null,"Loading...")},a.default.createElement(i,{model:{target:r},setModelReady:n}))}));t.default=u},2151:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(58)),i=n(r(102)),u=n(r(86)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=n(r(875));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=function(e){var t=e.connectionTypeChoices,r=e.connectionType,n=e.setConnectionType;return(0,l.useEffect)((function(){r.name||n(t[0])})),r.name?l.default.createElement("form",{autoComplete:"off"},l.default.createElement(u.default,{value:r.name,label:"connectionType",helperText:r.description?l.default.createElement(l.default.Fragment,null,r.description,r.url?l.default.createElement(o.default,{href:r.url,rel:"noopener noreferrer",target:"_blank",color:"secondary"},l.default.createElement(c.default,null)):null):null,select:!0,fullWidth:!0,onChange:function(e){n(t.find((function(t){return t.name===e.target.value})))},variant:"outlined"},t.map((function(e){return l.default.createElement(i.default,{key:e.name,value:e.name},e.displayName||e.name)})))):null};t.default=f},2152:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.types.compose(s.BaseViewModel,o.types.model("CircularView",{type:o.types.literal("CircularView"),offsetRadians:-Math.PI/2,bpPerPx:2e6,tracks:o.types.array(e.pluggableMstType("track","stateModel")),hideVerticalResizeHandle:!1,hideTrackSelectorButton:!1,lockedFitToWindow:!0,disableImportForm:!1,height:o.types.optional(o.types.refinement("trackHeight",o.types.number,(function(e){return e>=40})),400),minimumRadiusPx:25,spacingPx:10,paddingPx:80,lockedPaddingPx:100,minVisibleWidth:6,minimumBlockWidth:20,displayedRegions:o.types.array(i.Region),scrollX:0,scrollY:0,trackSelectorType:"hierarchical"}).volatile((function(){return{width:0}})).views((function(e){return{get staticSlices(){return(0,f.calculateStaticSlices)(e)},get visibleStaticSlices(){return this.staticSlices.filter(f.sliceIsVisible.bind(this,e))},get visibleSection(){return(0,d.viewportVisibleSection)([e.scrollX,e.scrollX+e.width,e.scrollY,e.scrollY+e.height],this.centerXY,this.radiusPx)},get circumferencePx(){var t,r=0,n=g(this.elidedRegions);try{for(n.s();!(t=n.n()).done;){r+=t.value.widthBp}}catch(e){n.e(e)}finally{n.f()}return r/e.bpPerPx+e.spacingPx*this.elidedRegions.length},get radiusPx(){return this.circumferencePx/(2*Math.PI)},get bpPerRadian(){return e.bpPerPx*this.radiusPx},get pxPerRadian(){return this.radiusPx},get centerXY(){return[this.radiusPx+e.paddingPx,this.radiusPx+e.paddingPx]},get totalBp(){var t,r=0,n=g(e.displayedRegions);try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=a.end-a.start}}catch(e){n.e(e)}finally{n.f()}return r},get maximumRadiusPx(){return e.lockedFitToWindow?Math.min(e.width,e.height)/2-e.lockedPaddingPx:1e6},get maxBpPerPx(){var t=2*Math.PI*e.minimumRadiusPx;return this.totalBp/t},get minBpPerPx(){var e=2*Math.PI*this.maximumRadiusPx;return(0,c.clamp)(this.totalBp/e,1e-10,this.maxBpPerPx)},get atMaxBpPerPx(){return e.bpPerPx>=this.maxBpPerPx},get atMinBpPerPx(){return e.bpPerPx<=this.minBpPerPx},get tooSmallToLock(){return this.minBpPerPx<=1e-10},get figureDimensions(){return[2*this.radiusPx+2*e.paddingPx,2*this.radiusPx+2*e.paddingPx]},get figureWidth(){return this.figureDimensions[0]},get figureHeight(){return this.figureDimensions[1]},get elidedRegions(){var t=[];e.displayedRegions.forEach((function(r){var n=r.end-r.start;if(n/e.bpPerPx<e.minVisibleWidth){var a=t[t.length-1];a&&a.elided?(a.regions.push(m({},r)),a.widthBp+=n):t.push({elided:!0,widthBp:n,regions:[m({},r)]})}else t.push(m(m({},r),{},{widthBp:n}))}));for(var r=0;r<t.length;r+=1){var n=t[r];n.elided&&1===n.regions.length&&(delete n.elided,t[r]=m(m({},n),n.regions[0]))}return t},get assemblyNames(){var t=[];return e.displayedRegions.forEach((function(e){t.includes(e.assemblyName)||t.push(e.assemblyName)})),t},get initialized(){var t=(0,c.getSession)(e).assemblyManager;return this.assemblyNames.every((function(e){var r;return null===(r=t.get(e))||void 0===r?void 0:r.initialized}))}}})).volatile((function(){return{error:void 0}})).actions((function(t){return{setWidth:function(e){return t.width=Math.max(e,100),t.width},setHeight:function(e){return t.height=Math.max(e,40),t.height},resizeHeight:function(e){var r=t.height,n=this.setHeight(t.height+e);return this.setModelViewWhenAdjust(!t.tooSmallToLock),n-r},resizeWidth:function(e){var r=t.width,n=this.setWidth(t.width+e);return this.setModelViewWhenAdjust(!t.tooSmallToLock),n-r},rotateClockwiseButton:function(){this.rotateClockwise(Math.PI/6)},rotateCounterClockwiseButton:function(){this.rotateCounterClockwise(Math.PI/6)},rotateClockwise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.17;t.offsetRadians+=e},rotateCounterClockwise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.17;t.offsetRadians-=e},zoomInButton:function(){this.setBpPerPx(t.bpPerPx/1.4)},zoomOutButton:function(){this.setBpPerPx(1.4*t.bpPerPx)},setBpPerPx:function(e){t.bpPerPx=(0,c.clamp)(e,t.minBpPerPx,t.maxBpPerPx)},setModelViewWhenAdjust:function(e){t.lockedFitToWindow&&e&&this.setBpPerPx(t.minBpPerPx)},closeView:function(){(0,o.getParent)(t,2).removeView(t)},setDisplayedRegions:function(e){var r=0===t.displayedRegions.length;t.displayedRegions=(0,o.cast)(e),r?this.setBpPerPx(t.minBpPerPx):this.setBpPerPx(t.bpPerPx)},activateTrackSelector:function(){if("hierarchical"===t.trackSelectorType){var e=(0,c.getSession)(t);if((0,c.isSessionModelWithWidgets)(e)){var r=e.addWidget("HierarchicalTrackSelectorWidget","hierarchicalTrackSelector",{view:t});return e.showWidget(r),r}}throw new Error("invalid track selector type ".concat(t.trackSelectorType))},toggleTrack:function(e){this.hideTrack(e)||this.showTrack(e)},setError:function(e){console.error(e),t.error=e},showTrack:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.pluggableConfigSchemaType("track"),i=(0,o.resolveIdentifier)(a,(0,o.getRoot)(t),r),u=e.getTrackType(i.type);if(!u)throw new Error("unknown track type ".concat(i.type));var l=e.getViewType(t.type),c=l.displayTypes.map((function(e){return e.name})),s=i.displays.find((function(e){return c.includes(e.type)})),f=u.stateModel.create(m(m({},n),{},{type:i.type,configuration:i,displays:[{type:s.type,configuration:s}]}));t.tracks.push(f)},addTrackConf:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.type,o=(0,l.readConfObject)(r,"name"),i=e.getTrackType(a);if(!i)throw new Error("unknown track type ".concat(r.type));var u=e.getViewType(t.type),c=u.displayTypes.map((function(e){return e.name})),s=r.displays.find((function(e){return c.includes(e.type)})),f=i.stateModel.create(m(m({},n),{},{name:o,type:a,configuration:r,displays:[{type:s.type,configuration:s}]}));t.tracks.push(f)},hideTrack:function(r){var n=e.pluggableConfigSchemaType("track"),a=(0,o.resolveIdentifier)(n,(0,o.getRoot)(t),r),i=t.tracks.filter((function(e){return e.configuration===a}));return(0,u.transaction)((function(){return i.forEach((function(e){return t.tracks.remove(e)}))})),i.length},toggleFitToWindowLock:function(){return t.lockedFitToWindow=!t.lockedFitToWindow,this.setModelViewWhenAdjust(t.atMinBpPerPx),t.lockedFitToWindow}}})))};var a=n(r(10)),o=r(17),i=r(70),u=r(43),l=r(29),c=r(32),s=r(96),f=r(2153),d=r(939);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},2153:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.Slice=void 0,t.calculateStaticSlices=function(e){var t,r=[],n=0,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e.elidedRegions);try{for(a.s();!(t=a.n()).done;){var o=t.value,i=o.widthBp/e.bpPerRadian+e.spacingPx/e.pxPerRadian;r.push(new f(e,o,n,i)),n+=i}}catch(e){a.e(e)}finally{a.f()}return r},t.sliceIsVisible=function(e,t){var r=(0,a.default)(e.visibleSection.theta,2),n=r[0],o=r[1];return(0,c.thetaRangesOverlap)(t.offsetRadians+e.offsetRadians,t.radianWidth,n,o-n)};var a=n(r(12)),o=n(r(15)),i=n(r(16)),u=n(r(10)),l=r(32),c=r(939);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(){function e(t,r,n,a){(0,o.default)(this,e),this.region=r,this.radianWidth=a,(0,u.default)(this,"key",void 0),(0,u.default)(this,"offsetRadians",void 0),(0,u.default)(this,"startRadians",void 0),(0,u.default)(this,"endRadians",void 0),(0,u.default)(this,"bpPerRadian",void 0),(0,u.default)(this,"flipped",void 0);var i=t.bpPerRadian;this.key=(0,l.assembleLocString)(r),this.offsetRadians=n,this.bpPerRadian=i,this.flipped=!1,this.startRadians=this.offsetRadians,this.endRadians=r.widthBp/this.bpPerRadian+this.offsetRadians,Object.freeze(this)}return(0,i.default)(e,[{key:"bpToXY",value:function(e,t){var r=(this.region.elided?this.region.widthBp/2:this.flipped?this.region.end-e:e-this.region.start)/this.bpPerRadian+this.offsetRadians;return(0,l.polarToCartesian)(t,r)}},{key:"toJSON",value:function(){return(0,l.objectFromEntries)(Object.entries(this))}}]),e}();t.Slice=f},2154:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseChordDisplayComponentFactory",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BaseChordDisplayModel",{enumerable:!0,get:function(){return o.BaseChordDisplayModel}}),Object.defineProperty(t,"baseChordDisplayConfig",{enumerable:!0,get:function(){return i.baseChordDisplayConfig}});var a=n(r(2155)),o=r(2159),i=r(2161)},2155:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(2156)),o=n(r(2157)),i=n(r(2158));t.default=function(e){var t=e.lib,r=e.load,n=t.react,u=t["mobx-react"],l=u.observer,c=u.PropTypes,s=r(a.default),f=r(o.default),d=r(i.default);function p(e){var t=e.display;return t.error?n.createElement(f,{model:t}):t.filled?n.createElement(d,{model:t}):n.createElement(s,{model:t})}return p.propTypes={display:c.observableObject.isRequired},l(p)}},2156:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12));t.default=function(e){var t=e.lib,r=t.react,n=r.useState,o=r.useEffect,i=t["@material-ui/core/styles"].makeStyles,u=t["mobx-react"].observer,l=i((function(e){return{path:{strokeDasharray:187,strokeDashoffset:50,animation:"$dash ".concat(1.4,"s ease-in-out infinite, $colors ").concat(5.6,"s ease-in-out infinite")},"@keyframes colors":{"0%":{stroke:e.palette.primary.light},"25%":{stroke:e.palette.secondary.light},"50%":{stroke:e.palette.tertiary.light},"75%":{stroke:e.palette.quaternary.light},"100%":{stroke:e.palette.primary.light}},"@keyframes dash":{"0%":{strokeDashoffset:2},"50%":{strokeDashoffset:.5,transform:"rotate(135deg)"},"100%":{strokeDashoffset:2,transform:"rotate(720deg)"}}}}));return u((function(e){var t=e.model.renderProps.radius,i=l(),u=n(!1),c=(0,a.default)(u,2),s=c[0],f=c[1];return o((function(){var e=setTimeout((function(){return f(!0)}),400);return function(){return clearTimeout(e)}})),s?r.createElement("g",null,r.createElement("defs",null,r.createElement("pattern",{id:"diagonalHatch",width:"10",height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},r.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:"rgba(255,255,255,0.5)",strokeWidth:10}}))),r.createElement("circle",{cx:"0",cy:"0",r:t,fill:"#f1f1f1"}),r.createElement("circle",{cx:"0",cy:"0",r:t,fill:"url(#diagonalHatch)"}),r.createElement("text",{x:"0",y:"0",transform:"rotate(90 0 0)",dominantBaseline:"middle",textAnchor:"middle"},"Loading…"),r.createElement("circle",{className:i.path,fill:"none",strokeWidth:"4",strokeLinecap:"round",cx:"0",cy:"0",r:"60"})):null}))}},2157:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=e.jbrequire,r=t("react"),n=t("@material-ui/core/styles").makeStyles,a=t("mobx-react").observer,o=n({errorMessage:{},errorBackground:{},errorText:{}});return a((function(e){var t=e.model,n=t.renderProps.radius,a=t.error,i=o();return r.createElement("g",{className:i.errorMessage},r.createElement("defs",null,r.createElement("pattern",{id:"diagonalHatch",width:"10",height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},r.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:"rgba(255,0,0,0.5)",strokeWidth:10}}))),r.createElement("circle",{className:i.errorBackground,cx:"0",cy:"0",r:n,fill:"#ffb4b4"}),r.createElement("circle",{className:i.errorPattern,cx:"0",cy:"0",r:n,fill:"url(#diagonalHatch)"}),r.createElement("text",{className:i.errorText,x:"0",y:"0",transform:"rotate(90 0 0)",dominantBaseline:"middle",textAnchor:"middle"},String(a)))}))}},2158:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.jbrequire,r=t("react"),n=t("mobx-state-tree").isAlive,a=r.useEffect,o=r.useRef,u=t("mobx-react"),l=u.observer,c=u.PropTypes,s=t("react-dom"),f=s.unmountComponentAtNode,d=s.hydrate,p=t("@jbrowse/core/util").rIC;function m(e){var t=e.model,u=t.data,l=t.html,c=t.filled,s=t.renderingComponent,m=o(null);return a((function(){var e=m.current;return e&&c&&(e&&e.innerHTML&&(e.style.display="none",f(e)),e.style.outline="none",e.innerHTML=l,p((function(){if(n(t)){var a=r.createElement(s,i(i({},u),t.renderProps()),null);p((function(){n(t)&&d(a,e)}))}}))),function(){e&&f(e)}})),r.createElement("g",{ref:m})}return m.propTypes={model:c.observableObject.isRequired},l(m)}},2159:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseChordDisplayModel=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(10)),u=r(29),l=r(96),c=n(r(364)),s=r(32),f=r(95),d=r(65),p=r(17),m=n(r(2160));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=p.types.compose("BaseChordDisplay",l.BaseDisplay,p.types.model({bezierRadiusRatio:.1,assemblyName:p.types.maybe(p.types.string)})).volatile((function(){return{filled:!1,reactElement:void 0,data:void 0,message:"",renderingComponent:void 0,refNameMap:void 0}})).actions((function(e){var t=(0,p.getEnv)(e).pluginManager,r=e;return{onChordClick:function(n){(0,u.getConf)(e,"onChordClick",{feature:n,track:r,pluginManager:t})}}})).views((function(e){return{get blockDefinitions(){var t=(0,s.getContainingView)(e).staticSlices;if(!e.refNameMap)return t;var r=JSON.parse(JSON.stringify(t));return r.forEach((function(t){(t.region.elided?t.region.regions:[t.region]).forEach((function(t){var r,n=null===(r=e.refNameMap)||void 0===r?void 0:r[t.refName];n&&t.refName!==n&&(t.refName=n)}))})),r},renderProps:function(){var t=(0,s.getContainingView)(e);return h(h({},(0,d.getParentRenderProps)(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e,bezierRadius:t.radiusPx*e.bezierRadiusRatio,radius:t.radiusPx,blockDefinitions:this.blockDefinitions,onChordClick:e.onChordClick})},get rendererType(){var t=e,r=(0,p.getEnv)(e).pluginManager.getRendererType(e.rendererTypeName);if(!r)throw new Error('renderer "'.concat(t.rendererTypeName,'" not found'));if(!r.ReactComponent)throw new Error("renderer ".concat(t.rendererTypeName," has no ReactComponent, it may not be completely implemented yet"));return r},isCompatibleWithRenderer:function(e){return!!(e instanceof c.default)},get selectedFeatureId(){if((0,p.isAlive)(e)){var t=(0,s.getSession)(e);if(t){var r=t.selection;return(0,f.isFeature)(r)?r.id():void 0}}}}})).actions((function(e){return{renderStarted:function(){e.filled=!1,e.message="",e.reactElement=void 0,e.data=void 0,e.error=void 0,e.renderingComponent=void 0},renderSuccess:function(t){var r=t.message,n=t.data,a=t.reactElement,o=t.renderingComponent;r?(e.filled=!1,e.message=r,e.reactElement=void 0,e.data=void 0,e.error=void 0,e.renderingComponent=void 0):(e.filled=!0,e.message="",e.reactElement=a,e.data=n,e.error=void 0,e.renderingComponent=o)},renderError:function(t){console.error(t),e.filled=!1,e.message="",e.reactElement=void 0,e.data=void 0,e.error=t,e.renderingComponent=void 0},setRefNameMap:function(t){e.refNameMap=t}}})).actions((function(e){var t=(0,p.getEnv)(e).pluginManager.jbrequire(m.default),r=t.renderReactionData,n=t.renderReactionEffect;return{afterAttach:function(){(0,s.makeAbortableReaction)(e,r,n,{name:"".concat(e.type," ").concat(e.id," rendering"),fireImmediately:!0},e.renderStarted,e.renderSuccess,e.renderError),(0,s.makeAbortableReaction)(e,(function(){return{assemblyNames:(0,d.getTrackAssemblyNames)(e.parentTrack),adapter:(0,u.getConf)((0,p.getParent)(e,2),"adapter"),assemblyManager:(0,s.getSession)(e).assemblyManager}}),function(){var t=(0,o.default)(a.default.mark((function t(r,n){var o,i,u;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.assemblyNames,i=r.adapter,u=r.assemblyManager,t.abrupt("return",u.getRefNameMapForAdapter(i,o[0],{signal:n,sessionId:(0,d.getRpcSessionId)(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),{name:"".concat(e.type," ").concat(e.id," getting refNames"),fireImmediately:!0},(function(){}),(function(t){e.setRefNameMap(t)}),(function(t){console.error(t),e.setError(t)}))}}}));t.BaseChordDisplayModel=v},2160:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(10)),i=n(r(45)),u=n(r(20)),l=["html"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.jbrequire,r=t("@jbrowse/core/util/tracks").getRpcSessionId,n=t("@jbrowse/core/util").getContainingView,o=t("@jbrowse/core/util").getSession;function c(){return(c=(0,u.default)(a.default.mark((function e(t,r,n){var o,u,c,f,d,p,m,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("cannot render with no props");case 2:if(o=t.rendererType,u=t.rpcManager,c=t.cannotBeRenderedReason,f=t.renderArgs,d=t.renderProps,!c){e.next=5;break}return e.abrupt("return",{message:c});case 5:if(t.renderProps.radius&&t.renderArgs.regions&&t.renderArgs.regions.length){e.next=7;break}return e.abrupt("return",{message:"Skipping render"});case 7:if(n.isCompatibleWithRenderer(o)){e.next=9;break}throw new Error("renderer ".concat(o.name," is not compatible with this display type"));case 9:return e.next=11,o.renderInClient(u,s(s(s({},f),d),{},{signal:r}));case 11:return p=e.sent,m=p.html,g=(0,i.default)(p,l),e.abrupt("return",{html:m,data:g,renderingComponent:o.ReactComponent});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{renderReactionData:function(e){var t,a=n(e),i=e.rendererType;return{rendererType:i,rpcManager:o(a).rpcManager,renderProps:e.renderProps(),renderArgs:{assemblyName:null===(t=a.displayedRegions[0])||void 0===t?void 0:t.assemblyName,adapterConfig:JSON.parse(JSON.stringify(e.adapterConfig)),rendererType:i.name,regions:JSON.parse(JSON.stringify(a.displayedRegions)),blockDefinitions:e.blockDefinitions,sessionId:r(e),timeout:1e6}}},renderReactionEffect:function(e,t,r){return c.apply(this,arguments)}}}},2161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseChordDisplayConfig=void 0;var n=(0,r(29).ConfigurationSchema)("BaseChordDisplay",{onChordClick:{type:"boolean",description:"callback that should be run when a chord in the track is clicked",defaultValue:!1,contextVariable:["feature","track","pluginManager"]}},{explicitIdentifier:"displayId"});t.baseChordDisplayConfig=n},2162:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(83),u=r(32),l=r(23),c=r(210),s=n(r(198)),f=n(r(139)),d=n(r(896)),p=n(r(897)),m=n(r(898)),g=n(r(899)),h=r(208),v=n(r(2163)),y=n(r(2164)),b=(0,l.makeStyles)((function(e){return{root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden",background:"white"},scroller:{overflow:"auto"},sliceRoot:{background:"none",boxSizing:"content-box",display:"block"},iconButton:{padding:"4px",margin:"0 2px 0 2px"},controls:{overflow:"hidden",whiteSpace:"nowrap",position:"absolute",background:c.grey[200],boxSizing:"border-box",borderRight:"1px solid #a2a2a2",borderBottom:"1px solid #a2a2a2",left:0,top:0},importFormContainer:{marginBottom:e.spacing(4)}}})),w=(0,o.observer)((function(e){var t=e.model;return a.default.createElement(a.default.Fragment,null,t.staticSlices.map((function(e){return a.default.createElement(v.default,{key:(0,u.assembleLocString)(e.region.elided?e.region.regions[0]:e.region),model:t,slice:e})})),t.tracks.map((function(e){var r=e.displays[0];return a.default.createElement(r.RenderingComponent,{key:r.id,display:r,view:t})})))})),k=(0,o.observer)((function(e){var t=e.model,r=e.showingFigure,n=b();return a.default.createElement("div",{className:n.controls},a.default.createElement(l.IconButton,{onClick:t.zoomOutButton,className:n.iconButton,title:t.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:!r||t.atMaxBpPerPx||t.lockedFitToWindow,color:"secondary"},a.default.createElement(s.default,null)),a.default.createElement(l.IconButton,{onClick:t.zoomInButton,className:n.iconButton,title:"zoom in",disabled:!r||t.atMinBpPerPx,color:"secondary"},a.default.createElement(f.default,null)),a.default.createElement(l.IconButton,{onClick:t.rotateCounterClockwiseButton,className:n.iconButton,title:"rotate counter-clockwise",disabled:!r,color:"secondary"},a.default.createElement(d.default,null)),a.default.createElement(l.IconButton,{onClick:t.rotateClockwiseButton,className:n.iconButton,title:"rotate clockwise",disabled:!r,color:"secondary"},a.default.createElement(p.default,null)),a.default.createElement(l.IconButton,{onClick:t.toggleFitToWindowLock,className:n.iconButton,title:t.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:t.tooSmallToLock,color:"secondary"},t.lockedFitToWindow?a.default.createElement(m.default,null):a.default.createElement(g.default,null)),t.hideTrackSelectorButton?null:a.default.createElement(l.IconButton,{onClick:t.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",color:"secondary"},a.default.createElement(h.TrackSelector,null)))})),O=(0,o.observer)((function(e){var t=e.model,r=b(),n=!!t.displayedRegions.length&&t.figureWidth&&t.figureHeight,o=!n&&!t.disableImportForm,u=n&&!o;return a.default.createElement("div",{className:r.root,style:{width:t.width,height:t.height},"data-testid":t.id},t.error?a.default.createElement(i.ErrorMessage,{error:t.error}):a.default.createElement(a.default.Fragment,null,o?a.default.createElement(y.default,{model:t}):null,a.default.createElement(a.default.Fragment,null,u?a.default.createElement("div",{className:r.scroller,style:{width:t.width,height:t.height}},a.default.createElement("div",{className:r.rotator,style:{transform:["rotate(".concat(t.offsetRadians,"rad)")].join(" "),transition:"transform 0.5s",transformOrigin:t.centerXY.map((function(e){return"".concat(e,"px")})).join(" ")}},a.default.createElement("svg",{style:{position:"absolute",left:0,top:0},className:r.sliceRoot,width:"".concat(t.figureWidth,"px"),height:"".concat(t.figureHeight,"px"),version:"1.1"},a.default.createElement("g",{transform:"translate(".concat(t.centerXY,")")},a.default.createElement(w,{model:t}))))):null,a.default.createElement(k,{model:t,showingFigure:u}),t.hideVerticalResizeHandle?null:a.default.createElement(i.ResizeHandle,{onDrag:t.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))))}));t.default=O},2163:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(33)),o=n(r(1)),i=r(14),u=r(32),l=r(523),c=r(34),s=(0,c.makeStyles)({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function f(e,t,r,n){if(e.flipped){var o=[n,r];r=o[0],n=o[1]}var i=e.bpToXY(r,t),u=e.bpToXY(n,t),l=Math.abs(n-r)/e.bpPerRadian>Math.PI?"1":"0";return["M"].concat((0,a.default)(i),["A",t,t,"0",l,"1"],(0,a.default)(u)).join(" ")}var d=(0,i.observer)((function(e){var t=e.model,r=e.slice,n=(0,c.useTheme)(),i=t.radiusPx+1,l=r.endRadians,s=r.startRadians,f=r.region,d=(0,u.polarToCartesian)(i,s),m=(0,u.polarToCartesian)(i,l),g=(l-s)*i,h=l-s>Math.PI?"1":"0",v=(l+s)/2,y="[".concat(Number(f.regions.length).toLocaleString(),"]");return o.default.createElement(o.default.Fragment,null,o.default.createElement(p,{text:y,view:t,maxWidthPx:g,radians:v,radiusPx:i,title:"".concat(Number(f.regions.length).toLocaleString()," more regions"),color:n.palette.text.primary}),o.default.createElement("path",{d:["M"].concat((0,a.default)(d),["A",i,i,"0",h,"1"],(0,a.default)(m)).join(" "),stroke:n.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"}))})),p=(0,i.observer)((function(e){var t=e.view,r=e.text,n=e.maxWidthPx,a=e.radians,i=e.radiusPx,l=e.title,c=e.color,f=s(),d=(0,u.polarToCartesian)(i+5,a);return r?6.5*r.length<n?o.default.createElement("text",{x:0,y:0,className:f.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:"translate(".concat(d,") rotate(").concat((0,u.radToDeg)(a)+90,")"),style:{fill:c}},r,o.default.createElement("title",null,l||r)):n>4?(0,u.radToDeg)(a+t.offsetRadians-Math.PI/2)>=180?o.default.createElement("text",{x:0,y:0,className:f.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:"translate(".concat(d,") rotate(").concat((0,u.radToDeg)(a),")"),style:{fill:c}},r,o.default.createElement("title",null,l||r)):o.default.createElement("text",{x:0,y:0,className:f.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:"translate(".concat(d,") rotate(").concat((0,u.radToDeg)(a)+180,")"),style:{fill:c}},r,o.default.createElement("title",null,l||r)):null:null})),m=(0,i.observer)((function(e){var t,r=e.model,n=e.slice,a=(0,c.useTheme)(),i=r.radiusPx,s=n.region,d=n.endRadians,m=n.startRadians,g=(d+m)/2,h=(d-m)*i,v=(0,u.getSession)(r).assemblyManager.get(n.region.assemblyName);if(v&&(t=v.getRefNameColor(s.refName)),t)try{t=(0,l.makeContrasting)(t,a.palette.background.paper)}catch(e){t=a.palette.text.primary}else t=a.palette.text.primary;return o.default.createElement(o.default.Fragment,null,o.default.createElement(p,{text:s.refName,view:r,maxWidthPx:h,radians:g,radiusPx:i,color:t}),o.default.createElement("path",{d:f(n,i+1,s.start,s.end),stroke:t,strokeWidth:2,fill:"none"},o.default.createElement("title",null,s.refName)))})),g=(0,i.observer)((function(e){var t=e.model,r=e.slice;return r.region.elided?o.default.createElement(d,{key:(0,u.assembleLocString)(r.region.regions[0]),model:t,slice:r}):o.default.createElement(m,{key:(0,u.assembleLocString)(r.region),model:t,slice:r})}));t.default=g},2164:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=r(14),c=r(32),s=n(r(517)),f=n(r(518));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,u.makeStyles)((function(e){return{importFormContainer:{marginBottom:e.spacing(4)}}})),m=(0,l.observer)((function(e){var t=e.model,r=p(),n=(0,c.getSession)(t),a=t.error,l=n.assemblyNames,d=n.assemblyManager,m=(0,i.useState)(l[0]),g=(0,o.default)(m,2),h=g[0],v=g[1],y=(0,i.useState)(a),b=(0,o.default)(y,2),w=b[0],k=b[1],O=d.get(h),P=l.length?null==O?void 0:O.error:"No configured assemblies",E=(null==O?void 0:O.regions)||[],S=P||w;return i.default.createElement(u.Container,{className:r.importFormContainer},S?i.default.createElement(u.Grid,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},i.default.createElement(u.Grid,{item:!0},i.default.createElement(s.default,{error:S}))):null,i.default.createElement(u.Grid,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},i.default.createElement(u.Grid,{item:!0},i.default.createElement(f.default,{onChange:function(e){k(void 0),v(e)},session:n,selected:h})),i.default.createElement(u.Grid,{item:!0},i.default.createElement(u.Button,{disabled:!(null!=E&&E.length),onClick:function(){return t.setDisplayedRegions(E)},variant:"contained",color:"primary"},E.length?"Open":"Loading…"))))}));t.default=m},2165:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(15)),i=n(r(16)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(10)),d=n(r(140)),p=r(96),m=n(r(207)),g=n(r(162)),h=n(r(114)),v=r(141),y=r(65),b=r(2198),w=r(2200),k=r(945),O=r(2204),P=r(2206),E=r(2209),S=n(r(2211)),x=r(2214);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var D=function(e){(0,l.default)(r,e);var t=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"supportsSVG",!0),e}return(0,i.default)(r,[{key:"getExpandedRegion",value:function(e){return T(T({},e),{},{start:Math.max(e.start-3,0),end:e.end+3})}}]),r}(m.default),A=function(e){(0,l.default)(n,e);var t=R(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","SequencePlugin"),e}return(0,i.default)(n,[{key:"install",value:function(e){e.addAdapterType((function(){return new d.default({name:"TwoBitAdapter",configSchema:E.configSchema,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return j(r(2215))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="TwoBitAdapter",o=(0,y.getFileName)(t),i={type:a,twoBitLocation:t};return/\.2bit$/i.test(o)&&!n||n===a?i:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"TwoBitAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new d.default({name:"ChromSizesAdapter",configSchema:w.configSchema,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return j(r(2216))})).then((function(e){return e.default}))}})})),e.addAdapterType((function(){return new d.default({name:"IndexedFastaAdapter",configSchema:O.configSchema,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return j(r(946))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="IndexedFastaAdapter",o=(0,y.getFileName)(t),i={type:a,fastaLocation:t,faiLocation:r||(0,y.makeIndex)(t,".fai")};return/\.(fa|fasta|fas|fna|mfa)$/i.test(o)&&!n||n===a?i:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"IndexedFastaAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new d.default({name:"BgzipFastaAdapter",configSchema:b.configSchema,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return j(r(2217))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="BgzipFastaAdapter",o=(0,y.getFileName)(t),i={type:a,faiLocation:(0,y.makeIndex)(t,".fai"),gziLocation:(0,y.makeIndex)(t,".gzi")};return/\.(fa|fasta|fas|fna|mfa)\.b?gz$/i.test(o)&&!n||n===a?i:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"BgzipFastaAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new d.default(T({name:"GCContentAdapter",adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}},e.load(S.default)))})),e.addTrackType((function(){var t=(0,x.createReferenceSeqTrackConfig)(e);return new g.default({name:"ReferenceSequenceTrack",configSchema:t,stateModel:(0,p.createBaseTrackModel)(e,"ReferenceSequenceTrack",t)})})),e.addDisplayType((function(){var e=(0,P.modelFactory)(P.configSchema);return{name:"LinearReferenceSequenceDisplay",configSchema:P.configSchema,stateModel:e,trackType:"ReferenceSequenceTrack",viewType:"LinearGenomeView",ReactComponent:v.BaseLinearDisplayComponent}})),e.addRendererType((function(){return new D({name:"DivSequenceRenderer",ReactComponent:k.ReactComponent,configSchema:k.configSchema,pluginManager:e})}))}}]),n}(h.default);t.default=A},2166:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseLinearDisplayConfigSchema=void 0;var n=(0,r(29).ConfigurationSchema)("BaseLinearDisplay",{maxFeatureScreenDensity:{type:"number",description:"maximum features per pixel that is displayed in the view, used if byte size estimates not available",defaultValue:.3},fetchSizeLimit:{type:"number",defaultValue:1e6,description:"maximum data to attempt to download for a given track, used if adapter doesn't specify one"}},{explicitIdentifier:"displayId"});t.baseLinearDisplayConfigSchema=n},2167:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLinearDisplay=void 0;var o=n(r(45)),i=n(r(19)),u=n(r(20)),l=n(r(33)),c=n(r(10)),s=n(r(1)),f=r(23),d=r(96),p=r(29),m=r(32),g=n(r(2168)),h=r(95),v=r(65),y=r(43),b=r(17),w=n(r(264)),k=r(940),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(2171)),P=["blockState"];function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){var r="undefined"==typeof jest;return"clip-".concat(r?e:"jest","-").concat(t)}var T=b.types.compose("BaseLinearDisplay",d.BaseDisplay,b.types.model({height:b.types.optional(b.types.refinement("displayHeight",b.types.number,(function(e){return e>=20})),100),blockState:b.types.map(O.default),userBpPerPxLimit:b.types.maybe(b.types.number),userByteSizeLimit:b.types.maybe(b.types.number)})).volatile((function(){return{currBpPerPx:0,message:"",featureIdUnderMouse:void 0,contextMenuFeature:void 0,scrollTop:0,estimatedRegionStatsP:void 0,estimatedRegionStats:void 0}})).views((function(e){return{get blockType(){return"staticBlocks"},get blockDefinitions(){var t=this.blockType,r=(0,m.getContainingView)(e);if(!r.initialized)throw new Error("view not initialized yet");return r[t]}}})).views((function(e){return{get renderDelay(){return 50},get TooltipComponent(){return k.Tooltip},get selectedFeatureId(){if((0,b.isAlive)(e)){var t=(0,m.getSession)(e).selection;if((0,h.isFeature)(t))return t.id()}},get DisplayMessageComponent(){}}})).views((function(e){return{get features(){var t,r=[],n=C(e.blockState.values());try{for(n.s();!(t=n.n()).done;){var a=t.value;a&&a.features&&r.push(a.features)}}catch(e){n.e(e)}finally{n.f()}return new g.default(r)},get featureUnderMouse(){var t=e.featureIdUnderMouse;return t?this.features.get(t):void 0},getFeatureOverlapping:function(t,r,n){var a,o;return null===(a=e.blockState.get(t))||void 0===a||null===(o=a.layout)||void 0===o?void 0:o.getByCoord(r,n)},getFeatureByID:function(t,r){var n,a;return null===(n=e.blockState.get(t))||void 0===n||null===(a=n.layout)||void 0===a?void 0:a.getByID(r)},searchFeatureByID:function(t){var r;return e.blockState.forEach((function(e){var n,a=null==e||null===(n=e.layout)||void 0===n?void 0:n.getByID(t);a&&(r=a)})),r},get currentBytesRequested(){var t;return(null===(t=e.estimatedRegionStats)||void 0===t?void 0:t.bytes)||0},get currentFeatureScreenDensity(){var t,r=(0,m.getContainingView)(e);return((null===(t=e.estimatedRegionStats)||void 0===t?void 0:t.featureDensity)||0)*r.bpPerPx},get maxFeatureScreenDensity(){return(0,p.getConf)(e,"maxFeatureScreenDensity")},get estimatedStatsReady(){return!!e.estimatedRegionStats},get maxAllowableBytes(){var t;return e.userByteSizeLimit||(null===(t=e.estimatedRegionStats)||void 0===t?void 0:t.fetchSizeLimit)||(0,p.getConf)(e,"fetchSizeLimit")}}})).actions((function(e){return{setMessage:function(t){e.message=t},afterAttach:function(){var t=this,r=(0,y.autorun)((function(){var r={};(0,m.getContainingView)(e).initialized&&(e.blockDefinitions.contentBlocks.forEach((function(n){r[n.key]=!0,e.blockState.has(n.key)||t.addBlock(n.key,n)})),e.blockState.forEach((function(e,n){r[n]||t.deleteBlock(n)})))}));(0,b.addDisposer)(e,r)},estimateRegionsStats:function(t,r){var n=this;if(e.estimatedRegionStatsP)return e.estimatedRegionStatsP;var a=(0,m.getSession)(e).rpcManager,o=e.adapterConfig;if(!o)return Promise.resolve({});var i=(0,v.getRpcSessionId)(e),u=x({sessionId:i,regions:t,adapterConfig:o,statusCallback:function(t){(0,b.isAlive)(e)&&n.setMessage(t)}},r);return e.estimatedRegionStatsP=a.call(i,"CoreEstimateRegionStats",u).catch((function(e){throw n.setRegionStatsP(void 0),e})),e.estimatedRegionStatsP},setRegionStatsP:function(t){e.estimatedRegionStatsP=t},setRegionStats:function(t){e.estimatedRegionStats=t},clearRegionStats:function(){e.estimatedRegionStatsP=void 0,e.estimatedRegionStats=void 0},setHeight:function(t){return e.height=t>20?t:20,e.height},resizeHeight:function(t){var r=e.height;return this.setHeight(e.height+t)-r},setScrollTop:function(t){e.scrollTop=t},updateStatsLimit:function(t){var r=(0,m.getContainingView)(e);t.bytes?e.userByteSizeLimit=t.bytes:e.userBpPerPxLimit=r.bpPerPx},addBlock:function(t,r){e.blockState.set(t,O.default.create({key:t,region:r.toRegion()}))},setCurrBpPerPx:function(t){e.currBpPerPx=t},deleteBlock:function(t){e.blockState.delete(t)},selectFeature:function(t){var r=(0,m.getSession)(e);if((0,m.isSessionModelWithWidgets)(r)){var n=r.addWidget("BaseFeatureWidget","baseFeature",{view:(0,m.getContainingView)(e),track:(0,m.getContainingTrack)(e),featureData:t.toJSON()});r.showWidget(n)}(0,m.isSelectionContainer)(r)&&r.setSelection(t)},clearFeatureSelection:function(){(0,m.getSession)(e).clearSelection()},setFeatureIdUnderMouse:function(t){e.featureIdUnderMouse=t},reload:function(){(0,l.default)(e.blockState.values()).map((function(e){return e.doReload()}))},setContextMenuFeature:function(t){e.contextMenuFeature=t}}})).views((function(e){return{get regionTooLarge(){var t=(0,m.getContainingView)(e);if(!e.estimatedStatsReady||t.dynamicBlocks.totalBp<2e4)return!1;var r=e.userBpPerPxLimit?t.bpPerPx>e.userBpPerPxLimit:e.currentFeatureScreenDensity>e.maxFeatureScreenDensity;return e.currentBytesRequested>e.maxAllowableBytes||r},get regionTooLargeReason(){var t,r=e.currentBytesRequested,n=e.maxAllowableBytes;return r&&r>n?"Requested too much data (".concat((t=r,Math.floor(t/1e6)>0?"".concat(parseFloat((t/1e6).toPrecision(3))," Mb"):Math.floor(t/1e3)>0?"".concat(parseFloat((t/1e3).toPrecision(3))," Kb"):"".concat(Math.floor(t)," bytes")),")"):""}}})).actions((function(e){var t=e.reload;return{reload:function(){return(0,u.default)(i.default.mark((function r(){var n,a,o;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.setError(),n=new AbortController,(a=(0,m.getContainingView)(e)).initialized&&a.staticBlocks.contentBlocks.length){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,e.estimatedRegionStatsP=e.estimateRegionsStats(a.staticBlocks.contentBlocks,{signal:n.signal}),r.next=9,e.estimatedRegionStatsP;case 9:if(o=r.sent,!(0,b.isAlive)(e)){r.next=15;break}e.setRegionStats(o),t(),r.next=16;break;case 15:return r.abrupt("return");case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(5),console.error(r.t0),e.setError(r.t0);case 22:case"end":return r.stop()}}),r,null,[[5,18]])})))()},afterAttach:function(){(0,b.addDisposer)(e,(0,y.autorun)((0,u.default)(i.default.mark((function t(){var r,n,a,o,u;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=new AbortController,(a=(0,m.getContainingView)(e)).initialized&&a.staticBlocks.contentBlocks.length){t.next=5;break}return t.abrupt("return");case 5:if(void 0===(null===(r=e.estimatedRegionStats)||void 0===r?void 0:r.featureDensity)){t.next=8;break}return e.setCurrBpPerPx(a.bpPerPx),t.abrupt("return");case 8:if(a.bpPerPx!==e.currBpPerPx){t.next=10;break}return t.abrupt("return");case 10:return e.clearRegionStats(),e.setCurrBpPerPx(a.bpPerPx),o=e.estimateRegionsStats(a.staticBlocks.contentBlocks,{signal:n.signal}),e.setRegionStatsP(o),t.next=16,o;case 16:u=t.sent,(0,b.isAlive)(e)&&e.setRegionStats(u),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),!(0,m.isAbortException)(t.t0)&&(0,b.isAlive)(e)&&(console.error(t.t0),e.setError(t.t0));case 23:case"end":return t.stop()}}),t,null,[[0,20]])}))),{delay:500}))}}})).views((function(e){return{regionCannotBeRenderedText:function(t){return e.regionTooLarge?"Force load to see features":""},regionCannotBeRendered:function(t){var r=e.regionTooLarge,n=e.regionTooLargeReason;if(r)return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Typography,{component:"span",variant:"body2"},n?n+". ":"","Zoom in to see features or"," "),s.default.createElement(f.Button,{"data-testid":"force_reload_button",onClick:function(){e.estimatedRegionStats?(e.updateStatsLimit(e.estimatedRegionStats),e.reload()):console.error("No global stats?")},variant:"outlined"},"Force Load"),s.default.createElement(f.Typography,{component:"span",variant:"body2"},"(force load may be slow)"))},trackMenuItems:function(){return[]},contextMenuItems:function(){return e.contextMenuFeature?[{label:"Open feature details",icon:w.default,onClick:function(){e.contextMenuFeature&&e.selectFeature(e.contextMenuFeature)}}]:[]},renderProps:function(){var t=(0,m.getContainingView)(e);return x(x({},(0,v.getParentRenderProps)(e)),{},{notReady:e.currBpPerPx!==t.bpPerPx||!e.estimatedRegionStats,rpcDriverName:e.rpcDriverName,displayModel:e,onFeatureClick:function(t,r){var n=r||e.featureIdUnderMouse;if(n){var a=e.features.get(n);a&&e.selectFeature(a)}else e.clearFeatureSelection()},onClick:function(){e.clearFeatureSelection()},onFeatureContextMenu:function(t,r){var n=r||e.featureIdUnderMouse;n?e.setContextMenuFeature(e.features.get(n)):e.clearFeatureSelection()},onMouseMove:function(t,r){e.setFeatureIdUnderMouse(r)},onMouseLeave:function(t){e.setFeatureIdUnderMouse(void 0)},onContextMenu:function(){e.setContextMenuFeature(void 0),e.clearFeatureSelection()}})}}})).actions((function(e){return{renderSvg:function(t){return(0,u.default)(i.default.mark((function r(){var n,a,o,u,l,c,f,d;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.height,a=e.id,o=t.overrideHeight,u=(0,m.getContainingView)(e),l=u.offsetPx,c=u.roundedDynamicBlocks,f=u.width,r.next=6,Promise.all(c.map((function(r){var n=O.default.create({key:r.key,region:r}),a=e.regionCannotBeRenderedText(r)||e.regionCannotBeRendered(r);if(a)return{reactElement:s.default.createElement(s.default.Fragment,null,s.default.createElement("rect",{x:0,y:0,width:f,height:20,fill:"#aaa"}),s.default.createElement("text",{x:0,y:15},a))};var o=(0,O.renderBlockData)(n,e),i=o.rpcManager,u=o.renderArgs,l=o.renderProps;return o.rendererType.renderInClient(i,x(x(x({},u),l),{},{viewParams:(0,m.getViewParams)(e,!0),exportSVG:t}))})));case 6:return d=r.sent,r.abrupt("return",s.default.createElement(s.default.Fragment,null,d.map((function(e,t){var r=c[t].offsetPx-l,i=M(a,t);return s.default.createElement(s.default.Fragment,{key:"frag-".concat(t)},s.default.createElement("defs",null,s.default.createElement("clipPath",{id:i},s.default.createElement("rect",{x:0,y:0,width:f,height:o||n}))),s.default.createElement("g",{transform:"translate(".concat(r," 0)")},s.default.createElement("g",{clipPath:"url(#".concat(i,")")},s.default.isValidElement(e.reactElement)?e.reactElement:s.default.createElement("g",{dangerouslySetInnerHTML:{__html:e.html}}))))}))));case 8:case"end":return r.stop()}}),r)})))()}}})).postProcessSnapshot((function(e){e.blockState;return(0,o.default)(e,P)}));t.BaseLinearDisplay=T},2168:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(15)),i=n(r(16));function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){function t(e){(0,o.default)(this,t),this.submaps=e}return(0,i.default)(t,[{key:"has",value:function(e){var t,r=u(this.submaps.values());try{for(r.s();!(t=r.n()).done;){if(t.value.has(e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"get",value:function(e){var t,r=u(this.submaps.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.has(e))return n.get(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"values",value:a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u(this.keys()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,this.get(n);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"keys",value:a.default.mark((function(){var e,t,r,n,o,i,l,c,s,f;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=new Set,t=u(this.submaps.values());try{for(t.s();!(r=t.n()).done;){n=r.value,o=u(n.keys());try{for(o.s();!(i=o.n()).done;)l=i.value,e.add(l)}catch(e){o.e(e)}finally{o.f()}}}catch(e){t.e(e)}finally{t.f()}c=u(e),a.prev=4,c.s();case 6:if((s=c.n()).done){a.next=12;break}return f=s.value,a.next=10,f;case 10:a.next=6;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(4),c.e(a.t0);case 17:return a.prev=17,c.f(),a.finish(17);case 20:case"end":return a.stop()}}),e,this,[[4,14,17,20]])}))},{key:"find",value:function(e){var t,r=u(this.submaps.values());try{for(r.s();!(t=r.n()).done;){var n,a=u(t.value.values());try{for(a.s();!(n=a.n()).done;){var o=n.value;if(e(o))return o}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}}},{key:e,value:a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u(this.keys()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,[n,this.get(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u(this.keys()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,[n,this.get(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))}]),t}(Symbol.iterator);t.default=c},2169:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36)),i=n(r(10)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(29),s=r(14),f=r(23),d=r(370);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=(0,f.makeStyles)((function(e){return{tooltip:{pointerEvents:"none",backgroundColor:(0,f.alpha)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(12),lineHeight:"".concat((t=1.4,Math.round(1e5*t)/1e5),"em"),maxWidth:300,wordWrap:"break-word"}};var t})),v=l.default.forwardRef((function(e,t){var r=e.message;return l.default.createElement("div",{ref:t},r)})),y=(0,s.observer)((function(e){var t=e.model,r=e.clientMouseCoord,n=h(),a=t.featureUnderMouse,i=(0,l.useState)(0),s=(0,u.default)(i,2),p=s[0],m=s[1],y=(0,l.useState)(null),b=(0,u.default)(y,2),w=b[0],k=b[1],O=(0,l.useMemo)((function(){return{getBoundingClientRect:function(){var e=r[0]+p/2+20,t=r[1];return{top:t,left:e,bottom:t,right:e,width:0,height:0,x:e,y:t,toJSON:function(){}}}}}),[r,p]),P=(0,d.usePopper)(O,w),E=P.styles,S=P.attributes,x=a?(0,c.getConf)(t,"mouseover",{feature:a}):void 0;return a&&x?l.default.createElement(f.Portal,null,l.default.createElement("div",(0,o.default)({ref:k,className:n.tooltip,style:g(g({},E.popper),{},{zIndex:1e5})},S.popper),l.default.createElement(v,{ref:function(e){return m((null==e?void 0:e.getBoundingClientRect().width)||0)},message:x}))):null}));t.default=y},2170:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=t.default=t.RenderedBlocks=void 0;var a=n(r(11)),o=n(r(1)),i=r(34),u=r(32),l=r(14),c=r(206),s=r(527),f=(0,i.makeStyles)({linearBlocks:{whiteSpace:"nowrap",textAlign:"left",position:"absolute",minHeight:"100%",display:"flex"},heightOverflowed:{position:"absolute",color:"rgb(77,77,77)",borderBottom:"2px solid rgb(77,77,77)",textShadow:"white 0px 0px 1px",whiteSpace:"nowrap",width:"100%",fontWeight:"bold",textAlign:"center",zIndex:2e3,boxSizing:"border-box"}});t.useStyles=f;var d=(0,l.observer)((function(e){var t=e.model,r=f(),n=t.blockDefinitions,i=t.blockState;return o.default.createElement(o.default.Fragment,null,n.map((function(e){if(e instanceof c.ContentBlock){var n=i.get(e.key);return o.default.createElement(s.ContentBlock,{block:e,key:"".concat(t.id,"-").concat(e.key)},n&&n.ReactComponent?o.default.createElement(n.ReactComponent,{model:n}):null,n&&n.maxHeightReached?o.default.createElement("div",{className:r.heightOverflowed,style:{top:n.layout.getTotalHeight()-16,pointerEvents:"none",height:16}},"Max height reached"):null)}if(e instanceof c.ElidedBlock)return o.default.createElement(s.ElidedBlock,{key:"".concat(t.id,"-").concat(e.key),width:e.widthPx});if(e instanceof c.InterRegionPaddingBlock)return o.default.createElement(s.InterRegionPaddingBlock,{key:e.key,width:e.widthPx,style:{background:"none"},boundary:"boundary"===e.variant});throw new Error("invalid block type ".concat((0,a.default)(e)))})))}));t.RenderedBlocks=d;var p=(0,l.observer)((function(e){var t=e.model,r=f(),n=t.blockDefinitions,a=(0,u.getContainingView)(t);return o.default.createElement("div",{"data-testid":"Blockset",className:r.linearBlocks,style:{left:n.offsetPx-a.offsetPx}},o.default.createElement(d,{model:t}))}));t.default=p},2171:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.renderBlockData=v;var a=n(r(19)),o=n(r(10)),i=n(r(20)),u=r(17),l=r(29),c=r(32),s=r(70),f=r(127),d=r(65),p=n(r(2172));function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=u.types.model("BlockState",{key:u.types.string,region:s.Region,reloadFlag:0,isLeftEndOfDisplayedRegion:!1,isRightEndOfDisplayedRegion:!1}).volatile((function(){return{renderInProgress:void 0,filled:!1,reactElement:void 0,features:void 0,layout:void 0,status:"",error:void 0,message:void 0,maxHeightReached:!1,ReactComponent:p.default,renderProps:void 0}})).actions((function(e){var t;return{doReload:function(){e.reloadFlag=e.reloadFlag+1},afterAttach:function(){var t=(0,c.getContainingDisplay)(e);(0,c.makeAbortableReaction)(e,v,y,{name:"".concat(t.id,"/").concat((0,c.assembleLocString)(e.region)," rendering"),delay:t.renderDelay,fireImmediately:!0},this.setLoading,this.setRendered,this.setError)},setStatus:function(t){e.status=t},setLoading:function(r){void 0!==t&&(t.signal.aborted||t.abort()),e.filled=!1,e.message=void 0,e.reactElement=void 0,e.features=void 0,e.layout=void 0,e.error=void 0,e.maxHeightReached=!1,e.renderProps=void 0,t=r},setMessage:function(r){t&&!t.signal.aborted&&t.abort(),e.filled=!1,e.message=r,e.reactElement=void 0,e.features=void 0,e.layout=void 0,e.error=void 0,e.maxHeightReached=!1,e.renderProps=void 0,t=void 0},setRendered:function(r){if(r){var n=r.reactElement,a=r.features,o=r.layout,i=r.maxHeightReached,u=r.renderProps;e.filled=!0,e.message=void 0,e.reactElement=n,e.features=a,e.layout=o,e.error=void 0,e.maxHeightReached=i,e.renderProps=u,t=void 0}},setError:function(r){console.error(r),t&&!t.signal.aborted&&t.abort(),e.filled=!1,e.message=void 0,e.reactElement=void 0,e.features=void 0,e.layout=void 0,e.maxHeightReached=!1,e.error=r,e.renderProps=void 0,t=void 0,(0,f.isRetryException)(r)&&this.reload()},reload:function(){e.renderInProgress=void 0,e.filled=!1,e.reactElement=void 0,e.features=void 0,e.layout=void 0,e.error=void 0,e.message=void 0,e.maxHeightReached=!1,e.ReactComponent=p.default,e.renderProps=void 0,(0,u.getParent)(e,2).reload()},beforeDestroy:function(){t&&!t.signal.aborted&&t.abort();var r=(0,c.getContainingDisplay)(e),n=(0,c.getSession)(e).rpcManager,a=r.rendererType,o=v((0,u.cast)(e)).renderArgs;o&&a.freeResourcesInClient(n,JSON.parse(JSON.stringify(o))).catch((function(e){console.warn("Error while destroying block",e)}))}}}));function v(e,t){try{var r=t||(0,c.getContainingDisplay)(e),n=(0,c.getSession)(r),a=n.assemblyManager,o=n.rpcManager,i=r.adapterConfig,s=r.rendererType,f=r.error,p=r.parentTrack,m=(0,d.getTrackAssemblyNames)(p),g=e.region.assemblyName;if(!m.includes(g)&&!m.find((function(e){var t;return null===(t=a.get(e))||void 0===t?void 0:t.hasName(g)})))throw new Error("region assembly (".concat(g,") does not match track assemblies (").concat(m,")"));var h=r.renderProps(),v=h.config;(0,l.readConfObject)(v);var y=(0,d.getRpcSessionId)(r),b=(0,c.getContainingView)(r).id;return{rendererType:s,rpcManager:o,renderProps:h,cannotBeRenderedReason:r.regionCannotBeRendered(e.region),displayError:f,renderArgs:{statusCallback:function(t){(0,u.isAlive)(e)&&e.setStatus(t)},assemblyName:e.region.assemblyName,regions:[e.region],adapterConfig:i,rendererType:s.name,sessionId:y,layoutId:b,blockKey:e.key,reloadFlag:e.reloadFlag,timeout:1e6}}}catch(e){return{displayError:e}}}function y(e,t,r){return b.apply(this,arguments)}function b(){return(b=(0,i.default)(a.default.mark((function e(t,r,n){var o,i,l,s,f,d,p,m,h,v,y,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(o=t).rendererType,l=o.renderProps,s=o.rpcManager,f=o.renderArgs,d=o.cannotBeRenderedReason,p=o.displayError,(0,u.isAlive)(n)){e.next=3;break}return e.abrupt("return",void 0);case 3:if(!p){e.next=6;break}return n.setError(p),e.abrupt("return",void 0);case 6:if(!d){e.next=9;break}return n.setMessage(d),e.abrupt("return",void 0);case 9:if(!l.notReady){e.next=11;break}return e.abrupt("return",void 0);case 11:return e.next=13,i.renderInClient(s,g(g(g({},f),l),{},{viewParams:(0,c.getViewParams)(n),signal:r}));case 13:return m=e.sent,h=m.reactElement,v=m.features,y=m.layout,b=m.maxHeightReached,e.abrupt("return",{reactElement:h,features:v,layout:y,maxHeightReached:b});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=h},2172:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=n(r(52)),l=r(34),c=r(14),s=r(17),f=r(65),d=n(r(71)),p=n(r(783));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=(0,l.makeStyles)((function(e){return{loading:{paddingLeft:"0.6em",backgroundColor:e.palette.action.disabledBackground,backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,.5) 5px, rgba(255,255,255,.5) 10px)",height:"100%",width:"100%",pointerEvents:"none",textAlign:"center"},blockMessage:{width:"100%",background:e.palette.action.disabledBackground,padding:e.spacing(2),pointerEvents:"none",textAlign:"center"},blockError:{padding:e.spacing(2),width:"100%",whiteSpace:"normal",color:e.palette.error.main,overflowY:"auto"},blockReactNodeMessage:{width:"100%",background:e.palette.action.disabledBackground,padding:e.spacing(2),textAlign:"center"},dots:{"&::after":{display:"inline-block",animation:"$ellipsis 1.5s infinite",content:'"."',width:"1em",textAlign:"left"}},"@keyframes ellipsis":{"0%":{content:'"."'},"33%":{content:'".."'},"66%":{content:'"..."'}}}}));function h(e){var t=e.children;return i.default.createElement("div",{style:{display:"flex"}},t,t)}var v=(0,c.observer)((function(e){var t=e.model,r=(0,i.useState)(!1),n=(0,o.default)(r,2),a=n[0],l=n[1],c=g();(0,i.useEffect)((function(){var e=!1,t=setTimeout((function(){e||l(!0)}),300);return function(){clearTimeout(t),e=!0}}),[]);var f=t.status,d=(0,s.getParent)(t,2).message||f;return i.default.createElement(i.default.Fragment,null,a?i.default.createElement("div",{className:c.loading},i.default.createElement(u.default,{className:c.dots,variant:"body2"},d?"".concat(d):"Loading")):null)}));function y(e){var t=e.messageContent,r=g();return i.default.isValidElement(t)?i.default.createElement("div",{className:r.blockReactNodeMessage},t):i.default.createElement(u.default,{variant:"body2",className:r.blockMessage},t)}function b(e){var t=e.error,r=e.reload,n=e.displayHeight,a=g();return i.default.createElement("div",{className:a.blockError,style:{height:n}},r?i.default.createElement(d.default,{"data-testid":"reload_button",onClick:r,startIcon:i.default.createElement(p.default,null)},"Reload"):null,i.default.createElement(u.default,{color:"error",variant:"body2",display:"inline"},"".concat(t)))}var w=(0,c.observer)((function(e){var t=e.model;return t.error?i.default.createElement(h,null,i.default.createElement(b,{error:t.error,reload:t.reload,displayHeight:(0,f.getParentRenderProps)(t).displayModel.height})):t.message?i.default.createElement(h,null,i.default.createElement(y,{messageContent:t.message})):t.filled?t.reactElement:i.default.createElement(h,null,i.default.createElement(v,{model:t}))}));t.default=w},2173:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchemaFactory",{enumerable:!0,get:function(){return n.configSchemaFactory}}),Object.defineProperty(t,"stateModelFactory",{enumerable:!0,get:function(){return a.stateModelFactory}});var n=r(2174),a=r(2175)},2174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configSchemaFactory=function(e){return(0,n.ConfigurationSchema)("LinearBareDisplay",{renderer:e.pluggableConfigSchemaType("renderer")},{baseConfiguration:a.baseLinearDisplayConfigSchema,explicitlyTyped:!0})};var n=r(29),a=r(278)},2175:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.stateModelFactory=function(e){return u.types.compose("LinearBareDisplay",l.BaseLinearDisplay,u.types.model({type:u.types.literal("LinearBareDisplay"),configuration:(0,o.ConfigurationReference)(e)})).views((function(e){var t=e.renderProps;return{renderProps:function(){return s(s(s({},t()),(0,i.getParentRenderProps)(e)),{},{rpcDriverName:e.rpcDriverName,config:e.configuration.renderer})},get rendererTypeName(){return e.configuration.renderer.type}}}))};var a=n(r(10)),o=r(904),i=r(65),u=r(17),l=r(278);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2176:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.renderToSvg=function(e,t){return x.apply(this,arguments)};var a=n(r(19)),o=n(r(20)),i=n(r(10)),u=n(r(1)),l=r(928),c=r(43),s=r(17),f=r(29),d=r(32),p=n(r(362)),m=n(r(2177)),g=r(128),h=r(941);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=e.model,r=e.fontSize,n=t.offsetPx,a=t.dynamicBlocks,o=a.totalWidthPxWithoutBorders,i=a.totalBp,l=(0,d.getBpDisplayStr)(i),c=Math.max(-n,0),s=c+o;return u.default.createElement(u.default.Fragment,null,u.default.createElement("line",{x1:c,x2:s,y1:10,y2:10,stroke:"black"}),u.default.createElement("line",{x1:c,x2:c,y1:5,y2:15,stroke:"black"}),u.default.createElement("line",{x1:s,x2:s,y1:5,y2:15,stroke:"black"}),u.default.createElement("text",{x:c+(s-c)/2,y:2*r,textAnchor:"middle",fontSize:r},l))}function w(e){var t=e.model,r=e.fontSize,n=e.width,a=t.dynamicBlocks.contentBlocks,o=t.offsetPx,i=t.bpPerPx,l=a.length<5;return u.default.createElement(u.default.Fragment,null,u.default.createElement("defs",null,u.default.createElement("clipPath",{id:"clip-ruler"},u.default.createElement("rect",{x:0,y:0,width:n,height:20}))),a.map((function(e){var t=e.key,n=e.start,a=e.end,c=e.reversed,s=e.offsetPx,f=e.refName,d=s-o;return u.default.createElement("g",{key:"".concat(t),transform:"translate(".concat(d," 0)")},u.default.createElement("text",{x:d/i,y:r,fontSize:r},f),l?u.default.createElement("g",{transform:"translate(0 20)",clipPath:"url(#clip-ruler)"},u.default.createElement(m.default,{start:n,end:a,bpPerPx:i,reversed:c})):u.default.createElement("line",{strokeWidth:1,stroke:"black",x1:n/i,x2:a/i,y1:20,y2:20}))})))}var k=15,O=function(e){return e.reduce((function(e,t){return e+t.displays[0].height+20+20}),0)},P=function(e){var t=e.model,r=t.width,n=t.assemblyNames,a=t.showCytobands,o=t.displayedRegions,i=(0,d.getSession)(t).assemblyManager,l=n.length>1?"":n[0],c=i.get(l),s=p.default.create({displayedRegions:JSON.parse(JSON.stringify(o)),interRegionPaddingWidth:0,minimumBlockWidth:t.minimumBlockWidth}),f=t.dynamicBlocks.contentBlocks;s.setVolatileWidth(r),s.showAllRegions();var m=s.dynamicBlocks.contentBlocks[0],v=f[0],O=s.bpToPx(y(y({},v),{},{coord:v.reversed?v.end:v.start}))||0,P=f[f.length-1],E=s.bpToPx(y(y({},P),{},{coord:P.reversed?P.start:P.end}))||0,S=a?100:0;return u.default.createElement("g",{id:"header"},u.default.createElement("text",{x:0,y:k,fontSize:k},l),a?u.default.createElement("g",{transform:"translate(0 ".concat(50,")")},u.default.createElement(h.Cytobands,{overview:s,assembly:c,block:m}),u.default.createElement("rect",{stroke:"red",fill:"rgb(255,0,0,0.1)",width:Math.max(E-O,.5),height:g.HEADER_OVERVIEW_HEIGHT-1,x:O,y:.5}),u.default.createElement("g",{transform:"translate(0,".concat(g.HEADER_OVERVIEW_HEIGHT,")")},u.default.createElement(h.Polygon,{overview:s,model:t,useOffset:!1}))):null,u.default.createElement("g",{transform:"translate(0 ".concat(k+S,")")},u.default.createElement(b,{model:t,fontSize:k})),u.default.createElement("g",{transform:"translate(0 ".concat(50+S,")")},u.default.createElement(w,{model:t,fontSize:k,width:r})))},E=function(e){var t=e.model,r=e.height,n=t.dynamicBlocks,a=t.offsetPx,o=t.interRegionPaddingWidth;return u.default.createElement(u.default.Fragment,null,n.contentBlocks.slice(1).map((function(e){return u.default.createElement("rect",{key:e.key,x:e.offsetPx-a-o,width:o,y:0,height:r,stroke:"none",fill:"grey"})})))};function S(e){var t=e.displayResults,r=e.model,n=e.offset;return u.default.createElement(u.default.Fragment,null,t.map((function(e){var t=e.track,a=e.result,o=n,i=(0,f.getConf)(t,"name")||"Reference sequence (".concat((0,f.readConfObject)((0,s.getParent)(t.configuration),"name"),")"),l=t.displays[0];return n+=l.height+20+20,u.default.createElement("g",{key:t.configuration.trackId,transform:"translate(0 ".concat(o,")")},u.default.createElement("text",{fontSize:k,x:Math.max(-r.offsetPx,0)},i),u.default.createElement("g",{transform:"translate(0 ".concat(20,")")},a,u.default.createElement(E,{model:r,height:l.height})))})))}function x(){return x=(0,o.default)(a.default.mark((function e(t,r){var n,i,s,f,d,p,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.when)((function(){return t.initialized}));case 2:return n=t.width,i=t.tracks,s=t.showCytobands,f=50,d=90+(s?100:0)+20,p=O(i)+d,e.next=8,Promise.all(i.map(function(){var e=(0,o.default)(a.default.mark((function e(t){var n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.displays[0],e.next=3,(0,c.when)((function(){return void 0===n.ready||n.ready}));case 3:return e.next=5,n.renderSvg(r);case 5:return o=e.sent,e.abrupt("return",{track:t,result:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return m=e.sent,e.abrupt("return",(0,l.renderToStaticMarkup)(u.default.createElement("svg",{width:n,height:p,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,n+2*f,p].toString()},u.default.createElement("rect",{width:n+2*f,height:p,fill:"white"}),u.default.createElement("g",{stroke:"none",transform:"translate(".concat(f," ").concat(k,")")},u.default.createElement(P,{model:t}),u.default.createElement(S,{model:t,displayResults:m,offset:d})))));case 10:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}},2177:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(34),o=r(14),i=n(r(0)),u=n(r(1)),l=r(365);function c(e){return e<999?String(e):"".concat(c(~~(e/1e3)),",").concat("00".concat(~~(e%1e3)).substr(-3,3))}var s=(0,a.makeStyles)((function(){return{majorTickLabel:{fontSize:"11px"},majorTick:{stroke:"#555"},minorTick:{stroke:"#999"}}}));function f(e){var t=e.start,r=e.end,n=e.bpPerPx,a=e.reversed,o=e.major,i=e.minor,f=s(),d=(0,l.makeTicks)(t,r,n,o,i);return u.default.createElement(u.default.Fragment,null,d.map((function(e){var o=(a?r-e.base:e.base-t)/n;return u.default.createElement("line",{key:e.base,x1:o,x2:o,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,stroke:"major"===e.type?"#555":"#999",className:"major"===e.type?f.majorTick:f.minorTick,"data-bp":e.base})})),d.filter((function(e){return"major"===e.type})).map((function(e){var o=(a?r-e.base:e.base-t)/n;return u.default.createElement("text",{x:o-3,y:18,key:"label-".concat(e.base),style:{fontSize:"11px"},className:f.majorTickLabel},c(e.base+1))})))}f.propTypes={start:i.default.number.isRequired,end:i.default.number.isRequired,bpPerPx:i.default.number.isRequired,reversed:i.default.bool,major:i.default.bool,minor:i.default.bool},f.defaultProps={reversed:!1,major:!0,minor:!0};var d=(0,o.observer)(f);t.default=d},2178:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=r(32),c=r(14),s=n(r(0)),f=r(128);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,u.makeStyles)((function(e){var t=e.palette,r=t.tertiary,n=t.primary;return{rubberBand:{height:"100%",background:r?(0,u.alpha)(r.main,.7):(0,u.alpha)(n.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberBandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberBandText:{color:r?r.contrastText:n.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10}}})),m=(0,c.observer)((function(e){var t,r=e.model,n=e.open,a=e.guideX,o=e.overview,c=p(),s=r.cytobandOffset,f=(0,l.getSession)(r).assemblyManager,d=o.pxToBp(a-s),m=f.get(d.assemblyName),g=null==m||null===(t=m.cytobands)||void 0===t?void 0:t.find((function(e){return d.coord>e.get("start")&&d.coord<e.get("end")&&d.refName===m.getCanonicalRefName(e.get("refName"))}));return i.default.createElement(u.Tooltip,{open:n,placement:"top",title:[(0,l.stringify)(d),null==g?void 0:g.get("name")].join(" "),arrow:!0},i.default.createElement("div",{className:c.guide,style:{left:a}}))}));function g(e){var t=e.model,r=e.overview,n=e.ControlComponent,a=void 0===n?i.default.createElement("div",null):n,c=t.cytobandOffset,s=(0,i.useState)(),d=(0,o.default)(s,2),g=d[0],h=d[1],v=(0,i.useState)(),y=(0,o.default)(v,2),b=y[0],w=y[1],k=(0,i.useState)(),O=(0,o.default)(k,2),P=O[0],E=O[1],S=(0,i.useRef)(null),x=(0,i.useRef)(null),C=p(),j=void 0!==g;function M(e){e.preventDefault(),e.stopPropagation(),S.current&&h(e.clientX-S.current.getBoundingClientRect().left)}function T(e){S.current&&E(e.clientX-S.current.getBoundingClientRect().left)}function R(){E(void 0)}if((0,i.useEffect)((function(){function e(e){var t=S.current;if(t&&j){var r=e.clientX-t.getBoundingClientRect().left;w(r)}}function n(){if(S.current&&void 0!==g&&void 0!==b&&Math.abs(b-g)>3&&t.zoomToDisplayedRegions(r.pxToBp(g-c),r.pxToBp(b-c)),S.current&&void 0!==g&&void 0===b){var e=r.pxToBp(g-c);t.centerAt(Math.round(e.coord),e.refName,e.index)}h(void 0),w(void 0),void 0!==g&&E(void 0)}function a(e){"Escape"===e.key&&(h(void 0),w(void 0))}return j?(window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",n,!0),window.addEventListener("keydown",a,!0),function(){window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",n,!0),window.removeEventListener("keydown",a,!0)}):function(){}}),[j,b,g,t,r,c]),void 0===g)return i.default.createElement("div",{style:{position:"relative"}},void 0!==P?i.default.createElement(m,{model:t,open:!j,overview:r,guideX:P}):null,i.default.createElement("div",{className:C.rubberBandControl,role:"presentation",ref:S,onMouseDown:M,onMouseOut:R,onMouseMove:T},a));var D,A,I=g||0,_=0;if(void 0!==g&&void 0!==b&&(I=b<g?b:g,_=b-g),g&&(D=r.pxToBp(g-c),A=r.pxToBp(g+_-c),b&&b<g)){var N=[A,D];D=N[0],A=N[1]}return i.default.createElement("div",{style:{position:"relative"}},x.current?i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Popover,{className:C.popover,classes:{paper:C.paper},open:!0,anchorEl:x.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},i.default.createElement(u.Typography,null,D?(0,l.stringify)(D):"")),i.default.createElement(u.Popover,{className:C.popover,classes:{paper:C.paper},open:!0,anchorEl:x.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},i.default.createElement(u.Typography,null,A?(0,l.stringify)(A):""))):null,i.default.createElement("div",{ref:x,className:C.rubberBand,style:{left:I,width:Math.abs(_),height:f.HEADER_OVERVIEW_HEIGHT}}),i.default.createElement("div",{"data-testid":"rubberBand_controls",className:C.rubberBandControl,role:"presentation",ref:S,onMouseDown:M,onMouseOut:R,onMouseMove:T},a))}g.propTypes={model:c.PropTypes.objectOrObservableObject.isRequired,overview:c.PropTypes.objectOrObservableObject.isRequired,ControlComponent:s.default.node},g.defaultProps={ControlComponent:i.default.createElement("div",null)};var h=(0,c.observer)(g);t.default=h},2179:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.handleClose,r=u();return a.default.createElement(o.Dialog,{open:!0,maxWidth:"xl",onClose:t},a.default.createElement(o.DialogTitle,null,"Using the search box",t?a.default.createElement(o.IconButton,{className:r.closeButton,onClick:function(){return t()}},a.default.createElement(i.default,null)):null),a.default.createElement(o.Divider,null),a.default.createElement(o.DialogContent,null,a.default.createElement("h3",null,"Searching"),a.default.createElement("ul",null,a.default.createElement("li",null,"Jump to a feature or reference sequence by typing its name in the location box and pressing Enter."),a.default.createElement("li",null,"Jump to a specific region by typing the region into the location box as: ",a.default.createElement("code",null,"ref:start..end")," or ",a.default.createElement("code",null,"ref:start-end"),". Commas are allowed in the start and end coordinates. A space-separated list of locstrings can be used to open up multiple chromosomes at a time")),a.default.createElement("h3",null,"Example Searches"),a.default.createElement("ul",null,a.default.createElement("li",null,a.default.createElement("code",null,"BRCA")," - searches for the feature named BRCA"),a.default.createElement("li",null,a.default.createElement("code",null,"chr4")," - jumps to chromosome 4"),a.default.createElement("li",null,a.default.createElement("code",null,"chr4:79,500,000..80,000,000")," - jumps the region on chromosome 4 between 79.5Mb and 80Mb."),a.default.createElement("li",null,a.default.createElement("code",null,"chr1:1-100 chr2:1-100")," - create a split view of chr1:1-100 and chr2:1-100"),a.default.createElement("li",null,a.default.createElement("code",null,"chr1 chr2 chr3")," - open up multiple chromosomes at once"),a.default.createElement("li",null,a.default.createElement("code",null,"chr1:1-100[rev] chr2:1-100")," - open up the first region in the horizontally flipped orientation"),a.default.createElement("li",null,a.default.createElement("code",null,"chr1 100 200")," - use whitespace separated refname, start, end"))),a.default.createElement(o.Divider,null),a.default.createElement(o.DialogActions,null,a.default.createElement(o.Button,{onClick:function(){return t()},color:"primary"},"Close")))},t.useStyles=void 0;var a=n(r(1)),o=r(23),i=n(r(41)),u=(0,o.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));t.useStyles=u},2180:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.handleClose,n="undefined"!=typeof OffscreenCanvas,a=(0,l.useState)(n),d=(0,u.default)(a,2),g=d[0],h=d[1],v=(0,l.useState)(!1),y=(0,u.default)(v,2),b=y[0],w=y[1],k=(0,l.useState)("jbrowse.svg"),O=(0,u.default)(k,2),P=O[0],E=O[1],S=(0,l.useState)(),x=(0,u.default)(S,2),C=x[0],j=x[1],M=p();return l.default.createElement(c.Dialog,{open:!0,onClose:r},l.default.createElement(c.DialogTitle,null,"Export SVG",l.default.createElement(c.IconButton,{className:M.closeButton,onClick:r},l.default.createElement(f.default,null))),l.default.createElement(c.DialogContent,null,C?l.default.createElement(s.ErrorMessage,{error:C}):b?l.default.createElement(m,null):null,l.default.createElement(c.TextField,{helperText:"filename",value:P,onChange:function(e){return E(e.target.value)}}),n?l.default.createElement(c.FormControlLabel,{control:l.default.createElement(c.Checkbox,{checked:g,onChange:function(){return h((function(e){return!e}))}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):l.default.createElement(c.Typography,null,"Note: rasterizing layers not yet supported in this browser, so SVG size may be large")),l.default.createElement(c.DialogActions,null,l.default.createElement(c.Button,{variant:"contained",color:"secondary",onClick:function(){return r()}},"Cancel"),l.default.createElement(c.Button,{variant:"contained",color:"primary",type:"submit",onClick:(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),j(void 0),e.prev=2,e.next=5,t.exportSvg({rasterizeLayers:g,filename:P});case 5:r(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),j(e.t0),w(!1);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))},"Submit")))};var o=n(r(19)),i=n(r(20)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(23),s=r(83),f=n(r(41));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,c.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function m(){return l.default.createElement("div",null,l.default.createElement(c.CircularProgress,{size:20,style:{marginRight:20}}),l.default.createElement(c.Typography,{display:"inline"},"Creating SVG"))}},2181:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(14),i=r(23),u=r(32),l=n(r(942)),c=r(208),s=n(r(792)),f=n(r(793)),d=r(128),p=n(r(941)),m=n(r(2182)),g=(0,i.makeStyles)((function(e){return{headerBar:{height:d.HEADER_BAR_HEIGHT,display:"flex"},headerForm:{flexWrap:"nowrap",marginRight:7},spacer:{flexGrow:1},panButton:{background:(0,i.alpha)(e.palette.background.paper,.8),height:d.WIDGET_HEIGHT,margin:d.SPACING},bp:{display:"flex",alignItems:"center",marginLeft:5},toggleButton:{height:44,border:"none",margin:e.spacing(.5)},buttonSpacer:{marginRight:e.spacing(2)}}})),h=(0,o.observer)((function(e){var t=e.model,r=g();return a.default.createElement(i.Button,{onClick:t.activateTrackSelector,className:r.toggleButton,title:"Open track selector",value:"track_select",color:"secondary"},a.default.createElement(c.TrackSelector,{className:r.buttonSpacer}))}));function v(e){var t=e.model,r=g();return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Button,{variant:"outlined",className:r.panButton,onClick:function(){return t.slide(-.9)}},a.default.createElement(f.default,null)),a.default.createElement(i.Button,{variant:"outlined",className:r.panButton,onClick:function(){return t.slide(.9)}},a.default.createElement(s.default,null)))}var y=(0,o.observer)((function(e){var t=e.model,r=g(),n=t.coarseTotalBp;return a.default.createElement(i.Typography,{variant:"body2",color:"textSecondary",className:r.bp},(0,u.getBpDisplayStr)(n))})),b=function(e){var t=e.model,r=g();return a.default.createElement("div",{className:r.headerBar},a.default.createElement(h,{model:t}),a.default.createElement("div",{className:r.spacer}),a.default.createElement(i.FormGroup,{row:!0,className:r.headerForm},a.default.createElement(v,{model:t}),a.default.createElement(l.default,{model:t})),a.default.createElement(y,{model:t}),a.default.createElement(m.default,{model:t}),a.default.createElement("div",{className:r.spacer}))},w=(0,o.observer)((function(e){var t=e.model;return t.hideHeaderOverview?a.default.createElement(b,{model:t}):a.default.createElement(p.default,{model:t},a.default.createElement(b,{model:t}))}));t.default=w},2182:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=n(r(58)),c=n(r(267)),s=r(34),f=n(r(139)),d=n(r(198));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var m=(0,s.makeStyles)({container:{display:"flex",flexDirection:"row",alignItems:"center"},slider:{width:70}});var g=(0,u.observer)((function(e){var t=e.model,r=m(),n=t.maxBpPerPx,a=t.minBpPerPx,u=t.bpPerPx,s=t.scaleFactor,p=(0,i.useState)(100*-Math.log2(u)),g=(0,o.default)(p,2),h=g[0],v=g[1];return(0,i.useEffect)((function(){v(100*-Math.log2(u))}),[v,u]),i.default.createElement("div",{className:r.container},i.default.createElement(l.default,{"data-testid":"zoom_out",onClick:function(){t.zoom(2*u)},disabled:u>=n-1e-4||1!==s,color:"secondary"},i.default.createElement(d.default,null)),i.default.createElement(c.default,{className:r.slider,value:h,min:100*-Math.log2(n),max:100*-Math.log2(a),onChange:function(e,t){return v(t)},onChangeCommitted:function(){return t.zoomTo(Math.pow(2,-h/100))},disabled:1!==s}),i.default.createElement(l.default,{"data-testid":"zoom_in",onClick:function(){t.zoom(t.bpPerPx/2)},disabled:u<=a+1e-4||1!==s,color:"secondary"},i.default.createElement(f.default,null)))}));t.default=g},2183:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),i=r(14),u=r(17),l=r(29),c=r(83),s=r(32),f=n(r(21)),d=n(r(55)),p=r(34),m=r(128),g=n(r(2184));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var v=(0,p.makeStyles)((function(e){return{root:{marginTop:2},resizeHandle:{height:m.RESIZE_HANDLE_HEIGHT,boxSizing:"border-box",position:"relative",zIndex:2},overlay:{pointerEvents:"none",position:"absolute",top:0,left:0,width:"100%",zIndex:3,borderRadius:e.shape.borderRadius},trackLabel:{zIndex:3},renderingComponentContainer:{position:"absolute",left:-1,height:"100%",width:"100%"},trackLabelInline:{position:"relative",display:"inline-block"},trackLabelOverlap:{position:"absolute"},trackRenderingContainer:{overflowY:"auto",overflowX:"hidden",whiteSpace:"nowrap",position:"relative",background:"none",zIndex:2}}})),y=(0,i.observer)((function(e){var t=e.model,r=e.view,n=v(),a="overlapping"===r.trackLabels?n.trackLabelOverlap:n.trackLabelInline;return"hidden"!==r.trackLabels?o.default.createElement(g.default,{track:t,className:(0,f.default)(n.trackLabel,a)}):null}));var b=(0,i.observer)((function(e){var t=e.model,r=e.track,n=v(),a=r.displays[0],i=t.horizontalScroll,f=t.draggingTrackId,p=t.moveTrack,m=a.height,g=(0,l.getConf)(r,"trackId"),h=(0,o.useRef)(null);(0,o.useEffect)((function(){return h.current&&(t.trackRefs[g]=h.current),function(){delete t.trackRefs[g]}}),[t.trackRefs,g]);var b=(0,s.useDebouncedCallback)((function(){void 0!==f&&(0,u.isAlive)(a)&&f!==a.id&&p(f,r.id)}),100),w=a.RenderingComponent,k=a.DisplayBlurb,O=void 0!==f&&f!==a.id;return o.default.createElement(d.default,{className:n.root,variant:"outlined"},o.default.createElement(y,{model:r,view:t}),o.default.createElement("div",{className:n.trackRenderingContainer,style:{height:m},onScroll:function(e){var t=e.target;a.setScrollTop(t.scrollTop)},onDragEnter:b,"data-testid":"trackRenderingContainer-".concat(t.id,"-").concat(g),role:"presentation"},o.default.createElement("div",{ref:h,className:n.renderingComponentContainer,style:{transform:"scaleX(".concat(t.scaleFactor,")")}},o.default.createElement(w,{model:a,onHorizontalScroll:i})),k?o.default.createElement("div",{style:{position:"absolute",left:0,top:a.height-20}},o.default.createElement(k,{model:a})):null),o.default.createElement("div",{className:n.overlay,style:{height:a.height,background:O?"rgba(0, 0, 0, 0.4)":void 0},onDragEnter:b}),o.default.createElement(c.ResizeHandle,{onDrag:a.resizeHeight,className:n.resizeHandle}))}));t.default=b},2184:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(36)),o=n(r(33)),i=n(r(1)),u=r(29),l=n(r(914)),c=r(32),s=r(23),f=r(322),d=n(r(21)),p=r(14),m=n(r(300)),g=n(r(794)),h=n(r(41)),v=(0,s.makeStyles)((function(e){return{root:{background:(0,s.alpha)(e.palette.background.paper,.8),"&:hover":{background:e.palette.background.paper},transition:e.transitions.create(["background"],{duration:e.transitions.duration.shortest})},trackName:{margin:"0 auto",width:"90%",fontSize:"0.8rem",pointerEvents:"none"},dragHandle:{cursor:"grab",color:"#135560"},dragHandleIcon:{display:"inline-block",verticalAlign:"middle",pointerEvents:"none"},iconButton:{padding:e.spacing(1)}}})),y=i.default.forwardRef((function(e,t){var r,n=e.track,p=e.className,y=v(),b=(0,c.getContainingView)(n),w=(0,c.getSession)(n),k=n.configuration,O=(0,u.getConf)(n,"trackId"),P=(0,f.usePopupState)({popupId:"trackLabelMenu",variant:"popover"}),E=(0,u.getConf)(n,"name");if("ReferenceSequenceTrack"===(0,u.getConf)(n,"type")){var S=w.assemblies.find((function(e){return e.sequence===k}));E=E||(S?"Reference Sequence (".concat((0,u.readConfObject)(S,"name"),")"):"Reference Sequence")}var x=[].concat((0,o.default)((null===(r=w.getTrackActionMenuItems)||void 0===r?void 0:r.call(w,k))||[]),(0,o.default)(n.trackMenuItems())).sort((function(e,t){return(t.priority||0)-(e.priority||0)}));return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Paper,{ref:t,className:(0,d.default)(p,y.root)},i.default.createElement("span",{draggable:!0,className:y.dragHandle,onDragStart:function(e){var t=e.target;t.parentNode&&(e.dataTransfer.setDragImage(t.parentNode,20,20),b.setDraggingTrackId(n.id))},onDragEnd:function(){b.setDraggingTrackId(void 0)},"data-testid":"dragHandle-".concat(b.id,"-").concat(O)},i.default.createElement(g.default,{className:y.dragHandleIcon})),i.default.createElement(s.IconButton,{onClick:function(){return b.hideTrack(O)},className:y.iconButton,title:"close this track",color:"secondary"},i.default.createElement(h.default,null)),i.default.createElement(s.Typography,{variant:"body1",component:"span",className:y.trackName},E),i.default.createElement(s.IconButton,(0,a.default)({},(0,f.bindTrigger)(P),{className:y.iconButton,color:"secondary","data-testid":"track_menu_icon",disabled:!x.length}),i.default.createElement(m.default,null))),i.default.createElement(l.default,(0,a.default)({},(0,f.bindPopover)(P),{onMenuItemClick:function(e,t){return t()},menuItems:x,popupState:P})))})),b=(0,p.observer)(y);t.default=b},2185:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=r(34),u=r(14),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=n(r(795)),s=r(128),f=n(r(2186)),d=n(r(2187)),p=n(r(2188)),m=n(r(2189));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,i.makeStyles)((function(e){return{tracksContainer:{position:"relative",borderRadius:e.shape.borderRadius,overflow:"hidden"},spacer:{position:"relative",height:s.RESIZE_HANDLE_HEIGHT}}}));var v=(0,u.observer)((function(e){var t=e.children,r=e.model,n=h(),a=(0,l.useRef)(0),i=(0,l.useRef)(!1),u=(0,l.useRef)(),g=(0,l.useRef)(null),v=(0,l.useRef)(0),y=(0,l.useState)(!1),b=(0,o.default)(y,2),w=b[0],k=b[1];return(0,l.useEffect)((function(){var e=function(){};function t(e){e.preventDefault();var t=e.clientX-v.current;t&&(i.current||(i.current=!0,window.requestAnimationFrame((function(){r.horizontalScroll(-t),i.current=!1,v.current=e.clientX}))))}function n(){v.current=0,w&&k(!1)}return w&&(window.addEventListener("mousemove",t,!0),window.addEventListener("mouseup",n,!0),e=function(){window.removeEventListener("mousemove",t,!0),window.removeEventListener("mouseup",n,!0)}),e}),[r,w,v]),(0,l.useEffect)((function(){var e=g.current;function t(e){var t=(0,c.default)(e);!0===e.ctrlKey?(e.preventDefault(),a.current+=t.pixelY/500,r.setScaleFactor(a.current<0?1-a.current:1/(1+a.current)),u.current&&clearTimeout(u.current),u.current=setTimeout((function(){r.setScaleFactor(1),r.zoomTo(a.current>0?r.bpPerPx*(1+a.current):r.bpPerPx/(1-a.current)),a.current=0}),300)):(Math.abs(t.pixelX)>Math.abs(2*t.pixelY)&&e.preventDefault(),a.current+=t.pixelX,i.current||(i.current=!0,window.requestAnimationFrame((function(){r.horizontalScroll(a.current),a.current=0,i.current=!1}))))}return e?(e.addEventListener("wheel",t),function(){e.removeEventListener("wheel",t)}):function(){}}),[r]),l.default.createElement("div",{ref:g,role:"presentation",className:n.tracksContainer,onMouseDown:function(e){var t=e.target;t.draggable||t.dataset.resizer||0===e.button&&(v.current=e.clientX,k(!0))},onMouseUp:function(e){e.preventDefault(),k(!1)},onMouseLeave:function(e){e.preventDefault()}},l.default.createElement(p.default,{model:r}),r.showCenterLine?l.default.createElement(m.default,{model:r}):null,l.default.createElement(f.default,{model:r,ControlComponent:l.default.createElement(d.default,{model:r,style:{height:s.SCALE_BAR_HEIGHT,boxSizing:"border-box"}})}),t)}));t.default=v},2186:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(23),c=r(32),s=r(83);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,l.makeStyles)((function(e){return{rubberBand:{height:"100%",background:e.palette.tertiary?(0,l.alpha)(e.palette.tertiary.main,.7):(0,l.alpha)(e.palette.primary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberBandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberBandText:{color:e.palette.tertiary?e.palette.tertiary.contrastText:e.palette.primary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10}}})),p=(0,u.observer)((function(e){var t=e.model,r=e.coordX,n=d();return i.default.createElement(l.Tooltip,{open:!0,placement:"top",title:(0,c.stringify)(t.pxToBp(r)),arrow:!0},i.default.createElement("div",{className:n.guide,style:{left:r,background:"red"}}))}));var m=(0,u.observer)((function(e){var t=e.model,r=e.ControlComponent,n=void 0===r?i.default.createElement("div",null):r,a=(0,i.useState)(),u=(0,o.default)(a,2),f=u[0],m=u[1],g=(0,i.useState)(),h=(0,o.default)(g,2),v=h[0],y=h[1],b=(0,i.useState)(),w=(0,o.default)(b,2),k=w[0],O=w[1],P=(0,i.useState)(),E=(0,o.default)(P,2),S=E[0],x=E[1],C=(0,i.useRef)(null),j=(0,i.useRef)(null),M=d(),T=void 0!==f&&void 0===k,R=t.setOffsets,D=t.pxToBp;function A(e){e.preventDefault(),e.stopPropagation();var t=e.clientX-e.target.getBoundingClientRect().left;m(t),y(t)}function I(e){var t=e.target;x(e.clientX-t.getBoundingClientRect().left)}function _(){x(void 0),t.setOffsets(void 0,void 0)}function N(){O(void 0),m(void 0),y(void 0)}(0,i.useEffect)((function(){function e(e){if(C.current&&T){var t=e.clientX-C.current.getBoundingClientRect().left;y(t)}}function t(e){if(void 0!==f&&C.current){var t=e.clientX,r=e.clientY,n=t-C.current.getBoundingClientRect().left;O({offsetX:n,clientX:t,clientY:r});var a=function(e){if(void 0!==f){var t=f,r=e;if(r<t){var n=[r,t];t=n[0],r=n[1]}return{leftOffset:D(t),rightOffset:D(r)}}}(n);if(a){var o=a.leftOffset,i=a.rightOffset;R(o,i)}x(void 0)}}return T?(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}):function(){}}),[f,T,k,R,D]),(0,i.useEffect)((function(){!T&&void 0!==v&&void 0!==f&&Math.abs(v-f)<=3&&N()}),[T,v,f,t.bpPerPx]);var B=Boolean(k);if(void 0===f)return i.default.createElement(i.default.Fragment,null,void 0!==S?i.default.createElement(p,{model:t,coordX:S}):null,i.default.createElement("div",{"data-testid":"rubberBand_controls",className:M.rubberBandControl,role:"presentation",ref:C,onMouseDown:A,onMouseOut:_,onMouseMove:I},n));var F=k?k.offsetX:v||0,L=F<f?F:f,W=Math.abs(F-f),z=t.pxToBp(L),H=t.pxToBp(L+W),V=Math.ceil(W*t.bpPerPx);return i.default.createElement(i.default.Fragment,null,j.current?i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Popover,{className:M.popover,classes:{paper:M.paper},open:!0,anchorEl:j.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},i.default.createElement(l.Typography,null,(0,c.stringify)(z))),i.default.createElement(l.Popover,{className:M.popover,classes:{paper:M.paper},open:!0,anchorEl:j.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},i.default.createElement(l.Typography,null,(0,c.stringify)(H)))):null,i.default.createElement("div",{ref:j,className:M.rubberBand,style:{left:L,width:W}},i.default.createElement(l.Typography,{variant:"h6",className:M.rubberBandText},V.toLocaleString("en-US")," bp")),i.default.createElement("div",{"data-testid":"rubberBand_controls",className:M.rubberBandControl,role:"presentation",ref:C,onMouseDown:A,onMouseOut:_,onMouseMove:I},n),k?i.default.createElement(s.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:k.clientX,top:k.clientY},onMenuItemClick:function(e,t){t(),N()},open:B,onClose:N,menuItems:t.rubberBandMenuItems()}):null)}));t.default=m},2187:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(36)),o=n(r(10)),i=n(r(45)),u=r(23),l=r(206),c=n(r(21)),s=r(14),f=n(r(1)),d=r(527),p=r(365),m=r(32),g=["model","style","className"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=(0,u.makeStyles)((function(e){return{scaleBarContainer:{overflow:"hidden",position:"relative"},scaleBarZoomContainer:{position:"relative",zIndex:1},scaleBar:{position:"absolute",display:"flex",pointerEvents:"none"},majorTickLabel:{fontSize:"11px",zIndex:1,background:e.palette.background.paper,lineHeight:"normal",pointerEvents:"none"},tick:{position:"absolute",width:0,display:"flex",justifyContent:"center",pointerEvents:"none"},refLabel:{fontSize:"11px",position:"absolute",left:"2px",top:"-1px",fontWeight:"bold",lineHeight:"normal",zIndex:1,pointerEvents:"none",background:e.palette.background.paper}}})),b=(0,s.observer)((function(e){var t=e.model,r=y(),n=0;return t.staticBlocks.forEach((function(e,r){e.offsetPx-t.offsetPx<0&&(n=r)})),f.default.createElement(f.default.Fragment,null,t.staticBlocks.map((function(e,a){return e instanceof l.ContentBlock&&(e.isLeftEndOfDisplayedRegion||a===n)?f.default.createElement(u.Typography,{key:"refLabel-".concat(e.key,"-").concat(a),style:{left:a===n?Math.max(0,-t.offsetPx):e.offsetPx-t.offsetPx-1,paddingLeft:a===n?0:1},className:r.refLabel,"data-testid":"refLabel-".concat(e.refName)},e.refName):null})))})),w=(0,s.observer)((function(e){var t=e.model,r=y(),n=t.bpPerPx;return f.default.createElement(f.default.Fragment,null,t.staticBlocks.map((function(e,a){if(e instanceof l.ContentBlock){var o=e.start,i=e.end,c=(0,p.makeTicks)(o,i,n,!0,!1);return f.default.createElement(d.ContentBlock,{key:"".concat(e.key,"-").concat(a),block:e},c.map((function(a){if("major"===a.type){var o=(e.reversed?e.end-a.base:a.base-e.start)/t.bpPerPx,i=a.base+1;return f.default.createElement("div",{key:a.base,className:r.tick,style:{left:o}},i?f.default.createElement(u.Typography,{className:r.majorTickLabel},(0,m.getTickDisplayStr)(i,n)):null)}return null})))}return e instanceof l.ElidedBlock?f.default.createElement(d.ElidedBlock,{key:e.key,width:e.widthPx}):e instanceof l.InterRegionPaddingBlock?f.default.createElement(d.InterRegionPaddingBlock,{key:e.key,width:e.widthPx,style:{background:"none"},boundary:"boundary"===e.variant}):null})))})),k=f.default.forwardRef((function(e,t){var r=e.model,n=e.style,o=e.className,l=(0,i.default)(e,g),s=y(),d=r.staticBlocks.offsetPx-r.offsetPx;return f.default.createElement(u.Paper,(0,a.default)({"data-resizer":"true",className:(0,c.default)(s.scaleBarContainer,o),variant:"outlined",ref:t,style:n},l),f.default.createElement("div",{className:s.scaleBarZoomContainer,style:{transform:1!==r.scaleFactor?"scaleX(".concat(r.scaleFactor,")"):void 0}},f.default.createElement("div",{className:s.scaleBar,style:v({left:d-1,width:r.staticBlocks.totalWidthPx},n)},f.default.createElement(w,{model:r}))),f.default.createElement(b,{model:r}))})),O=(0,s.observer)(k);t.default=O},2188:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(206),o=r(34),i=n(r(21)),u=r(14),l=n(r(1)),c=r(527),s=r(365),f=(0,o.makeStyles)((function(e){return{verticalGuidesZoomContainer:{position:"absolute",height:"100%",width:"100%",zIndex:1,pointerEvents:"none"},verticalGuidesContainer:{position:"absolute",height:"100%",zIndex:1,pointerEvents:"none",display:"flex"},tick:{position:"absolute",height:"100%",width:1},majorTick:{background:e.palette.text.hint},minorTick:{background:e.palette.divider}}})),d=(0,u.observer)((function(e){var t=e.model,r=f();return l.default.createElement(l.default.Fragment,null,t.staticBlocks.map((function(e,n){if(e instanceof a.ContentBlock){var o=(0,s.makeTicks)(e.start,e.end,t.bpPerPx);return l.default.createElement(c.ContentBlock,{key:"".concat(e.key,"-").concat(n),block:e},o.map((function(n){var a=(e.reversed?e.end-n.base:n.base-e.start)/t.bpPerPx;return l.default.createElement("div",{key:n.base,className:(0,i.default)(r.tick,"major"===n.type||"labeledMajor"===n.type?r.majorTick:r.minorTick),style:{left:a}})})))}return e instanceof a.ElidedBlock?l.default.createElement(c.ElidedBlock,{key:e.key,width:e.widthPx}):e instanceof a.InterRegionPaddingBlock?l.default.createElement(c.InterRegionPaddingBlock,{key:e.key,width:e.widthPx,boundary:"boundary"===e.variant}):null})))}));var p=(0,u.observer)((function(e){var t=e.model,r=f(),n=t.staticBlocks.offsetPx-t.offsetPx;return l.default.createElement("div",{className:r.verticalGuidesZoomContainer,style:{transform:1!==t.scaleFactor?"scaleX(".concat(t.scaleFactor,")"):void 0}},l.default.createElement("div",{className:r.verticalGuidesContainer,style:{left:n,width:t.staticBlocks.totalWidthPx}},l.default.createElement(d,{model:t})))}));t.default=p},2189:function(e,t,r){"use strict";var n=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(34),o=r(14),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(1));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=(0,a.makeStyles)((function(){return{centerLineContainer:{background:"transparent",height:"100%",zIndex:5,position:"absolute",border:"1px black dashed",borderTop:"none",borderBottom:"none",pointerEvents:"none"},centerLineText:{position:"absolute",pointerEvents:"none",whiteSpace:"nowrap",fontWeight:"bold"}}}));function c(e){var t=e.model,r=t.bpPerPx,n=t.centerLineInfo,a=t.trackHeights,o=t.tracks,u=t.width,c=(0,i.useRef)(null),s=l(),f=u/2;return o.length?i.default.createElement("div",{"data-testid":"centerline_container",className:s.centerLineContainer,role:"presentation",ref:c,style:{left:"".concat(f,"px"),width:Math.max(1/r,1)}},n&&i.default.createElement("div",{"data-testid":"centerline_text",className:s.centerLineText,role:"presentation",style:{left:Math.max(1/r,1)+5,top:a}},n.refName,":"," ",Math.max(Math.round(n.offset)+1,0))):null}c.propTypes={model:o.PropTypes.objectOrObservableObject.isRequired};var s=(0,o.observer)(c);t.default=s},2190:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(11)),i=n(r(20)),u=n(r(12)),l=w(r(1)),c=r(14),s=r(32),f=r(23),d=n(r(517)),p=n(r(529)),m=n(r(518)),g=n(r(41)),h=n(r(528)),v=r(530),y=r(128);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,o.default)(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var k=(0,l.lazy)((function(){return Promise.resolve().then((function(){return w(r(944))}))})),O=(0,f.makeStyles)((function(e){return{importFormContainer:{padding:e.spacing(2)},button:{margin:e.spacing(2)},container:{padding:e.spacing(4)}}})),P=(0,c.observer)((function(e){var t,r=e.model,n=O(),o=(0,s.getSession)(r),c=o.assemblyNames,b=o.assemblyManager,w=o.textSearchManager,P=r.rankSearchResults,E=r.isSearchDialogDisplayed,S=r.error,x=(0,l.useState)(c[0]),C=(0,u.default)(x,2),j=C[0],M=C[1],T=(0,l.useState)(S),R=(0,u.default)(T,2),D=R[0],A=R[1],I=r.searchScope(j),_=b.get(j),N=c.length?null==_?void 0:_.error:"No configured assemblies",B=(null==_?void 0:_.regions)||[],F=N||D,L=(0,l.useState)(""),W=(0,u.default)(L,2),z=W[0],H=W[1],V=z||(null===(t=B[0])||void 0===t?void 0:t.refName),q=new p.default({label:V});function G(){return(G=(0,i.default)(a.default.mark((function e(t){var n,i,l,c,s,f,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=2;break}return e.abrupt("return");case 2:if(n=q.getTrackId(),i=t||q.getLocation()||"",l=i.split(":"),c=(0,u.default)(l,2),s=c[0],f=c[1],d=(null==_?void 0:_.allRefNames)||[],e.prev=6,!(d.includes(i)||d.includes(s)&&void 0!==f&&!Number.isNaN(parseInt(f,10)))){e.next=11;break}r.navToLocString(i,j),e.next=22;break;case 11:return e.next=13,(0,v.fetchResults)({queryString:t,searchType:"exact",searchScope:I,rankSearchResults:P,textSearchManager:w,assembly:_});case 13:if(!((p=e.sent).length>1)){e.next=19;break}return r.setSearchResults(p,t.toLowerCase()),e.abrupt("return");case 19:1===p.length&&(i=p[0].getLocation(),n=p[0].getTrackId());case 20:r.navToLocString(i,j),n&&r.showTrack(n);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(6),console.error(e.t0),o.notify("".concat(e.t0),"warning");case 28:case"end":return e.stop()}}),e,null,[[6,24]])})))).apply(this,arguments)}var U=y.WIDGET_HEIGHT+5;return l.default.createElement("div",{className:n.container},F?l.default.createElement(d.default,{error:F}):null,l.default.createElement(f.Container,{className:n.importFormContainer},l.default.createElement("form",{onSubmit:function(e){e.preventDefault(),r.setError(void 0),V&&function(e){G.apply(this,arguments)}(V)}},l.default.createElement(f.Grid,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},l.default.createElement(f.Grid,{item:!0},l.default.createElement(m.default,{onChange:function(e){A(""),M(e)},session:o,selected:j,InputProps:{style:{height:U}}})),l.default.createElement(f.Grid,{item:!0},j?F?l.default.createElement(g.default,{style:{color:"red"}}):V?l.default.createElement(h.default,{fetchResults:function(e){return(0,v.fetchResults)({queryString:e,assembly:_,textSearchManager:w,rankSearchResults:P,searchScope:I})},model:r,assemblyName:N?void 0:j,value:V,minWidth:270,onChange:function(e){return H(e)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location",style:{minWidth:"175px"},InputProps:{style:{height:U}}}}):l.default.createElement(f.CircularProgress,{role:"progressbar",size:20,disableShrink:!0}):null),l.default.createElement(f.Grid,{item:!0},l.default.createElement(f.Button,{type:"submit",disabled:!V,className:n.button,variant:"contained",color:"primary"},"Open"),l.default.createElement(f.Button,{disabled:!V,className:n.button,onClick:function(){r.setError(void 0),r.showAllRegionsInAssembly(j)},variant:"contained",color:"secondary"},"Show all regions in assembly"))))),E?l.default.createElement(k,{model:r,optAssemblyName:j,handleClose:function(){return r.setSearchResults(void 0,void 0)}}):null)})),E=P;t.default=E},2191:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=n(r(58)),c=n(r(139)),s=n(r(198)),f=n(r(797)),d=n(r(55)),p=n(r(204));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var g=(0,u.observer)((function(e){var t=e.model,r=t.bpPerPx,n=t.maxBpPerPx,a=t.minBpPerPx,u=t.scaleFactor,m=(0,i.useState)(),g=(0,o.default)(m,2),h=g[0],v=g[1];return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default,{style:{background:"#aaa7"}},i.default.createElement(l.default,{color:"secondary",onClick:function(e){v(e.currentTarget)}},i.default.createElement(f.default,null)),i.default.createElement(l.default,{"data-testid":"zoom_out",onClick:function(){t.zoom(2*r)},disabled:r>=n-1e-4||1!==u,color:"secondary"},i.default.createElement(s.default,null)),i.default.createElement(l.default,{"data-testid":"zoom_in",onClick:function(){t.zoom(t.bpPerPx/2)},disabled:r<=a+1e-4||1!==u,color:"secondary"},i.default.createElement(c.default,null))),i.default.createElement(p.default,{anchorEl:h,open:Boolean(h),onMenuItemClick:function(e,t){t(),v(void 0)},onClose:function(){v(void 0)},menuItems:t.menuItems()}))}));t.default=g},2192:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(19)),i=n(r(12)),u=n(r(20)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(23),s=r(14),f=r(338),d=r(29),p=n(r(137)),m=r(32),g=r(2193),h=r(208),v=n(r(41)),y=n(r(798));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}var w=(0,c.makeStyles)((function(e){return{loadingMessage:{padding:e.spacing(5)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}}}));function k(e,t,r){return O.apply(this,arguments)}function O(){return(O=(0,u.default)(o.default.mark((function e(t,r,n){var a,i,u,l,c,s,f,p,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,m.getSession)(t),i=t.leftOffset,u=t.rightOffset,i&&u){e.next=4;break}throw new Error("no offsets on model to use for range");case 4:if(i.assemblyName===u.assemblyName){e.next=6;break}throw new Error("not able to fetch sequences from multiple assemblies");case 6:if(l=a.rpcManager,c=a.assemblyManager,s=i.assemblyName||u.assemblyName||"",f=c.get(s)){e.next=11;break}throw new Error("assembly ".concat(s," not found"));case 11:return p=(0,d.getConf)(f,["sequence","adapter"]),g="getSequence",e.abrupt("return",l.call(g,"CoreGetFeatures",{adapterConfig:p,regions:r,sessionId:g,signal:n}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=(0,s.observer)((function(e){var t=e.model,r=e.handleClose,n=w(),a=(0,m.getSession)(t),s=(0,l.useState)(),d=(0,i.default)(s,2),b=d[0],O=d[1],P=(0,l.useState)(),E=(0,i.default)(P,2),S=E[0],x=E[1],C=Boolean(void 0===S),j=t.leftOffset,M=t.rightOffset,T=(0,l.useMemo)((function(){return t.getSelectedRegions(j,M)}),[t,j,M]);(0,l.useEffect)((function(){var e=!0,r=new AbortController;return(0,u.default)(o.default.mark((function n(){var a;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(T.length>0)){n.next=8;break}return n.next=4,k(t,T,r.signal);case 4:a=n.sent,e&&x((0,g.formatSeqFasta)(a.filter((function(e){return!!e})).map((function(e){var t=e.get("seq"),r=e.get("refName"),n=e.get("start")+1,a=e.get("end"),o="".concat(r,":").concat(n,"-").concat(a);if((null==t?void 0:t.length)!==a-n+1)throw new Error("".concat(o," returned ").concat(t.length.toLocaleString()," bases, but should have returned ").concat((a-n).toLocaleString()));return{header:o,seq:t}})))),n.next=9;break;case 8:throw new Error("Selected region is out of bounds");case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0),e&&O(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))(),function(){r.abort(),e=!1}}),[t,a,T,x]);var R=!!S&&S.length>1e6;return l.default.createElement(c.Dialog,{"data-testid":"sequence-dialog",maxWidth:"xl",open:!0,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.default.createElement(c.DialogTitle,{id:"alert-dialog-title"},"Reference sequence",r?l.default.createElement(c.IconButton,{"data-testid":"close-seqDialog",className:n.closeButton,onClick:function(){r(),t.setOffsets(void 0,void 0)}},l.default.createElement(v.default,null)):null),l.default.createElement(c.Divider,null),l.default.createElement(c.DialogContent,null,b?l.default.createElement(c.Typography,{color:"error"},"".concat(b)):null,C&&!b?l.default.createElement(c.Container,null,"Retrieving reference sequence...",l.default.createElement(c.CircularProgress,{style:{marginLeft:10},size:20,disableShrink:!0})):null,l.default.createElement(c.TextField,{"data-testid":"rubberband-sequence",variant:"outlined",multiline:!0,minRows:5,disabled:R,className:n.dialogContent,fullWidth:!0,value:R?"Reference sequence too large to display, use the download FASTA button":S,InputProps:{readOnly:!0,classes:{input:n.textAreaFont}}})),l.default.createElement(c.DialogActions,null,l.default.createElement(c.Button,{onClick:function(){(0,p.default)(S||""),a.notify("Copied to clipboard","success")},disabled:C||!!b||R,color:"primary",startIcon:l.default.createElement(h.ContentCopy,null)},"Copy to clipboard"),l.default.createElement(c.Button,{onClick:function(){var e=new Blob([S||""],{type:"text/x-fasta;charset=utf-8"});(0,f.saveAs)(e,"jbrowse_ref_seq.fa")},disabled:C||!!b,color:"primary",startIcon:l.default.createElement(y.default,null)},"Download FASTA"),l.default.createElement(c.Button,{onClick:r,color:"primary",autoFocus:!0},"Close")))}));t.default=P},2193:function(e,t,r){"use strict";function n(e){return e.replace(/(.{1,80})/g,"$1\n").trimEnd()}Object.defineProperty(t,"__esModule",{value:!0}),t.formatFastaLines=n,t.formatSeqFasta=function(e){return e.map((function(e){return">".concat(e.header,"\n").concat(n(e.seq))})).join("\n")}},2194:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"modelFactory",{enumerable:!0,get:function(){return a.default}});var a=n(r(2195)),o=n(r(2197))},2195:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11)),o=n(r(33)),i=n(r(10)),u=r(1),l=r(29),c=r(32),s=r(17),f=n(r(265)),d=r(278);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,u.lazy)((function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(2196))}))})),v=function(e){return s.types.compose("LinearBasicDisplay",d.BaseLinearDisplay,s.types.model({type:s.types.literal("LinearBasicDisplay"),trackShowLabels:s.types.maybe(s.types.boolean),trackShowDescriptions:s.types.maybe(s.types.boolean),trackDisplayMode:s.types.maybe(s.types.string),trackMaxHeight:s.types.maybe(s.types.number),configuration:(0,l.ConfigurationReference)(e)})).views((function(e){return{get rendererTypeName(){return(0,l.getConf)(e,["renderer","type"])},get showLabels(){var t;return null!==(t=e.trackShowLabels)&&void 0!==t?t:(0,l.getConf)(e,["renderer","showLabels"])},get showDescriptions(){var t;return null!==(t=e.trackShowDescriptions)&&void 0!==t?t:(0,l.getConf)(e,["renderer","showDescriptions"])},get maxHeight(){var t;return null!==(t=e.trackMaxHeight)&&void 0!==t?t:(0,l.getConf)(e,["renderer","maxHeight"])},get displayMode(){var t,r=(0,l.getConf)(e,["renderer","displayMode"]);return null!==(t=e.trackDisplayMode)&&void 0!==t?t:r},get rendererConfig(){var t=(0,l.getConf)(e,["renderer"])||{};return e.rendererType.configSchema.create(m(m({},t),{},{showLabels:this.showLabels,showDescriptions:this.showDescriptions,displayMode:this.displayMode,maxHeight:this.maxHeight}),(0,s.getEnv)(e))}}})).actions((function(e){return{toggleShowLabels:function(){e.trackShowLabels=!e.showLabels},toggleShowDescriptions:function(){e.trackShowDescriptions=!e.showDescriptions},setDisplayMode:function(t){e.trackDisplayMode=t},setMaxHeight:function(t){e.trackMaxHeight=t}}})).views((function(e){var t=e.trackMenuItems,r=e.renderProps;return{renderProps:function(){var t=e.rendererConfig;return m(m({},r()),{},{config:t})},trackMenuItems:function(){return[].concat((0,o.default)(t()),[{label:"Show labels",icon:f.default,type:"checkbox",checked:e.showLabels,onClick:function(){e.toggleShowLabels()}},{label:"Show descriptions",icon:f.default,type:"checkbox",checked:e.showDescriptions,onClick:function(){return e.toggleShowDescriptions()}},{label:"Display mode",icon:f.default,subMenu:["compact","reducedRepresentation","normal","collapse"].map((function(t){return{label:t,onClick:function(){e.setDisplayMode(t)}}}))},{label:"Set max height",onClick:function(){(0,c.getSession)(e).queueDialog((function(t){return[h,{model:e,handleClose:t}]}))}}])}}}))};t.default=v},2196:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(23),c=n(r(41));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,l.makeStyles)((function(e){return{root:{width:500},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},field:{margin:e.spacing(2)}}}));var d=(0,u.observer)((function(e){var t=e.model,r=e.handleClose,n=f(),a=t.maxHeight,u=void 0===a?"":a,s=(0,i.useState)("".concat(u)),d=(0,o.default)(s,2),p=d[0],m=d[1];return i.default.createElement(l.Dialog,{open:!0,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.default.createElement(l.DialogTitle,{id:"alert-dialog-title"},"Filter options",i.default.createElement(l.IconButton,{"aria-label":"close",className:n.closeButton,onClick:r},i.default.createElement(c.default,null))),i.default.createElement(l.DialogContent,{className:n.root},i.default.createElement(l.Typography,null,'Set max height for the track. For example, you can increase this if the layout says "Max height reached"'),i.default.createElement(l.TextField,{value:p,onChange:function(e){return m(e.target.value)},placeholder:"Enter max score"}),i.default.createElement(l.DialogActions,null,i.default.createElement(l.Button,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,onClick:function(){t.setMaxHeight(""===p||Number.isNaN(+p)?void 0:+p),r()}},"Submit"),i.default.createElement(l.Button,{variant:"contained",color:"secondary",onClick:function(){return r()}},"Cancel"))))}));t.default=d},2197:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.ConfigurationSchema)("LinearBasicDisplay",{mouseover:{type:"string",description:"what to display in a given mouseover",defaultValue:"jexl:get(feature,'name')",contextVariable:["feature"]},renderer:e.pluggableConfigSchemaType("renderer")},{baseConfiguration:a.baseLinearDisplayConfigSchema,explicitlyTyped:!0})};var n=r(29),a=r(278)},2198:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2199))},2199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("BgzipFastaAdapter",{fastaLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz",locationType:"UriLocation"}},faiLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz.fai",locationType:"UriLocation"}},metadataLocation:{description:"Optional metadata file",type:"fileLocation",defaultValue:{uri:"/path/to/fa.metadata.yaml",locationType:"UriLocation"}},gziLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz.gzi",locationType:"UriLocation"}}},{explicitlyTyped:!0});t.default=n},2200:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2201))},2201:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("ChromSizesAdapter",{chromSizesLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/species.chrom.sizes",locationType:"UriLocation"}}},{explicitlyTyped:!0});t.default=n},2202:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(36)),o=n(r(33)),i=n(r(12)),u=n(r(1)),l=r(523),c=r(83),s=r(14),f=r(32);function d(e){for(var t=e.codonTable,r=e.seq,n=e.frame,a=e.bpPerPx,o=e.region,i=e.height,l=e.y,c=e.reverse,s=void 0!==c&&c,d=e.theme,p=a,m=3-o.start%3,g=(n+m+3)%3,h=r.slice(g),v=[],y=0;y<h.length;y+=3){var b=h.slice(y,y+3),w=s?(0,f.revcom)(b):b,k=t[w]||"";v.push({letter:k,codon:w.toUpperCase()})}var O=1/p*3,P=0===o.start?0:O,E=1/a>=12,S=(o.end-o.start)/a,x=["#d8d8d8","#adadad","#8f8f8f"].reverse();return u.default.createElement(u.default.Fragment,null,v.map((function(e,t){var r=o.reversed?S-(O*(t+1)+g/p-P):O*t+g/p-P,a=e.letter,c=e.codon;return u.default.createElement(u.default.Fragment,{key:"".concat(t,"-").concat(a)},u.default.createElement("rect",{x:r,y:l,width:E?O:O+.7,height:i,stroke:E?"#555":"none",fill:f.defaultStarts.includes(c)?d.palette.startCodon:f.defaultStops.includes(c)?d.palette.stopCodon:x[Math.abs(n)]}),E?u.default.createElement("text",{x:r+O/2,y:l+i/2,dominantBaseline:"middle",textAnchor:"middle"},a):null)})))}function p(e){var t=e.bpPerPx,r=e.region,n=e.feature,a=e.theme,o=e.height,c=e.seq,s=e.y,d=1/t>=12,p=(0,f.bpSpanPx)(n.get("start"),n.get("end"),r,t),m=(0,i.default)(p,2),g=m[0],h=m[1],v=r.reversed,y=n.get("end")-n.get("start"),b=Math.max((h-g)/y,.8);return u.default.createElement(u.default.Fragment,null,c.split("").map((function(e,t){var r=a.palette.bases[e.toUpperCase()],n=v?h-(t+1)*b:g+t*b;return u.default.createElement(u.default.Fragment,{key:t},u.default.createElement("rect",{x:n,y:s,width:b,height:o,fill:r?r.main:"#aaa",stroke:d?"#555":"none"}),d?u.default.createElement("text",{x:n+b/2,y:s+o/2,dominantBaseline:"middle",textAnchor:"middle",fill:r?(0,l.contrastingTextColor)(r.main):"black"},e):null)})))}var m=function(e){var t=e.regions,r=e.theme,n=e.features,a=void 0===n?new Map:n,l=e.showReverse,s=e.showForward,m=e.showTranslation,g=e.bpPerPx,h=(0,i.default)(t,1)[0],v=(0,c.createJBrowseTheme)(r),y=(0,f.generateCodonTable)(f.defaultCodonTable),b=(0,o.default)(a.values())[0];if(!b)return null;var w=b.get("seq");if(!w)return null;var k=-20;return u.default.createElement(u.default.Fragment,null,m&&(h.reversed?l:s)?[2,1,0].map((function(e){return u.default.createElement(d,{key:"translation-".concat(e),seq:w,y:k+=20,codonTable:y,frame:e,bpPerPx:g,region:h,theme:v,height:20,reverse:h.reversed})})):null,s?u.default.createElement(p,{height:20,y:k+=20,feature:b,region:h,seq:h.reversed?(0,f.complement)(w):w,bpPerPx:g,theme:v}):null,l?u.default.createElement(p,{height:20,y:k+=20,feature:b,region:h,seq:h.reversed?w:(0,f.complement)(w),bpPerPx:g,theme:v}):null,m&&(h.reversed?s:l)?[0,-1,-2].map((function(e){return u.default.createElement(d,{key:"rev-translation-".concat(e),seq:w,y:k+=20,codonTable:y,frame:e,bpPerPx:g,region:h,theme:v,height:20,reverse:!h.reversed})})):null)},g=function(e){var t=e.exportSVG,r=e.width,n=e.totalHeight,a=e.children;return t?u.default.createElement(u.default.Fragment,null,a):u.default.createElement("svg",{"data-testid":"sequence_track",width:r,height:n,style:{width:r,height:n}},a)};var h=(0,s.observer)((function(e){var t=e.regions,r=e.bpPerPx,n=(0,i.default)(t,1)[0],o=(n.end-n.start)/r;return u.default.createElement(g,(0,a.default)({},e,{totalHeight:200,width:o}),u.default.createElement(m,e))}));t.default=h},2203:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("DivSequenceRenderer",{height:{type:"number",description:"height in pixels of each line of sequence",defaultValue:16}},{explicitlyTyped:!0});t.default=n},2204:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2205))},2205:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("IndexedFastaAdapter",{fastaLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa",locationType:"UriLocation"}},faiLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.fai",locationType:"UriLocation"}},metadataLocation:{description:"Optional metadata file",type:"fileLocation",defaultValue:{uri:"/path/to/fa.metadata.yaml",locationType:"UriLocation"}}},{explicitlyTyped:!0});t.default=n},2206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return n.configSchema}}),Object.defineProperty(t,"modelFactory",{enumerable:!0,get:function(){return a.modelFactory}});var n=r(2207),a=r(2208)},2207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0;var n=r(29),a=r(945),o=(0,n.ConfigurationSchema)("LinearReferenceSequenceDisplay",{renderer:a.configSchema},{explicitIdentifier:"displayId",explicitlyTyped:!0});t.configSchema=o},2208:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.modelFactory=function(e){return o.types.compose("LinearReferenceSequenceDisplay",i.BaseLinearDisplay,o.types.model({type:o.types.literal("LinearReferenceSequenceDisplay"),configuration:(0,u.ConfigurationReference)(e),showForward:o.types.optional(o.types.boolean,!0),showReverse:o.types.optional(o.types.boolean,!0),showTranslation:o.types.optional(o.types.boolean,!0),height:180})).views((function(e){var t=e.renderProps;return{renderProps:function(){var r=e.showForward,n=e.showReverse,a=e.showTranslation;return s(s({},t()),{},{rpcDriverName:e.rpcDriverName,config:e.configuration.renderer,showForward:r,showReverse:n,showTranslation:a})},regionCannotBeRendered:function(){var t=(0,l.getContainingView)(e);if(t&&t.bpPerPx>=1)return"Zoom in to see sequence"},get rendererTypeName(){return e.configuration.renderer.type}}})).actions((function(e){return{toggleShowForward:function(){e.showForward=!e.showForward},toggleShowReverse:function(){e.showReverse=!e.showReverse},toggleShowTranslation:function(){e.showTranslation=!e.showTranslation}}})).views((function(e){return{trackMenuItems:function(){return[{label:"Show forward",type:"checkbox",checked:e.showForward,onClick:function(){e.toggleShowForward()}},{label:"Show reverse",type:"checkbox",checked:e.showReverse,onClick:function(){e.toggleShowReverse()}},{label:"Show translation",type:"checkbox",checked:e.showTranslation,onClick:function(){e.toggleShowTranslation()}}]}}}))};var a=n(r(10)),o=r(17),i=r(141),u=r(29),l=r(32);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2209:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2210))},2210:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("TwoBitAdapter",{twoBitLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.2bit",locationType:"UriLocation"}},chromSizesLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/default.chrom.sizes",locationType:"UriLocation"},description:"An optional chrom.sizes file can be supplied to speed up loading since parsing the twobit file can take time"}},{explicitlyTyped:!0});t.default=n},2211:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11)),o=n(r(2212));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.default=function(e){return{configSchema:e.load(o.default),getAdapterClass:function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(2213))})).then((function(e){return e.default}))}}}},2212:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(29);t.default=function(e){return(0,n.ConfigurationSchema)("GCContentAdapter",{sequenceAdapter:e.pluggableConfigSchemaType("adapter")},{explicitlyTyped:!0})}},2213:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10)),p=r(89),m=r(115),g=n(r(95)),h=r(29),v=r(51);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var k=function(e){(0,c.default)(s,e);var t,r,n=w(s);function s(){var e;(0,i.default)(this,s);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,d.default)((0,l.default)(e),"windowSize",1e3),(0,d.default)((0,l.default)(e),"windowDelta",1e3),(0,d.default)((0,l.default)(e),"gcMode","content"),e}return(0,u.default)(s,[{key:"configure",value:(r=(0,o.default)(a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,h.readConfObject)(this.config,"sequenceAdapter"),e.next=3,null===(t=this.getSubAdapter)||void 0===t?void 0:t.call(this,r);case 3:if(n=e.sent){e.next=6;break}throw new Error("Error getting subadapter");case 6:return e.abrupt("return",n.dataAdapter);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNames",value:(t=(0,o.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,e.abrupt("return",t.getRefNames());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e,t){var r=this;return this.windowSize=1e3,this.windowDelta=1e3,this.gcMode="content",(0,m.ObservableCreate)(function(){var t=(0,o.default)(a.default.mark((function t(n){var o,i,u,l,c,s,f,d,p,m,h,y,w,k,O,P,E;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.configure();case 2:if(i=t.sent,u=1===r.windowSize?1:r.windowSize/2,l=1===r.windowSize,c=e.start,s=e.end,c=Math.max(0,c-u),!((s+=u)<0||c>s)){t.next=11;break}return n.complete(),t.abrupt("return");case 11:return f=i.getFeatures(b(b({},e),{},{start:c,end:s})),t.next=14,f.pipe((0,v.toArray)()).toPromise();case 14:for(d=t.sent,p=(null===(o=d[0])||void 0===o?void 0:o.get("seq"))||"",m=u;m<p.length-u;m+=r.windowDelta){for(h=l?p[m]:p.slice(m-u,m+u),y=0,w=0,k=0,O=0;O<h.length;O++)"c"===h[O]||"C"===h[O]?y++:"g"!==h[O]&&"G"!==h[O]||w++,"N"!==h[O]&&k++;P=c,E=void 0,"content"===r.gcMode?E=(w+y)/(k||1):"skew"===r.gcMode&&(E=(w-y)/(w+y||1)),n.next(new g.default({uniqueId:"".concat(r.id,"_").concat(P+m),start:P+m,end:P+m+r.windowDelta,score:E}))}n.complete();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),s}(p.BaseFeatureDataAdapter);t.default=k,(0,d.default)(k,"capabilities",["hasLocalStats"])},2214:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createReferenceSeqTrackConfig=function(e){return(0,i.ConfigurationSchema)("ReferenceSequenceTrack",{adapter:e.pluggableConfigSchemaType("adapter"),displays:o.types.array(e.pluggableConfigSchemaType("display")),name:{type:"string",description:"optional track name",defaultValue:""},metadata:{type:"frozen",description:"anything to add about this track",defaultValue:{}}},{preProcessSnapshot:function(t){var r=JSON.parse(JSON.stringify(t)),n=new Set,a=r.displays,o=void 0===a?[]:a;"placeholderId"!==r.trackId&&(o.forEach((function(e){return e&&n.add(e.type)})),e.getTrackType(r.type).displayTypes.forEach((function(e){n.has(e.name)||o.push({displayId:"".concat(r.trackId,"-").concat(e.name),type:e.name})})));return l(l({},r),{},{displays:o})},explicitIdentifier:"trackId",explicitlyTyped:!0,actions:function(e){return{addDisplayConf:function(t){var r=t.type;if(!r)throw new Error("unknown display type ".concat(r));var n=e.displays.find((function(e){return e&&e.displayId===t.displayId}));if(n)return n;var a=e.displays.push(t);return e.displays[a-1]}}}})};var a=n(r(10)),o=r(17),i=r(29);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2215:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=r(97),h=r(115),v=n(r(95)),y=r(886),b=r(29);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var k=function(e){(0,s.default)(d,e);var t,r,n,f=w(d);function d(e,t,r){var n;return(0,u.default)(this,d),n=f.call(this,e,t,r),(0,p.default)((0,c.default)(n),"twobit",void 0),(0,p.default)((0,c.default)(n),"chromSizesData",void 0),n.chromSizesData=n.initChromSizes(),n.twobit=new y.TwoBitFile({filehandle:(0,g.openLocation)((0,b.readConfObject)(e,"twoBitLocation"),n.pluginManager)}),n}return(0,l.default)(d,[{key:"initChromSizes",value:(n=(0,i.default)(a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/path/to/default.chrom.sizes"===(t=(0,b.readConfObject)(this.config,"chromSizesLocation")).uri||""===t.uri){e.next=7;break}return r=(0,g.openLocation)(t,this.pluginManager),e.next=5,r.readFile("utf8");case 5:return n=e.sent,e.abrupt("return",Object.fromEntries(null==n?void 0:n.split("\n").filter((function(e){return!!e.trim()})).map((function(e){var t=e.split("\t"),r=(0,o.default)(t,2);return[r[0],+r[1]]}))));case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getRefNames",value:(r=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chromSizesData;case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",Object.keys(t));case 5:return e.abrupt("return",this.twobit.getSequenceNames());case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRegions",value:(t=(0,i.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chromSizesData;case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",Object.keys(t).map((function(e){return{refName:e,start:0,end:t[e]}})));case 5:return e.next=7,this.twobit.getSequenceSizes();case 7:return r=e.sent,e.abrupt("return",Object.keys(r).map((function(e){return{refName:e,start:0,end:r[e]}})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=e.refName,n=e.start,o=e.end;return(0,h.ObservableCreate)(function(){var e=(0,i.default)(a.default.mark((function e(i){var u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.twobit.getSequenceSize(r);case 2:return u=e.sent,l=void 0!==u?Math.min(u,o):o,e.next=6,t.twobit.getSequence(r,n,l);case 6:(c=e.sent)&&i.next(new v.default({id:"".concat(r," ").concat(n,"-").concat(l),data:{refName:r,start:n,end:l,seq:c}})),i.complete();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),d}(m.BaseSequenceAdapter);t.default=k},2216:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=r(97),h=r(29);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var y=function(e){(0,s.default)(f,e);var t,r,n=v(f);function f(e,t,r){var a;(0,u.default)(this,f),a=n.call(this,e,t,r),(0,p.default)((0,c.default)(a),"refSeqs",void 0),(0,p.default)((0,c.default)(a),"source",void 0);var o=(0,h.readConfObject)(e,"chromSizesLocation");if(!o)throw new Error("must provide chromSizesLocation");var i=(0,g.openLocation)(o,a.pluginManager);return a.source=i.toString(),a.refSeqs=a.init(i),a}return(0,l.default)(f,[{key:"init",value:(r=(0,i.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile("utf8");case 2:if(r=e.sent,n={},r.length){e.next=6;break}throw new Error("Could not read file ".concat(t.toString()));case 6:return r.split("\n").forEach((function(e){if(e.length){var t=e.split("\t"),r=(0,o.default)(t,2),a=r[0],i=r[1];n[a]=+i}})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"getRegions",value:(t=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refSeqs;case 2:return t=e.sent,e.abrupt("return",Object.keys(t).map((function(e){return{refName:e,start:0,end:t[e]}})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(){throw new Error("sequence not available")}},{key:"getHeader",value:function(){return{}}},{key:"freeResources",value:function(){}}]),f}(m.BaseAdapter);t.default=y},2217:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(25)),u=n(r(26)),l=n(r(24)),c=r(375),s=r(97),f=r(29);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var p=function(e){(0,i.default)(r,e);var t=d(r);function r(e,n,a){var i;(0,o.default)(this,r),i=t.call(this,e,n,a);var u=(0,f.readConfObject)(e,"fastaLocation"),l=(0,f.readConfObject)(e,"faiLocation"),d=(0,f.readConfObject)(e,"gziLocation");if(!u)throw new Error("must provide fastaLocation");if(!l)throw new Error("must provide faiLocation");if(!d)throw new Error("must provide gziLocation");var p={fasta:(0,s.openLocation)(u,i.pluginManager),fai:(0,s.openLocation)(l,i.pluginManager),gzi:(0,s.openLocation)(d,i.pluginManager)};return i.fasta=new c.BgzipIndexedFasta(p),i}return(0,a.default)(r)}(n(r(946)).default);t.default=p},2218:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"VcfFeature",{enumerable:!0,get:function(){return j.default}}),t.default=void 0;var o=n(r(15)),i=n(r(16)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(10)),d=r(1),p=r(29),m=n(r(140)),g=n(r(205)),h=r(96),v=n(r(162)),y=n(r(163)),b=n(r(114)),w=r(141),k=n(r(2219)),O=r(2221),P=n(r(2224)),E=r(2226),S=r(2227),x=r(2229),C=r(65),j=n(r(531));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var D=function(e){(0,l.default)(n,e);var t=R(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","VariantsPlugin"),e}return(0,i.default)(n,[{key:"install",value:function(e){e.addAdapterType((function(){return new m.default({name:"VcfTabixAdapter",configSchema:S.configSchema,getAdapterClass:function(){return Promise.resolve().then((function(){return T(r(2231))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="VcfTabixAdapter",o=(0,C.getFileName)(t),i=r&&(0,C.getFileName)(r),u={type:a,vcfGzLocation:t,index:{location:r||(0,C.makeIndex)(t,".tbi"),indexType:(0,C.makeIndexType)(i,"CSI","TBI")}};return/\.vcf\.b?gz$/i.test(o)&&!n||n===a?u:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"VcfTabixAdapter"===t||"VcfAdapter"===t?"VariantTrack":e(t)}})),e.addAdapterType((function(){return new m.default({name:"VcfAdapter",configSchema:x.configSchema,getAdapterClass:function(){return Promise.resolve().then((function(){return T(r(2232))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="VcfAdapter",o=(0,C.getFileName)(t);return/\.vcf$/i.test(o)||n===a?{type:a,vcfLocation:t}:e(t,r,n)}})),e.addRendererType((function(){return e.jbrequire(P.default)})),e.addTrackType((function(){var t=(0,p.ConfigurationSchema)("VariantTrack",{},{baseConfiguration:(0,h.createBaseTrackConfig)(e)});return new v.default({name:"VariantTrack",configSchema:t,stateModel:(0,h.createBaseTrackModel)(e,"VariantTrack",t)})})),e.addDisplayType((function(){return e.jbrequire(k.default)})),e.addDisplayType((function(){var t=(0,O.configSchemaFactory)(e);return new g.default({name:"LinearVariantDisplay",configSchema:t,stateModel:(0,O.modelFactory)(t),trackType:"VariantTrack",viewType:"LinearGenomeView",ReactComponent:w.BaseLinearDisplayComponent})})),e.addWidgetType((function(){return new y.default({name:"VariantFeatureWidget",heading:"Feature details",configSchema:E.configSchema,stateModel:(0,E.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return T(r(2233))}))}))})}))}}]),n}(b.default);t.default=D},2219:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(526),o=n(r(2220));t.default=function(e){var t=e.lib,r=e.load,n=t["@jbrowse/core/pluggableElementTypes/DisplayType"],i=r(o.default),u=i.stateModel;return new n({name:"ChordVariantDisplay",configSchema:i.configSchema,stateModel:u,trackType:"VariantTrack",viewType:"CircularView",ReactComponent:(0,a.BaseChordDisplayComponentFactory)(e)})}},2220:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10)),o=r(526);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){var t=e.jbrequire,r=t("mobx-state-tree").types,n=t("@jbrowse/core/configuration"),a=n.ConfigurationSchema,i=n.ConfigurationReference,l=t("@jbrowse/core/util").getContainingView,c=t("@jbrowse/core/util/tracks").getParentRenderProps,s=a("ChordVariantDisplay",{renderer:r.optional(e.pluggableConfigSchemaType("renderer"),{type:"StructuralVariantChordRenderer"})},{baseConfiguration:o.baseChordDisplayConfig,explicitlyTyped:!0});return{stateModel:r.compose("ChordVariantDisplay",o.BaseChordDisplayModel,r.model({type:r.literal("ChordVariantDisplay"),configuration:i(s)})).views((function(e){return{get rendererTypeName(){return e.configuration.renderer.type},renderProps:function(){var t=l(e);return u(u({},c(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e,bezierRadius:t.radiusPx*e.bezierRadiusRatio,radius:t.radiusPx,blockDefinitions:this.blockDefinitions,config:e.configuration.renderer,onChordClick:e.onChordClick})}}})),configSchema:s}};t.default=l},2221:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchemaFactory",{enumerable:!0,get:function(){return a.LinearVariantDisplayConfigFactory}}),Object.defineProperty(t,"modelFactory",{enumerable:!0,get:function(){return o.default}});var a=r(2222),o=n(r(2223))},2222:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinearVariantDisplayConfigFactory=function(e){var t=(0,a.linearBasicDisplayConfigSchemaFactory)(e);return(0,n.ConfigurationSchema)("LinearVariantDisplay",{},{baseConfiguration:t,explicitlyTyped:!0})};var n=r(29),a=r(141)},2223:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.types.compose("LinearVariantDisplay",(0,c.linearBasicDisplayModelFactory)(e),s.types.model({type:s.types.literal("LinearVariantDisplay"),configuration:(0,i.ConfigurationReference)(e)})).actions((function(e){return{selectFeature:function(t){return(0,o.default)(a.default.mark((function r(){var n,o,c,s,f,d,p;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=(0,l.getSession)(e),!(0,l.isSessionModelWithWidgets)(n)){r.next=11;break}return o=n.rpcManager,c=(0,u.getRpcSessionId)(e),s=(0,l.getContainingTrack)(e),f=(0,i.getConf)(s,"adapter"),r.next=8,o.call(c,"CoreGetMetadata",{adapterConfig:f});case 8:d=r.sent,p=n.addWidget("VariantFeatureWidget","variantFeature",{featureData:t.toJSON(),view:(0,l.getContainingView)(e),descriptions:d}),n.showWidget(p);case 11:n.setSelection(t);case 12:case"end":return r.stop()}}),r)})))()}}}))};var a=n(r(19)),o=n(r(20)),i=r(29),u=r(65),l=r(32),c=r(141),s=r(17)},2224:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(364)),o=r(29),i=n(r(2225)),u=function(e){var t=(0,o.ConfigurationSchema)("StructuralVariantChordRenderer",{strokeColor:{type:"color",description:"the line color of each arc",defaultValue:"rgba(255,133,0,0.32)",contextVariable:["feature"]},strokeColorSelected:{type:"color",description:"the line color of an arc that has been selected",defaultValue:"black",contextVariable:["feature"]},strokeColorHover:{type:"color",description:"the line color of an arc that is being hovered over with the mouse",defaultValue:"#555",contextVariable:["feature"]}},{explicitlyTyped:!0});return new a.default({name:"StructuralVariantChordRenderer",ReactComponent:i.default,configSchema:t,pluginManager:e})};t.default=u},2225:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(33)),i=n(r(12)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(14),c=r(32),s=r(29),f=r(70),d=r(116),p=n(r(0));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=e.region.elided?0:e.region.start,n=e.region.elided?0:e.region.end;return(e.flipped?n-t:t-r)/e.bpPerRadian+e.startRadians}var y=(0,l.observer)((function(e){var t,r,n,a,l=e.feature,f=e.blocksForRefs,p=e.radius,m=e.config,g=e.bezierRadius,h=e.selected,y=e.onClick,b=f[l.get("refName")];if(!b)return null;if(l.get("INFO")){var w=l.get("INFO").SVTYPE||[];r=(0,i.default)(w,1)[0]}else l.get("mate")&&(r="mate");var k=null===(t=l.get("ALT"))||void 0===t?void 0:t[0],O=k&&(0,d.parseBreakend)(k);if(O){var P=O.MatePosition.split(":");n=+P[1],a=f[P[0]]}else if("<TRA>"===k){var E,S,x,C,j=null===(E=l.get("INFO"))||void 0===E||null===(S=E.CHR2)||void 0===S?void 0:S[0],M=null===(x=l.get("INFO"))||void 0===x||null===(C=x.END)||void 0===C?void 0:C[0];n=parseInt(M,10),a=f[j]}else if("mate"===r){var T=l.get("mate"),R=T.refName;n=T.start,a=f[R]}if(a){var D=l.get("start"),A=v(b,D),I=v(a,n),_=(0,c.polarToCartesian)(p,A),N=(0,c.polarToCartesian)(p,I),B=(0,c.polarToCartesian)(g,(I+A)/2),F=h?(0,s.readConfObject)(m,"strokeColorSelected",{feature:l}):(0,s.readConfObject)(m,"strokeColor",{feature:l}),L=(0,s.readConfObject)(m,"strokeColorHover",{feature:l});return u.default.createElement("path",{"data-testid":"chord-".concat(l.id()),d:["M"].concat((0,o.default)(_),["Q"],(0,o.default)(B),(0,o.default)(N)).join(" "),style:{stroke:F},onClick:function(e){return y(l,b.region,a.region,e)},onMouseOver:function(e){h||(e.target.style.stroke=L,e.target.style.strokeWidth=3)},onMouseOut:function(e){h||(e.target.style.stroke=F,e.target.style.strokeWidth=1)}})}return null}));function b(e){var t,r=e.features,n=e.config,a=e.displayModel,o=e.blockDefinitions,l=e.radius,c=e.bezierRadius,s=e.displayModel.selectedFeatureId,f=e.onChordClick,d=(0,u.useMemo)((function(){var e={};return o.forEach((function(t){(t.region.elided?t.region.regions:[t.region]).forEach((function(r){e[r.refName]=t}))})),e}),[o]),p=[],m=g(r);try{for(m.s();!(t=m.n()).done;){var h=(0,i.default)(t.value,2),v=h[0],b=h[1],w=String(s)===String(b.id());p.push(u.default.createElement(y,{key:v,feature:b,config:n,displayModel:a,radius:l,bezierRadius:c,blocksForRefs:d,selected:w,onClick:f}))}}catch(e){m.e(e)}finally{m.f()}var k="chords-".concat(a.id);return u.default.createElement("g",{id:k,"data-testid":"structuralVariantChordRenderer"},u.default.createElement("style",{dangerouslySetInnerHTML:{__html:"\n          #".concat(k," > path {\n            cursor: crosshair;\n            fill: none;\n          }\n")}}),p)}b.propTypes={features:p.default.instanceOf(Map).isRequired,config:f.PropTypes.ConfigSchema.isRequired,displayModel:l.PropTypes.objectOrObservableObject,blockDefinitions:p.default.arrayOf(l.PropTypes.objectOrObservableObject).isRequired,radius:p.default.number.isRequired,bezierRadius:p.default.number.isRequired,selectedFeatureId:p.default.string,onChordClick:p.default.oneOfType([p.default.func,p.default.string])},b.defaultProps={displayModel:void 0,selectedFeatureId:"",onChordClick:void 0};var w=(0,l.observer)(b);t.default=w},2226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,t.stateModelFactory=function(e){var t=(0,o.stateModelFactory)(e);return a.types.compose(t,a.types.model("VariantFeatureWidget",{type:a.types.literal("VariantFeatureWidget"),descriptions:a.types.frozen()}))};var n=r(29),a=r(17),o=r(931),i=(0,n.ConfigurationSchema)("VariantFeatureWidget",{});t.configSchema=i},2227:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2228))},2228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),a=r(29),o=(0,a.ConfigurationSchema)("VcfTabixAdapter",{vcfGzLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf.gz",locationType:"UriLocation"}},index:(0,a.ConfigurationSchema)("VcfIndex",{indexType:{model:n.types.enumeration("IndexType",["TBI","CSI"]),type:"stringEnum",defaultValue:"TBI"},location:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf.gz.tbi",locationType:"UriLocation"}}})},{explicitlyTyped:!0});t.default=o},2229:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2230))},2230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("VcfAdapter",{vcfLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf",locationType:"UriLocation"}}},{explicitlyTyped:!0});t.default=n},2231:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(50)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=r(97),h=r(32),v=r(115),y=r(351),b=n(r(116)),w=r(29),k=n(r(531));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var S=function(e){(0,s.default)(S,e);var t,r,n,f,m,O=E(S);function S(){var e;(0,i.default)(this,S);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=O.call.apply(O,[this].concat(r)),(0,p.default)((0,l.default)(e),"configured",void 0),e}return(0,u.default)(S,[{key:"configurePre",value:(m=(0,o.default)(a.default.mark((function e(){var t,r,n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.readConfObject)(this.config,"vcfGzLocation"),r=(0,w.readConfObject)(this.config,["index","location"]),n=(0,w.readConfObject)(this.config,["index","indexType"]),o=(0,g.openLocation)(t,this.pluginManager),i="CSI"===n,u=new y.TabixIndexedFile({filehandle:o,csiFilehandle:i?(0,g.openLocation)(r,this.pluginManager):void 0,tbiFilehandle:i?void 0:(0,g.openLocation)(r,this.pluginManager),chunkCacheSize:50*Math.pow(2,20),chunkSizeLimit:1e9}),e.next=8,u.getHeader();case 8:return l=e.sent,e.abrupt("return",{filehandle:o,vcf:u,parser:new b.default({header:l})});case 10:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"configure",value:(f=(0,o.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.configured||(this.configured=this.configurePre().catch((function(e){throw t.configured=void 0,e}))),e.abrupt("return",this.configured);case 2:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getRefNames",value:(n=(0,o.default)(a.default.mark((function e(){var t,r,n,o=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.configure();case 3:return r=e.sent,n=r.vcf,e.abrupt("return",n.getReferenceSequenceNames(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getHeader",value:(r=(0,o.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,r=t.vcf,e.abrupt("return",r.getHeader());case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getMetadata",value:(t=(0,o.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,r=t.parser,e.abrupt("return",r.getMetadata());case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,v.ObservableCreate)(function(){var n=(0,o.default)(a.default.mark((function n(o){var i,u,l,c,s,f;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.refName,u=e.start,l=e.end,n.next=3,t.configure();case 3:return c=n.sent,s=c.vcf,f=c.parser,n.next=8,s.getLines(i,u,l,P({lineCallback:function(e,r){o.next(new k.default({variant:f.parseLine(e),parser:f,id:"".concat(t.id,"-vcf-").concat(r)}))}},r));case 8:o.complete();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),r.signal)}},{key:"getFeaturesInMultipleRegions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.default)((0,d.default)(S.prototype),"getFeaturesInMultipleRegions",this);return(0,v.ObservableCreate)(function(){var i=(0,o.default)(a.default.mark((function o(i){var u,l,c,s,f,d,p;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.configure();case 2:return u=a.sent,l=u.vcf,a.next=6,(0,h.bytesForRegions)(e,l.index);case 6:return c=a.sent,a.next=9,t.configure();case 9:return s=a.sent,f=s.filehandle,a.next=13,f.stat();case 13:d=a.sent,(p=Math.round(c/d.size*100))>100&&(p=100),p>60&&console.warn("getFeaturesInMultipleRegions fetching ".concat(p,"% of VCF file, but whole-file streaming not yet implemented")),n.call(t,e,r).subscribe(i);case 18:case"end":return a.stop()}}),o)})));return function(e){return i.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),S}(m.BaseFeatureDataAdapter);t.default=S},2232:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=r(97),h=r(115),v=r(29),y=n(r(352)),b=r(103),w=n(r(116)),k=n(r(531));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var P=function(e){var t=e.split("\n"),r=[],n=[];return t.forEach((function(e){e.startsWith("#")?r.push(e):e&&n.push(e)})),{header:r.join("\n"),lines:n}};function E(e){return 31===e[0]&&139===e[1]&&8===e[2]}var S=function(e){(0,s.default)(S,e);var t,r,n,f,d,m=O(S);function S(){var e;(0,u.default)(this,S);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=m.call.apply(m,[this].concat(r)),(0,p.default)((0,c.default)(e),"vcfFeatures",void 0),e}return(0,l.default)(S,[{key:"getHeader",value:(d=(0,i.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return t=e.sent,r=t.header,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getMetadata",value:(f=(0,i.default)(a.default.mark((function e(){var t,r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return t=e.sent,r=t.header,n=new w.default({header:r}),e.abrupt("return",n.getMetadata());case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"setupP",value:(n=(0,i.default)(a.default.mark((function e(){var t,r,n,i,u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.openLocation)((0,v.readConfObject)(this.config,"vcfLocation"),this.pluginManager).readFile();case 2:if(!E(t=e.sent)){e.next=9;break}return e.next=6,(0,b.unzip)(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=t;case 10:if(!((r=e.t0).length>536870888)){e.next=13;break}throw new Error("Data exceeds maximum string length (512MB)");case 13:return n=(new TextDecoder).decode(r),i=P(n),u=i.header,l=i.lines,c=l.map((function(e,t){var r,n=e.split("\t"),a=(0,o.default)(n,8),i=a[0],u=a[1],l=a[3],c=+u-1;return{line:e,refName:i,start:c,end:+((null===(r=a[7].match(/END=(\d+)/))||void 0===r?void 0:r[1].trim())||c+l.length),id:t}})).reduce((function(e,t){var r=t.refName;return e[r]||(e[r]=new y.default),e[r].insert([t.start,t.end],t),e}),{}),e.abrupt("return",{header:u,intervalTree:c});case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setup",value:(r=(0,i.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vcfFeatures||(this.vcfFeatures=this.setupP().catch((function(e){throw t.vcfFeatures=void 0,e}))),e.abrupt("return",this.vcfFeatures);case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNames",value:(t=(0,i.default)(a.default.mark((function e(){var t,r,n=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.setup();case 3:return t=e.sent,r=t.intervalTree,e.abrupt("return",Object.keys(r));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,h.ObservableCreate)(function(){var r=(0,i.default)(a.default.mark((function r(n){var o,i,u,l,c,s,f,d;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=e.start,u=e.end,l=e.refName,r.next=4,t.setup();case 4:c=r.sent,s=c.header,f=c.intervalTree,d=new w.default({header:s}),null===(o=f[l])||void 0===o||o.search([i,u]).forEach((function(e){return n.next(new k.default({variant:d.parseLine(e.line),parser:d,id:"".concat(t.id,"-").concat(e.id)}))})),n.complete(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),n.error(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}(),r.signal)}},{key:"freeResources",value:function(){}}]),S}(m.BaseFeatureDataAdapter);t.default=S,(0,p.default)(S,"capabilities",["getFeatures","getRefNames"])},2233:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(45)),i=n(r(36)),u=n(r(10)),l=n(r(33)),c=n(r(12)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(23),d=n(r(95)),p=r(184),m=r(14),g=r(32),h=r(17),v=r(361),y=n(r(2234)),b=r(116),w=["samples"];function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=(0,s.useState)({}),r=(0,c.default)(t,2),n=r[0],a=r[1],o=(0,s.useState)(!1),d=(0,c.default)(o,2),m=d[0],g=d[1],h=e.feature.samples,y=void 0===h?{}:h,b=Object.entries(y);if(!b.length)return null;var w,k=["sample"].concat((0,l.default)(Object.keys(b[0][1]))).map((function(e){return{field:e}})),O=[],E=Object.keys(n);try{O=b.map((function(e){return P(P({},Object.fromEntries(Object.entries(e[1]).map((function(e){return[e[0],String(e[1])]})))),{},{sample:e[0],id:e[0]})})).filter((function(e){return!E.length||E.every((function(t){var r=e[t],a=n[t];return!a||r.match(new RegExp(a,"i"))}))}))}catch(e){w=e}return s.default.createElement(v.BaseCard,(0,i.default)({},e,{title:"Samples"}),w?s.default.createElement(f.Typography,{color:"error"},"".concat(w)):null,s.default.createElement(f.FormControlLabel,{control:s.default.createElement(f.Checkbox,{checked:m,onChange:function(){return g((function(e){return!e}))}}),label:"Show sample filters"}),m?s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Typography,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),k.map((function(e){var t=e.field;return s.default.createElement(f.TextField,{key:"filter-".concat(t),placeholder:"Filter ".concat(t),value:n[t]||"",onChange:function(e){return a(P(P({},n),{},(0,u.default)({},t,e.target.value)))}})}))):null,s.default.createElement("div",{style:{height:600,width:"100%",overflow:"auto"}},s.default.createElement(p.DataGrid,{rows:O,columns:k,rowHeight:20,headerHeight:25,disableSelectionOnClick:!0,disableColumnMenu:!0})))}function S(e){var t,r=e.model,n=e.locStrings,a=e.feature,o=(0,g.getSession)(r),u=(0,h.getEnv)(o).pluginManager,l=(0,s.useState)(!1),p=(0,c.default)(l,2),m=p[0],b=p[1];try{t=u.getViewType("BreakpointSplitView")}catch(e){}var w=new d.default(a);return s.default.createElement(v.BaseCard,(0,i.default)({},e,{title:"Breakends"}),s.default.createElement(f.Typography,null,"Link to linear view of breakend endpoints"),s.default.createElement("ul",null,n.map((function(e){return s.default.createElement("li",{key:"".concat(JSON.stringify(e))},s.default.createElement(f.Link,{href:"#",onClick:function(t){t.preventDefault();var n=r.view;try{if(!n)throw new Error("No view associated with this feature detail panel anymore");var a;null===(a=n.navToLocString)||void 0===a||a.call(n,e)}catch(e){console.error(e),o.notify("".concat(e))}}},"LGV - ".concat(e)))}))),t?s.default.createElement("div",null,s.default.createElement(f.Typography,null,"Launch split views with breakend source and target"),s.default.createElement("ul",null,n.map((function(e){return s.default.createElement("li",{key:"".concat(JSON.stringify(e))},s.default.createElement(f.Link,{href:"#",onClick:function(e){e.preventDefault(),b(!0)}},"".concat(a.refName,":").concat(a.start," // ").concat(e," (split view)")))}))),m?s.default.createElement(y.default,{model:r,feature:w,viewType:t,handleClose:function(){b(!1)}}):null):null)}var x=(0,m.observer)((function(e){var t=e.model,r=t.featureData,n=t.descriptions,a=JSON.parse(JSON.stringify(r)),u=(a.samples,(0,o.default)(a,w));return s.default.createElement(f.Paper,{"data-testid":"variant-side-drawer"},s.default.createElement(v.FeatureDetails,(0,i.default)({feature:u,descriptions:P(P({},{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"}),n)},e)),s.default.createElement(f.Divider,null),"breakend"===a.type?s.default.createElement(S,{feature:a,locStrings:a.ALT.map((function(e){var t;return(null===(t=(0,b.parseBreakend)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===a.type?s.default.createElement(S,{feature:a,model:t,locStrings:["".concat(a.INFO.CHR2[0],":").concat(a.INFO.END)]}):null,s.default.createElement(E,(0,i.default)({feature:a},e)))}));t.default=x},2234:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(23),c=n(r(41)),s=r(17),f=r(32);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,l.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},block:{display:"block"}}}));var m=(0,u.observer)((function(e){var t=e.model,r=e.handleClose,n=e.feature,a=e.viewType,u=p(),d=(0,i.useState)(!0),m=(0,o.default)(d,2),g=m[0],h=m[1],v=(0,i.useState)(!0),y=(0,o.default)(v,2),b=y[0],w=y[1];return i.default.createElement(l.Dialog,{open:!0,onClose:r},i.default.createElement(l.DialogTitle,null,"Breakpoint split view options",r?i.default.createElement(l.IconButton,{className:u.closeButton,onClick:function(){return r()}},i.default.createElement(c.default,null)):null),i.default.createElement(l.Divider,null),i.default.createElement(l.DialogContent,null,i.default.createElement(l.FormControlLabel,{className:u.block,control:i.default.createElement(l.Checkbox,{checked:g,onChange:function(){return h((function(e){return!e}))}}),label:"Copy tracks into the new view"}),i.default.createElement(l.FormControlLabel,{className:u.block,control:i.default.createElement(l.Checkbox,{checked:b,onChange:function(){return w((function(e){return!e}))}}),label:"Mirror tracks vertically in vertically stacked view"})),i.default.createElement(l.DialogActions,null,i.default.createElement(l.Button,{onClick:function(){var e=t.view,o=(0,f.getSession)(t);try{var i=a.snapshotFromBreakendFeature(n,e);i.views[0].offsetPx-=e.width/2+100,i.views[1].offsetPx-=e.width/2+100,i.featureData=n;var u=(0,s.getSnapshot)(e.tracks);i.views[0].tracks=u,i.views[1].tracks=b?u.slice().reverse():u,o.addView("BreakpointSplitView",i)}catch(e){console.error(e),o.notify("".concat(e))}r()},variant:"contained",color:"primary",autoFocus:!0},"OK"),i.default.createElement(l.Button,{onClick:function(){return r()},color:"secondary",variant:"contained"},"Cancel")))}));t.default=m},2235:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0});var o={WiggleBaseRenderer:!0,WiggleRendering:!0,linearWiggleDisplayModelFactory:!0,LinearWiggleDisplayReactComponent:!0,YSCALEBAR_LABEL_OFFSET:!0,Tooltip:!0};Object.defineProperty(t,"LinearWiggleDisplayReactComponent",{enumerable:!0,get:function(){return E.ReactComponent}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return M.Tooltip}}),Object.defineProperty(t,"WiggleBaseRenderer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"WiggleRendering",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"YSCALEBAR_LABEL_OFFSET",{enumerable:!0,get:function(){return E.YSCALEBAR_LABEL_OFFSET}}),t.default=void 0,Object.defineProperty(t,"linearWiggleDisplayModelFactory",{enumerable:!0,get:function(){return E.modelFactory}});var i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10)),p=n(r(140)),m=n(r(162)),g=n(r(114)),h=r(29),v=r(96),y=n(r(205)),b=n(r(366)),w=n(r(367)),k=r(2236),O=R(r(2238)),P=R(r(279));Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}));var E=r(2239),S=R(r(2244)),x=R(r(2246)),C=r(2248),j=r(65),M=r(947);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var A=function(e){(0,c.default)(n,e);var t=D(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"name","WigglePlugin"),(0,d.default)((0,l.default)(e),"exports",{LinearWiggleDisplayReactComponent:E.ReactComponent,XYPlotRendererReactComponent:S.ReactComponent,XYPlotRenderer:S.default,xyPlotRendererConfigSchema:S.configSchema,utils:P,WiggleBaseRenderer:b.default,linearWiggleDisplayModelFactory:E.modelFactory}),e}return(0,u.default)(n,[{key:"install",value:function(e){e.addTrackType((function(){var t=(0,h.ConfigurationSchema)("QuantitativeTrack",{},{baseConfiguration:(0,v.createBaseTrackConfig)(e)});return new m.default({name:"QuantitativeTrack",configSchema:t,stateModel:(0,v.createBaseTrackModel)(e,"QuantitativeTrack",t)})})),e.addDisplayType((function(){var t=(0,E.configSchemaFactory)(e);return new y.default({name:"LinearWiggleDisplay",configSchema:t,stateModel:(0,E.modelFactory)(e,t),trackType:"QuantitativeTrack",viewType:"LinearGenomeView",ReactComponent:E.ReactComponent})})),e.addAdapterType((function(){return new p.default({name:"BigWigAdapter",configSchema:k.configSchema,adapterCapabilities:["hasResolution","hasLocalStats","hasGlobalStats"],getAdapterClass:function(){return Promise.resolve().then((function(){return R(r(2249))})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a="BigWigAdapter",o=(0,j.getFileName)(t),i={type:a,bigWigLocation:t};return/\.(bw|bigwig)$/i.test(o)&&!n||n===a?i:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"BigWigAdapter"===t?"QuantitativeTrack":e(t)}})),e.addRendererType((function(){return new O.default({name:"DensityRenderer",ReactComponent:O.ReactComponent,configSchema:O.configSchema,pluginManager:e})})),e.addRendererType((function(){return new x.default({name:"LinePlotRenderer",ReactComponent:x.ReactComponent,configSchema:x.configSchema,pluginManager:e})})),e.addRendererType((function(){return new S.default({name:"XYPlotRenderer",ReactComponent:S.ReactComponent,configSchema:S.configSchema,pluginManager:e})})),e.addRpcMethod((function(){return new C.WiggleGetGlobalStats(e)})),e.addRpcMethod((function(){return new C.WiggleGetMultiRegionStats(e)}))}}]),n}(g.default);t.default=A},2236:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return a.default}});var a=n(r(2237))},2237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(29).ConfigurationSchema)("BigWigAdapter",{bigWigLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.bw",locationType:"UriLocation"}}},{explicitlyTyped:!0});t.default=n},2238:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return h.default}}),t.default=t.configSchema=void 0;var a=n(r(10)),o=n(r(12)),i=n(r(15)),u=n(r(16)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=r(29),d=r(32),p=r(279),m=n(r(532)),g=n(r(366)),h=n(r(367));function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var O=function(e){(0,l.default)(r,e);var t=k(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"draw",value:function(e,t){var r,n=t.features,a=t.regions,i=t.bpPerPx,u=t.scaleOpts,l=t.height,c=t.config,s=(0,o.default)(a,1)[0],m=(0,f.readConfObject)(c,"bicolorPivot"),g=(0,f.readConfObject)(c,"bicolorPivotValue"),h=(0,f.readConfObject)(c,"negColor"),y=(0,f.readConfObject)(c,"posColor");if("#f0f"===(0,f.readConfObject)(c,"color")){var b="none"!==m?(0,p.getScale)(w(w({},u),{},{pivotValue:g,range:[h,"white",y]})):(0,p.getScale)(w(w({},u),{},{range:["white",y]}));r=function(e){return b(e.get("score"))}}else r=function(e){return(0,f.readConfObject)(c,"color",{feature:e})};var k,O=v(n.values());try{for(O.s();!(k=O.n()).done;){var P=k.value,E=(0,d.featureSpanPx)(P,s,i),S=(0,o.default)(E,2),x=S[0],C=S[1]-x+.3;e.fillStyle=r(P),e.fillRect(x,0,C,l)}}catch(e){O.e(e)}finally{O.f()}}}]),r}(g.default);t.default=O;var P=(0,f.ConfigurationSchema)("DensityRenderer",{},{baseConfiguration:m.default,explicitlyTyped:!0});t.configSchema=P},2239:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"YSCALEBAR_LABEL_OFFSET",{enumerable:!0,get:function(){return i.YSCALEBAR_LABEL_OFFSET}}),Object.defineProperty(t,"configSchemaFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"modelFactory",{enumerable:!0,get:function(){return i.default}});var o=n(r(2240)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(368)),u=n(r(948));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}},2240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getRendererType("XYPlotRenderer").configSchema,r=e.getRendererType("DensityRenderer").configSchema,i=e.getRendererType("LinePlotRenderer").configSchema;return(0,n.ConfigurationSchema)("LinearWiggleDisplay",{autoscale:{type:"stringEnum",defaultValue:"local",model:o.types.enumeration("Autoscale type",["global","local","globalsd","localsd","zscore"]),description:"global/local using their min/max values or w/ standard deviations (globalsd/localsd)"},minimalTicks:{type:"boolean",defaultValue:!1,description:"use the minimal amount of ticks"},minScore:{type:"number",defaultValue:Number.MIN_VALUE,description:"minimum value for the y-scale"},maxScore:{type:"number",description:"maximum value for the y-scale",defaultValue:Number.MAX_VALUE},numStdDev:{type:"number",description:"number of standard deviations to use for autoscale types globalsd or localsd",defaultValue:3},scaleType:{type:"stringEnum",model:o.types.enumeration("Scale type",["linear","log"]),description:"The type of scale to use",defaultValue:"linear"},inverted:{type:"boolean",description:"draw upside down",defaultValue:!1},defaultRendering:{type:"stringEnum",model:o.types.enumeration("Rendering",["density","xyplot","line"]),defaultValue:"xyplot"},renderers:(0,n.ConfigurationSchema)("RenderersConfiguration",{DensityRenderer:r,XYPlotRenderer:t,LinePlotRenderer:i})},{baseConfiguration:a.baseLinearDisplayConfigSchema,explicitlyTyped:!0})};var n=r(29),a=r(141),o=r(17)},2241:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(36)),o=n(r(1)),i=r(14),u=r(342),l=(0,i.observer)((function(e){var t=e.model,r=e.orientation,n=t.ticks;return n?o.default.createElement(u.Axis,(0,a.default)({},n,{shadow:2,format:function(e){return e},style:{orient:"left"===r?u.LEFT:u.RIGHT}})):null}));t.default=l},2242:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=v(),r=e.model,n=e.handleClose,a=r.minScore,u=r.maxScore,h=r.scaleType,y=(0,i.useState)("".concat(a!==Number.MIN_VALUE?a:"")),b=(0,o.default)(y,2),w=b[0],k=b[1],O=(0,i.useState)("".concat(u!==Number.MAX_VALUE?u:"")),P=(0,o.default)(O,2),E=P[0],S=P[1],x=!(""!==w&&""!==E&&!Number.isNaN(+w)&&!Number.isNaN(+E))||+E>+w,C=!("log"===h&&""!==w&&!Number.isNaN(+w))||+w>0;return i.default.createElement(f.default,{open:!0,onClose:n},i.default.createElement(p.default,null,"Set min/max score for track",i.default.createElement(m.default,{className:t.closeButton,onClick:n},i.default.createElement(g.default,null))),i.default.createElement(d.default,{style:{overflowX:"hidden"}},i.default.createElement("div",{className:t.root},i.default.createElement(s.default,null,"Enter min/max score: "),x?null:i.default.createElement(s.default,{color:"error"},"Max is greater than or equal to min"),C?null:i.default.createElement(s.default,{color:"error"},"Min score should be greater than 0 for log scale"),i.default.createElement(c.default,{value:w,onChange:function(e){k(e.target.value)},placeholder:"Enter min score"}),i.default.createElement(c.default,{value:E,onChange:function(e){S(e.target.value)},placeholder:"Enter max score"}),i.default.createElement(l.default,{variant:"contained",color:"primary",type:"submit",style:{marginLeft:20},disabled:!x,onClick:function(){r.setMinScore(""===w||Number.isNaN(+w)?void 0:+w),r.setMaxScore(""===E||Number.isNaN(+E)?void 0:+E),n()}},"Submit"))))};var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(34),l=n(r(71)),c=n(r(86)),s=n(r(52)),f=n(r(101)),d=n(r(122)),p=n(r(121)),m=n(r(58)),g=n(r(41));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var v=(0,u.makeStyles)((function(e){return{root:{},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))},2243:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.handleClose,n=f(),a=(0,i.useState)(!1),s=(0,o.default)(a,2),p=s[0],m=s[1];return i.default.createElement(u.Dialog,{open:!0,onClose:r},i.default.createElement(u.DialogTitle,null,"Select either an overall color, or the positive/negative colors. Note that density renderers only work properly with positive/negative colors",i.default.createElement(u.IconButton,{"aria-label":"close",className:n.closeButton,onClick:r},i.default.createElement(l.default,null))),i.default.createElement(u.DialogContent,null,i.default.createElement(u.FormControlLabel,{checked:!p,onClick:function(){return m(!1)},control:i.default.createElement(u.Radio,null),label:"Overall color"}),i.default.createElement(u.FormControlLabel,{checked:p,onClick:function(){return m(!0)},control:i.default.createElement(u.Radio,null),label:"Positive/negative color"}),p?i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Typography,null,"Positive color"),i.default.createElement(c.CompactPicker,{onChange:function(e){t.setPosColor(d(e.rgb)),t.setColor(void 0)}}),i.default.createElement(u.Typography,null,"Negative color"),i.default.createElement(c.CompactPicker,{onChange:function(e){t.setNegColor(d(e.rgb)),t.setColor(void 0)}})):i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Typography,null,"Overall color"),i.default.createElement(c.CompactPicker,{onChange:function(e){t.setColor(d(e.rgb))}}))),i.default.createElement(u.DialogActions,null,i.default.createElement(u.Button,{onClick:function(){t.setPosColor(void 0),t.setNegColor(void 0),t.setColor(void 0)},color:"secondary",variant:"contained"},"Restore default"),i.default.createElement(u.Button,{variant:"contained",color:"primary",type:"submit",onClick:function(){r()}},"Submit")))};var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),l=n(r(41)),c=r(369);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,u.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function d(e){if(e instanceof Object){var t=e,r=t.r,n=t.g,a=t.b;return"rgb(".concat(r,",").concat(n,",").concat(a,")")}return e}},2244:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return i.default}}),t.configSchema=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u.default}});var a=r(29),o=n(r(532)),i=n(r(367)),u=n(r(2245)),l=(0,a.ConfigurationSchema)("XYPlotRenderer",{},{baseConfiguration:o.default,explicitlyTyped:!0});t.configSchema=l},2245:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10)),o=n(r(12)),i=n(r(15)),u=n(r(16)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=r(29),d=r(32),p=n(r(485)),m=r(279),g=n(r(366)),h=r(368);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var O=function(e){(0,l.default)(r,e);var t=k(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"draw",value:function(e,t){var r,n=t.features,a=t.bpPerPx,i=t.regions,u=t.scaleOpts,l=t.height,c=t.config,s=t.ticks,g=t.displayCrossHatches,y=(0,o.default)(i,1)[0],b=(y.end-y.start)/a,k=h.YSCALEBAR_LABEL_OFFSET,O=l-2*k,P=(0,f.readConfObject)(c,"bicolorPivotValue"),E=(0,f.readConfObject)(c,"negColor"),S=(0,f.readConfObject)(c,"posColor"),x=(0,f.readConfObject)(c,"filled"),C=(0,f.readConfObject)(c,"clipColor"),j=(0,f.readConfObject)(c,"highlightColor"),M=(0,f.readConfObject)(c,"summaryScoreMode"),T=(0,m.getScale)(w(w({},u),{},{range:[0,O]})),R=(0,m.getOrigin)(u.scaleType),D=T.domain(),A=(0,o.default)(D,2),I=A[0],_=A[1],N=function(e){return O-(T(e)||0)+k},B=function(e){return N(R)-N(e)},F="#f0f"===(0,f.readConfObject)(c,"color")?function(e,t){return t<P?E:S}:function(e,t){return(0,f.readConfObject)(c,"color",{feature:e})},L=I<P&&_>P,W=v(n.values());try{for(W.s();!(r=W.n()).done;){var z=r.value,H=(0,d.featureSpanPx)(z,y,a),V=(0,o.default)(H,2),q=V[0],G=V[1],U=z.get("score"),J=z.get("maxScore"),X=z.get("minScore"),Y=U<I,K=U>_,$=G-q+.4,Z=z.get("summary");if("max"===M)U=Z?J:U,e.fillStyle=F(z,U),e.fillRect(q,N(U),$,x?B(U):1);else if("min"===M)U=Z?X:U,e.fillStyle=F(z,U),e.fillRect(q,N(U),$,x?B(U):1);else if("whiskers"===M){var Q=F(z,U);Z&&(e.fillStyle=L?F(z,J):(0,p.default)(Q).lighten(.6).toString(),e.fillRect(q,N(J),$,x?B(J)-B(U):1)),e.fillStyle=L&&Z?(0,p.default)(F(z,J)).mix((0,p.default)(F(z,X))):Q,e.fillRect(q,N(U),$,x?B(U)-(Z?B(X):0):1),Z&&(e.fillStyle=L?F(z,X):(0,p.default)(Q).darken(.6).toString(),e.fillRect(q,N(X),$,x?B(X):1))}else e.fillStyle=F(z,U),e.fillRect(q,N(U),$,x?B(U):1);K?(e.fillStyle=C,e.fillRect(q,0,$,4)):Y&&"log"!==u.scaleType&&(e.fillStyle=C,e.fillRect(q,l-4,$,4)),z.get("highlighted")&&(e.fillStyle=j,e.fillRect(q,0,$,O))}}catch(e){W.e(e)}finally{W.f()}g&&(e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.8)",s.values.forEach((function(t){e.beginPath(),e.moveTo(0,Math.round(N(t))),e.lineTo(b,Math.round(N(t))),e.stroke()})))}}]),r}(g.default);t.default=O},2246:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return i.default}}),t.configSchema=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u.default}});var a=r(29),o=n(r(532)),i=n(r(367)),u=n(r(2247)),l=(0,a.ConfigurationSchema)("LinePlotRenderer",{},{baseConfiguration:o.default,explicitlyTyped:!0});t.configSchema=l},2247:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10)),o=n(r(12)),i=n(r(15)),u=n(r(16)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=r(29),d=r(32),p=r(279),m=n(r(366)),g=r(368);function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var k=function(e){(0,l.default)(r,e);var t=w(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"draw",value:function(e,t){var r,n,a=t.features,i=t.regions,u=t.bpPerPx,l=t.scaleOpts,c=t.height,s=t.ticks.values,m=t.displayCrossHatches,v=t.config,y=(0,o.default)(i,1)[0],w=(y.end-y.start)/u,k=g.YSCALEBAR_LABEL_OFFSET,O=c-2*k,P=(0,f.readConfObject)(v,"clipColor"),E=(0,f.readConfObject)(v,"highlightColor"),S=(0,p.getScale)(b(b({},l),{},{range:[0,O]})),x=S.domain(),C=(0,o.default)(x,2),j=C[0],M=C[1],T=function(e){return O-S(e)+k},R="#f0f"===(0,f.readConfObject)(v,"color")?function(){return"grey"}:function(e){return(0,f.readConfObject)(v,"color",{feature:e})},D=h(a.values());try{for(D.s();!(n=D.n()).done;){var A=n.value,I=(0,d.featureSpanPx)(A,y,u),_=(0,o.default)(I,2),N=_[0],B=_[1],F=A.get("score"),L=F<j,W=F>M,z=B-N+.3,H=R(A);e.strokeStyle=H,e.beginPath(),y.reversed?(e.moveTo(B,T(void 0!==r?r:F)),e.lineTo(B,T(F)),e.lineTo(N,T(F))):(e.moveTo(N,T(void 0!==r?r:F)),e.lineTo(N,T(F)),e.lineTo(B,T(F))),e.stroke(),r=F,W?(e.fillStyle=P,e.fillRect(N,0,z,4)):L&&"log"!==l.scaleType&&(e.fillStyle=P,e.fillRect(N,O-4,z,O)),A.get("highlighted")&&(e.fillStyle=E,e.fillRect(N,0,z,O))}}catch(e){D.e(e)}finally{D.f()}m&&(e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.8)",s.forEach((function(t){e.beginPath(),e.moveTo(0,Math.round(T(t))),e.lineTo(w,Math.round(T(t))),e.stroke()})))}}]),r}(m.default);t.default=k},2248:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.WiggleGetMultiRegionStats=t.WiggleGetGlobalStats=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(50)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(363),g=n(r(360)),h=r(32),v=r(89),y=n(r(929));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var O=function(e){(0,s.default)(f,e);var t,r,n=k(f);function f(){var e;(0,i.default)(this,f);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,l.default)(e),"name","WiggleGetGlobalStats"),e}return(0,u.default)(f,[{key:"deserializeArguments",value:(r=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)((0,d.default)(f.prototype),"deserializeArguments",this).call(this,t,r);case 2:return n=e.sent,e.abrupt("return",w(w({},n),{},{filters:t.filters?new y.default({filters:t.filters}):void 0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.adapterConfig,i=n.sessionId,e.next=6,(0,m.getAdapter)(this.pluginManager,i,o);case 6:return u=e.sent,l=u.dataAdapter,e.abrupt("return",l.getGlobalStats(n));case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(g.default);t.WiggleGetGlobalStats=O;var P=function(e){(0,s.default)(g,e);var t,r,n,f=k(g);function g(){var e;(0,i.default)(this,g);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=f.call.apply(f,[this].concat(r)),(0,p.default)((0,l.default)(e),"name","WiggleGetMultiRegionStats"),e}return(0,u.default)(g,[{key:"deserializeArguments",value:(n=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)((0,d.default)(g.prototype),"deserializeArguments",this).call(this,t,r);case 2:return n=e.sent,e.abrupt("return",w(w({},n),{},{filters:t.filters?new y.default({filters:t.filters}):void 0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"serializeArguments",value:(r=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(n=this.pluginManager.rootModel)||void 0===n||null===(o=n.session)||void 0===o?void 0:o.assemblyManager){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,(0,h.renameRegionsIfNeeded)(i,w(w({},t),{},{filters:t.filters&&t.filters.toJSON().filters}));case 5:return u=e.sent,e.abrupt("return",(0,c.default)((0,d.default)(g.prototype),"serializeArguments",this).call(this,u,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.regions,i=n.adapterConfig,u=n.sessionId,e.next=6,(0,m.getAdapter)(this.pluginManager,u,i);case 6:if(l=e.sent,!((c=l.dataAdapter)instanceof v.BaseFeatureDataAdapter)){e.next=10;break}return e.abrupt("return",c.getMultiRegionStats(o,n));case 10:throw new Error("Data adapter not found");case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),g}(g.default);t.WiggleGetMultiRegionStats=P},2249:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10)),p=r(537),m=r(89),g=r(97),h=r(32),v=r(115),y=n(r(95)),b=r(51),w=r(29),k=r(921);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var S=function(e){(0,c.default)(O,e);var t,r,n,s,f,m=E(O);function O(e,t,r){var n;return(0,i.default)(this,O),n=m.call(this,e,t,r),(0,d.default)((0,l.default)(n),"bigwig",void 0),n.bigwig=new p.BigWig({filehandle:(0,g.openLocation)((0,w.readConfObject)(e,"bigWigLocation"),n.pluginManager)}),n}return(0,u.default)(O,[{key:"setup",value:(f=(0,o.default)(a.default.mark((function e(t){var r,n,o=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t||{}).statusCallback,n=void 0===r?function(){}:r,e.abrupt("return",(0,h.updateStatus)("Downloading bigwig header",n,(function(){return o.bigwig.getHeader(t)})));case 2:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"getRefNames",value:(s=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:return r=e.sent,n=r.refsByName,e.abrupt("return",Object.keys(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"refIdToName",value:(n=(0,o.default)(a.default.mark((function e(t){var r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return n=e.sent,o=n.refsByNumber,e.abrupt("return",null===(r=o[t])||void 0===r?void 0:r.name);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getGlobalStats",value:(r=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:return r=e.sent,n=r.totalSummary,e.abrupt("return",(0,k.rectifyStats)(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.refName,i=e.start,u=e.end,l=r.bpPerPx,c=void 0===l?0:l,s=r.signal,f=r.resolution,d=void 0===f?1:f,p=r.statusCallback,m=void 0===p?function(){}:p;return(0,v.ObservableCreate)(function(){var e=(0,o.default)(a.default.mark((function e(o){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("Downloading bigwig data"),e.next=3,t.bigwig.getFeatureStream(n,i,u,P(P({},r),{},{basesPerSpan:c/d}));case 3:e.sent.pipe((0,b.mergeAll)(),(0,b.map)((function(e){return new y.default({id:"".concat(n,":").concat(e.start,"-").concat(e.end),data:P(P({},e),{},{refName:n})})}))).subscribe(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s)}},{key:"estimateRegionsStats",value:(t=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{featureDensity:0});case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),O}(m.BaseFeatureDataAdapter);t.default=S,(0,d.default)(S,"capabilities",["hasResolution","hasLocalStats","hasGlobalStats"])},2250:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.config,r=e.handleClose,n=h(),a=(0,l.useState)(),g=(0,u.default)(a,2),v=g[0],y=g[1],b=(0,l.useState)(),w=(0,u.default)(b,2),k=w[0],O=w[1],P=(0,l.useState)(!1),E=(0,u.default)(P,2),S=E[0],x=E[1],C=(0,p.getSession)(t),j=C.rpcManager,M=(0,d.readConfObject)(t);(0,l.useEffect)((function(){var e=new AbortController,r=e.signal,n=!1;return(0,i.default)(o.default.mark((function e(){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,d.readConfObject)(t,"adapter"),e.next=4,j.call(t.trackId,"CoreGetInfo",{adapterConfig:a,signal:r});case 4:i=e.sent,n||y(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n||(console.error(e.t0),O(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){e.abort(),n=!0}}),[t,j]);var T=(0,d.readConfObject)(t,"name");if("ReferenceSequenceTrack"===(0,d.readConfObject)(t,"type")){var R=C.assemblies.find((function(e){return e.sequence===t.configuration}));T=R?"Reference Sequence (".concat((0,d.readConfObject)(R,"name"),")"):"Reference Sequence"}var D="string"==typeof v?{header:"<pre>".concat(v.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"</pre>")}:v||{};return l.default.createElement(s.Dialog,{open:!0,onClose:r},l.default.createElement(s.DialogTitle,null,T,l.default.createElement(s.IconButton,{className:n.closeButton,onClick:function(){return r()}},l.default.createElement(f.default,null))),l.default.createElement(s.DialogContent,null,l.default.createElement(m.BaseCard,{title:"Configuration"},l.default.createElement(s.Button,{variant:"contained",style:{float:"right"},onClick:function(){(0,c.default)(JSON.stringify(M,null,2)),x(!0),setTimeout((function(){return x(!1)}),1e3)}},S?"Copied to clipboard!":"Copy config"),l.default.createElement(m.Attributes,{attributes:M,omit:["displays","baseUri","refNames"]})),null!==v?l.default.createElement(m.BaseCard,{title:"File info"},k?l.default.createElement(s.Typography,{color:"error"},"".concat(k)):void 0===v?"Loading file data...":l.default.createElement(m.Attributes,{attributes:D})):null))};var o=n(r(19)),i=n(r(20)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=n(r(137)),s=r(23),f=n(r(41)),d=r(29),p=r(32),m=r(361);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=(0,s.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))},2251:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.extend((function(){return function(e){return{views:{get snackbarMessages(){return e}},actions:{notify:function(e,t,r){var n=this;this.pushSnackbarMessage(e,t,r),"info"!==t&&"success"!==t||setTimeout((function(){n.removeSnackbarMessage(e)}),5e3)},pushSnackbarMessage:function(t,r,n){return e.push([t,r,n])},popSnackbarMessage:function(){return e.pop()},removeSnackbarMessage:function(t){var r=e.find((function(e){return e[0]===t}));r&&e.remove(r)}}}}(n.observable.array())}))};var n=r(43)},2252:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.assembly,r=e.tracks,n=e.configuration,u=e.aggregateTextSearchAdapters,l=e.plugins,c=e.onChange,s=(0,i.default)(l||[]),f=s.model,d=s.pluginManager,p=e.defaultSession;p||(p={name:"this session",view:{id:"circularView",type:"CircularView"}});var m={config:{configuration:n,assembly:t,tracks:r,aggregateTextSearchAdapters:u,defaultSession:p},assemblyManager:{},session:p},g=f.create(m,{pluginManager:d});d.setRootModel(g),d.configure(),(0,a.autorun)((function(e){if(g.assemblyManager.allPossibleRefNames&&g.assemblyManager.allPossibleRefNames.length&&g.session.view.initialized){var t=g.assemblyManager.assemblies[0];g.session.view.setDisplayedRegions(t.regions),e.dispose()}})),c&&(0,o.onPatch)(g,c);return g};var a=r(43),o=r(17),i=n(r(916))},2253:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return u.apply(this,arguments)};var a=n(r(19)),o=n(r(20)),i=n(r(2254));function u(){return(u=(0,o.default)(a.default.mark((function e(t,r){var n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new i.default(t,r)).installGlobalReExports(window),e.next=4,n.load();case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2254:function(e,t,r){"use strict";(function(e){var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PluginSourceConfigurationSchema=void 0,t.isCJSPluginDefinition=y,t.isESMPluginDefinition=v,t.isUMDPluginDefinition=h;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(10)),s=n(r(11)),f=n(r(903)),d=r(29),p=n(r(920)),m=r(32),g=(0,d.ConfigurationSchema)("PluginSource",{name:{type:"string",defaultValue:""},url:{type:"string",defaultValue:""}});function h(e){return(void 0!==e.umdUrl||void 0!==e.url)&&void 0!==e.name}function v(e){return void 0!==e.esmUrl}function y(e){return void 0!==e.cjsUrl}function b(){return"object"===("undefined"==typeof self?"undefined":(0,s.default)(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":(0,s.default)(e))&&e.global===e&&e||this}t.PluginSourceConfigurationSchema=g;var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;(0,u.default)(this,e),(0,c.default)(this,"definitions",[]),(0,c.default)(this,"fetchESM",void 0),(0,c.default)(this,"fetchCJS",void 0),this.fetchESM=null==r?void 0:r.fetchESM,this.fetchCJS=null==r?void 0:r.fetchCJS,this.definitions=JSON.parse(JSON.stringify(t))}var t,r,n,s,d;return(0,l.default)(e,[{key:"loadScript",value:function(e){var t=b();if(!function(e){return Boolean("WorkerGlobalScope"in e)}(t))return(0,f.default)(e);if(t&&t.importScripts)return new Promise((function(r,n){try{t.importScripts(e)}catch(t){return void n(t||new Error("failed to load ".concat(e)))}r()}));throw new Error("cannot figure out how to load external JS scripts in this environment")}},{key:"loadCJSPlugin",value:(d=(0,i.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.cjsUrl,e.prev=1,n=new URL(r,b().location.href),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(1),console.error(e.t0),new Error("Error parsing URL: ".concat(r));case 9:if("http:"===n.protocol||"https:"===n.protocol){e.next=11;break}throw new Error('Cannot load plugins using protocol "'.concat(n.protocol,'"'));case 11:if(this.fetchCJS){e.next=13;break}throw new Error("No fetchCJS callback provided");case 13:return e.abrupt("return",this.fetchCJS(n.href));case 14:case"end":return e.stop()}}),e,this,[[1,5]])}))),function(e){return d.apply(this,arguments)})},{key:"loadESMPlugin",value:(s=(0,i.default)(a.default.mark((function e(t){var r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=new URL(t.esmUrl,b().location.href),e.next=8;break;case 4:throw e.prev=4,e.t0=e.catch(0),console.error(e.t0),new Error("Error parsing URL: ".concat(t.esmUrl));case 8:if("http:"===n.protocol||"https:"===n.protocol){e.next=10;break}throw new Error('cannot load plugins using protocol "'.concat(n.protocol,'"'));case 10:return e.next=12,null===(r=this.fetchESM)||void 0===r?void 0:r.call(this,n.href);case 12:if(o=e.sent){e.next=15;break}throw new Error("Could not load ESM plugin: ".concat(n));case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(e){return s.apply(this,arguments)})},{key:"loadUMDPlugin",value:(n=(0,i.default)(a.default.mark((function e(t){var r,n,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="url"in t?t.url:t.umdUrl,e.prev=1,n=new URL(r,b().location.href),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(1),console.error(e.t0),new Error("Error parsing URL: ".concat(r));case 9:if("http:"===n.protocol||"https:"===n.protocol){e.next=11;break}throw new Error('cannot load plugins using protocol "'.concat(n.protocol,'"'));case 11:return e.next=13,this.loadScript(n.href);case 13:if(o=t.name,i="JBrowsePlugin".concat(o),u=b(),l=u[i]){e.next=19;break}throw new Error("Failed to load UMD bundle for ".concat(o,", ").concat(u.constructor.name,".").concat(i," is undefined"));case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[1,5]])}))),function(e){return n.apply(this,arguments)})},{key:"loadPlugin",value:(r=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.isElectron||!y(t)){e.next=6;break}return e.next=3,this.loadCJSPlugin(t);case 3:case 9:case 15:r=e.sent,e.next=23;break;case 6:if(!v(t)){e.next=12;break}return e.next=9,this.loadESMPlugin(t);case 12:if(!h(t)){e.next=18;break}return e.next=15,this.loadUMDPlugin(t);case 18:if(m.isElectron||!y(t)){e.next=22;break}throw new Error("Only CommonJS plugin found, but not in a NodeJS environment: ".concat(JSON.stringify(t)));case 22:throw new Error("Could not determine plugin type: ".concat(JSON.stringify(t)));case 23:return e.abrupt("return",r.default);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"installGlobalReExports",value:function(e){e.JBrowseExports=Object.fromEntries(Object.entries(p.default).map((function(e){var t=(0,o.default)(e,2);return[t[0],t[1]]})))}},{key:"load",value:(t=(0,i.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(this.definitions.map(function(){var e=(0,i.default)(a.default.mark((function e(r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadPlugin(r);case 2:return e.t0=e.sent,e.t1=r,e.abrupt("return",{plugin:e.t0,definition:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=w}).call(this,r(54))},2259:function(e,t,r){"use strict";r.r(t),r.d(t,"FixedSizeTree",(function(){return W})),r.d(t,"VariableSizeTree",(function(){return H})),r.d(t,"Row",(function(){return _}));var n=r(218),a=r.n(n),o=r(36),i=r.n(o),u=r(201),l=r.n(u),c=r(1),s=r.n(c),f=r(13),d=r(216),p=r(215),m=r(874),g=(r(167),"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()});function h(e){cancelAnimationFrame(e.id)}function v(e,t){var r=g();var n={id:requestAnimationFrame((function a(){g()-r>=t?e.call(null):n.id=requestAnimationFrame(a)}))};return n}var y=null;function b(e){if(void 0===e&&(e=!1),null===y||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),a=n.style;return a.width="100px",a.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?y="positive-descending":(t.scrollLeft=1,y=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),y}return y}var w=function(e,t){return e};function k(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,a=e.getItemSize,o=e.getOffsetForIndexAndAlignment,i=e.getStartIndexForOffset,u=e.getStopIndexForStartIndex,l=e.initInstanceProps,s=e.shouldResetStyleCacheOnItemSizeChange,g=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=l(n.props,Object(d.a)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:Object(d.a)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=Object(m.a)((function(e,t,r,a){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:a})})),n._callOnScroll=void 0,n._callOnScroll=Object(m.a)((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,o=n.props,i=o.direction,u=o.itemSize,l=o.layout,c=n._getItemStyleCache(s&&u,s&&l,s&&i);if(c.hasOwnProperty(e))t=c[e];else{var f=r(n.props,e,n._instanceProps),d=a(n.props,e,n._instanceProps),p="horizontal"===i||"horizontal"===l,m="rtl"===i,g=p?f:0;c[e]=t={position:"absolute",left:m?void 0:g,right:m?g:void 0,top:p?0:f,height:p?"100%":d,width:p?d:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=Object(m.a)((function(e,t,r){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,a=t.scrollLeft,o=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===a)return null;var t=n.props.direction,i=a;if("rtl"===t)switch(b()){case"negative":i=-a;break;case"positive-descending":i=o-r-a}return i=Math.max(0,Math.min(i,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:i,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,a=t.scrollHeight,o=t.scrollTop;n.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,a-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&h(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=v(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}Object(p.a)(t,e),t.getDerivedStateFromProps=function(e,t){return O(e,t),g(e),null};var y=t.prototype;return y.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},y.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props.itemCount,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1)),this.scrollTo(o(this.props,e,t,n,this._instanceProps))},y.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var a=this._outerRef;"horizontal"===t||"horizontal"===n?a.scrollLeft=r:a.scrollTop=r}this._callPropsCallbacks()},y.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,a=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(b()){case"negative":o.scrollLeft=-a;break;case"positive-ascending":o.scrollLeft=a;break;default:var i=o.clientWidth,u=o.scrollWidth;o.scrollLeft=u-i-a}else o.scrollLeft=a;else o.scrollTop=a}this._callPropsCallbacks()},y.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&h(this._resetIsScrollingTimeoutId)},y.render=function(){var e=this.props,t=e.children,r=e.className,a=e.direction,o=e.height,i=e.innerRef,u=e.innerElementType,l=e.innerTagName,s=e.itemCount,d=e.itemData,p=e.itemKey,m=void 0===p?w:p,g=e.layout,h=e.outerElementType,v=e.outerTagName,y=e.style,b=e.useIsScrolling,k=e.width,O=this.state.isScrolling,P="horizontal"===a||"horizontal"===g,E=P?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),x=S[0],C=S[1],j=[];if(s>0)for(var M=x;M<=C;M++)j.push(Object(c.createElement)(t,{data:d,key:m(M,d),index:M,isScrolling:b?O:void 0,style:this._getItemStyle(M)}));var T=n(this.props,this._instanceProps);return Object(c.createElement)(h||v||"div",{className:r,onScroll:E,ref:this._outerRefSetter,style:Object(f.a)({position:"relative",height:o,width:k,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},y)},Object(c.createElement)(u||l||"div",{children:j,ref:i,style:{height:P?"100%":T,pointerEvents:O?"none":void 0,width:P?T:"100%"}}))},y._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],a=e[3];this._callOnItemsRendered(t,r,n,a)}if("function"==typeof this.props.onScroll){var o=this.state,i=o.scrollDirection,u=o.scrollOffset,l=o.scrollUpdateWasRequested;this._callOnScroll(i,u,l)}},y._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,a=n.isScrolling,o=n.scrollDirection,l=n.scrollOffset;if(0===t)return[0,0,0,0];var c=i(this.props,l,this._instanceProps),s=u(this.props,c,l,this._instanceProps),f=a&&"backward"!==o?1:Math.max(1,r),d=a&&"forward"!==o?1:Math.max(1,r);return[Math.max(0,c-f),Math.max(0,Math.min(t-1,s+d)),c,s]},t}(c.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var O=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},P=function(e,t,r){var n=e.itemSize,a=r.itemMetadataMap,o=r.lastMeasuredIndex;if(t>o){var i=0;if(o>=0){var u=a[o];i=u.offset+u.size}for(var l=o+1;l<=t;l++){var c=n(l);a[l]={offset:i,size:c},i+=c}r.lastMeasuredIndex=t}return a[t]},E=function(e,t,r,n,a){for(;n<=r;){var o=n+Math.floor((r-n)/2),i=P(e,o,t).offset;if(i===a)return o;i<a?n=o+1:i>a&&(r=o-1)}return n>0?n-1:0},S=function(e,t,r,n){for(var a=e.itemCount,o=1;r<a&&P(e,r,t).offset<n;)r+=o,o*=2;return E(e,t,Math.min(r,a-1),Math.floor(r/2),n)},x=function(e,t){var r=e.itemCount,n=t.itemMetadataMap,a=t.estimatedItemSize,o=t.lastMeasuredIndex,i=0;if(o>=r&&(o=r-1),o>=0){var u=n[o];i=u.offset+u.size}return i+(r-o-1)*a},C=k({getItemOffset:function(e,t,r){return P(e,t,r).offset},getItemSize:function(e,t,r){return r.itemMetadataMap[t].size},getEstimatedTotalSize:x,getOffsetForIndexAndAlignment:function(e,t,r,n,a){var o=e.direction,i=e.height,u=e.layout,l=e.width,c="horizontal"===o||"horizontal"===u?l:i,s=P(e,t,a),f=x(e,a),d=Math.max(0,Math.min(f-c,s.offset)),p=Math.max(0,s.offset-c+s.size);switch("smart"===r&&(r=n>=p-c&&n<=d+c?"auto":"center"),r){case"start":return d;case"end":return p;case"center":return Math.round(p+(d-p)/2);default:return n>=p&&n<=d?n:n<p?p:d}},getStartIndexForOffset:function(e,t,r){return function(e,t,r){var n=t.itemMetadataMap,a=t.lastMeasuredIndex;return(a>0?n[a].offset:0)>=r?E(e,t,a,0,r):S(e,t,Math.max(0,a),r)}(e,r,t)},getStopIndexForStartIndex:function(e,t,r,n){for(var a=e.direction,o=e.height,i=e.itemCount,u=e.layout,l=e.width,c="horizontal"===a||"horizontal"===u?l:o,s=P(e,t,n),f=r+c,d=s.offset+s.size,p=t;p<i-1&&d<f;)p++,d+=P(e,p,n).size;return p},initInstanceProps:function(e,t){var r={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),r.lastMeasuredIndex=Math.min(r.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),j=k({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n){var a=e.direction,o=e.height,i=e.itemCount,u=e.itemSize,l=e.layout,c=e.width,s="horizontal"===a||"horizontal"===l?c:o,f=Math.max(0,i*u-s),d=Math.min(f,t*u),p=Math.max(0,t*u-s+u);switch("smart"===r&&(r=n>=p-s&&n<=d+s?"auto":"center"),r){case"start":return d;case"end":return p;case"center":var m=Math.round(p+(d-p)/2);return m<Math.ceil(s/2)?0:m>f+Math.floor(s/2)?f:m;default:return n>=p&&n<=d?n:n<p?p:d}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,a=e.height,o=e.itemCount,i=e.itemSize,u=e.layout,l=e.width,c=t*i,s="horizontal"===n||"horizontal"===u?l:a,f=Math.ceil((s+r-c)/i);return Math.max(0,Math.min(o-1,t+f-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});var M=r(30),T=r.n(M),R=r(873),D=function(){},A=function(e,t){return void 0===t&&(t=null),{child:null,isShown:!t||t.public.isOpen&&t.isShown,parent:t,public:e,sibling:null,visited:!1}},I=function(e,t){return(0,t.getRecordData)(e).data.id},_=function(e){var t=e.index,r=e.data,n=r.component,a=r.getRecordData,o=r.treeData,i=e.style,u=e.isScrolling,l=a(t);return s.a.createElement(n,Object.assign({isScrolling:u,style:i,treeData:o},l))},N=function(e){return function(t,r,n){return n.refresh?function(e,t,r){var n=e.createRecord,a=t.buildingTaskTimeout,o=t.placeholder,i=t.async,u=void 0!==i&&i,l=t.treeWalker,c=u&&void 0!==r.records,s=r.records,f=[],d=new Map,p=a?{timeout:a}:void 0,m=new WeakMap,g=l(),h=g.next().value,v=n(h.data,r,void 0,c?s.get(h.data.id):void 0);d.set(v.public.data.id,v),m.set(v,h);var y=v,b=!0,w=v,k=void 0!==o&&!(null===o&&!r.order),O=k?function(e){return e.timeRemaining()>0}:function(){return!0},P=function e(t){for(;null!==y;){if(!O(t))return void requestIdleCallback(e,p);if(y.visited)y.visited=!1,y=null!==y.sibling?y.sibling:y.parent,w=y;else{var a=g.next(m.get(y)).value;if(void 0===a){b?b=!1:(y.isShown&&f.push(y.public.data.id),y.visited=null!==y.child,y=null!==y.child?y.child:null!==y.sibling?y.sibling:y.parent),w=y;continue}var o=n(a.data,r,b?void 0:y,c?s.get(a.data.id):void 0);d.set(o.public.data.id,o),m.set(o,a),b||w!==y?w.sibling=o:w.child=o,w=o}}k&&r.setState({order:f,records:d,updateRequest:{}})};return k?requestIdleCallback(P,p):P(),void 0!==o&&u&&r.order?r:{order:f,records:d}}(e,t,r):function(e,t){var r=e.order,n=e.records,a=t.opennessState;if("object"!=typeof a)return null;for(var o in a)if(n.has(o)){var i=a[o],u=n.get(o),l="boolean"==typeof i?{open:i}:i,c=l.open,s=l.subtreeCallback,f=void 0===s?D:s,d=D,p=D;u.isShown&&(c?function(){for(var e=r.indexOf(o),t=u;null!==t;){if(null!==t.sibling){t=t.sibling;break}t=t.parent}var n=null===t?r.length-1-e:r.indexOf(t.public.data.id)-1-e,a=[[e+1,n]];d=function(t){if(t.isShown=!t.parent||t.parent.public.isOpen&&t.parent.isShown,t.isShown){var r=a[a.length-1];r.push(t.public.data.id),32770===r.length&&a.push([e+1+32768*a.length,0])}},p=function(){for(var e=0;e<a.length;e++){var t;(t=r).splice.apply(t,a[e])}}}():u.public.isOpen&&function(){var e=r.indexOf(o),t=0;d=function(e){e.isShown&&(t+=1),e.isShown=!e.parent||e.parent.public.isOpen&&e.parent.isShown},p=function(){r.splice(e+1,t)}}());for(var m=u;null!==m;)m.visited?(m.visited=!1,m=m===u?null:null!==m.sibling?m.sibling:m.parent):(m.public.isOpen=m===u?c:m.public.isOpen,f(m.public,u.public),m!==u&&d(m),m.visited=null!==m.child,m=null!==m.child?m.child:m===u?null:null!==m.sibling?m.sibling:m.parent);p()}return{order:r,records:n,updateRequest:{}}}(r,n)}},B=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).getRecordData=n.getRecordData.bind(T()(n)),n.state={list:Object(c.createRef)(),recomputeTree:n.recomputeTree.bind(T()(n)),setState:n.setState.bind(T()(n))},n}l()(t,e),t.getDerivedStateFromProps=function(e,t){var r=e.listRef,n=void 0===r?null:r,a=e.treeWalker,o=t.computeTree,u=t.list,l=t.order,c=t.treeWalker;return i()({attachRefs:Object(R.a)([u,n])},a===c&&l?null:o(e,t,{refresh:!0}),{treeWalker:a})};var r=t.prototype;return r.getItemData=function(){var e=this.props,t=e.children,r=e.itemData;return{component:t,getRecordData:this.getRecordData,treeData:r}},r.getRecordData=function(e){var t=this.state,r=t.order;return t.records.get(r[e]).public},r.recomputeTree=function(e){var t=this;return new Promise((function(r){t.setState((function(r){return r.computeTree(t.props,r,{opennessState:e})}),r)}))},r.scrollTo=function(e){var t;null==(t=this.state.list.current)||t.scrollTo(e)},r.scrollToItem=function(e,t){var r;null==(r=this.state.list.current)||r.scrollToItem(this.state.order.indexOf(e),t)},t}(c.PureComponent);B.defaultProps={rowComponent:_};var F=B,L=N({createRecord:function(e,t,r,n){var a=t.recomputeTree;return A({data:e,isOpen:n?n.public.isOpen:e.isOpenByDefault,setOpen:function(t){var r;return a(((r={})[e.id]=t,r))}},r)}}),W=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).state=i()({},n.state,{computeTree:L}),n}return l()(t,e),t.prototype.render=function(){var e=this.props,t=(e.children,e.listRef,e.placeholder),r=(e.treeWalker,e.rowComponent),n=a()(e,["children","listRef","placeholder","treeWalker","rowComponent"]),o=this.state,i=o.attachRefs,u=o.order;return t&&0===u.length?t:s.a.createElement(j,Object.assign({},n,{itemCount:u.length,itemData:this.getItemData(),itemKey:I,ref:i}),r)},t}(F),z=N({createRecord:function(e,t,r,n){var a=t.recomputeTree,o=t.resetAfterId,i=A({data:e,height:n?n.public.height:e.defaultHeight,isOpen:n?n.public.isOpen:e.isOpenByDefault,resize:function(e,t){i.public.height=e,o(i.public.data.id,t)},setOpen:function(t){var r;return a(((r={})[e.id]=t,r))}},r);return i}}),H=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).getItemSize=n.getItemSize.bind(T()(n)),n.state=i()({},n.state,{computeTree:z,resetAfterId:n.resetAfterId.bind(T()(n))}),n}l()(t,e);var r=t.prototype;return r.resetAfterId=function(e,t){var r;void 0===t&&(t=!1);var n=this.state,a=n.list,o=n.order;null==(r=a.current)||r.resetAfterIndex(o.indexOf(e),t)},r.recomputeTree=function(t){var r=this;return e.prototype.recomputeTree.call(this,t).then((function(){var e;null==(e=r.state.list.current)||e.resetAfterIndex(0,!0)}))},r.render=function(){var e=this.props,t=(e.children,e.placeholder),r=e.itemSize,n=e.rowComponent,o=(e.treeWalker,a()(e,["children","placeholder","itemSize","rowComponent","treeWalker"])),i=this.state,u=i.attachRefs,l=i.order;return t&&0===l.length?t:s.a.createElement(C,Object.assign({},o,{itemCount:l.length,itemData:this.getItemData(),itemKey:I,itemSize:null!=r?r:this.getItemSize,ref:u}),n)},r.getItemSize=function(e){return this.getRecordData(e).height},t}(F)},275:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10)),p=n(r(1)),m=r(161);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,c.default)(n,e);var t,r=g(n);function n(e){var t;if((0,i.default)(this,n),t=r.call(this,e),(0,d.default)((0,l.default)(t),"ReactComponent",void 0),(0,d.default)((0,l.default)(t),"supportsSVG",!1),(0,d.default)((0,l.default)(t),"configSchema",void 0),(0,d.default)((0,l.default)(t),"pluginManager",void 0),t.ReactComponent=e.ReactComponent,t.configSchema=e.configSchema,t.pluginManager=e.pluginManager,!t.ReactComponent)throw new Error("no ReactComponent defined for renderer ".concat(t.name));if(!(0,m.getDefaultValue)(t.configSchema).type)throw new Error("".concat(t.name," config schema ").concat(t.configSchema.name," is not explicitlyTyped"));if(!t.pluginManager)throw new Error("no plugin manager defined for renderer ".concat(t.name));return t}return(0,u.default)(n,[{key:"render",value:(t=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{reactElement:p.default.createElement(this.ReactComponent,t,null)});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"freeResources",value:function(){return 0}}]),n}(n(r(113)).default);t.default=h},276:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,a.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"displayTypes",[]),n.ReactComponent=e.ReactComponent,n.stateModel=e.stateModel,!n.ReactComponent)throw new Error("no ReactComponent defined for view ".concat(n.name));if(!n.stateModel)throw new Error("no stateModel defined for view ".concat(n.name));return n}return(0,o.default)(r,[{key:"addDisplayType",value:function(e){this.displayTypes.push(e)}}]),r}(n(r(113)).default);t.default=d},277:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(19)),i=n(r(20)),u=n(r(36)),l=n(r(45)),c=n(r(10)),s=n(r(15)),f=n(r(16)),d=n(r(25)),p=n(r(26)),m=n(r(24)),g=n(r(1)),h=r(34),v=r(181),y=r(928),b=r(17),w=r(32),k=n(r(275)),O=n(r(929)),P=r(83),E=n(r(930)),S=["html"];function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var R=function(e){(0,d.default)(p,e);var t,n,a,c=T(p);function p(){return(0,s.default)(this,p),c.apply(this,arguments)}return(0,f.default)(p,[{key:"serializeArgsInClient",value:function(e){return M(M({},e),{},{config:(0,b.isStateTreeNode)(e.config)?(0,b.getSnapshot)(e.config):e.config,filters:e.filters&&e.filters.toJSON().filters})}},{key:"deserializeResultsInClient",value:function(e,t){e.html;var r=(0,l.default)(e,S);return t.exportSVG?M(M({},e),{},{html:this.supportsSVG?e.html:'<text y="12" fill="black">SVG export not supported for this track</text>'}):M(M({},r),{},{reactElement:g.default.createElement(E.default,(0,u.default)({},t,e,{RenderingComponent:this.ReactComponent}))})}},{key:"deserializeArgsInWorker",value:function(e){var t=M({},e);return t.config=this.configSchema.create(e.config||{},{pluginManager:this.pluginManager}),t.filters=new O.default({filters:e.filters}),t}},{key:"serializeResultsInWorker",value:function(e,t){var r=(0,y.renderToString)(g.default.createElement(h.ThemeProvider,{theme:(0,P.createJBrowseTheme)(t.theme)},e.reactElement));return delete e.reactElement,M(M({},e),{},{html:r})}},{key:"renderInClient",value:(a=(0,i.default)(o.default.mark((function e(t,n){var a,i,u,l,c,s,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call(n.sessionId,"CoreRender",n);case 2:if(!("canvasRecordedData"in(a=e.sent))){e.next=14;break}return i=a.width,u=a.height,l=a.canvasRecordedData,e.next=7,Promise.resolve().then((function(){return C(r(732))}));case 7:c=e.sent,s=new c.default(i,u),new v.CanvasSequence(l).execute(s),f=s.getSvg(),a.html=f.innerHTML,delete a.reactElement;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"renderInWorker",value:(n=(0,i.default)(o.default.mark((function e(t){var r,n,a,i,u,l=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signal,n=t.statusCallback,a=void 0===n?function(){}:n,i=this.deserializeArgsInWorker(t),e.next=4,(0,w.updateStatus)("Rendering plot",a,(function(){return l.render(i)}));case 4:return u=e.sent,(0,w.checkAbortSignal)(r),e.abrupt("return",(0,w.updateStatus)("Serializing results",a,(function(){return l.serializeResultsInWorker(u,i)})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"freeResourcesInClient",value:(t=(0,i.default)(o.default.mark((function e(t,r){var n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.serializeArgsInClient(r),a=this.freeResources(),e.next=4,t.call(r.sessionId,"CoreFreeResources",n);case 4:return i=e.sent,e.abrupt("return",a+i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),p}(k.default);t.default=R},278:function(e,t,r){"use strict";var n=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseLinearDisplay",{enumerable:!0,get:function(){return o.BaseLinearDisplay}}),Object.defineProperty(t,"BaseLinearDisplayComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return i.Tooltip}}),Object.defineProperty(t,"baseLinearDisplayConfigSchema",{enumerable:!0,get:function(){return a.baseLinearDisplayConfigSchema}});var a=r(2166),o=r(2167),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(940));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}},279:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getNiceDomain=function(e){var t=e.scaleType,r=e.domain,n=e.bounds,i=(0,a.default)(n,2),u=i[0],l=i[1],c=(0,a.default)(r,2),s=c[0],f=c[1];"linear"===t&&(f<0&&(f=0),s>0&&(s=0));"log"===t&&(0===s||s>1)&&(s=1);if(void 0===s||void 0===f)throw new Error("invalid domain supplied to stats function");void 0!==u&&u!==Number.MIN_VALUE&&(s=u);void 0!==l&&l!==Number.MAX_VALUE&&(f=l);var d=function(e){if("linear"===e)return(0,o.scaleLinear)();if("log"===e){var t=(0,o.scaleLog)();return t.base(2),t}if("quantize"===e)return(0,o.scaleQuantize)();throw new Error("undefined scaleType ".concat(e))}(t);return d.domain([s,f]),d.nice(),d.domain()},t.getOrigin=function(e){if("log"===e)return 1;return 0},t.getScale=function(e){var t,r=e.domain,n=void 0===r?[]:r,i=e.range,u=void 0===i?[]:i,l=e.scaleType,c=e.pivotValue,s=e.inverted,f=(0,a.default)(n,2),d=f[0],p=f[1];if(void 0===d||void 0===p)throw new Error("invalid domain");if("linear"===l)t=(0,o.scaleLinear)();else if("log"===l)(t=(0,o.scaleLog)()).base(2);else{if("quantize"!==l)throw new Error("undefined scaleType");t=(0,o.scaleQuantize)()}t.domain(void 0!==c?[d,c,p]:[d,p]),t.nice();var m=(0,a.default)(u,2),g=m[0],h=m[1];if(void 0===g||void 0===h)throw new Error("invalid range");return t.range(s?u.slice().reverse():u),t};var a=n(r(12)),o=r(951)},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ConfigurationSchema:!0,ConfigurationReference:!0};Object.defineProperty(t,"ConfigurationReference",{enumerable:!0,get:function(){return a.ConfigurationReference}}),Object.defineProperty(t,"ConfigurationSchema",{enumerable:!0,get:function(){return a.ConfigurationSchema}});var a=r(904),o=r(906);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},32:function(e,t,r){"use strict";(function(e){var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0});var o={inDevelopment:!0,inProduction:!0,useDebounce:!0,useDebouncedCallback:!0,findParentThat:!0,springAnimate:!0,findParentThatIs:!0,getSession:!0,getContainingView:!0,getContainingTrack:!0,getContainingDisplay:!0,assembleLocString:!0,parseLocStringOneBased:!0,parseLocString:!0,compareLocs:!0,compareLocStrings:!0,clamp:!0,bpToPx:!0,radToDeg:!0,degToRad:!0,polarToCartesian:!0,cartesianToPolar:!0,featureSpanPx:!0,bpSpanPx:!0,objectFromEntries:!0,iterMap:!0,mergeConfigs:!0,findLastIndex:!0,makeAbortableReaction:!0,renameRegionIfNeeded:!0,renameRegionsIfNeeded:!0,minmax:!0,stringify:!0,isElectron:!0,revcom:!0,complement:!0,blobToDataURL:!0,rIC:!0,measureText:!0,defaultStarts:!0,defaultStops:!0,defaultCodonTable:!0,generateCodonTable:!0,updateStatus:!0,hashCode:!0,objectHash:!0,bytesForRegions:!0,viewBpToPx:!0,supportedIndexingAdapters:!0,getBpDisplayStr:!0,toLocale:!0,getTickDisplayStr:!0,getViewParams:!0,getLayoutId:!0,SimpleFeature:!0,isFeature:!0};Object.defineProperty(t,"SimpleFeature",{enumerable:!0,get:function(){return v.default}}),t.assembleLocString=function(e){var t,r,n=e.assemblyName,a=e.refName,o=e.start,i=e.end,u=e.reversed,l=n?"{".concat(n,"}"):"";t=void 0!==o?":".concat((o+1).toLocaleString("en-US")):void 0!==i?":1":"";r=void 0!==i?void 0!==o&&o+1===i?"":"..".concat(i.toLocaleString("en-US")):void 0!==o?"..":"";var c="";u&&(c="[rev]");return"".concat(l).concat(a).concat(t).concat(r).concat(c)},t.blobToDataURL=function(e){var t=new FileReader;return new Promise((function(r,n){t.onload=function(e){e.target?r(e.target.result):n(new Error("unknown result reading blob from canvas"))},t.readAsDataURL(e)}))},t.bpSpanPx=L,t.bpToPx=N,t.bytesForRegions=function(e,t){return K.apply(this,arguments)},t.cartesianToPolar=function(e,t){var r=Math.sqrt(e*e+t*t),n=Math.atan(t/e);return[r,n]},t.clamp=function(e,t,r){if(e<t)return t;if(e>r)return r;return e},t.compareLocStrings=function(e,t,r){var n=I(e,r),a=I(t,r);return _(n,a)},t.compareLocs=_,t.defaultStops=t.defaultStarts=t.defaultCodonTable=t.complement=void 0,t.degToRad=function(e){return e*F%(2*Math.PI)},t.featureSpanPx=function(e,t,r){return L(e.get("start"),e.get("end"),t,r)},t.findLastIndex=function(e,t){var r=e.length;for(;r--;)if(t(e[r],r,e))return r;return-1},t.findParentThat=T,t.findParentThatIs=R,t.generateCodonTable=function(e){var t={};return Object.keys(e).forEach((function(r){for(var n=e[r],a=[],o=0;o<3;o++){var i=r.charAt(o);a[o]=[],a[o][0]=i.toUpperCase(),a[o][1]=i.toLowerCase()}for(var u=0;u<2;u++)for(var l=a[0][u],c=0;c<2;c++)for(var s=a[1][c],f=0;f<2;f++){var d=a[2][f];t[l+s+d]=n}})),t},t.getBpDisplayStr=function(e){var t;t=Math.floor(e/1e6)>0?"".concat(parseFloat((e/1e6).toPrecision(3)),"Mbp"):Math.floor(e/1e3)>0?"".concat(parseFloat((e/1e3).toPrecision(3)),"Kbp"):"".concat($(Math.floor(e)),"bp");return t},t.getContainingDisplay=function(e){try{return R(e,y.isDisplayModel)}catch(e){throw new Error("no containing display found")}},t.getContainingTrack=function(e){try{return R(e,y.isTrackModel)}catch(e){throw new Error("no containing track found")}},t.getContainingView=D,t.getLayoutId=function(e){var t=e.sessionId,r=e.layoutId;return t+"-"+r},t.getSession=function(e){try{return R(e,y.isSessionModel)}catch(e){throw new Error("no session model found!")}},t.getTickDisplayStr=function(e,t){var r;r=Math.floor(t/1e3)>0?"".concat($(parseFloat((e/1e6).toFixed(2))),"M"):"".concat($(Math.floor(e)));return r},t.getViewParams=function(e,t){var r=D(e),n=r.dynamicBlocks,a=r.staticBlocks,o=r.offsetPx,i=(null==n?void 0:n.contentBlocks[0])||{},u=(null==a?void 0:a.contentBlocks[0])||{},l=(null==a?void 0:a.contentBlocks[1])||{};return{offsetPx:t?0:o-u.offsetPx,offsetPx1:t?0:o-l.offsetPx,start:i.start,end:i.end}},t.hashCode=Y,t.isElectron=t.inProduction=t.inDevelopment=void 0,Object.defineProperty(t,"isFeature",{enumerable:!0,get:function(){return v.isFeature}}),t.iterMap=function(e,t,r){var n,a=r?new Array(r):[],o=0,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;a[o]=t(u),o+=1}}catch(e){i.e(e)}finally{i.f()}return a},t.makeAbortableReaction=function(e,t,r,n,a,o,u){var c;function s(t){(0,b.isAbortException)(t)||((0,p.isAlive)(e)?u(t):console.error(t))}var f=(0,m.reaction)((function(){try{return t(e)}catch(e){return void s(e)}}),function(){var t=(0,l.default)(i.default.mark((function t(n,u){var l,f;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c&&!c.signal.aborted&&c.abort(),(0,p.isAlive)(e)){t.next=3;break}return t.abrupt("return");case 3:return c=new AbortController,a(l=c),t.prev=6,t.next=9,r(n,l.signal,e,u);case 9:f=t.sent,(0,b.checkAbortSignal)(l.signal),(0,p.isAlive)(e)&&o(f),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),l&&!l.signal.aborted&&l.abort(),s(t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,r){return t.apply(this,arguments)}}(),n);(0,p.addDisposer)(e,f),(0,p.addDisposer)(e,(function(){c&&!c.signal.aborted&&c.abort()}))},t.measureText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],n=.5279276315789471;return String(e).split("").map((function(e){return e.charCodeAt(0)<r.length?r[e.charCodeAt(0)]:n})).reduce((function(e,t){return t+e}),0)*t},t.mergeConfigs=function(e,t){var r=(0,h.default)(e,t);t.defaultSession?r.defaultSession=t.defaultSession:e.defaultSession&&(r.defaultSession=e.defaultSession);return r},t.minmax=function(e,t){return[Math.min(e,t),Math.max(e,t)]},t.objectFromEntries=void 0,t.objectHash=function(e){return"".concat(Y(JSON.stringify(e)))},t.parseLocString=I,t.parseLocStringOneBased=A,t.polarToCartesian=function(e,t){return[e*Math.cos(t),e*Math.sin(t)]},t.rIC=void 0,t.radToDeg=function(e){return e*B%360},t.renameRegionIfNeeded=z,t.renameRegionsIfNeeded=function(e,t){return H.apply(this,arguments)},t.revcom=function(e){return U(e).split("").reverse().join("")},t.springAnimate=function(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:170,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:26,l=1;o||(o=Math.abs(t-e)/1e3);function c(e){var s=Date.now(),f=e.lastPosition,d=e.lastTime||s,p=e.lastVelocity||0;s>d+64&&(d=s);for(var m=Math.floor(s-d),g=0;g<m;++g){f+=1*(p+=1*((-i*(f-t)+-u*p)/l)/1e3)/1e3}var h=Math.abs(p)<=o,v=0===i||Math.abs(t-f)<=o;h&&v?(r(t),a()):(r(f),n=requestAnimationFrame((function(){return c({lastPosition:f,lastTime:s,lastVelocity:p})})))}return[function(){return c({lastPosition:e})},function(){return cancelAnimationFrame(n)}]},t.stringify=function(e){var t=e.refName,r=e.coord,n=e.oob;return"".concat(t,":").concat(r.toLocaleString("en-US")).concat(n?" (out of bounds)":"")},t.supportedIndexingAdapters=function(e){return["Gff3TabixAdapter","VcfTabixAdapter","Gff3Adapter","VcfAdapter"].includes(e)},t.toLocale=$,t.updateStatus=function(e,t,r){return X.apply(this,arguments)},t.useDebounce=function(e,t){var r=(0,d.useState)(e),n=(0,s.default)(r,2),a=n[0],o=n[1];return(0,d.useEffect)((function(){var r=setTimeout((function(){o(e)}),t);return function(){clearTimeout(r)}}),[e,t]),a},t.useDebouncedCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=(0,d.useRef)(),n=(0,d.useRef)();function a(){n.current&&clearTimeout(n.current)}return(0,d.useEffect)((function(){return a}),[]),function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];r.current=i,a(),n.current=setTimeout((function(){r.current&&e.apply(void 0,(0,c.default)(r.current))}),t)}},t.viewBpToPx=function(e){var t=e.refName,r=e.coord,n=e.regionNumber,a=e.self,o=0,i=a.interRegionPaddingWidth*a.bpPerPx,u=a.minimumBlockWidth*a.bpPerPx,l=a.displayedRegions.findIndex((function(e,l){var c=e.end-e.start;return t===e.refName&&r>=e.start&&r<=e.end&&(!n||n===l)?(o+=e.reversed?e.end-r:r-e.start,!0):(c>u&&o/a.bpPerPx>=0&&o/a.bpPerPx<a.width?o+=c+i:o+=c,!1)}));if(a.displayedRegions[l])return{index:l,offsetPx:Math.round(o/a.bpPerPx)};return};var i=n(r(19)),u=n(r(10)),l=n(r(20)),c=n(r(33)),s=n(r(12)),f=n(r(11)),d=r(1),p=r(17),m=r(43),g=n(r(677)),h=n(r(296)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(95)),y=r(127);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=r(909);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var w=r(2053);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var k=r(910);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var O=r(515);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var P=r(911);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))})),Object.fromEntries||g.default.shim();var j="object"===(void 0===e?"undefined":(0,f.default)(e))&&e.env&&!1;t.inDevelopment=j;var M=!j;function T(e,t){if(!(0,p.hasParent)(e))throw new Error("node does not have parent");for(var r=(0,p.getParent)(e);r&&(0,p.isAlive)(r);){if(t(r))return r;if(!(0,p.hasParent)(r))break;r=(0,p.getParent)(r)}throw new Error("no matching node found")}function R(e,t){return T(e,t)}function D(e){try{return R(e,y.isViewModel)}catch(e){throw new Error("no containing view found")}}function A(e,t){if(!e)throw new Error("no location string provided, could not parse");var r=!1;e.endsWith("[rev]")&&(r=!0,e=e.replace(/\[rev\]$/,""));var n=(e=e.replace(/\s/,"")).match(/(\{(.+)\})?(.+)/);if(!n)throw new Error('invalid location string: "'.concat(e,'"'));var a=(0,s.default)(n,4),o=a[2],i=a[3];if(!o&&i.startsWith("{}"))throw new Error('no assembly name was provided in location "'.concat(i,'"'));var u=i.lastIndexOf(":");if(-1===u){if(t(i,o))return{assemblyName:o,refName:i,reversed:r};throw new Error('Unknown reference sequence "'.concat(i,'"'))}var l=i.slice(0,u),c=i.slice(u+1);if(t(l,o)&&t(i,o))throw new Error('ambiguous location string: "'.concat(e,'"'));if(t(l,o)){if(!c)return{assemblyName:o,refName:l,reversed:r};var f=c.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/),d=c.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/);if(f){var p=(0,s.default)(f,6),m=p[1],g=p[5];if(void 0!==m&&void 0!==g)return{assemblyName:o,refName:l,start:+m.replace(/,/g,""),end:+g.replace(/,/g,""),reversed:r}}else{if(!d)throw new Error('could not parse range "'.concat(c,'" on location "').concat(e,'"'));var h=(0,s.default)(d,5),v=h[1],y=h[4];if(void 0!==v)return y?{assemblyName:o,refName:l,start:+v.replace(/,/g,""),reversed:r}:{assemblyName:o,refName:l,start:+v.replace(/,/g,""),end:+v.replace(/,/g,""),reversed:r}}}else if(t(i,o))return{assemblyName:o,refName:i,reversed:r};throw new Error('unknown reference sequence name in location "'.concat(e,'"'))}function I(e,t){var r=A(e,t);return"number"==typeof r.start&&(r.start-=1),r}function _(e,t){var r=e.assemblyName||t.assemblyName?(e.assemblyName||"").localeCompare(t.assemblyName||""):0;if(r)return r;var n=e.refName||t.refName?(e.refName||"").localeCompare(t.refName||""):0;if(n)return n;if(void 0!==e.start&&void 0!==t.start){var a=e.start-t.start;if(a)return a}if(void 0!==e.end&&void 0!==t.end){var o=e.end-t.end;if(o)return o}return 0}function N(e,t,r){var n,a=t.reversed,o=t.end,i=void 0===o?0:o,u=t.start;return n=(a?i-e:e-(void 0===u?0:u))/r,Math.round(10*n)/10}t.inProduction=M;var B=180/Math.PI,F=Math.PI/180;function L(e,t,r,n){var a=N(e,r,n),o=N(t,r,n);return r.reversed?[o,a]:[a,o]}var W=Object.fromEntries.bind(Object);function z(e,t){if((0,p.isStateTreeNode)(t)&&!(0,p.isAlive)(t))return t;if(t&&e&&e[t.refName]){var r=e[(t=(0,p.isStateTreeNode)(t)?x({},(0,p.getSnapshot)(t)):x({},t)).refName];if(r)return x(x({},t),{},{refName:r,originalRefName:t.refName})}return t}function H(){return H=(0,l.default)(i.default.mark((function e(t,r){var n,a,o,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.regions,a=void 0===n?[]:n,o=r.adapterConfig,r.sessionId){e.next=3;break}throw new Error("sessionId is required");case 3:return u=a.map((function(e){return e.assemblyName})),e.t0=Object,e.next=7,Promise.all(u.map(function(){var e=(0,l.default)(i.default.mark((function e(n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.getRefNameMapForAdapter(o,n,r);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.t1=e.sent,c=e.t0.fromEntries.call(e.t0,e.t1),e.abrupt("return",x(x({},r),{},{regions:a.map((function(e,t){return z(c[u[t]],e)}))}));case 10:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}t.objectFromEntries=W;var V=/electron/i.test("undefined"!=typeof navigator?navigator.userAgent:"");t.isElectron=V;var q,G,U=(q=/[ACGT]/gi,G={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"},function(e){return e.replace(q,(function(e){return G[e]||""}))});t.complement=U;var J="undefined"==typeof jest?"undefined"!=typeof window&&window.requestIdleCallback?window.requestIdleCallback:function(e){return setTimeout((function(){return e()}),1)}:function(e){return e()};t.rIC=J;t.defaultStarts=["ATG"];t.defaultStops=["TAA","TAG","TGA"];function X(){return(X=(0,l.default)(i.default.mark((function e(t,r,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(t),e.next=3,n();case 3:return a=e.sent,r(""),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t}function K(){return(K=(0,l.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return r.blocksForRange(e.refName,e.start,e.end)})));case 2:return n=e.sent,e.abrupt("return",n.flat().map((function(e){return{start:e.minv.blockPosition,end:e.maxv.blockPosition+65535}})).reduce((function(e,t){return e+t.end-t.start}),0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return e.toLocaleString("en-US")}t.defaultCodonTable={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"}}).call(this,r(99))},360:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(11)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=n(r(113)),g=r(65),h=r(17),v=r(127),y=r(917);function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var E=function(e){(0,s.default)(k,e);var t,r,n,f,d,m,w=P(k);function k(e){var t;return(0,u.default)(this,k),(t=w.call(this,{name:""})).pluginManager=e,(0,p.default)((0,c.default)(t),"name","UNKNOWN"),t}return(0,l.default)(k,[{key:"serializeArguments",value:(m=(0,i.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.getBlobMap)(),e.next=3,this.augmentLocationObjects(t);case 3:return e.abrupt("return",O(O({},t),{},{blobMap:n}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"serializeNewAuthArguments",value:(d=(0,i.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.pluginManager.rootModel,(0,v.isAppRootModel)(r)&&!t.internetAccountPreAuthorization){e.next=3;break}return e.abrupt("return",t);case 3:if(!(n=null==r?void 0:r.findAppropriateInternetAccount(t))){e.next=8;break}return e.next=7,n.getPreAuthorizationInformation(t);case 7:t.internetAccountPreAuthorization=e.sent;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"deserializeArguments",value:(f=(0,i.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.blobMap&&(0,g.setBlobMap)(t.blobMap),!(n=t.signal)||!(0,y.isRemoteAbortSignal)(n)){e.next=4;break}return e.abrupt("return",O(O({},t),{},{signal:(0,y.deserializeAbortSignal)(n)}));case 4:return e.abrupt("return",O(O({},t),{},{signal:void 0}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"serializeReturn",value:(n=(0,i.default)(a.default.mark((function e(t,r,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"deserializeReturn",value:(r=(0,i.default)(a.default.mark((function e(t,r,n){var o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.pluginManager.rootModel,e.prev=1,e.next=4,t;case 4:o=e.sent,e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(0,v.isAuthNeededException)(e.t0)){e.next=12;break}throw u=null==i?void 0:i.createEphemeralInternetAccount("HTTPBasicInternetAccount-".concat(new URL(e.t0.url).origin),{},e.t0.url),new v.RetryError("Retrying with created internet account",u.internetAccountId);case 12:throw e.t0;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"augmentLocationObjects",value:(t=(0,i.default)(a.default.mark((function e(t){var r,n,i,u,l,c,s,f,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,h.isStateTreeNode)(t)||(0,h.isAlive)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,v.isUriLocation)(t)){e.next=5;break}return e.next=5,this.serializeNewAuthArguments(t);case 5:if(!Array.isArray(t)){e.next=23;break}r=b(t),e.prev=7,r.s();case 9:if((n=r.n()).done){e.next=15;break}return i=n.value,e.next=13,this.augmentLocationObjects(i);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:if("object"!==(0,o.default)(t)||null===t){e.next=53;break}u=0,l=Object.values(t);case 25:if(!(u<l.length)){e.next=53;break}if(c=l[u],!Array.isArray(c)){e.next=47;break}s=b(c),e.prev=29,s.s();case 31:if((f=s.n()).done){e.next=37;break}return d=f.value,e.next=35,this.augmentLocationObjects(d);case 35:e.next=31;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(29),s.e(e.t1);case 42:return e.prev=42,s.f(),e.finish(42);case 45:e.next=50;break;case 47:if("object"!==(0,o.default)(c)||null===c){e.next=50;break}return e.next=50,this.augmentLocationObjects(c);case 50:u++,e.next=25;break;case 53:case"end":return e.stop()}}),e,this,[[7,17,20,23],[29,39,42,45]])}))),function(e){return t.apply(this,arguments)})}]),k}(m.default);t.default=E},361:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=W,t.BaseAttributes=void 0,t.BaseCard=R,t.useStyles=t.default=t.SimpleValue=t.FieldName=t.FeatureDetails=t.BasicValue=t.BaseCoreDetails=void 0;var o=n(r(45)),i=n(r(36)),u=n(r(10)),l=n(r(33)),c=n(r(12)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(720),d=r(23),p=n(r(136)),m=r(184),g=r(14),h=n(r(21)),v=n(r(721)),y=r(29),b=r(32),w=n(r(915)),k=n(r(2072)),O=r(923),P=["id"],E=["__jbrowsefmt"];function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"],M=["name","start","end","strand","refName","description","type"],T=(0,d.makeStyles)((function(e){return{expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:"#FFFFFF"},field:{display:"flex",flexWrap:"wrap"},fieldDescription:{"&:hover":{background:"yellow"}},fieldName:{wordBreak:"break-all",minWidth:"90px",borderBottom:"1px solid #0003",background:e.palette.grey[200],marginRight:e.spacing(1),padding:e.spacing(.5)},fieldValue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),overflow:"auto"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),background:e.palette.grey[100],border:"1px solid ".concat(e.palette.grey[300]),boxSizing:"border-box",overflow:"auto"}}}));function R(e){var t=e.children,r=e.title,n=e.defaultExpanded,a=void 0===n||n,o=T(),i=(0,s.useState)(a),u=(0,c.default)(i,2),l=u[0],f=u[1];return s.default.createElement(d.Accordion,{expanded:l,onChange:function(){return f((function(e){return!e}))},TransitionProps:{unmountOnExit:!0}},s.default.createElement(d.AccordionSummary,{expandIcon:s.default.createElement(p.default,{className:o.expandIcon})},s.default.createElement(d.Typography,{variant:"button"}," ",r)),s.default.createElement(d.AccordionDetails,{className:o.expansionPanelDetails},t))}t.useStyles=T;var D=function(e){var t=e.description,r=e.name,n=e.width,a=e.prefix,o=void 0===a?[]:a,i=T(),u=[].concat((0,l.default)(o),[r]).join(".");return t?s.default.createElement(d.Tooltip,{title:t,placement:"left"},s.default.createElement("div",{className:(0,h.default)(i.fieldDescription,i.fieldName)},u)):s.default.createElement("div",{className:i.fieldName,style:{width:n}},u)};t.FieldName=D;var A=function(e){var t=e.value,r=T(),n="".concat(t).match(/^https?:\/\//);return s.default.createElement("div",{className:r.fieldValue},s.default.isValidElement(t)?t:n?s.default.createElement(w.default,{html:'<a href="'.concat(t,'">').concat(t,"</a>")}):s.default.createElement(w.default,{html:(0,v.default)(t)?JSON.stringify(t):String(t)}))};t.BasicValue=A;var I=function(e){var t=e.name,r=e.value,n=e.description,a=e.prefix,o=e.width,i=T();return null!=r?s.default.createElement("div",{className:i.field},s.default.createElement(D,{prefix:a,description:n,name:t,width:o}),s.default.createElement(A,{value:r})):null};t.SimpleValue=I;var _=function(e){var t=e.name,r=e.value,n=e.description,a=e.prefix,o=void 0===a?[]:a,i=T();return 1===r.length?(0,v.default)(r[0])?s.default.createElement(W,{attributes:r[0],prefix:[].concat((0,l.default)(o),[t])}):s.default.createElement("div",{className:i.field},s.default.createElement(D,{prefix:o,description:n,name:t}),s.default.createElement(A,{value:r[0]})):r.every((function(e){return(0,v.default)(e)}))?s.default.createElement(s.default.Fragment,null,r.map((function(e,r){return s.default.createElement(W,{key:JSON.stringify(e)+"-"+r,attributes:e,prefix:[].concat((0,l.default)(o),[t+"-"+r])})}))):s.default.createElement("div",{className:i.field},s.default.createElement(D,{prefix:o,description:n,name:t}),r.map((function(e,t){return s.default.createElement("div",{key:JSON.stringify(e)+"-"+t,className:i.fieldSubvalue},s.default.createElement(A,{value:e}))})))},N=function(e){return e.toLocaleString("en-US")};function B(e){var t=e.feature,r=C(C({},t),t.__jbrowsefmt),n=r.start,a=r.strand,o=r.end,i=r.refName,u={"-1":"-",0:"",1:"+"},l=u[a]?"(".concat(u[a],")"):"",f=C(C({},r),{},{length:N(o-n),position:"".concat(i,":").concat(N(n+1),"..").concat(N(o)," ").concat(l)});return s.default.createElement(s.default.Fragment,null,["Position","Description","Name","Length","Type"].map((function(e){return[e,f[e.toLowerCase()]]})).filter((function(e){var t=(0,c.default)(e,2)[1];return null!=t})).map((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];return s.default.createElement(I,{key:r,name:r,value:n})})))}t.BaseCoreDetails=function(e){return s.default.createElement(R,(0,i.default)({},e,{title:"Primary data"}),s.default.createElement(B,e))};var F=function(e){var t=e.value,r=e.prefix,n=e.name,a=Object.keys(t[0]).sort(),i=new Set(a);if(t.forEach((function(e){return Object.keys(e).forEach((function(e){return i.add(e)}))})),i.size<a.length+5){var u,f=Object.entries(t).map((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];return C({id:r,identifier:n.id},(0,o.default)(n,P))}));i.has("id")?(i.delete("id"),u=["identifier"].concat((0,l.default)(i))):u=(0,l.default)(i);var d=u.map((function(e){return{field:e,width:Math.max.apply(Math,(0,l.default)(f.map((function(t){return Math.min(Math.max((0,b.measureText)(String(t[e]),14)+50,80),1e3)}))))}}));return s.default.createElement(s.default.Fragment,null,s.default.createElement(D,{prefix:r,name:n}),s.default.createElement("div",{style:{height:20*Math.min(f.length,100)+50+(f.length<100?0:50),width:"100%"}},s.default.createElement(m.DataGrid,{disableSelectionOnClick:!0,rowHeight:20,headerHeight:25,rows:f,rowsPerPageOptions:[],hideFooterRowCount:!0,hideFooterSelectedRowCount:!0,columns:d,hideFooter:f.length<100})))}return null};function L(e){var t,r=e.value,n=e.prefix,a=e.name,o=T(),i=r.uri,u=r.baseUri,l=void 0===u?"":u;try{t=new URL(i,l).href}catch(e){t=i}return s.default.createElement("div",{className:o.field},s.default.createElement(D,{prefix:n,name:a}),s.default.createElement(A,{value:t}))}function W(e){var t=e.attributes,r=e.omit,n=void 0===r?[]:r,a=e.descriptions,i=e.formatter,u=void 0===i?function(e){return e}:i,f=e.prefix,d=void 0===f?[]:f,p=[].concat((0,l.default)(n),j),m=t.__jbrowsefmt,g=C(C({},(0,o.default)(t,E)),m),h=function(e,t){var r=[];return e.forEach((function(e,n){var a=[].concat((0,l.default)(t),[e[0]]).join(".");r.push((0,b.measureText)(a,12))})),Math.ceil(Math.max.apply(Math,r))+10}(Object.entries(g).filter((function(e){var t=(0,c.default)(e,2),r=t[0];return void 0!==t[1]&&!p.includes(r)})),d),y=h<=170?h:170;return s.default.createElement(s.default.Fragment,null,Object.entries(g).filter((function(e){var t=(0,c.default)(e,2),r=t[0];return void 0!==t[1]&&!p.includes(r)})).map((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1],o=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){r&&(r=r[e])})),"string"==typeof r?r:"string"==typeof(null===(t=r)||void 0===t?void 0:t.Description)?r.Description:void 0}([].concat((0,l.default)(d),[r]),a);return Array.isArray(n)?n.length>2&&n.every((function(e){return(0,v.default)(e)}))?s.default.createElement(F,{key:r,name:r,prefix:d,value:n}):s.default.createElement(_,{key:r,name:r,value:n,description:o,prefix:d}):(0,v.default)(n)?(0,b.isUriLocation)(n)?s.default.createElement(L,{key:r,name:r,prefix:d,value:n}):s.default.createElement(W,{omit:p,key:r,attributes:n,descriptions:a,prefix:[].concat((0,l.default)(d),[r])}):s.default.createElement(I,{key:r,name:r,value:u(n,r),description:o,prefix:d,width:y})})))}function z(e,t,r){return[(0,O.ellipses)("".concat(e)||"".concat(t)),"".concat(r)].filter((function(e){return!!e})).join(" - ")}t.BaseAttributes=function(e){var t=e.feature;return s.default.createElement(R,(0,i.default)({},e,{title:"Attributes"}),s.default.createElement(W,(0,i.default)({},e,{attributes:t})))};var H=function e(t){var r=t.omit,n=void 0===r?[]:r,a=t.model,o=t.feature,u=t.depth,c=void 0===u?0:u,p=o.name,m=void 0===p?"":p,g=o.id,h=void 0===g?"":g,v=o.type,w=void 0===v?"":v,O=o.subfeatures,P=(0,b.getSession)(a),E=(0,y.getConf)(P,["featureDetails","sequenceTypes"])||["mRNA","transcript"];return s.default.createElement(R,{title:z(m,h,w)},s.default.createElement(d.Typography,null,"Core details"),s.default.createElement(B,t),s.default.createElement(d.Divider,null),s.default.createElement(d.Typography,null,"Attributes"),s.default.createElement(W,(0,i.default)({attributes:o},t,{omit:[].concat((0,l.default)(n),M)})),E.includes(o.type)?s.default.createElement(f.ErrorBoundary,{FallbackComponent:function(e){var t=e.error;return s.default.createElement(d.Typography,{color:"error"},"".concat(t))}},s.default.createElement(k.default,t)):null,null!=O&&O.length?s.default.createElement(R,{title:"Subfeatures",defaultExpanded:!E.includes(o.type)},O.map((function(t){return s.default.createElement(e,{key:JSON.stringify(t),feature:t,model:a,depth:c+1})}))):null)};t.FeatureDetails=H;var V=(0,g.observer)((function(e){var t=e.model,r=t.featureData;if(!r)return null;var n,a=JSON.parse(JSON.stringify(r,(function(e,t){return void 0===t?null:t})));return n=a,0===Object.keys(n).length?null:s.default.createElement(H,{model:t,feature:a})}));t.default=V},362:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10)),o=n(r(33)),i=r(17),u=r(32),l=r(70),c=n(r(924)),s=n(r(925));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=i.types.model("Base1DView",{id:l.ElementId,displayedRegions:i.types.array(l.Region),bpPerPx:0,offsetPx:0,interRegionPaddingWidth:i.types.optional(i.types.number,0),minimumBlockWidth:i.types.optional(i.types.number,0)}).volatile((function(){return{features:void 0,volatileWidth:0}})).actions((function(e){return{setDisplayedRegions:function(t){e.displayedRegions=(0,i.cast)(t)},setBpPerPx:function(t){e.bpPerPx=t},setVolatileWidth:function(t){e.volatileWidth=t}}})).views((function(e){return{get width(){return e.volatileWidth},get assemblyNames(){return(0,o.default)(new Set(e.displayedRegions.map((function(e){return e.assemblyName}))))},get displayedRegionsTotalPx(){return this.totalBp/e.bpPerPx},get maxOffset(){return this.displayedRegionsTotalPx-10},get minOffset(){return 30-this.width},get totalBp(){return e.displayedRegions.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)},pxToBp:function(t){var r=0,n=(e.offsetPx+t)*e.bpPerPx,a=e.displayedRegions.length;if(n<0){var o=e.displayedRegions[0],u=n;return d(d({},(0,i.getSnapshot)(o)),{},{oob:!0,coord:o.reversed?Math.floor(o.end-u)+1:Math.floor(o.start+u)+1,offset:u,index:0})}for(var l=e.interRegionPaddingWidth*e.bpPerPx,c=e.minimumBlockWidth*e.bpPerPx,s=0;s<e.displayedRegions.length;s+=1){var f=e.displayedRegions[s],p=f.end-f.start,m=n-r;if(p+r>n&&r<=n)return d(d({},(0,i.getSnapshot)(f)),{},{oob:!1,offset:m,coord:f.reversed?Math.floor(f.end-m)+1:Math.floor(f.start+m)+1,index:s});f.end-f.start>c&&m/e.bpPerPx>0&&m/e.bpPerPx<this.width?r+=p+l:r+=p}if(n>=r){var g=e.displayedRegions[a-1],h=n-r+(g.end-g.start);return d(d({},(0,i.getSnapshot)(g)),{},{oob:!0,offset:h,coord:g.reversed?Math.floor(g.end-h)+1:Math.floor(g.start+h)+1,index:a-1})}return{coord:0,index:0,start:0,refName:"",oob:!0,assemblyName:"",offset:0,reversed:!1}}}})).views((function(e){return{get dynamicBlocks(){return(0,c.default)(e)},get staticBlocks(){return(0,s.default)(e)},get currBp(){return this.dynamicBlocks.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)},bpToPx:function(t){var r,n=t.refName,a=t.coord,o=t.regionNumber;return null===(r=(0,u.viewBpToPx)({refName:n,coord:a,regionNumber:o,self:e}))||void 0===r?void 0:r.offsetPx}}})).actions((function(e){return{setFeatures:function(t){e.features=t},zoomToDisplayedRegions:function(e,t){if(void 0!==e&&void 0!==t){if(e.refName===t.refName&&e.index===t.index&&t.offset<e.offset||e.index>t.index){var r=[t,e];e=r[0],t=r[1]}var n={start:e.start,end:e.end,index:e.index,offset:e.offset},a={start:t.start,end:t.end,index:t.index,offset:t.offset};if(!n||!a)throw new Error("regions not found");this.moveTo(n,a)}},showAllRegions:function(){e.bpPerPx=e.totalBp/e.width,e.offsetPx=0},moveTo:function(t,r){var n=0;if(t.index===r.index)n+=r.offset-t.offset;else{var a=e.displayedRegions[t.index];if(n+=a.end-a.start-t.offset,r.index-t.index>=2)for(var o=t.index+1;o<r.index;o+=1)n+=e.displayedRegions[o].end-e.displayedRegions[o].start;n+=r.offset}this.zoomTo(n/(e.width-e.interRegionPaddingWidth*(r.index-t.index)));for(var i=0,u=0;u<e.displayedRegions.length;u+=1){var l=e.displayedRegions[u];if(t.index===u){i+=t.offset;break}i+=l.end-l.start}e.offsetPx=Math.round(i/e.bpPerPx)+e.interRegionPaddingWidth*t.index},zoomOut:function(){this.zoomTo(2*e.bpPerPx)},zoomIn:function(){this.zoomTo(e.bpPerPx/2)},zoomTo:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.width/2,n=t;if(n!==e.bpPerPx){var a=e.bpPerPx;e.bpPerPx=n,e.offsetPx=(0,u.clamp)(Math.round((e.offsetPx+r)*a/n-r),e.minOffset,e.maxOffset)}},scrollTo:function(t){var r=(0,u.clamp)(t,e.minOffset,e.maxOffset);return e.offsetPx=r,r},centerAt:function(t,r,n){var a=e.bpToPx({refName:r,coord:t,regionNumber:n});a&&this.scrollTo(Math.round(a-e.width/2))},scroll:function(t){var r=e.offsetPx,n=(0,u.clamp)(e.offsetPx+t,e.minOffset,e.maxOffset);return e.offsetPx=n,n-r}}})),m=p;t.default=m},363:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.clearAdapterCache=function(){c={}},t.freeAdapterResources=function(e){var t=0,r=Object.keys(e);if(1===r.length&&"sessionId"===r[0]){var n=e.sessionId;Object.entries(c).forEach((function(e){var r=(0,o.default)(e,2),a=r[0],i=r[1];i.sessionIds.delete(n),0===i.sessionIds.size&&(t+=1,delete c[a])}))}else Object.values(c).forEach((function(t){t.dataAdapter.freeResources?(e.regions||(e.region?[e.region]:[])).forEach((function(e){void 0!==e.refName&&t.dataAdapter.freeResources(e)})):console.warn(t.dataAdapter,"does not implement freeResources")}));return t},t.getAdapter=s;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(922));function l(e){return"".concat((0,u.default)(e))}var c={};function s(e,t,r){return f.apply(this,arguments)}function f(){return(f=(0,i.default)(a.default.mark((function e(t,r,n){var o,i,u,f,d,p,m,g,h,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l(n),c[o]){e.next=21;break}if(i=(n||{}).type){e.next=5;break}throw new Error("could not determine adapter type from adapter config snapshot");case 5:if(u=t.getAdapterType(i)){e.next=8;break}throw new Error("unknown data adapter type ".concat(i));case 8:if(f=u.configSchema.create(n,{pluginManager:t}),d=s.bind(null,t,r),p=u.AdapterClass,m=u.getAdapterClass,e.t0=p,e.t0){e.next=16;break}return e.next=15,m();case 15:e.t0=e.sent;case 16:if(g=e.t0){e.next=19;break}throw new Error("Failed to get adapter");case 19:h=new g(f,d,t),c[o]={dataAdapter:h,sessionIds:new Set([r])};case 21:return(v=c[o]).sessionIds.add(r),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},364:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(25)),u=n(r(26)),l=n(r(24));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var s=function(e){(0,i.default)(r,e);var t=c(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r)}(n(r(207)).default);t.default=s},365:function(e,t,r){"use strict";function n(e,t,r){for(var n=t*(e=Math.abs(e)),a=parseInt(Number(n).toExponential().split(/e/i)[1],10),o=Math.pow(10,a);o<n&&!((o*=2)>=n);)o*=2.5;var i=(o=Math.max(o,5))/e,u=0;return!(o%10)&&i/10>=r?u=o/10:!(o%5)&&i/5>=r?u=o/5:!(o%2)&&i/2>=r&&(u=o/2),{majorPitch:o,minorPitch:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.chooseGridPitch=n,t.makeTicks=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=n(r,60,15),u=e,l=t;if(null===u||null===l)return[];if(r<0){var c=[l,u];u=c[0],l=c[1]}u-=Math.abs(20*r)-1,l+=Math.abs(20*r)+1;for(var s=i.minorPitch||i.majorPitch,f=0,d=[],p=Math.ceil(u/s)*s;p<l;p+=s)o&&p%(2*i.majorPitch)?(d.push({type:"minor",base:p-1,index:f}),f+=1):!a||p%(2*i.majorPitch)||(d.push({type:"major",base:p-1,index:f}),f+=1);return d}},366:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(50)),f=n(r(25)),d=n(r(26)),p=n(r(24)),m=n(r(10)),g=n(r(207)),h=r(911);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var w=function(e){(0,f.default)(n,e);var t,r=b(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,m.default)((0,c.default)(e),"supportsSVG",!0),e}return(0,l.default)(n,[{key:"render",value:(t=(0,i.default)(a.default.mark((function e(t){var r,i,u,l,c,f,d,m,g,v=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFeatures(t);case 2:return r=e.sent,i=t.height,u=t.regions,l=t.bpPerPx,c=(0,o.default)(u,1),f=c[0],d=(f.end-f.start)/l,e.next=8,(0,h.renderToAbstractCanvas)(d,i,t,(function(e){return v.draw(e,y(y({},t),{},{features:r}))}));case 8:return m=e.sent,e.next=11,(0,s.default)((0,p.default)(n.prototype),"render",this).call(this,y(y(y({},t),m),{},{features:r,height:i,width:d}));case 11:return g=e.sent,e.abrupt("return",y(y(y({},g),m),{},{features:r,containsNoTransferables:!0,height:i,width:d}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(g.default);t.default=w},367:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=r(14),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(83);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,i.observer)((function(e){var t=e.regions,r=e.features,n=e.bpPerPx,a=e.width,i=e.height,c=e.onMouseLeave,f=void 0===c?function(){}:c,d=e.onMouseMove,p=void 0===d?function(){}:d,m=e.onFeatureClick,g=void 0===m?function(){}:m,h=(0,o.default)(t,1)[0],v=(0,u.useRef)(null);function y(e){var t=0;v.current&&(t=v.current.getBoundingClientRect().left);var o,i,u=e-t,l=h.reversed?a-u:u,c=h.start+n*l,f=s(r.values());try{for(f.s();!(i=f.n()).done;){var d=i.value;if(c<=d.get("end")&&c>=d.get("start")){o=d;break}}}catch(e){f.e(e)}finally{f.f()}return o}return u.default.createElement("div",{ref:v,"data-testid":"wiggle-rendering-test",onMouseMove:function(e){var t=y(e.clientX);p(e,t?t.id():void 0)},onClick:function(e){var t=y(e.clientX);g(e,t?t.id():void 0)},onMouseLeave:function(e){return f(e)},role:"presentation",className:"WiggleRendering",style:{overflow:"visible",position:"relative",height:i}},u.default.createElement(l.PrerenderedCanvas,e))}));t.default=d},368:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.YSCALEBAR_LABEL_OFFSET=void 0;var a=n(r(19)),o=n(r(11)),i=n(r(20)),u=n(r(12)),l=n(r(33)),c=n(r(10)),s=E(r(1)),f=r(29),d=r(32),p=r(65),m=r(141),g=r(43),h=r(17),v=r(342),y=r(279),b=n(r(947)),w=r(948);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,o.default)(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var S=(0,s.lazy)((function(){return Promise.resolve().then((function(){return E(r(2242))}))})),x=(0,s.lazy)((function(){return Promise.resolve().then((function(){return E(r(2243))}))}));t.YSCALEBAR_LABEL_OFFSET=5;var C=new Map([["xyplot","XYPlotRenderer"],["density","DensityRenderer"],["line","LinePlotRenderer"]]),j=function(e,t){return h.types.compose("LinearWiggleDisplay",m.BaseLinearDisplay,h.types.model({type:h.types.literal("LinearWiggleDisplay"),configuration:(0,f.ConfigurationReference)(t),selectedRendering:h.types.optional(h.types.string,""),resolution:h.types.optional(h.types.number,1),fill:h.types.maybe(h.types.boolean),color:h.types.maybe(h.types.string),posColor:h.types.maybe(h.types.string),negColor:h.types.maybe(h.types.string),summaryScoreMode:h.types.maybe(h.types.string),rendererTypeNameState:h.types.maybe(h.types.string),scale:h.types.maybe(h.types.string),autoscale:h.types.maybe(h.types.string),displayCrossHatches:h.types.maybe(h.types.boolean),constraints:h.types.optional(h.types.model({max:h.types.maybe(h.types.number),min:h.types.maybe(h.types.number)}),{})})).volatile((function(){return{statsReady:!1,message:void 0,stats:{scoreMin:0,scoreMax:50},statsFetchInProgress:void 0}})).actions((function(e){return{updateStats:function(t){var r=t.scoreMin,n=t.scoreMax;e.stats.scoreMin===r&&e.stats.scoreMax===n||(e.stats={scoreMin:r,scoreMax:n}),e.statsReady=!0},setColor:function(t){e.color=t},setPosColor:function(t){e.posColor=t},setNegColor:function(t){e.negColor=t},setLoading:function(t){var r=e.statsFetchInProgress;void 0===r||r.signal.aborted||r.abort(),e.statsFetchInProgress=t},selectFeature:function(t){var r=(0,d.getSession)(e);(0,d.isSelectionContainer)(r)&&r.setSelection(t)},setResolution:function(t){e.resolution=t},setFill:function(t){e.fill=t},toggleLogScale:function(){"log"!==e.scale?e.scale="log":e.scale="linear"},setScaleType:function(t){e.scale=t},setSummaryScoreMode:function(t){e.summaryScoreMode=t},setAutoscale:function(t){e.autoscale=t},setMaxScore:function(t){e.constraints.max=t},setRendererType:function(t){e.rendererTypeNameState=t},setMinScore:function(t){e.constraints.min=t},toggleCrossHatches:function(){e.displayCrossHatches=!e.displayCrossHatches},setCrossHatches:function(t){e.displayCrossHatches=t}}})).views((function(e){return{get TooltipComponent(){return b.default},get adapterTypeName(){return e.adapterConfig.type},get rendererTypeName(){var t=e.rendererTypeNameState||(0,f.getConf)(e,"defaultRendering"),r=C.get(t);if(!r)throw new Error("unknown alignments view name ".concat(t));return r},get filters(){},get scaleType(){return e.scale||(0,f.getConf)(e,"scaleType")},get maxScore(){var t=e.constraints.max;return null!=t?t:(0,f.getConf)(e,"maxScore")},get minScore(){var t=e.constraints.min;return null!=t?t:(0,f.getConf)(e,"minScore")}}})).views((function(e){return{get rendererConfig(){var t=(0,f.getConf)(e,["renderers",e.rendererTypeName])||{};return e.rendererType.configSchema.create(O(O(O(O({},t),{},{filled:e.fill,scaleType:e.scaleType,displayCrossHatches:e.displayCrossHatches,summaryScoreMode:e.summaryScoreMode},e.color?{color:e.color}:{}),e.negColor?{negColor:e.negColor}:{}),e.posColor?{posColor:e.posColor}:{}),(0,h.getEnv)(e))}}})).views((function(e){var t=[0,0];return{get filled(){var t;return null!==(t=e.fill)&&void 0!==t?t:(0,f.readConfObject)(e.rendererConfig,"filled")},get summaryScoreModeSetting(){return e.summaryScoreMode||(0,f.readConfObject)(e.rendererConfig,"summaryScoreMode")},get domain(){var r=e.stats,n=e.scaleType,a=e.minScore,o=e.maxScore,i=r.scoreMin,u=r.scoreMax,l=(0,y.getNiceDomain)({domain:[i,u],bounds:[a,o],scaleType:n});return"log"===n&&l[1]===Number.MIN_VALUE?[0,Number.MIN_VALUE]:(JSON.stringify(t)!==JSON.stringify(l)&&(t=l),t)},get needsScalebar(){return"XYPlotRenderer"===e.rendererTypeName||"LinePlotRenderer"===e.rendererTypeName},get scaleOpts(){return{domain:this.domain,stats:e.stats,autoscaleType:this.autoscaleType,scaleType:e.scaleType,inverted:(0,f.getConf)(e,"inverted")}},get canHaveFill(){return"XYPlotRenderer"===e.rendererTypeName},get autoscaleType(){return e.autoscale||(0,f.getConf)(e,"autoscale")},get displayCrossHatchesSetting(){return e.displayCrossHatches||(0,f.readConfObject)(e.rendererConfig,"displayCrossHatches")}}})).views((function(e){return{get ticks(){var t=e.scaleType,r=e.domain,n=e.height,a=(0,f.getConf)(e,"minimalTicks"),o=[n-5,5],i=(0,y.getScale)({scaleType:t,domain:r,range:o,inverted:(0,f.getConf)(e,"inverted")}),u=(0,v.axisPropsFromTickScale)(i,4);return n<100||a?O(O({},u),{},{values:r}):u}}})).views((function(t){var r=t.renderProps;return{renderProps:function(){var e=r();return O(O({},e),{},{notReady:e.notReady||!t.statsReady,rpcDriverName:t.rpcDriverName,displayModel:t,config:t.rendererConfig,scaleOpts:t.scaleOpts,resolution:t.resolution,height:t.height,ticks:t.ticks,displayCrossHatches:t.displayCrossHatches,filters:t.filters})},get adapterCapabilities(){return e.getAdapterType(t.adapterTypeName).adapterCapabilities},get hasResolution(){return this.adapterCapabilities.includes("hasResolution")},get hasGlobalStats(){return this.adapterCapabilities.includes("hasGlobalStats")}}})).views((function(e){var t=e.trackMenuItems;return{trackMenuItems:function(){return[].concat((0,l.default)(t()),(0,l.default)(e.hasResolution?[{label:"Resolution",subMenu:[{label:"Finer resolution",onClick:function(){e.setResolution(5*e.resolution)}},{label:"Coarser resolution",onClick:function(){e.setResolution(e.resolution/5)}}]},{label:"Summary score mode",subMenu:["min","max","avg","whiskers"].map((function(t){return{label:t,onClick:function(){return e.setSummaryScoreMode(t)}}}))}]:[]),(0,l.default)(e.canHaveFill?[{label:e.filled?"Turn off histogram fill":"Turn on histogram fill",onClick:function(){e.setFill(!e.filled)}}]:[]),[{label:"log"===e.scaleType?"Set linear scale":"Set log scale",onClick:function(){e.toggleLogScale()}},{type:"checkbox",label:"Draw cross hatches",checked:e.displayCrossHatchesSetting,onClick:function(){e.toggleCrossHatches()}}],(0,l.default)(Object.keys((0,f.getConf)(e,"renderers")||{}).length>1?[{label:"Renderer type",subMenu:(0,l.default)(C.keys()).map((function(t){return{label:t,onClick:function(){return e.setRendererType(t)}}}))}]:[]),[{label:"Autoscale type",subMenu:[["local","Local"]].concat((0,l.default)(e.hasGlobalStats?[["global","Global"],["globalsd","Global ± 3σ"]]:[]),[["localsd","Local ± 3σ"]]).map((function(t){var r=(0,u.default)(t,2),n=r[0];return{label:r[1],onClick:function(){e.setAutoscale(n)}}}))},{label:"Set min/max score",onClick:function(){(0,d.getSession)(e).queueDialog((function(t){return[S,{model:e,handleClose:t}]}))}},{label:"Set color",onClick:function(){(0,d.getSession)(e).queueDialog((function(t){return[x,{model:e,handleClose:t}]}))}}])}}})).actions((function(e){var t=e.reload,r=e.renderSvg;function n(e){return o.apply(this,arguments)}function o(){return(o=(0,i.default)(a.default.mark((function t(r){var n,o,i,u,l,c,s,m,g,v,y,b,w,k,P,E,S,x;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,d.getSession)(e),o=n.rpcManager,i=(0,f.getConf)(e,"numStdDev")||3,u=e.adapterConfig,l=e.autoscaleType,c=(0,p.getRpcSessionId)(e),s=O({sessionId:c,adapterConfig:u,statusCallback:function(t){(0,h.isAlive)(e)&&e.setMessage(t)}},r),"global"!==l&&"globalsd"!==l){t.next=11;break}return t.next=8,o.call(c,"WiggleGetGlobalStats",s);case 8:return m=t.sent,g=m.scoreMin,v=m.scoreMean,y=m.scoreStdDev,t.abrupt("return","globalsd"===l?O(O({},m),{},{scoreMin:g>=0?0:v-i*y,scoreMax:v+i*y}):m);case 11:if("local"!==l&&"localsd"!==l){t.next=18;break}return b=(0,d.getContainingView)(e),w=b.dynamicBlocks,k=b.bpPerPx,t.next=15,o.call(c,"WiggleGetMultiRegionStats",O(O({},s),{},{regions:w.contentBlocks.map((function(e){var t=e.start,r=e.end;return O(O({},JSON.parse(JSON.stringify(e))),{},{start:Math.floor(t),end:Math.ceil(r)})})),bpPerPx:k}));case 15:return P=t.sent,E=P.scoreMin,S=P.scoreMean,x=P.scoreStdDev,t.abrupt("return","localsd"===l?O(O({},P),{},{scoreMin:E>=0?0:S-i*x,scoreMax:S+i*x}):P);case 18:if("zscale"!==l){t.next=20;break}return t.abrupt("return",o.call(c,"WiggleGetGlobalStats",s));case 20:throw new Error("invalid autoscaleType '".concat(l,"'"));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{reload:function(){return(0,i.default)(a.default.mark((function r(){var o,i;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setError(),o=new AbortController,r.prev=2,r.next=5,n(O({signal:o.signal},e.renderProps()));case 5:i=r.sent,(0,h.isAlive)(e)&&(e.updateStats(i),t()),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),e.setError(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},afterAttach:function(){(0,h.addDisposer)(e,(0,g.autorun)((0,i.default)(a.default.mark((function t(){var r,o,i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=new AbortController,o=(0,d.getContainingView)(e),e.setLoading(r),o.initialized){t.next=6;break}return t.abrupt("return");case 6:if(e.estimatedStatsReady){t.next=8;break}return t.abrupt("return");case 8:if(!e.regionTooLarge){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,n(O({signal:r.signal},e.renderProps()));case 12:i=t.sent,(0,h.isAlive)(e)&&e.updateStats(i),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),!(0,d.isAbortException)(t.t0)&&(0,h.isAlive)(e)&&(console.error(t.t0),e.setError(t.t0));case 19:case"end":return t.stop()}}),t,null,[[0,16]])}))),{delay:1e3}))},renderSvg:function(t){return(0,i.default)(a.default.mark((function n(){var o,i,u,l;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,g.when)((function(){return e.statsReady&&!!e.regionCannotBeRenderedText}));case 2:return o=e.needsScalebar,i=e.stats,u=(0,d.getContainingView)(e),l=u.offsetPx,n.t0=s.default,n.t1=s.default.Fragment,n.t2=s.default,n.t3={id:"snpcov"},n.next=10,r(t);case 10:return n.t4=n.sent,n.t5=n.t2.createElement.call(n.t2,"g",n.t3,n.t4),n.t6=o&&i?s.default.createElement("g",{transform:"translate(".concat(Math.max(-l,0),")")},s.default.createElement(w.YScaleBar,{model:e,orientation:"left"})):null,n.abrupt("return",n.t0.createElement.call(n.t0,n.t1,null,n.t5,n.t6));case 14:case"end":return n.stop()}}),n)})))()}}}))};t.default=j},514:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.stringToJexlExpression=function(e,t){var r="nosig|".concat(e);if(!o[r]){if(!e.startsWith("jexl:"))throw new Error("string does not appear to be in jexl format");var n=e.split("jexl:")[1],i=t?t.compile("".concat(n)):(0,a.default)().compile("".concat(n));o[r]=i}return o[r]};var a=n(r(905)),o={}},515:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createImageBitmap=t.createCanvas=t.ImageBitmapType=void 0,t.drawImageOntoCanvasContext=function(e,t){if(e.serializedCommands){new s.CanvasSequence(e.serializedCommands).execute(t)}else t.drawImage(e,0,0)};var a,o,i,u=n(r(19)),l=n(r(20)),c=n(r(320)),s=r(181);t.createCanvas=a,t.createImageBitmap=o,t.ImageBitmapType=i;var f="function"==typeof OffscreenCanvas,d=c.default;f?(t.createCanvas=a=function(e,t){return new OffscreenCanvas(e,t)},t.createImageBitmap=o=window.createImageBitmap||self.createImageBitmap,t.ImageBitmapType=i=window.ImageBitmap||self.ImageBitmap):d?(t.createCanvas=a=function(){return nodeCreateCanvas.apply(void 0,arguments)},t.createImageBitmap=o=function(){var e=(0,l.default)(u.default.mark((function e(t){var r,n,a=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length<=1||!(a.length-1)){e.next=2;break}throw new Error("only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill");case 2:return r=t.toDataURL(),n=new nodeImage,e.abrupt("return",new Promise((function(e,t){n.onload=function(){return e(n)},n.onerror=t,n.src=r})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(t.createCanvas=a=function(e,t){var r=new s.CanvasSequence;return{width:e,height:t,getContext:function(){return r}}},t.createImageBitmap=o=function(){var e=(0,l.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getContext("2d"),e.abrupt("return",{height:t.height,width:t.width,serializedCommands:r.toJSON(),containsNoTransferables:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.ImageBitmapType=i=String)},516:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36)),i=n(r(10)),u=n(r(12)),l=n(r(45)),c=n(r(110)),s=n(r(52)),f=r(34),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),p=["value","setValue","variant"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=(0,f.makeStyles)((function(e){return{input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderRadius:e.shape.borderRadius,borderWidth:2}}})),y=d.default.forwardRef((function(e,t){var r=e.value,n=e.setValue,a=e.variant,i=(0,l.default)(e,p),m=(0,d.useState)(),g=(0,u.default)(m,2),y=g[0],b=g[1],w=(0,d.useState)(0),k=(0,u.default)(w,2),O=k[0],P=k[1],E=(0,d.useState)(null),S=(0,u.default)(E,2),x=S[0],C=S[1],j=(0,d.useState)(null),M=(0,u.default)(j,2),T=M[0],R=M[1],D=(0,d.useState)(!1),A=(0,u.default)(D,2),I=A[0],_=A[1];(0,d.useEffect)((function(){I&&(T&&T.blur(),_(!1))}),[I,T]);var N=v(e),B=(0,f.useTheme)(),F=x&&x.clientWidth;F&&F!==O&&P(F);return d.default.createElement("div",(0,o.default)({},i,{ref:t}),d.default.createElement("div",{style:{position:"relative"}},d.default.createElement(s.default,{ref:function(e){C(e)},component:"span",variant:a,className:N.typography},void 0===y?r:y)),d.default.createElement(c.default,{inputRef:function(e){R(e)},className:N.inputBase,inputProps:{style:h({width:O},a&&"inherit"!==a&&"srOnly"!==a?B.typography[a]:{})},classes:{input:N.input,root:N.inputRoot,focused:N.inputFocused},value:void 0===y?r:y,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key?T&&T.blur():"Escape"===e.key&&(b(void 0),_(!0))},onBlur:function(){y&&y!==r&&n(y),b(void 0)}}))}));t.default=y},517:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=(0,r(23).makeStyles)((function(e){return{message:{border:"1px solid black",background:"#f88",overflow:"auto",maxHeight:200,margin:e.spacing(1),padding:e.spacing(1)},errorBox:{background:"lightgrey",border:"1px solid black",margin:20}}})),i=function(e){var t=e.error,r=o(),n="",i="".concat(t),u="is not assignable",l=i.indexOf(u);if(-1!==l){var c=i.slice(0,l+u.length),s=c.match(/.*at path "(.*)" snapshot `(.*)` is not assignable/m);s&&(i="Failed to load element at ".concat(s[1],"...Failed element had snapshot"),n=s[2]);var f=c.match(/.*snapshot `(.*)` is not assignable/);f&&(i="Failed to load element...Failed element had snapshot",n=f[1])}return a.default.createElement("div",{className:r.message},i.slice(0,1e4),n?a.default.createElement("pre",{className:r.errorBox},JSON.stringify(JSON.parse(n),null,2)):null)};t.default=i},518:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(29),c=r(23);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,c.makeStyles)((function(){return{importFormEntry:{minWidth:180}}}));var d=(0,u.observer)((function(e){var t,r,n,a,u,s,d=e.session,p=e.onChange,m=e.selected,g=e.InputProps,h=e.extra,v=void 0===h?0:h,y=f(),b=d.assemblyNames,w=d.assemblyManager,k=new URLSearchParams(window.location.search).get("config"),O=(t="lastAssembly-".concat([window.location.host+window.location.pathname,k,v].join("-")),r=m,n=(0,i.useState)((function(){if("undefined"==typeof window)return r;try{var e=window.localStorage.getItem(t);return e?JSON.parse(e):r}catch(e){return console.error(e),r}})),a=(0,o.default)(n,2),u=a[0],s=a[1],[u,function(e){try{var r=e instanceof Function?e(u):e;s(r),"undefined"!=typeof window&&window.localStorage.setItem(t,JSON.stringify(r))}catch(e){console.error(e)}}]),P=(0,o.default)(O,2),E=P[0],S=P[1],x=b.includes(E||"")?E:m;(0,i.useEffect)((function(){x&&x!==m&&p(x)}),[x,p,m]);var C=b.length?"":"No configured assemblies";return i.default.createElement(c.TextField,{select:!0,label:"Assembly",variant:"outlined",helperText:C||"Select assembly to view",value:C?"":x,inputProps:{"data-testid":"assembly-selector"},onChange:function(e){return S(e.target.value)},error:!!C,InputProps:g,disabled:!!C,className:y.importFormEntry},b.map((function(e){var t=w.get(e),r=t?(0,l.getConf)(t,"displayName"):"";return i.default.createElement(c.MenuItem,{key:e,value:e},r||e)})))}));t.default=d},519:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(15)),u=n(r(16));function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,i.default)(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return(0,u.default)(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size+=1,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&(this._size-=1),this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:a.default.mark((function e(){var t,r,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,o.default)(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:a.default.mark((function e(){var t,r,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,o.default)(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:a.default.mark((function e(){var t,r,n,i,u,c,s,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=l(this.oldCache),e.prev=18,i.s();case 20:if((u=i.n()).done){e.next=28;break}if(c=u.value,s=(0,o.default)(c,1),f=s[0],this.cache.has(f)){e.next=26;break}return e.next=26,c;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),i.e(e.t1);case 33:return e.prev=33,i.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=l(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||(t+=1)}}catch(e){r.e(e)}finally{r.f()}return this._size+t}}]),t}(Symbol.iterator),f=s;t.default=f},520:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"displayName",void 0),(0,s.default)((0,i.default)(n),"description",void 0),(0,s.default)((0,i.default)(n),"url",void 0),(0,s.default)((0,i.default)(n),"configEditorComponent",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,n.displayName=e.displayName,n.description=e.description,n.url=e.url,n.configEditorComponent=e.configEditorComponent,!n.stateModel)throw new Error("no stateModel defined for connection ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema defined for connection ".concat(n.name));return n}return(0,a.default)(r)}(n(r(113)).default);t.default=d},521:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(15)),i=n(r(16)),u=n(r(10));function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),this.SubLayoutClass=t,(0,u.default)(this,"subLayouts",new Map),(0,u.default)(this,"subLayoutConstructorArgs",{}),this.subLayouts=new Map,this.subLayoutConstructorArgs=r}return(0,i.default)(e,[{key:"getDataByID",value:function(e){var t,r=l(this.subLayouts.values());try{for(r.s();!(t=r.n()).done;){var n=t.value.getDataByID(e);if(n)return n}}catch(e){r.e(e)}finally{r.f()}}},{key:"getSublayout",value:function(e){var t=this.subLayouts.get(e);return void 0===t?(t=new this.SubLayoutClass(this.subLayoutConstructorArgs),this.subLayouts.set(e,t),t):t}},{key:"addRect",value:function(e,t,r,n,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return this.getSublayout(e).addRect(t,r,n,a,o)}},{key:"discardRange",value:function(e,t,r){var n=this.subLayouts.get(e);return n&&n.discardRange(t,r)}},{key:"toJSON",value:function(){var e,t={},r=l(this.subLayouts.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,a.default)(e.value,2),o=n[0],i=n[1];t[o]=i.toJSON()}}catch(e){r.e(e)}finally{r.f()}return t}}]),e}();t.default=s},522:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(15)),i=n(r(16)),u=n(r(10)),l=r(32),c=n(r(727)),s=function(){function e(t){var r=t.rectangles,n=t.totalHeight,i=t.maxHeightReached;(0,o.default)(this,e),(0,u.default)(this,"rectangles",void 0),(0,u.default)(this,"totalHeight",void 0),(0,u.default)(this,"maxHeightReached",void 0),(0,u.default)(this,"rbush",void 0),this.rectangles=new Map(Object.entries(r)),this.totalHeight=n,this.maxHeightReached=i,this.rbush=new c.default;for(var l=0,s=Object.entries(r);l<s.length;l++){var f=(0,a.default)(s[l],2),d=f[0],p=f[1];this.rbush.insert({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3],name:d})}}return(0,i.default)(e,[{key:"addRect",value:function(e){var t=this.rectangles.get(e);if(!t)throw new Error("id ".concat(e," not found in precomputed feature layout"));return t[1]}},{key:"getRectangles",value:function(){return this.rectangles}},{key:"getTotalHeight",value:function(){return this.totalHeight}},{key:"collides",value:function(e,t){throw new Error("Method not implemented.")}},{key:"getByCoord",value:function(e,t){var r={minX:e,minY:t,maxX:e+1,maxY:t+1};return this.rbush.collides(r)?this.rbush.search(r)[0].name:void 0}},{key:"getByID",value:function(e){return this.rectangles.get(e)}},{key:"addRectToBitmap",value:function(e,t){throw new Error("Method not implemented.")}},{key:"discardRange",value:function(e,t){throw new Error("Method not implemented.")}},{key:"serializeRegion",value:function(e){throw new Error("Method not implemented.")}},{key:"toJSON",value:function(){return{rectangles:(0,l.objectFromEntries)(this.rectangles),totalHeight:this.totalHeight,maxHeightReached:!1,containsNoTransferables:!0}}}]),e}();t.default=s},523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contrastingTextColor=function(e){return o(e)>.5?"black":"white"},t.emphasize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,r=(0,a.namedColorToHex)(e);return(0,n.emphasize)(r||e,t)},Object.defineProperty(t,"isNamedColor",{enumerable:!0,get:function(){return a.isNamedColor}}),t.makeContrasting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=(0,a.namedColorToHex)(e)||e,u=(0,a.namedColorToHex)(t)||t,l=o(u),c=(0,n.getContrastRatio)(i,u),s=i,f=.05;for(;c<r;)i=l>.5?(0,n.darken)(s,f):(0,n.lighten)(s,f),f+=.05,c=(0,n.getContrastRatio)(i,u);return i},Object.defineProperty(t,"namedColorToHex",{enumerable:!0,get:function(){return a.namedColorToHex}});var n=r(417),a=r(2086);function o(e){var t=(0,a.namedColorToHex)(e);return(0,n.getLuminance)(t||e)}},524:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationEditor=void 0,Object.defineProperty(t,"JsonEditor",{enumerable:!0,get:function(){return b.default}}),t.default=void 0;var a=n(r(11)),o=n(r(15)),i=n(r(16)),u=n(r(30)),l=n(r(25)),c=n(r(26)),s=n(r(24)),f=n(r(10)),d=r(1),p=n(r(140)),m=n(r(163)),g=n(r(114)),h=r(2101),v=r(2103),y=r(2107),b=n(r(934));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}var O=(0,d.lazy)((function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(2111))}))}));t.ConfigurationEditor=O;var P=function(e){(0,l.default)(r,e);var t=w(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","ConfigurationPlugin"),e}return(0,i.default)(r,[{key:"install",value:function(e){e.addAdapterType((function(){return new p.default({name:"FromConfigAdapter",configSchema:v.configSchema,AdapterClass:v.AdapterClass,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new p.default({name:"FromConfigRegionsAdapter",configSchema:v.regionsConfigSchema,AdapterClass:v.RegionsAdapterClass,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new p.default({name:"FromConfigSequenceAdapter",configSchema:v.sequenceConfigSchema,AdapterClass:v.SequenceAdapterClass,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new p.default({name:"RefNameAliasAdapter",configSchema:y.configSchema,AdapterClass:y.AdapterClass,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addWidgetType((function(){return new m.default({name:"ConfigurationEditorWidget",HeadingComponent:h.HeadingComponent,configSchema:h.configSchema,stateModel:(0,h.stateModelFactory)(e),ReactComponent:O})}))}}]),r}(g.default);t.default=P},525:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(33)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(89),g=n(r(95)),h=r(115),v=r(29);function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var k=function(e){(0,s.default)(f,e);var t,r,n=w(f);function f(e,t,r){var a;(0,u.default)(this,f),a=n.call(this,e,t,r),(0,p.default)((0,c.default)(a),"features",void 0);var o=(0,v.readConfObject)(e,"features");return a.features=f.makeFeatures(o||[]),a}return(0,l.default)(f,[{key:"getRefNames",value:(r=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.default)(this.features.keys()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNameAliases",value:(t=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array.from(this.features.values()).map((function(e){return{refName:e[0].get("refName"),aliases:e[0].get("aliases")}})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=e.refName,n=e.start,o=e.end;return(0,h.ObservableCreate)(function(){var e=(0,i.default)(a.default.mark((function e(i){var u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=t.features.get(r)||[],l=0;l<u.length;l++)(c=u[l]).get("end")>n&&c.get("start")<o&&i.next(c);i.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}],[{key:"makeFeatures",value:function(e){for(var t=new Map,r=0;r<e.length;r+=1)if(e[r]){var n=this.makeFeature(e[r]),a=n.get("refName"),o=t.get(a);o||(o=[],t.set(a,o)),o.push(n)}var i,u=y(t.values());try{for(u.s();!(i=u.n()).done;){i.value.sort((function(e,t){return e.get("start")-t.get("start")}))}}catch(e){u.e(e)}finally{u.f()}return t}},{key:"makeFeature",value:function(e){return new g.default(e)}}]),f}(m.BaseFeatureDataAdapter);t.default=k},526:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseChordDisplayComponentFactory",{enumerable:!0,get:function(){return k.BaseChordDisplayComponentFactory}}),Object.defineProperty(t,"BaseChordDisplayModel",{enumerable:!0,get:function(){return k.BaseChordDisplayModel}}),Object.defineProperty(t,"baseChordDisplayConfig",{enumerable:!0,get:function(){return k.baseChordDisplayConfig}}),t.default=void 0;var o=n(r(19)),i=n(r(20)),u=n(r(15)),l=n(r(16)),c=n(r(30)),s=n(r(25)),f=n(r(26)),d=n(r(24)),p=n(r(10)),m=r(1),g=r(43),h=r(32),v=n(r(114)),y=n(r(276)),b=n(r(894)),w=n(r(2152)),k=r(2154);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var E=function(e){(0,s.default)(n,e);var t=P(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"name","CircularViewPlugin"),e}return(0,l.default)(n,[{key:"install",value:function(e){e.addViewType((function(){return new y.default({ReactComponent:(0,m.lazy)((function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(2162))}))})),stateModel:(0,w.default)(e),name:"CircularView"})})),e.addToExtensionPoint("LaunchView-CircularView",function(){var e=(0,i.default)(o.default.mark((function e(t){var r,n,a,i,u,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.session,n=t.assembly,t.loc,a=t.tracks,i=void 0===a?[]:a,u=r.assemblyManager,l=r.addView("CircularView",{}),e.next=5,(0,g.when)((function(){return l.initialized}));case 5:if(n){e.next=7;break}throw new Error("No assembly provided when launching circular genome view");case 7:return e.next=9,u.waitForAssembly(n);case 9:if(c=e.sent){e.next=12;break}throw new Error('Assembly "'.concat(n,'" not found when launching circular genome view'));case 12:l.setDisplayedRegions(c.regions||[]),i.forEach((function(e){return l.showTrack(e)}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"configure",value:function(e){(0,h.isAbstractMenuManager)(e.rootModel)&&e.rootModel.appendToSubMenu(["Add"],{label:"Circular view",icon:b.default,onClick:function(e){e.addView("CircularView",{})}})}}]),n}(v.default);t.default=E},527:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ContentBlock=void 0,t.ElidedBlock=function(e){var t=e.width,r=s();return o.default.createElement("div",{className:r.elidedBlock,style:{width:t}})},t.InterRegionPaddingBlock=function(e){var t=e.boundary,r=e.width,n=e.style,a=void 0===n?{}:n,i=s();return o.default.createElement("div",{style:c(c({},a),{},{width:r}),className:t?i.boundaryPaddingBlock:i.interRegionPaddingBlock})};var a=n(r(10)),o=n(r(1)),i=r(34),u=r(14);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=(0,i.makeStyles)((function(e){return{contentBlock:{position:"relative",minHeight:"100%",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden"},elidedBlock:{minHeight:"100%",boxSizing:"border-box",backgroundColor:"#999",backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(255,255,255,.5) 1px, rgba(255,255,255,.5) 3px)"},interRegionPaddingBlock:{minHeight:"100%",backgroundColor:e.palette.text.primary},boundaryPaddingBlock:{minHeight:"100%",backgroundColor:e.palette.action.disabledBackground}}})),f=(0,u.observer)((function(e){var t=e.block,r=e.children,n=s(),a=t.widthPx;return o.default.createElement("div",{style:{width:a},className:n.contentBlock},r)}));t.ContentBlock=f},528:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(11)),i=n(r(33)),u=n(r(10)),l=n(r(20)),c=n(r(12)),s=n(r(36)),f=P(r(1)),d=r(14),p=r(32),m=P(r(529)),g=r(23),h=n(r(789)),v=n(r(236)),y=n(r(340)),b=r(530);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,o.default)(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var E=(0,f.lazy)((function(){return Promise.resolve().then((function(){return P(r(2179))}))}));var S=function(e){var t=e.style;return f.default.createElement(g.Popper,(0,s.default)({},e,{style:{width:"fit-content",minWidth:Math.min(+((null==t?void 0:t.width)||0),200),background:"white"},placement:"bottom-start"}))};var x=(0,d.observer)((function(e){var t=e.model,r=e.onSelect,n=e.assemblyName,o=e.style,u=e.fetchResults,d=e.onChange,w=e.value,O=e.showHelp,P=void 0===O||O,x=e.minWidth,C=void 0===x?200:x,j=e.TextFieldProps,M=void 0===j?{}:j,T=(0,p.getSession)(t),R=T.assemblyManager,D=(0,f.useState)(!1),A=(0,c.default)(D,2),I=A[0],_=A[1],N=(0,f.useState)(!0),B=(0,c.default)(N,2),F=B[0],L=B[1],W=(0,f.useState)(!1),z=(0,c.default)(W,2),H=z[0],V=z[1],q=(0,f.useState)(""),G=(0,c.default)(q,2),U=G[0],J=G[1],X=(0,f.useState)(""),Y=(0,c.default)(X,2),K=Y[0],$=Y[1],Z=(0,f.useState)(),Q=(0,c.default)(Z,2),ee=Q[0],te=Q[1],re=(0,p.useDebounce)(U,300),ne=t.coarseVisibleLocStrings,ae=t.hasDisplayedRegions,oe=n?R.get(n):void 0,ie=(null==oe?void 0:oe.regions)||[],ue=(0,f.useMemo)((function(){return ie.map((function(e){return{result:new m.RefSequenceResult({refName:e.refName,label:e.refName,matchedAttribute:"refName"})}}))}),[ie]);(0,f.useEffect)((function(){var e=!0;return(0,l.default)(a.default.mark((function t(){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,""!==re&&n){t.next=3;break}return t.abrupt("return");case 3:return L(!1),t.next=6,u(re);case 6:r=t.sent,e&&(te((0,b.dedupe)(r,(function(e){return e.getDisplayString()})).map((function(e){return{result:e}}))),L(!0)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),e&&T.notify("".concat(t.t0),"error");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))(),function(){e=!1}}),[n,u,re,T,t]);var le=ne||w||"",ce=Math.min(Math.max((0,p.measureText)(le,16)+45,C),550);return f.default.createElement(f.default.Fragment,null,f.default.createElement(v.default,{id:"refNameAutocomplete-".concat(t.id),"data-testid":"autocomplete",disableListWrap:!0,disableClearable:!0,PopperComponent:S,disabled:!n,freeSolo:!0,includeInputInList:!0,selectOnFocus:!0,style:k(k({},o),{},{width:ce}),value:le,loading:!F,inputValue:K,onInputChange:function(e,t){$(t),null==d||d(t)},loadingText:"loading results",open:I,onOpen:function(){return _(!0)},onClose:function(){_(!1),L(!0),ae&&(J(""),te(void 0))},onChange:function(e,t){t&&n&&("string"==typeof t?null==r||r(new m.default({label:t})):null==r||r(t.result),$(le))},options:null!=ee&&ee.length?ee:ue,getOptionDisabled:function(e){return"limitOption"===(null==e?void 0:e.group)},filterOptions:function(e,t){var r=function(e,t){return e.filter((function(e){var r=e.result;return r.getLabel().toLowerCase().includes(t)||r.matchedObject}))}(e,t.inputValue.toLocaleLowerCase());return[].concat((0,i.default)(r.slice(0,100)),(0,i.default)(r.length>100?[{group:"limitOption",result:new m.default({label:"keep typing for more results"})}]:[]))},renderInput:function(e){var t=M.helperText,r=M.InputProps,n=void 0===r?{}:r;return f.default.createElement(g.TextField,(0,s.default)({onBlur:function(){$(le)}},e,M,{helperText:t,InputProps:k(k(k({},e.InputProps),n),{},{endAdornment:f.default.createElement(f.default.Fragment,null,0===ie.length?f.default.createElement(g.CircularProgress,{color:"inherit",size:20}):f.default.createElement(g.InputAdornment,{position:"end",style:{marginRight:7}},f.default.createElement(h.default,null),P?f.default.createElement(g.IconButton,{onClick:function(){return V(!0)}},f.default.createElement(y.default,null)):null),e.InputProps.endAdornment)}),placeholder:"Search for location",onChange:function(e){J(e.target.value)}}))},renderOption:function(e){var t=e.result,r=t.getRenderingComponent();return r&&f.default.isValidElement(r)?r:f.default.createElement(g.Typography,{noWrap:!0},t.getDisplayString())},getOptionLabel:function(e){return("string"==typeof e?e:e.result.getLabel())||""}}),H?f.default.createElement(f.Suspense,{fallback:f.default.createElement("div",null)},f.default.createElement(E,{handleClose:function(){return V(!1)}})):null)}));t.default=x},529:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RefSequenceResult=void 0;var a=n(r(30)),o=n(r(25)),i=n(r(26)),u=n(r(24)),l=n(r(15)),c=n(r(16)),s=n(r(10));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var d=function(){function e(t){(0,l.default)(this,e),(0,s.default)(this,"label",void 0),(0,s.default)(this,"renderingComponent",void 0),(0,s.default)(this,"displayString",void 0),(0,s.default)(this,"matchedAttribute",void 0),(0,s.default)(this,"matchedObject",void 0),(0,s.default)(this,"textSearchAdapter",void 0),(0,s.default)(this,"relevance",void 0),(0,s.default)(this,"trackId",void 0),(0,s.default)(this,"score",void 0),(0,s.default)(this,"locString",void 0),this.label=t.label,this.locString=t.locString,this.renderingComponent=t.renderingComponent,this.displayString=t.displayString,this.matchedAttribute=t.matchedAttribute,this.matchedObject=t.matchedObject,this.textSearchAdapter=t.textSearchAdapter,this.relevance=t.relevance,this.trackId=t.trackId,this.score=t.score||1}return(0,c.default)(e,[{key:"getLabel",value:function(){return this.label}},{key:"getDisplayString",value:function(){return this.displayString||this.label}},{key:"getRenderingComponent",value:function(){return this.renderingComponent}},{key:"getTrackId",value:function(){return this.trackId}},{key:"getScore",value:function(){return this.score}},{key:"updateScore",value:function(e){return this.score=e,this.score}},{key:"getId",value:function(){return"".concat(this.getLabel(),"-").concat(this.getLocation(),"-").concat(this.getTrackId())}},{key:"getLocation",value:function(){return this.locString||this.label}}]),e}();t.default=d;var p=function(e){(0,o.default)(r,e);var t=f(r);function r(e){var n,o;return(0,l.default)(this,r),o=t.call(this,e),(0,s.default)((0,a.default)(o),"refName",void 0),o.refName=null!==(n=e.refName)&&void 0!==n?n:"",o}return(0,c.default)(r,[{key:"getLocation",value:function(){return this.refName}}]),r}(d);t.RefSequenceResult=p},530:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.dedupe=l,t.fetchResults=function(e){return c.apply(this,arguments)};var a=n(r(19)),o=n(r(33)),i=n(r(20)),u=n(r(529));function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e,r,n){return r===n.findIndex((function(r){return t(r)===t(e)}))}))}function c(){return(c=(0,i.default)(a.default.mark((function e(t){var r,n,i,c,s,f,d,p,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryString,i=t.searchType,c=t.searchScope,s=t.rankSearchResults,f=t.textSearchManager,d=t.assembly,f||console.warn("No text search manager"),e.next=4,null==f?void 0:f.search({queryString:n,searchType:i},c,s);case 4:return p=e.sent,m=null==d||null===(r=d.allRefNames)||void 0===r?void 0:r.filter((function(e){return e.toLowerCase().startsWith(n.toLowerCase())})).slice(0,10).map((function(e){return new u.default({label:e})})),e.abrupt("return",l([].concat((0,o.default)(m||[]),(0,o.default)(p||[])),(function(e){return e.getId()})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},531:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(33)),i=n(r(15)),u=n(r(16)),l=n(r(10)),c=r(116);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){function e(t){(0,i.default)(this,e),(0,l.default)(this,"variant",void 0),(0,l.default)(this,"parser",void 0),(0,l.default)(this,"data",void 0),(0,l.default)(this,"_id",void 0),this.variant=t.variant,this.parser=t.parser,this.data=this.dataFromVariant(this.variant),this._id=t.id}return(0,u.default)(e,[{key:"get",value:function(e){return"samples"===e?this.variant.SAMPLES:this.data[e]||this.variant[e]}},{key:"set",value:function(){}},{key:"parent",value:function(){}},{key:"children",value:function(){}},{key:"tags",value:function(){return[].concat((0,o.default)(Object.keys(this.data)),(0,o.default)(Object.keys(this.variant)),["samples"])}},{key:"id",value:function(){return this._id}},{key:"dataFromVariant",value:function(e){var t=e.REF,r=e.ALT,n=e.POS,o=e.CHROM,i=e.INFO,u=e.ID,l=n-1,c=this._getSOTermAndDescription(t,r),s=(0,a.default)(c,2),f=s[0],d=s[1],p=null==r?void 0:r.some((function(e){return"<TRA>"===e}));return{refName:o,start:l,end:(null==r?void 0:r.some((function(e){return-1!==e.indexOf("<")})))&&i.END&&!p?+i.END[0]:l+t.length,description:d,type:f,name:null==u?void 0:u.join(","),aliases:u&&u.length>1?e.ID.slice(1):void 0}}},{key:"_getSOTermAndDescription",value:function(e,t){var r=this;if(!t||t===[])return["remark","no alternative alleles"];var n=new Set,i=new Set;if(t.forEach((function(t){var o=r._getSOAndDescFromAltDefs(e,t),u=(0,a.default)(o,2),l=u[0],c=u[1];if(!l){var s=r._getSOAndDescByExamination(e,t),f=(0,a.default)(s,2);l=f[0],c=f[1]}l&&c&&(n.add(l),i.add(c))})),i.size>1){var u=new Set((0,o.default)(i).map((function(e){var t=e.split("->");return t[1]?t[0]:e}))),l=(0,o.default)(u).map((function(e){var t=(0,o.default)(i).map((function(t){var r=t.split("-> ");return r[1]&&r[0]===e?r[1]:""})).filter((function(e){return!!e}));return t.length?e+"-> "+t.join(","):(0,o.default)(i).join(",")}));i=new Set(l)}return n.size?[(0,o.default)(n).join(","),(0,o.default)(i).join(",")]:[void 0,void 0]}},{key:"_getSOAndDescFromAltDefs",value:function(t,r){if("string"==typeof r&&!r.startsWith("<"))return[void 0,void 0];var n=e._altTypeToSO[r];if(!n&&this.parser.getMetadata("ALT",r)&&(n="sequence_variant"),n)return[n,r];var a=r.split(":");return a.length>1?this._getSOAndDescFromAltDefs(t,"<".concat(a.slice(0,a.length-1).join(":"),">")):[void 0,void 0]}},{key:"_getSOAndDescByExamination",value:function(e,t){return(0,c.parseBreakend)(t)?["breakend",t]:1===e.length&&1===t.length?["SNV",this._makeDescriptionString("SNV",e,t)]:"<INS>"===t?["insertion",t]:"<DEL>"===t||"<INV>"===t?["deletion",t]:"<TRA>"===t?["translocation",t]:t.includes("<")?["sv",t]:e.length===t.length?e.split("").reverse().join("")===t?["inversion",this._makeDescriptionString("inversion",e,t)]:["substitution",this._makeDescriptionString("substitution",e,t)]:e.length<=t.length?["insertion",this._makeDescriptionString("insertion",e,t)]:e.length>t.length?["deletion",this._makeDescriptionString("deletion",e,t)]:["indel",this._makeDescriptionString("indel",e,t)]}},{key:"_makeDescriptionString",value:function(e,t,r){return"".concat(e," ").concat(t," -> ").concat(r)}},{key:"toJSON",value:function(){return f(f(f({uniqueId:this._id},this.variant),this.data),{},{samples:this.variant.SAMPLES})}}]),e}();t.default=d,(0,l.default)(d,"_altTypeToSO",{DEL:"deletion",INS:"insertion",DUP:"duplication",INV:"inversion",INVDUP:"inverted duplication",CNV:"copy_number_variation",TRA:"translocation","DUP:TANDEM":"tandem_duplication",NON_REF:"sequence_variant","*":"sequence_variant"})},532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(29),a=r(17),o=(0,n.ConfigurationSchema)("WiggleRenderer",{color:{type:"color",description:"the color of track, overrides posColor and negColor",defaultValue:"#f0f"},posColor:{type:"color",description:"the color to use when the score is positive",defaultValue:"blue"},negColor:{type:"color",description:"the color to use when the score is negative",defaultValue:"red"},highlightColor:{type:"color",description:"the color of highlights over the wiggle track",defaultValue:"rgba(255,255,0,0.5)"},clipColor:{type:"color",description:"the color of the clipping marker",defaultValue:"red"},renderType:{type:"stringEnum",model:a.types.enumeration("Rendering type",["xyplot","density","line"]),description:"The type of rendering for wiggle data to use",defaultValue:"xyplot"},filled:{type:"boolean",description:"fill in histogram",defaultValue:!0},bicolorPivot:{type:"stringEnum",model:a.types.enumeration("Scale type",["numeric","mean","z_score","none"]),description:"type of bicolor pivot",defaultValue:"numeric"},bicolorPivotValue:{type:"number",defaultValue:0,description:"value to use for bicolor pivot"},summaryScoreMode:{type:"stringEnum",model:a.types.enumeration("Score type",["max","min","avg","whiskers"]),description:"choose whether to use max/min/average or whiskers which combines all three into the same rendering",defaultValue:"whiskers"},displayCrossHatches:{type:"boolean",description:"choose to draw cross hatches (sideways lines)",defaultValue:!1}},{explicitlyTyped:!0});t.default=o},65:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNSUPPORTED=t.UNKNOWN=void 0,t.generateUnknownTrackConf=function(e,t,r){var n={type:"FeatureTrack",name:"".concat(e," (Unknown)"),description:'Could not determine track type for "'.concat(t,'"'),category:r,trackId:""};return n.trackId=(0,a.objectHash)(n),n},t.generateUnsupportedTrackConf=function(e,t,r){var n={type:"FeatureTrack",name:"".concat(e," (Unsupported)"),description:'Support not yet implemented for "'.concat(t,'"'),category:r,trackId:""};return n.trackId=(0,a.objectHash)(n),n},t.getBlob=function(e){return u[e]},t.getBlobMap=function(){return u},t.getFileName=function(e){var t="uri"in e?e.uri:void 0,r="localPath"in e?e.localPath:void 0,n="blobId"in e?e:void 0;return(null==n?void 0:n.name)||(null==t?void 0:t.slice(t.lastIndexOf("/")+1))||(null==r?void 0:r.slice(r.lastIndexOf("/")+1))||""},t.getParentRenderProps=function(e){for(var t=(0,n.getParent)(e);!(0,n.isRoot)(t);t=(0,n.getParent)(t))if("renderProps"in t)return t.renderProps();return{}},t.getRpcSessionId=function(e){for(var t,r=e;!(0,n.isRoot)(r);r=(0,n.getParent)(r))"rpcSessionId"in r&&(t=r.rpcSessionId);if(!t)throw new Error("getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute");return t},t.getTrackAssemblyNames=function(e){var t=e.configuration,r=(0,o.readConfObject)(t,"assemblyNames");if(!r){var a=(0,n.getParent)(e.configuration);if("sequence"in a)return[(0,o.readConfObject)(a,"name")]}return r},t.guessAdapter=function(e,t,r,a){if(a){var o=(0,n.getEnv)(a).pluginManager.evaluateExtensionPoint("Core-guessAdapterForLocation",(function(e,t,r){}))(e,t,r);if(o)return o}return{type:i}},t.guessTrackType=function(e,t){if(t){var r=(0,a.getSession)(t),o=(0,n.getEnv)(r).pluginManager.evaluateExtensionPoint("Core-guessTrackTypeForLocation",(function(e){}))(e);if(o)return o}return"FeatureTrack"},t.makeIndex=function(e,t){if("uri"in e)return{uri:e.uri+t,locationType:"UriLocation"};if("localPath"in e)return{localPath:e.localPath+t,locationType:"LocalPathLocation"};return e},t.makeIndexType=function(e,t,r){return null!=e&&e.toUpperCase().endsWith(t)?t:r},t.setBlobMap=function(e){u=e},t.storeBlobLocation=function(e){if(e&&"blob"in e){var t="b".concat(+Date.now());return u[t]=e.blob,{name:null==e?void 0:e.blob.name,blobId:t,locationType:"BlobLocation"}}return e};var n=r(17),a=r(32),o=r(29);var i="UNKNOWN";t.UNKNOWN=i;t.UNSUPPORTED="UNSUPPORTED";var u={}},70:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UriLocationRaw=t.UriLocation=t.Region=t.PropTypes=t.NoAssemblyRegion=t.LocalPathLocation=t.FileLocation=t.ElementId=t.BlobLocation=void 0;var a=n(r(10)),o=n(r(45)),i=n(r(298)),u=r(17),l=n(r(0)),c=r(14),s=["baseUri"],f=["locationType"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=u.types.optional(u.types.identifier,i.default.generate);t.ElementId=m;var g={Region:l.default.shape({refName:l.default.string.isRequired,start:l.default.number.isRequired,end:l.default.number.isRequired}),ConfigSchema:c.PropTypes.objectOrObservableObject,Feature:l.default.shape({get:l.default.func.isRequired,id:l.default.func.isRequired})};t.PropTypes=g;var h=u.types.model("NoAssemblyRegion",{refName:u.types.string,start:u.types.number,end:u.types.number,reversed:u.types.optional(u.types.boolean,!1)}).actions((function(e){return{setRefName:function(t){e.refName=t}}}));t.NoAssemblyRegion=h;var v=u.types.compose("Region",h,u.types.model({assemblyName:u.types.string}));t.Region=v;var y=u.types.model("LocalPathLocation",{locationType:u.types.literal("LocalPathLocation"),localPath:u.types.string});t.LocalPathLocation=y;var b=u.types.model("BlobLocation",{locationType:u.types.literal("BlobLocation"),name:u.types.string,blobId:u.types.string});t.BlobLocation=b;var w=u.types.model("UriLocation",{locationType:u.types.literal("UriLocation"),uri:u.types.string,baseUri:u.types.maybe(u.types.string),internetAccountId:u.types.maybe(u.types.string),internetAccountPreAuthorization:u.types.maybe(u.types.model("InternetAccountPreAuthorization",{internetAccountType:u.types.string,authInfo:u.types.frozen()}))});t.UriLocationRaw=w;var k=u.types.snapshotProcessor(w,{postProcessor:function(e){var t=e.baseUri,r=(0,o.default)(e,s);return t?e:r}});t.UriLocation=k;var O=u.types.snapshotProcessor(u.types.union(y,k,b),{preProcessor:function(e){if(e){var t=e.locationType,r=(0,o.default)(e,f);if(!t){var n=r.uri,a=r.localPath,i=r.blob,u="";return void 0!==n?u="UriLocation":void 0!==a?u="LocalPathLocation":void 0!==i&&(u="BlobLocation"),p(p({},r),{},{locationType:u})}return e}}});t.FileLocation=O},8:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r(1),a=r.n(n),o=r(2043),i=r(4);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,i=f(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"render",value:function(){var e=this.props,t=e.id,r=e.assembly,n=e.tracks,i=e.defaultSession,u=e.aggregateTextSearchAdapters,l=e.configuration,c=Object(o.createViewState)({assembly:r,tracks:n,defaultSession:i,aggregateTextSearchAdapters:u,configuration:l});return a.a.createElement("div",{id:t},a.a.createElement(o.JBrowseCircularGenomeView,{viewState:c}))}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component);m.defaultProps=i.b,m.propTypes=i.c},83:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0});var o={LogoFull:!0,Logomark:!0,App:!0,ReturnToImportFormDialog:!0,ErrorMessage:!0,AssemblySelector:!0,FileSelector:!0,PrerenderedCanvas:!0,ResizeHandle:!0,EditableTypography:!0,FactoryResetDialog:!0,Tooltip:!0,FatalErrorDialog:!0,Menu:!0,CascadingMenu:!0,SanitizedHTML:!0};Object.defineProperty(t,"App",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"AssemblySelector",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"CascadingMenu",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"EditableTypography",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"ErrorMessage",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"FactoryResetDialog",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"FatalErrorDialog",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"FileSelector",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"LogoFull",{enumerable:!0,get:function(){return u.LogoFull}}),Object.defineProperty(t,"Logomark",{enumerable:!0,get:function(){return u.Logomark}}),Object.defineProperty(t,"Menu",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"PrerenderedCanvas",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ResizeHandle",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"ReturnToImportFormDialog",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"SanitizedHTML",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return v.default}});var i=r(2047);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var u=r(907),l=n(r(2048)),c=n(r(2056)),s=n(r(517)),f=n(r(518)),d=n(r(912)),p=n(r(2060)),m=n(r(908)),g=n(r(516)),h=n(r(913)),v=n(r(2061)),y=n(r(2062)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(204));Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var w=n(r(914)),k=n(r(915));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}},89:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSequenceAdapter=t.BaseFeatureDataAdapter=t.BaseAdapter=void 0,t.isFeatureAdapter=function(e){return"getFeatures"in e},t.isRefNameAliasAdapter=function(e){return"getRefNameAliases"in e},t.isRegionsAdapter=function(e){return"getRegions"in e},t.isSequenceAdapter=function(e){return"getRegions"in e&&"getFeatures"in e},t.isTextSearchAdapter=function(e){return"searchIndex"in e};var a=n(r(19)),o=n(r(33)),i=n(r(20)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(16)),f=n(r(15)),d=n(r(10)),p=r(142),m=r(51),g=r(17),h=r(115),v=r(32),y=r(29),b=r(921),w=n(r(922));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var E=(0,s.default)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.ConfigurationSchema)("empty",{}).create(),r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if((0,f.default)(this,e),this.config=t,this.getSubAdapter=r,this.pluginManager=n,(0,d.default)(this,"id",void 0),"undefined"==typeof jest){var a=(0,g.isStateTreeNode)(t)?(0,g.getSnapshot)(t):t;this.id="".concat((0,w.default)(a))}else this.id="test"}));t.BaseAdapter=E,(0,d.default)(E,"capabilities",[]);var S=function(e){(0,u.default)(w,e);var t,r,n,l,c,d,g=P(w);function w(){return(0,f.default)(this,w),g.apply(this,arguments)}return(0,s.default)(w,[{key:"getConf",value:function(e){return(0,y.readConfObject)(this.config,e)}},{key:"getHeader",value:(d=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"getMetadata",value:(c=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"getFeaturesInRegion",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,h.ObservableCreate)(function(){var n=(0,i.default)(a.default.mark((function n(o){var i;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.hasDataForRefName(e.refName,r);case 2:i=n.sent,(0,v.checkAbortSignal)(r.signal),i?t.getFeatures(e,r).subscribe(o):o.complete();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"getFeaturesInMultipleRegions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.merge.apply(void 0,(0,o.default)(e.map((function(e){return t.getFeaturesInRegion(e,r)}))))}},{key:"hasDataForRefName",value:(l=(0,i.default)(a.default.mark((function e(t){var r,n,o=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.getRefNames(r);case 3:return n=e.sent,e.abrupt("return",n.includes(t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getRegionStats",value:(n=(0,i.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getFeatures(t,r),e.abrupt("return",(0,b.scoresToStats)(t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getMultiRegionStats",value:(r=(0,i.default)(a.default.mark((function e(){var t,r,n,o,i,u,l,c,s,f=this,d=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:[],r=d.length>1?d[1]:void 0,t.length){e.next=4;break}return e.abrupt("return",(0,b.blankStats)());case 4:return e.next=6,Promise.all(t.map((function(e){return f.getRegionStats(e,r)})));case 6:return n=e.sent,o=n.map((function(e){return e.scoreMax})).reduce((function(e,t){return Math.max(e,t)})),i=n.map((function(e){return e.scoreMin})).reduce((function(e,t){return Math.min(e,t)})),u=n.reduce((function(e,t){return e+t.scoreSum}),0),l=n.reduce((function(e,t){return e+t.scoreSumSquares}),0),c=n.reduce((function(e,t){return e+t.featureCount}),0),s=n.reduce((function(e,t){return e+t.basesCovered}),0),e.abrupt("return",(0,b.rectifyStats)({scoreMin:i,scoreMax:o,featureCount:c,basesCovered:s,scoreSumSquares:l,scoreSum:u}));case 14:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"estimateRegionsStats",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,u,l,c=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}throw new Error("No regions to estimate stats for");case 2:return n=t[0],o=+Date.now(),u=function(){var e=(0,i.default)(a.default.mark((function e(t,o){var i,u,s,f,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.start,u=n.end,s=.75*i+.25*u,f=O(O({},n),{},{start:Math.max(0,Math.round(s-t/2)),end:Math.min(Math.round(s+t/2),u)}),e.next=5,c.getFeatures(f,r).pipe((0,m.toArray)()).toPromise();case 5:return d=e.sent,e.abrupt("return",l(t,{featureDensity:d.length/t},d.length,o));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.default)(a.default.mark((function e(t,r,i,l){var c,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.end-n.start,!(i>=70||2*t>c)){e.next=5;break}return e.abrupt("return",r);case 5:if(!(l<=5e3)){e.next=12;break}return s=+Date.now(),l+=s-o,o=s,e.abrupt("return",u(2*t,l));case 12:return console.warn("Stats estimation reached timeout, or didn't get enough features"),e.abrupt("return",{featureDensity:1/0});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),e.abrupt("return",u(1e3,0));case 7:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),w}(E);t.BaseFeatureDataAdapter=S;var x=function(e){(0,u.default)(n,e);var t,r=P(n);function n(){return(0,f.default)(this,n),r.apply(this,arguments)}return(0,s.default)(n,[{key:"estimateRegionsStats",value:(t=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{featureDensity:0});case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),n}(S);t.BaseSequenceAdapter=x},904:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationReference=function(e){return u.types.union(u.types.reference(e),e)},t.ConfigurationSchema=function(e,t,r){var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("first arg must be string name of the model that this config schema goes with");var n=t,a=r;r.baseConfiguration&&r.baseConfiguration.jbrowseSchemaDefinition&&(n=d(d({},r.baseConfiguration.jbrowseSchemaDefinition),n),delete(a=d(d({},r.baseConfiguration.jbrowseSchemaOptions||{}),r)).baseConfiguration);return{schemaDefinition:n,options:a}}(e,t,r),f=n.schemaDefinition,g=n.options,h=function(e,t,r){var n,f={};r.explicitlyTyped&&(f.type=u.types.optional(u.types.literal(e),e));if(r.explicitIdentifier&&r.implicitIdentifier)throw new Error("Cannot have both explicit and implicit identifiers in ".concat(e));r.explicitIdentifier?"string"==typeof r.explicitIdentifier?(f[r.explicitIdentifier]=u.types.identifier,n=r.explicitIdentifier):(f.id=u.types.identifier,n="id"):r.implicitIdentifier&&("string"==typeof r.implicitIdentifier?(f[r.implicitIdentifier]=l.ElementId,n=r.implicitIdentifier):(f.id=l.ElementId,n="id"));var g={isJBrowseConfigurationSchema:!0,jbrowseSchema:{modelName:e,definition:t,options:r}};Object.entries(t).forEach((function(t){var r=(0,a.default)(t,2),n=r[0],o=r[1];if((0,u.isType)(o)&&(0,u.isLateType)(o)||(0,s.isConfigurationSchemaType)(o))f[n]=o;else if("string"==typeof o||"number"==typeof o)g[n]=o;else{if("object"!==(0,i.default)(o))throw new Error('invalid configuration schema definition, "'.concat(n,'" must be either a valid configuration slot definition, a constant, or a nested configuration schema'));if(!o.type)throw new Error("no type set for config slot ".concat(e,".").concat(n));try{f[n]=(0,c.default)(n,o)}catch(t){throw new Error("invalid config slot definition for ".concat(e,".").concat(n,": ").concat(t))}}}));var h=u.types.model("".concat(e,"ConfigurationSchema"),f).actions((function(e){return{setSubschema:function(t,r){if(!(0,s.isConfigurationSchemaType)(f[t]))throw new Error("".concat(t," is not a subschema, cannot replace"));var n=(0,u.isStateTreeNode)(r)?r:f[t].create(r);return e[t]=n,n}}}));Object.keys(g).length&&(h=h.volatile((function(){return g})));r.actions&&(h=h.actions(r.actions));r.views&&(h=h.views(r.views));r.extend&&(h=h.extend(r.extend));var v=n?(0,o.default)({},n,"placeholderId"):{},y=r.explicitlyTyped?d({type:e},v):v,b=(0,u.getSnapshot)(h.create(y));h=h.postProcessSnapshot((function(e){for(var t={},r=!0,n=0,o=Object.entries(e);n<o.length;n++){var u=(0,a.default)(o[n],2),l=u[0],c=u[1];r&&("object"===(0,i.default)(b[l])&&"object"===(0,i.default)(c)?JSON.stringify(b[l])!==JSON.stringify(c)&&(r=!1):b[l]!==c&&(r=!1)),void 0===c||void 0!==g[l]||p(c)||m(c)||(t[l]=c)}return r?{}:t})),r.preProcessSnapshot&&(h=h.preProcessSnapshot(r.preProcessSnapshot));return u.types.optional(h,y)}(e,f,g);return h.isJBrowseConfigurationSchema=!0,h.jbrowseSchemaDefinition=f,h.jbrowseSchemaOptions=g,h};var a=n(r(12)),o=n(r(10)),i=n(r(11)),u=r(17),l=r(70),c=n(r(2046)),s=r(906);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){return"object"===(0,i.default)(e)&&!Array.isArray(e)&&null!==e&&0===Object.keys(e).length}function m(e){return Array.isArray(e)&&0===e.length}},905:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new a.default.Jexl;return e.addFunction("get",(function(e,t){return e.get(t)})),e.addFunction("parent",(function(e){return e.parent()})),e.addFunction("id",(function(e){return e.id()})),e.addFunction("cast",(function(e){return e})),e.addFunction("log",(function(e){return console.log(e),e})),e.addFunction("max",Math.max),e.addFunction("min",Math.min),e.addFunction("sqrt",Math.sqrt),e.addFunction("ceil",Math.ceil),e.addFunction("floor",Math.floor),e.addFunction("round",Math.round),e.addFunction("abs",Math.abs),e.addFunction("log10",Math.log10),e.addFunction("parseInt",Number.parseInt),e.addFunction("parseFloat",Number.parseFloat),e.addFunction("split",(function(e,t){return e.split(t)})),e.addFunction("charAt",(function(e,t){return e.charAt(t)})),e.addFunction("charCodeAt",(function(e,t){return e.charCodeAt(t)})),e.addFunction("codePointAt",(function(e,t){return e.codePointAt(t)})),e.addFunction("startsWith",(function(e,t,r){return e.startsWith(t,r)})),e.addFunction("endsWith",(function(e,t,r){return e.endsWith(t,r)})),e.addFunction("padEnd",(function(e,t,r){return e.padEnd(t,r)})),e.addFunction("padStart",(function(e,t,r){return e.padStart(t,r)})),e.addFunction("repeat",(function(e,t){return e.repeat(t)})),e.addFunction("replace",(function(e,t,r){return e.replace(t,r)})),e.addFunction("replaceAll",(function(e,t,r){return e.replaceAll(t,r)})),e.addFunction("slice",(function(e,t,r){return e.slice(t,r)})),e.addFunction("startsWith",(function(e,t,r){return e.startsWith(t,r)})),e.addFunction("substring",(function(e,t,r){return e.substring(t,r)})),e.addFunction("toLowerCase",(function(e){return e.toLowerCase()})),e.addFunction("toUpperCase",(function(e){return e.toUpperCase()})),e.addFunction("trim",(function(e){return e.trim()})),e.addFunction("trimEnd",(function(e){return e.trimEnd()})),e.addFunction("trimStart",(function(e){return e.trimStart()})),e.addFunction("getTag",(function(e,t){var r=e.get("tags");return r?r[t]:e.get(t)})),e.addBinaryOp("&",15,(function(e,t){return e&t})),e};var a=n(r(668))},906:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new TypeError("must provide a model object");var n=e,a=n.configuration;if(f(a))return l(a,t,r);throw new TypeError("cannot getConf on this model, it has no configuration")},t.getTypeNamesFromExplicitlyTypedUnion=function e(t){if((0,i.isType)(t)&&(t=(0,u.resolveLateType)(t),(0,i.isUnionType)(t))){var r=[];return(0,u.getUnionSubTypes)(t).forEach((function(t){t=(0,u.resolveLateType)(t);var n=e(t);n.length||(n=[(0,u.getDefaultValue)(t).type]);if(!n[0])throw new Error("invalid config schema type ".concat(t));r.push.apply(r,(0,o.default)(n))})),r}return[]},t.isBareConfigurationSchemaType=c,t.isConfigurationModel=f,t.isConfigurationSchemaType=s,t.isConfigurationSlotType=function(e){return"object"===(0,a.default)(e)&&null!==e&&"isJBrowseConfigurationSlot"in e},t.readConfObject=l;var a=n(r(11)),o=n(r(33)),i=r(17),u=r(161);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new TypeError("must provide conf object to read");if(!t)return JSON.parse(JSON.stringify((0,i.getSnapshot)(e)));if("string"==typeof t){var n=e[t];if(!n&&(0,i.isStateTreeNode)(e)&&(0,i.isMapType)((0,i.getType)(e))&&(n=e.get(t)),!n)return;if(n.expr){var a=n.expr.evalSync(r);return(0,i.isStateTreeNode)(a)?JSON.parse(JSON.stringify((0,i.getSnapshot)(a))):a}return(0,i.isStateTreeNode)(n)?JSON.parse(JSON.stringify((0,i.getSnapshot)(n))):n}var o=t[0];if(t.length>1){var u=t.slice(1),c=e[o];return!c&&(0,i.isStateTreeNode)(e)&&(0,i.isMapType)((0,i.getType)(e))&&(c=e.get(o)),c?l(c,u,r):void 0}return l(e,o,r)}function c(e){if((0,i.isType)(e)){if((0,i.isModelType)(e)&&("isJBrowseConfigurationSchema"in e||e.name.includes("ConfigurationSchema")))return!0;if((0,i.isLateType)(e))return!0}return!1}function s(e){return!!(0,i.isType)(e)&&(!!c(e)||((0,i.isUnionType)(e)?(0,u.getUnionSubTypes)(e).every((function(e){return s(e)||"undefined"===e.name})):!(!(0,i.isOptionalType)(e)||!s((0,u.getSubType)(e)))||(!(!(0,i.isArrayType)(e)||!s((0,u.getSubType)(e)))||!(!(0,i.isMapType)(e)||!s((0,u.getSubType)(e))))))}function f(e){return(0,i.isStateTreeNode)(e)&&s((0,i.getType)(e))}},907:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.LogoFull=function(e){var t=e.variant;return a.default.createElement("svg",{viewBox:"0 0 641 175"},a.default.createElement(u,{variant:t}),a.default.createElement(i,{variant:t}))},t.Logomark=function(e){var t=e.variant;return a.default.createElement("svg",{viewBox:"0 0 175 175"},a.default.createElement(i,{variant:t}))};var a=n(r(1));function o(e){return"black"===e?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:"white"===e?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function i(e){var t=o(e.variant);return a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),a.default.createElement("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),a.default.createElement("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),a.default.createElement("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),a.default.createElement("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"}))}function u(e){var t=o(e.variant);return a.default.createElement("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight}},a.default.createElement("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),a.default.createElement("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),a.default.createElement("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),a.default.createElement("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),a.default.createElement("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),a.default.createElement("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),a.default.createElement("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"}))}},908:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36)),i=n(r(12)),u=n(r(45)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(34),s=n(r(21)),f=["onDrag","vertical","flexbox","className"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,c.makeStyles)({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});var m=function(e){var t,r=e.onDrag,n=e.vertical,a=void 0!==n&&n,c=e.flexbox,d=void 0!==c&&c,m=e.className,g=(0,u.default)(e,f),h=(0,l.useState)(!1),v=(0,i.default)(h,2),y=v[0],b=v[1],w=(0,l.useRef)(0),k=p();return(0,l.useEffect)((function(){function e(e){e.preventDefault();var t=a?e.clientX:e.clientY,n=t-w.current;n&&(r(n),w.current=t)}function t(){b(!1)}return y?(window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",t,!0),function(){window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",t,!0)}):function(){}}),[y,r,a]),t=d?a?k.flexbox_verticalHandle:k.flexbox_horizontalHandle:a?k.verticalHandle:k.horizontalHandle,l.default.createElement("div",(0,o.default)({"data-resizer":"true",onMouseDown:function(e){e.preventDefault(),w.current=a?e.clientX:e.clientY,b(!0)},role:"presentation",className:(0,s.default)(t,m)},g))};t.default=m},909:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.abortBreakPoint=function(e){return b.apply(this,arguments)},t.checkAbortSignal=v,t.isAbortException=function(e){return e instanceof Error&&("AbortError"===e.name||"ERR_ABORTED"===e.code||!!e.message.match(/\b(aborted|AbortError)\b/i))},t.makeAbortError=w,t.observeAbortSignal=function(e){if(!e)return m.Observable.create();return(0,m.fromEvent)(e,"abort")};var a=n(r(19)),o=n(r(20)),i=n(r(16)),u=n(r(15)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(176)),p=n(r(10)),m=r(142);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,c.default)(r,e);var t=g(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,l.default)(e),"code",void 0),e}return(0,i.default)(r)}((0,d.default)(Error));function v(e){if(e){if(!(e instanceof AbortSignal))throw new TypeError("must pass an AbortSignal");if(e.aborted)throw w()}}function y(e){return new Promise((function(t){return setTimeout(t,e)}))}function b(){return(b=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(1);case 2:v(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){if("undefined"!=typeof DOMException)return new DOMException("aborted","AbortError");var e=new h("aborted");return e.code="ERR_ABORTED",e}},910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesIntersect2=function(e,t,r,n){return t>r&&e<n},t.intersection2=function(e,t,r,n){if(t>r&&e<n&&n-r&&t-e)return e>r?t<n?[e,t]:[e,n]:t<n?[r,t]:[r,n];return[]},t.isContainedWithin=function(e,t,r,n){return r<=e&&n>=t}},911:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.renderToAbstractCanvas=function(e,t,r,n){return s.apply(this,arguments)};var a=n(r(19)),o=n(r(20)),i=n(r(1)),u=r(515),l=r(181),c=r(32);function s(){return(s=(0,o.default)(a.default.mark((function e(t,r,n,o){var s,f,d,p,m,g,h,v,y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.exportSVG,f=n.highResolutionScaling,d=void 0===f?1:f,!s){e.next=37;break}if(s.rasterizeLayers){e.next=9;break}return p=new l.CanvasSequence,e.next=6,o(p);case 6:return e.abrupt("return",{canvasRecordedData:p.toJSON()});case 9:if(m=4,g=(0,u.createCanvas)(Math.ceil(t*m),r*m),h=g.getContext("2d")){e.next=14;break}throw new Error("2d canvas rendering not supported on this platform");case 14:return h.scale(m,m),e.next=17,o(h);case 17:if(e.t0=i.default,e.t1=t,e.t2=r,!("convertToBlob"in g)){e.next=30;break}return e.t4=c.blobToDataURL,e.next=24,g.convertToBlob({type:"image/png"});case 24:return e.t5=e.sent,e.next=27,(0,e.t4)(e.t5);case 27:e.t3=e.sent,e.next=31;break;case 30:e.t3=g.toDataURL();case 31:return e.t6=e.t3,e.t7={width:e.t1,height:e.t2,xlinkHref:e.t6},e.t8=e.t0.createElement.call(e.t0,"image",e.t7),e.abrupt("return",{reactElement:e.t8});case 35:e.next=48;break;case 37:if(v=(0,u.createCanvas)(Math.ceil(t*d),r*d),y=v.getContext("2d")){e.next=41;break}throw new Error("2d canvas rendering not supported on this platform");case 41:return y.scale(d,d),e.next=44,o(y);case 44:return e.next=46,(0,u.createImageBitmap)(v);case 46:return e.t9=e.sent,e.abrupt("return",{imageData:e.t9});case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},912:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(2057)).default;t.default=a},913:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(71)),o=n(r(101)),i=n(r(121)),u=n(r(122)),l=n(r(237)),c=n(r(153)),s=n(r(1));t.default=function(e){var t=e.onClose,r=e.open,n=e.onFactoryReset;function f(e){"reset"===e&&n(),t()}return s.default.createElement(o.default,{open:r,onClose:function(){return f()}},s.default.createElement(i.default,{id:"alert-dialog-title"},"Reset"),s.default.createElement(u.default,null,s.default.createElement(l.default,{id:"alert-dialog-description"},"Are you sure you want to reset? This will restore the default configuration.")),s.default.createElement(c.default,null,s.default.createElement(a.default,{onClick:function(){return f()},color:"primary"},"Cancel"),s.default.createElement(a.default,{onClick:function(){return f("reset")},color:"primary",variant:"contained"},"OK")))}},914:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36)),i=n(r(45)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(23),c=r(204),s=r(322),f=n(r(706)),d=n(r(707)),p=["onClick"],m=["title","inset","popupId"],g=["popupState","onMenuItemClick","menuItems","classes"],h=["popupState","onMenuItemClick","menuItems"],v=["onMenuItemClick","menuItems"];function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}var b=u.default.createContext({parentPopupState:null,rootPopupState:null});function w(e){var t=e.onClick,r=(0,i.default)(e,p),n=(0,u.useContext)(b).rootPopupState;if(!n)throw new Error("must be used inside a CascadingMenu");var a=(0,u.useCallback)((function(e){n.close(e),t&&t(e)}),[n,t]);return u.default.createElement(l.MenuItem,(0,o.default)({},r,{onClick:a}))}function k(e){var t=e.title,r=e.inset,n=e.popupId,a=(0,i.default)(e,m),c=u.default.useContext(b).parentPopupState,f=(0,s.usePopupState)({popupId:n,variant:"popover",parentPopupState:c});return u.default.createElement(u.default.Fragment,null,u.default.createElement(l.MenuItem,(0,o.default)({},(0,s.bindHover)(f),(0,s.bindFocus)(f)),u.default.createElement(l.ListItemText,{primary:t,inset:r}),u.default.createElement(d.default,null)),u.default.createElement(O,(0,o.default)({},a,{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:f})))}function O(e){var t=e.popupState,r=(e.onMenuItemClick,e.menuItems,e.classes,(0,i.default)(e,g)),n=(0,u.useContext)(b).rootPopupState,a=(0,u.useMemo)((function(){return{rootPopupState:n||t,parentPopupState:t}}),[n,t]);return u.default.createElement(b.Provider,{value:a},u.default.createElement(f.default,(0,o.default)({},r,(0,s.bindMenu)(t))))}function P(e){var t=e.popupState,r=(e.onMenuItemClick,e.menuItems,(0,i.default)(e,h)),n=u.default.useContext(b).rootPopupState,a=u.default.useMemo((function(){return{rootPopupState:n||t,parentPopupState:t}}),[n,t]);return u.default.createElement(b.Provider,{value:a},u.default.createElement(l.Menu,(0,o.default)({},r,(0,s.bindMenu)(t))))}function E(e){var t=e.item;return"subMenu"in t?u.default.createElement(c.MenuItemEndDecoration,{type:"subMenu"}):"checkbox"===t.type||"radio"===t.type?u.default.createElement(c.MenuItemEndDecoration,{type:t.type,checked:t.checked,disabled:t.disabled}):null}function S(e){var t=e.onMenuItemClick,r=e.menuItems,n=(0,i.default)(e,v);var a=r.some((function(e){return"icon"in e&&e.icon}));return u.default.createElement(u.default.Fragment,null,r.map((function(e,r){return"subMenu"in e?u.default.createElement(k,{key:"subMenu-".concat(e.label,"-").concat(r),popupId:"subMenu-".concat(e.label),title:e.label,inset:a,onMenuItemClick:t,menuItems:e.subMenu},u.default.createElement(S,(0,o.default)({},n,{onMenuItemClick:t,menuItems:e.subMenu}))):"divider"===e.type?u.default.createElement(l.Divider,{key:"divider-".concat(r),component:"li"}):"subHeader"===e.type?u.default.createElement(l.ListSubheader,{key:"subHeader-".concat(e.label,"-").concat(r)},e.label):u.default.createElement(w,{key:"".concat(e.label,"-").concat(r),onClick:"onClick"in e?(i=e.onClick,function(e){t(e,i)}):void 0,disabled:Boolean(e.disabled)},e.icon?u.default.createElement(l.ListItemIcon,null,u.default.createElement(e.icon,null)):null," ",u.default.createElement(l.ListItemText,{primary:e.label,secondary:e.subLabel,inset:a&&!e.icon}),u.default.createElement("div",{style:{flexGrow:1,minWidth:10}}),u.default.createElement(E,{item:e}));var i})))}var x=function(e){return u.default.createElement(P,e,u.default.createElement(S,e))};t.default=x},915:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html,r=f(t)?t:(0,i.default)(t);return(0,o.useEffect)((function(){c||(c=!0,u.default.addHook("afterSanitizeAttributes",(function(e){"A"===e.tagName&&(e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"))})))}),[]),o.default.createElement("div",{dangerouslySetInnerHTML:{__html:u.default.sanitize(r)}})},t.isHTML=f;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),i=n(r(709)),u=n(r(710));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var c=!1,s=new RegExp(["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","td","tfoot","th","thead","tr","u","ul"].map((function(e){return"<".concat(e,"\\b[^>]*>")})).join("|"),"i");function f(e){return s.test(e)}},916:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createConfigModel",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"createSessionModel",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(2065)),o=n(r(950)),i=n(r(949))},917:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAbortSignal=function(e){var t=e.abortSignalId,r=u.get(t);r||(r=new AbortController,u.set(t,r));return r.signal},t.isRemoteAbortSignal=function(e){return"object"===(0,a.default)(e)&&null!==e&&"abortSignalId"in e&&"number"==typeof e.abortSignalId},t.remoteAbort=l,t.remoteAbortRpcHandler=function(){return{signalAbort:l}},t.serializeAbortSignal=function(e,t){var r=i.get(e);r||(o+=1,i.set(e,o),r=o,e.addEventListener("abort",(function(){var r=i.get(e);void 0!==r&&t("signalAbort",r)})));return{abortSignalId:r}};var a=n(r(11)),o=0,i=new WeakMap;var u=new Map;function l(e){var t=e.signalId,r=u.get(t);r&&r.abort()}},918:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10)),f=n(r(113)),d=r(161);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,!n.stateModel)throw new Error("no stateModel defined for internet account type ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for internet account type ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var a=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(a," is not explicitlyTyped"))}return n}return(0,a.default)(r)}(f.default);t.default=m},919:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(30)),u=n(r(25)),l=n(r(26)),c=n(r(24)),s=n(r(10));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"AdapterClass",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"description",void 0),n.description=e.description,n.configSchema=e.configSchema,n.AdapterClass=e.AdapterClass,!n.AdapterClass)throw new Error("no AdapterClass defined for adapter type ".concat(n.name));return n}return(0,a.default)(r)}(n(r(113)).default);t.default=d},920:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(2071)).default;t.default=a},921:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.blankStats=function(){return{scoreMin:0,scoreMax:0,scoreMean:0,scoreStdDev:0,scoreSum:0,scoreSumSquares:0,featureCount:0,featureDensity:0,basesCovered:0}},t.calcPerBaseStats=function(e,t){var r=e.start,n=e.end,a=[],o=t.sort((function(e,t){return e.get("start")-t.get("start")})),i=r,u=0,l=0;for(;i<n;){for(;u<o.length&&i>=o[u].get("end");)u+=1;var c=o[u];c&&i>=c.get("start")&&i<c.get("end")?a[l]=c.get("score"):a[l]=0,l+=1,i+=1}return a},t.calcStdFromSums=s,t.rectifyStats=f,t.scoresToStats=function(e,t){return d.apply(this,arguments)};var a=n(r(19)),o=n(r(20)),i=n(r(10)),u=r(51);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return 0===r?0:(a?n=t/r-e*e/(r*r):(n=t-e*e/r,r>1&&(n/=r-1)),n<0?0:Math.sqrt(n))}function f(e){return c(c({},e),{},{scoreMean:(e.scoreSum||0)/(e.featureCount||e.basesCovered||1),scoreStdDev:s(e.scoreSum,e.scoreSumSquares,e.featureCount||e.basesCovered),featureDensity:(e.featureCount||1)/e.basesCovered})}function d(){return(d=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,l,c,s,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.start,o=t.end,e.next=3,r.pipe((0,u.reduce)((function(e,t){var r=t.get("score");return e.scoreMax=Math.max(e.scoreMax,t.get("summary")?t.get("maxScore"):r),e.scoreMin=Math.min(e.scoreMin,t.get("summary")?t.get("minScore"):r),e.scoreSum+=r,e.scoreSumSquares+=r*r,e.featureCount+=1,e}),{scoreMin:Number.MAX_VALUE,scoreMax:Number.MIN_VALUE,scoreSum:0,scoreSumSquares:0,featureCount:0})).toPromise();case 3:return i=e.sent,l=i.scoreMin,c=i.scoreMax,s=i.scoreSum,d=i.scoreSumSquares,p=i.featureCount,e.abrupt("return",f({scoreMax:c,scoreMin:l,scoreSum:s,scoreSumSquares:d,featureCount:p,basesCovered:o-n+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},922:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(t),i=0;i<n.length;i++){var u=n[i];if(r.length>5e3)break;"object"===(0,a.default)(t[u])&&t[u]?r+=e(t[u],r):r+="".concat(u,"-").concat(t[u],";")}return(0,o.hashCode)(r)};var a=n(r(11)),o=r(32)},923:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateUTRs=function(e,t){var r=e[0],n=e[e.length-1],o=t.findIndex((function(e){return e.end>=r.start&&e.start<=r.start})),i=t.findIndex((function(e){return e.end>=n.end&&e.start<=n.end})),l=t[i],c=t[o],s=[].concat((0,a.default)(t.slice(0,o)),[{start:c.start,end:r.start}]).map((function(e){return u(u({},e),{},{type:"five_prime_UTR"})})),f=[{start:n.end,end:l.end}].concat((0,a.default)(t.slice(i+1))).map((function(e){return u(u({},e),{},{type:"three_prime_UTR"})}));return[].concat((0,a.default)(s),(0,a.default)(f))},t.dedupe=function(e){return e.filter((function(e,t,r){return!t||l(e)!==l(r[t-1])}))},t.ellipses=function(e){return e.length>20?"".concat(e.slice(0,20),"..."):e},t.revlist=function(e,t){return e.map((function(e){return u(u({},e),{},{start:t-e.end,end:t-e.start})})).sort((function(e,t){return e.start-t.start}))},t.stitch=function(e,t){return e.map((function(e){return t.slice(e.start,e.end)})).join("")};var a=n(r(33)),o=n(r(10));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){return"".concat(e.start,"-").concat(e.end)}},924:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.offsetPx,l=e.displayedRegions,c=e.bpPerPx,s=e.width,f=e.minimumBlockWidth,d=e.interRegionPaddingWidth;if(!s)throw new Error("view has no width, cannot calculate displayed blocks");var p=new u.BlockSet,m=0,g=n,h=g+s;return l.forEach((function(e,v){var y=e.assemblyName,b=e.refName,w=e.start,k=e.end,O=e.reversed,P=m+(k-w)/c,E=(k-w)/c;if(m<h&&P>g){var S,x,C,j,M,T=(0,o.intersection2)(g,h,m,P),R=(0,a.default)(T,2),D=R[0],A=R[1];O?(S=Math.max(w,k-(A-m)*c),C=(x=k-(D-m)*c)===k,j=S===w,M=m+(k-x)/c):(C=(S=(D-m)*c+w)===w,j=(x=Math.min(k,(A-m)*c+w))===k,M=m+(S-w)/c);var I={assemblyName:y,refName:b,start:S,end:x,reversed:O,offsetPx:M,parentRegion:e,regionNumber:v,widthPx:(x-S)/c,isLeftEndOfDisplayedRegion:C,isRightEndOfDisplayedRegion:j,key:""};I.key="".concat((0,i.assembleLocString)(I),"-").concat(v).concat(O?"-reversed":""),t&&0===p.length&&C&&p.push(new u.InterRegionPaddingBlock({key:"".concat(I.key,"-beforeFirstRegion"),widthPx:-n,offsetPx:I.offsetPx+n,variant:"boundary"})),r&&E<f?p.push(new u.ElidedBlock(I)):p.push(new u.ContentBlock(I)),t&&(E>=f&&I.isRightEndOfDisplayedRegion&&v<l.length-1&&(p.push(new u.InterRegionPaddingBlock({key:"".concat(I.key,"-rightpad"),widthPx:d,offsetPx:I.offsetPx+I.widthPx})),m+=d),v===l.length-1&&I.isRightEndOfDisplayedRegion&&(M=I.offsetPx+I.widthPx,p.push(new u.InterRegionPaddingBlock({key:"".concat(I.key,"-afterLastRegion"),widthPx:s-M+n,offsetPx:M,variant:"boundary"}))))}m+=(k-w)/c})),p};var a=n(r(12)),o=r(910),i=r(32),u=r(206)},925:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"undefined"!=typeof window&&window.innerWidth||e.width,u=e.offsetPx,l=e.displayedRegions,c=e.bpPerPx,s=e.minimumBlockWidth,f=e.interRegionPaddingWidth,d=u*c,p=(u+i)*c,m=i,g=Math.ceil(m*c),h=0,v=new a.BlockSet;return l.forEach((function(e,u){var m=e.assemblyName,y=e.refName,b=e.start,w=e.end,k=e.reversed,O=Math.ceil((w-b)/g),P=Math.floor((p-h)/g)+o;P>=O&&(P=O-1);var E=Math.floor((d-h)/g)-o;E<0&&(E=0);for(var S=(w-b)/c,x=E;x<=P;x+=1){var C=void 0,j=void 0,M=void 0,T=void 0;k?(C=Math.max(b,w-(x+1)*g),M=(j=w-x*g)===w,T=C===b):(M=(C=b+x*g)===b,T=(j=Math.min(w,b+(x+1)*g))===w);var R={assemblyName:m,refName:y,start:C,end:j,reversed:k,offsetPx:(h+x*g)/c,parentRegion:e,regionNumber:u,widthPx:(j-C)/c,isLeftEndOfDisplayedRegion:M,isRightEndOfDisplayedRegion:T,key:""};R.key="".concat((0,n.assembleLocString)(R),"-").concat(u).concat(k?"-reversed":""),t&&0===u&&0===x&&v.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-beforeFirstRegion"),widthPx:i,offsetPx:R.offsetPx-i,variant:"boundary"})),r&&S<s?v.push(new a.ElidedBlock(R)):v.push(new a.ContentBlock(R)),t&&(S>=s&&R.isRightEndOfDisplayedRegion&&u<l.length-1&&(h+=f*c,v.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-rightpad"),widthPx:f,offsetPx:R.offsetPx+R.widthPx}))),u===l.length-1&&R.isRightEndOfDisplayedRegion&&(h+=f*c,v.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-afterLastRegion"),widthPx:i,offsetPx:R.offsetPx+R.widthPx,variant:"boundary"}))))}h+=w-b})),v};var n=r(32),a=r(206)},926:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LayoutSession=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(30)),l=n(r(50)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(15)),p=n(r(16)),m=n(r(10)),g=n(r(329)),h=n(r(927)),v=n(r(521)),y=n(r(522)),b=n(r(207)),w=r(32),k=r(29);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var S=function(){function e(t){(0,d.default)(this,e),(0,m.default)(this,"config",void 0),(0,m.default)(this,"bpPerPx",void 0),(0,m.default)(this,"filters",void 0),(0,m.default)(this,"cachedLayout",void 0),this.config=t.config,this.bpPerPx=t.bpPerPx,this.filters=t.filters,this.update(t)}return(0,p.default)(e,[{key:"update",value:function(e){Object.assign(this,e)}},{key:"makeLayout",value:function(){return new v.default(h.default,{maxHeight:(0,k.readConfObject)(this.config,"maxHeight"),displayMode:(0,k.readConfObject)(this.config,"displayMode"),pitchX:this.bpPerPx,pitchY:(0,k.readConfObject)(this.config,"noSpacing")?1:3})}},{key:"cachedLayoutIsValid",value:function(e){return e&&e.layout.subLayoutConstructorArgs.pitchX===this.bpPerPx&&(0,g.default)((0,k.readConfObject)(this.config),e.config)&&(0,g.default)(this.filters,e.filters)}},{key:"layout",get:function(){return this.cachedLayout&&this.cachedLayoutIsValid(this.cachedLayout)||(this.cachedLayout={layout:this.makeLayout(),config:(0,k.readConfObject)(this.config),filters:this.filters}),this.cachedLayout.layout}}]),e}();t.LayoutSession=S;var x=function(e){(0,c.default)(s,e);var t,r,n=E(s);function s(){var e;(0,d.default)(this,s);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,m.default)((0,u.default)(e),"sessions",{}),e}return(0,p.default)(s,[{key:"getWorkerSession",value:function(e){var t=(0,w.getLayoutId)(e);this.sessions[t]||(this.sessions[t]=this.createSession(e));var r=this.sessions[t];return r.update(e),r}},{key:"getExpandedRegion",value:function(e,t){if(!e)return e;var r=t.bpPerPx,n=t.config,a=void 0===n?0:(0,k.readConfObject)(n,"maxFeatureGlyphExpansion");if(!a)return e;var o=Math.round(a*r);return P(P({},e),{},{start:Math.floor(Math.max(e.start-o,0)),end:Math.ceil(e.end+o)})}},{key:"createSession",value:function(e){return new S(e)}},{key:"freeResourcesInClient",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.regions,o=(0,w.getLayoutId)(r),i=0,u=this.sessions[o],!n&&u&&(delete this.sessions[o],i=1),u&&n&&u.layout.discardRange(n[0].refName,n[0].start,n[0].end),e.t0=i,e.next=9,(0,l.default)((0,f.default)(s.prototype),"freeResourcesInClient",this).call(this,t,r);case 9:return e.t1=e.sent,e.abrupt("return",e.t0+e.t1);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deserializeLayoutInClient",value:function(e){return new y.default(e)}},{key:"deserializeResultsInClient",value:function(e,t){var r=this.deserializeLayoutInClient(e.layout);return(0,l.default)((0,f.default)(s.prototype),"deserializeResultsInClient",this).call(this,P(P({},e),{},{layout:r}),t)}},{key:"createLayoutInWorker",value:function(e){var t=e.regions;return this.getWorkerSession(e).layout.getSublayout(t[0].refName)}},{key:"serializeResultsInWorker",value:function(e,t){var r=(0,l.default)((0,f.default)(s.prototype),"serializeResultsInWorker",this).call(this,e,t),n=(0,o.default)(t.regions,1)[0];return r.layout=e.layout.serializeRegion(this.getExpandedRegion(n,t)),r.layout.rectangles&&(r.features=r.features.filter((function(e){return Boolean(r.layout.rectangles[e.uniqueId])}))),r.maxHeightReached=r.layout.maxHeightReached,r}},{key:"render",value:(t=(0,i.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.layout||this.createLayoutInWorker(t),e.next=3,(0,l.default)((0,f.default)(s.prototype),"render",this).call(this,P(P({},t),{},{layout:r}));case 3:return n=e.sent,e.abrupt("return",P(P({},n),{},{layout:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),s}(b.default);t.default=x},927:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(15)),i=n(r(16)),u=n(r(10)),l=r(32);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=1e4;function d(e,t,r,n){return t>=r&&n>=e}var p=function(){function e(){(0,o.default)(this,e),(0,u.default)(this,"padding",void 0),(0,u.default)(this,"allFilled",void 0),(0,u.default)(this,"widthLimit",void 0),(0,u.default)(this,"rowState",void 0),this.padding=1,this.widthLimit=1e6}return(0,i.default)(e,[{key:"setAllFilled",value:function(e){this.allFilled=e}},{key:"getItemAt",value:function(e){if(this.allFilled)return this.allFilled;if(this.rowState&&void 0!==this.rowState.min&&!(e<this.rowState.min||e>=this.rowState.max)){var t=e-this.rowState.offset;return this.rowState.bits[t]}}},{key:"isRangeClear",value:function(e,t){if(this.allFilled)return!1;if(!this.rowState)return!0;var r=this.rowState,n=r.min,a=r.max;if(t<=n||e>=a)return!0;for(var o=Math.min(a,t),i=Math.max(n,e);i<t&&i<o;i+=1)if(this.getItemAt(i))return!1;return!0}},{key:"initialize",value:function(e,t){var r=t-e;return{offset:e-r,min:e,max:t,bits:new Array(3*r)}}},{key:"addRect",value:function(e,t){var r=e.l,n=e.r+this.padding;this.rowState||(this.rowState=this.initialize(r,n));var a=r-this.rowState.offset,o=n-this.rowState.offset,i=this.rowState.bits.length;if(o>=this.rowState.bits.length){var u=o+1;this.rowState.bits.length+u>this.widthLimit?(console.warn("Layout width limit exceeded, discarding old layout. Please be more careful about discarding unused blocks."),this.rowState=this.initialize(r,n)):u>0&&(this.rowState.bits=this.rowState.bits.concat(new Array(u)))}if(r<this.rowState.offset){var l=Math.min(i-a,this.rowState.offset);this.rowState.bits.length+l>this.widthLimit?(console.warn("Layout width limit exceeded, discarding old layout. Please be more careful about discarding unused blocks."),this.rowState=this.initialize(r,n)):(this.rowState.bits=new Array(l).concat(this.rowState.bits),this.rowState.offset-=l)}var c=(o=n-this.rowState.offset)-(a=r-this.rowState.offset);c>2e4&&console.warn("Layout X pitch set too low, feature spans ".concat(c," bits in a single row."),e,t);for(var s=a;s<o;s+=1)this.rowState.bits[s]=t;r<this.rowState.min&&(this.rowState.min=r),n>this.rowState.max&&(this.rowState.max=n)}},{key:"discardRange",value:function(e,t){if(!this.allFilled&&this.rowState&&!(t<=this.rowState.min||e>=this.rowState.max))if(e<=this.rowState.min&&t>=this.rowState.max)this.rowState=void 0;else{if(t>this.rowState.min&&e<=this.rowState.min&&(this.rowState.min=t),e<this.rowState.max&&t>=this.rowState.max&&(this.rowState.max=e),this.rowState.offset<this.rowState.min-f&&this.rowState.bits.length>this.rowState.max+f-this.rowState.offset){var r=this.rowState.min-this.rowState.offset,n=this.rowState.bits.length-1-(this.rowState.max-this.rowState.offset);this.rowState.bits=this.rowState.bits.slice(r,this.rowState.bits.length-n),this.rowState.offset+=r}else if(this.rowState.offset<this.rowState.min-f){var a=this.rowState.min-Math.floor(5e3)-this.rowState.offset;this.rowState.bits.splice(0,a),this.rowState.offset+=a}else if(this.rowState.bits.length>this.rowState.max-this.rowState.offset+f){var o=this.rowState.max-this.rowState.offset+1+Math.floor(5e3);this.rowState.bits.length=o}for(var i=Math.max(this.rowState.min,e)-this.rowState.offset,u=Math.min(t,this.rowState.max)-this.rowState.offset,l=i;l>=0&&l<u;l+=1)this.rowState.bits[l]=void 0}}}]),e}(),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pitchX,n=void 0===r?10:r,a=t.pitchY,i=void 0===a?10:a,l=t.maxHeight,c=void 0===l?1e4:l,s=t.hardRowLimit,f=void 0===s?1e4:s,d=t.displayMode,p=void 0===d?"normal":d;(0,o.default)(this,e),(0,u.default)(this,"pitchX",void 0),(0,u.default)(this,"pitchY",void 0),(0,u.default)(this,"hardRowLimit",void 0),(0,u.default)(this,"bitmap",void 0),(0,u.default)(this,"rectangles",void 0),(0,u.default)(this,"maxHeightReached",void 0),(0,u.default)(this,"maxHeight",void 0),(0,u.default)(this,"displayMode",void 0),(0,u.default)(this,"pTotalHeight",void 0),this.pitchX=n,this.pitchY=i,this.hardRowLimit=f,this.maxHeightReached=!1,this.displayMode=p,"compact"===this.displayMode&&(this.pitchY=Math.round(this.pitchY/4)||1,this.pitchX=Math.round(this.pitchX/4)||1),this.bitmap=[],this.rectangles=new Map,this.maxHeight=Math.ceil(c/this.pitchY),this.pTotalHeight=0}return(0,i.default)(e,[{key:"addRect",value:function(e,t,r,n,a){var o=this.rectangles.get(e);if(o)return null===o.top?null:(this.addRectToBitmap(o),o.top*this.pitchY);var i=Math.floor(t/this.pitchX),u=Math.floor(r/this.pitchX),l=Math.ceil(n/this.pitchY),c={id:e,l:i,r:u,top:null,h:l,originalHeight:n,data:a},s=this.maxHeight-l,f=0;if("collapse"!==this.displayMode){for(;f<=s&&this.collides(c,f);f+=1);if(f>s)return c.top=null,this.rectangles.set(e,c),this.maxHeightReached=!0,null}return c.top=f,this.addRectToBitmap(c),this.rectangles.set(e,c),this.pTotalHeight=Math.max(this.pTotalHeight||0,f+l),f*this.pitchY}},{key:"collides",value:function(e,t){for(var r=this.bitmap,n=t+e.h,a=t;a<n;a+=1){var o=r[a];if(o&&!o.isRangeClear(e.l,e.r))return!0}return!1}},{key:"autovivifyRow",value:function(e,t){var r=e[t];if(!r){if(t>this.hardRowLimit)throw new Error("layout hard limit (".concat(this.hardRowLimit*this.pitchY,"px) exceeded, aborting layout"));r=new p,e[t]=r}return r}},{key:"addRectToBitmap",value:function(e){if(null!==e.top){var t=e.id,r=e.top+e.h;if(e.r-e.l>2e4)for(var n=e.top;n<r;n+=1)this.autovivifyRow(this.bitmap,n).setAllFilled(t);else for(var a=e.top;a<r;a+=1)this.autovivifyRow(this.bitmap,a).addRect(e,t)}}},{key:"discardRange",value:function(e,t){for(var r=Math.floor(e/this.pitchX),n=Math.floor(t/this.pitchX),a=this.bitmap,o=0;o<a.length;o+=1){var i=a[o];i&&i.discardRange(r,n)}}},{key:"hasSeen",value:function(e){return this.rectangles.has(e)}},{key:"getByCoord",value:function(e,t){var r=Math.floor(t/this.pitchY),n=this.bitmap[r];if(n){var a=Math.floor(e/this.pitchX);return n.getItemAt(a)}}},{key:"getByID",value:function(e){var t=this.rectangles.get(e);if(t){var r=t.top*this.pitchY;return[t.l*this.pitchX,r,t.r*this.pitchX,r+t.originalHeight]}}},{key:"getDataByID",value:function(e){var t;return null===(t=this.rectangles.get(e))||void 0===t?void 0:t.data}},{key:"cleanup",value:function(){}},{key:"getTotalHeight",value:function(){return this.pTotalHeight*this.pitchY}},{key:"totalHeight",get:function(){return this.getTotalHeight()}},{key:"getRectangles",value:function(){var e=this;return new Map(Array.from(this.rectangles.entries()).map((function(t){var r=(0,a.default)(t,2),n=r[0],o=r[1],i=o.l,u=o.r,l=o.originalHeight,c=(o.top||0)*e.pitchY,s=c+l;return[n,[i*e.pitchX,c,u*e.pitchX,s]]})))}},{key:"serializeRegion",value:function(e){var t,r={},n=!1,o=c(this.rectangles.entries());try{for(o.s();!(t=o.n()).done;){var i=(0,a.default)(t.value,2),u=i[0],l=i[1],s=l.l,f=l.r,p=l.originalHeight,m=l.top;if(null===l.top)n=!0;else{var g=(m||0)*this.pitchY,h=g+p,v=s*this.pitchX,y=f*this.pitchX;d(e.start,e.end,v-this.pitchX,y+this.pitchX)&&(r[u]=[v,g,y,h])}}}catch(e){o.e(e)}finally{o.f()}return{rectangles:r,containsNoTransferables:!0,totalHeight:this.getTotalHeight(),maxHeightReached:n}}},{key:"toJSON",value:function(){return{rectangles:(0,l.objectFromEntries)(this.getRectangles()),containsNoTransferables:!0,totalHeight:this.getTotalHeight(),maxHeightReached:this.maxHeightReached}}}]),e}();t.default=m},928:function(e,t,r){"use strict";e.exports=r(2075)},929:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(10)),u=r(514),l=function(){function e(t){var r=t.filters,n=void 0===r?[]:r;(0,a.default)(this,e),(0,i.default)(this,"filterChain",void 0),this.filterChain=n.map((function(e){if("string"==typeof e)return{expr:(0,u.stringToJexlExpression)(e),string:e};throw new Error('invalid inputFilter string "'.concat(e,'"'))}))}return(0,o.default)(e,[{key:"passes",value:function(){for(var e=0;e<this.filterChain.length;e+=1)if(!this.filterChain[e].expr.evalSync({feature:arguments.length<=0?void 0:arguments[0]}))return!1;return!0}},{key:"toJSON",value:function(){return{filters:this.filterChain.map((function(e){return e.string}))}}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}();t.default=l},930:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.useRef)(null),r=e.theme,n=e.html,a=e.RenderingComponent,d=(0,o.default)(e,f),p=(0,c.createJBrowseTheme)(r);return(0,u.useEffect)((function(){var e=t.current;return e&&(e&&(0,l.unmountComponentAtNode)(e),e.innerHTML=n,(0,s.rIC)((function(){(0,l.hydrate)(u.default.createElement(i.ThemeProvider,{theme:p},u.default.createElement(a,d)),e)}),{timeout:300})),function(){e&&(0,l.unmountComponentAtNode)(e)}}),[n,p,d,a]),u.default.createElement("div",{ref:t,"data-html-size":n.length,className:"ssr-container"})};var o=n(r(45)),i=r(34),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(6),c=r(83),s=r(32),f=["theme","html","RenderingComponent"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}},931:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,t.stateModelFactory=t.default=function(e){return i.types.model("BaseFeatureWidget",{id:s.ElementId,type:i.types.literal("BaseFeatureWidget"),featureData:i.types.frozen(),formattedFields:i.types.frozen(),unformattedFeatureData:i.types.frozen(),view:i.types.safeReference(e.pluggableMstType("view","stateModel")),track:i.types.safeReference(e.pluggableMstType("track","stateModel"))}).volatile((function(){return{}})).actions((function(e){return{setFeatureData:function(t){e.unformattedFeatureData=t},clearFeatureData:function(){e.featureData=void 0},setFormattedData:function(t){e.featureData=t}}})).actions((function(e){return{afterCreate:function(){(0,i.addDisposer)(e,(0,u.autorun)((function(){var t=e.unformattedFeatureData,r=e.track;if(t){var n=(0,c.default)(t);if(r)n.__jbrowsefmt=(0,l.getConf)(r,["formatDetails","feature"],{feature:n}),h(n,(0,l.getConf)(r,["formatDetails","depth"]),(function(e){e.__jbrowsefmt=(0,l.getConf)(r,["formatDetails","subfeatures"],{feature:e})}));e.setFormattedData(n)}})))}}})).preProcessSnapshot((function(e){return m({unformattedFeatureData:e.featureData,featureData:e.finalizedFeatureData},(0,o.default)(e,f))})).postProcessSnapshot((function(e){e.unformattedFeatureData;var t=e.featureData,r=(0,o.default)(e,d);return m({finalizedFeatureData:JSON.parse(JSON.stringify(t,(function(e,t){return void 0===t?null:t})))},r)}))};var a=n(r(10)),o=n(r(45)),i=r(17),u=r(43),l=r(29),c=n(r(331)),s=r(70),f=["featureData","finalizedFeatureData"],d=["unformattedFeatureData","featureData"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=(0,l.ConfigurationSchema)("BaseFeatureWidget",{});function h(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t<=a||(o.subfeatures=null===(n=e.subfeatures)||void 0===n?void 0:n.map((function(e){return h(e,t,r,a+1,o),r(e)}))),o}t.configSchema=g},932:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(10)),c=r(29),s=n(r(2096)),f=n(r(2097)),d=n(r(2098));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}f.default,d.default;var g=function(){function e(t,r,n){if((0,i.default)(this,e),this.pluginManager=t,this.mainConfiguration=r,this.backendConfigurations=n,(0,l.default)(this,"driverObjects",void 0),!r)throw new Error("RpcManager requires at least a main configuration");this.driverObjects=new Map}var t,r;return(0,u.default)(e,[{key:"getDriver",value:function(e){var t,r=this.driverObjects.get(e);if(r)return r;var n=this.mainConfiguration.drivers.get("WebWorkerRpcDriver");if("MainThreadRpcDriver"===e){var a=this.backendConfigurations.MainThreadRpcDriver;if(!a)throw new Error('requested RPC driver "'.concat(e,'" is missing config'));t=new d.default(m(m({},a),{},{config:n}))}else{if("WebWorkerRpcDriver"!==e)throw new Error('requested RPC driver "'.concat(e,'" is not installed'));var o=this.backendConfigurations.WebWorkerRpcDriver;if(!o)throw new Error('requested RPC driver "'.concat(e,'" is missing config'));t=new f.default(m(m({},o),{},{config:n}),{plugins:this.pluginManager.runtimePluginDefinitions})}return this.driverObjects.set(e,t),t}},{key:"getDriverForCall",value:(r=(0,o.default)(a.default.mark((function e(t,r,n){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.rpcDriverName||(0,c.readConfObject)(this.mainConfiguration,"defaultDriver"),e.abrupt("return",this.getDriver(o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"call",value:(t=(0,o.default)(a.default.mark((function e(t,r,n){var o,i,u=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length>3&&void 0!==u[3]?u[3]:{},t){e.next=3;break}throw new Error("sessionId is required");case 3:return e.next=5,this.getDriverForCall(t,r,n);case 5:return i=e.sent,e.abrupt("return",i.call(this.pluginManager,t,r,n,o));case 7:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();t.default=g,(0,l.default)(g,"configSchema",s.default)},933:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.watchWorker=b;var a=n(r(19)),o=n(r(33)),i=n(r(12)),u=n(r(11)),l=n(r(15)),c=n(r(16)),s=n(r(10)),f=n(r(20)),d=r(17),p=r(32),m=r(917),g=r(29);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){return"function"!=typeof e&&!(e instanceof Error)}function b(e,t,r){return w.apply(this,arguments)}function w(){return(w=(0,f.default)(a.default.mark((function e(t,r,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){!function e(){setTimeout((0,f.default)(a.default.mark((function i(){return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.call("ping",[],{timeout:2*r,rpcDriverClassName:n});case 3:e(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),o(a.t0);case 9:case"end":return a.stop()}}),i,null,[[0,6]])}))),r)}()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){function e(t){(0,l.default)(this,e),this.driver=t,(0,s.default)(this,"workerP",void 0)}var t;return(0,c.default)(e,[{key:"getWorker",value:(t=(0,f.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.workerP||(this.workerP=this.driver.makeWorker().then((function(e){return b(e,t.driver.maxPingTime,t.driver.name).catch((function(r){e&&(console.error("worker did not respond, killing and generating new one"),console.error(r),e.destroy(),e.status="killed",e.error=r,t.workerP=void 0)})),e})).catch((function(e){throw t.workerP=void 0,e}))),e.abrupt("return",this.workerP);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),O=function(){function e(t){(0,l.default)(this,e),(0,s.default)(this,"name",void 0),(0,s.default)(this,"lastWorkerAssignment",-1),(0,s.default)(this,"workerAssignments",new Map),(0,s.default)(this,"workerPool",void 0),(0,s.default)(this,"maxPingTime",3e4),(0,s.default)(this,"workerCheckFrequency",5e3),(0,s.default)(this,"config",void 0),this.config=t.config}var t,r,n;return(0,c.default)(e,[{key:"filterArgs",value:function(e,t){var r=this;if(Array.isArray(e))return e.filter(y).map((function(e){return r.filterArgs(e,t)}));if("object"===(0,u.default)(e)&&null!==e){if(e instanceof AbortSignal)return(0,m.serializeAbortSignal)(e,this.remoteAbort.bind(this,t));if((0,d.isStateTreeNode)(e)&&!(0,d.isAlive)(e))throw new Error("dead state tree node passed to RPC call");return e instanceof File?e:(0,p.objectFromEntries)(Object.entries(e).filter((function(e){return y(e[1])})).map((function(e){var n=(0,i.default)(e,2),a=n[0],o=n[1];return[a,r.filterArgs(o,t)]})))}return e}},{key:"remoteAbort",value:(n=(0,f.default)(a.default.mark((function e(t,r,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWorker(t);case 2:e.sent.call(r,{signalId:n},{timeout:1e6,rpcDriverClassName:this.name});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"createWorkerPool",value:function(){var e,t,r=this,n=(e="undefined"!=typeof window,t=e&&"hardwareConcurrency"in window.navigator,e&&t?window.navigator.hardwareConcurrency:1),a=(0,g.readConfObject)(this.config,"workerCount")||(0,p.clamp)(1,Math.max(1,n-1),5);return(0,o.default)(new Array(a)).map((function(){return new k(r)}))}},{key:"getWorkerPool",value:function(){if(!this.workerPool){var e=this.createWorkerPool();return this.workerPool=e,e}return this.workerPool}},{key:"getWorker",value:(r=(0,f.default)(a.default.mark((function e(t){var r,n,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getWorkerPool(),void 0===(n=this.workerAssignments.get(t))&&(o=(this.lastWorkerAssignment+1)%r.length,this.workerAssignments.set(t,o),this.lastWorkerAssignment=o,n=o),i=r[n].getWorker()){e.next=6;break}throw new Error("no web workers registered for RPC");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"call",value:(t=(0,f.default)(a.default.mark((function e(t,r,n,o){var i,u,l,c,s,f,d,p,m,g,h=this,y=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y.length>4&&void 0!==y[4]?y[4]:{},r){e.next=3;break}throw new TypeError("sessionId is required");case 3:return u=!1,e.next=6,this.getWorker(r);case 6:return l=e.sent,c=t.getRpcMethodType(n),e.next=10,c.serializeArguments(o,this.name);case 10:return s=e.sent,f=this.filterArgs(s,r),d=l.call(n,f,v({timeout:3e5,statusCallback:o.statusCallback,rpcDriverClassName:this.name},i)).finally((function(){u=!0})),m=new Promise((function(e,t){p=setInterval((function(){"killed"===l.status?t(new Error("operation timed out, worker process stopped responding, ".concat(l.error))):u&&e(!0)}),h.workerCheckFrequency)})).finally((function(){clearInterval(p)})),g=Promise.race([d,m]),e.abrupt("return",c.deserializeReturn(g,o,this.name));case 16:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),e}();t.default=O},934:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11)),o=n(r(12)),i=f(r(1)),u=r(32),l=r(23),c=r(14);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==(0,a.default)(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var d=(0,l.makeStyles)({error:{color:"red",fontSize:"0.8em"}}),p=(0,i.lazy)((function(){return Promise.resolve().then((function(){return f(r(2110))}))}));function m(e){var t=e.slot,r=d(),n=(0,i.useState)(JSON.stringify(t.value,null,"  ")),a=(0,o.default)(n,2),c=a[0],s=a[1],f=(0,i.useState)(),m=(0,o.default)(f,2),g=m[0],h=m[1],v=(0,u.useDebounce)(c,400);return(0,i.useEffect)((function(){try{t.set(JSON.parse(v)),h(void 0)}catch(e){h(e.message)}}),[v,t]),i.default.createElement(i.default.Fragment,null,g?i.default.createElement("p",{className:r.error},g):null,i.default.createElement(l.FormControl,{error:g},i.default.createElement(l.InputLabel,{shrink:!0,htmlFor:"callback-editor"},t.name),i.default.createElement(i.default.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(p,{contents:c,setContents:s})),i.default.createElement(l.FormHelperText,null,t.description)))}m.propTypes={slot:c.PropTypes.objectOrObservableObject.isRequired};var g=(0,c.observer)(m);t.default=g},935:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=90,c=219,s=222,f=192,d=100,p=3e3,m="navigator"in e&&/Win/i.test(navigator.platform),g="navigator"in e&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),h="npm__react-simple-code-editor__textarea",v=function(e){function t(){var e,r,a;i(this,t);for(var o=arguments.length,h=Array(o),v=0;v<o;v++)h[v]=arguments[v];return r=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(h))),a.state={capture:!0},a._recordCurrentState=function(){var e=a._input;if(e){var t=e.value,r=e.selectionStart,n=e.selectionEnd;a._recordChange({value:t,selectionStart:r,selectionEnd:n})}},a._getLines=function(e,t){return e.substring(0,t).split("\n")},a._recordChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=a._history,o=r.stack,i=r.offset;if(o.length&&i>-1){a._history.stack=o.slice(0,i+1);var u=a._history.stack.length;if(u>d){var l=u-d;a._history.stack=o.slice(l,u),a._history.offset=Math.max(a._history.offset-l,0)}}var c=Date.now();if(t){var s=a._history.stack[a._history.offset];if(s&&c-s.timestamp<p){var f=/[^a-z0-9]([a-z0-9]+)$/i,m=a._getLines(s.value,s.selectionStart).pop().match(f),g=a._getLines(e.value,e.selectionStart).pop().match(f);if(m&&g&&g[1].startsWith(m[1]))return void(a._history.stack[a._history.offset]=n({},e,{timestamp:c}))}}a._history.stack.push(n({},e,{timestamp:c})),a._history.offset++},a._updateInput=function(e){var t=a._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,a.props.onValueChange(e.value))},a._applyEdits=function(e){var t=a._input,r=a._history.stack[a._history.offset];r&&t&&(a._history.stack[a._history.offset]=n({},r,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),a._recordChange(e),a._updateInput(e)},a._undoEdit=function(){var e=a._history,t=e.stack,r=e.offset,n=t[r-1];n&&(a._updateInput(n),a._history.offset=Math.max(r-1,0))},a._redoEdit=function(){var e=a._history,t=e.stack,r=e.offset,n=t[r+1];n&&(a._updateInput(n),a._history.offset=Math.min(r+1,t.length-1))},a._handleKeyDown=function(e){var t=a.props,r=t.tabSize,n=t.insertSpaces,o=t.ignoreTabKey,i=t.onKeyDown;if(!i||(i(e),!e.defaultPrevented)){var u=e.target,d=u.value,p=u.selectionStart,h=u.selectionEnd,v=(n?" ":"     ").repeat(r);if(9===e.keyCode&&!o&&a.state.capture)if(e.preventDefault(),e.shiftKey){var y=a._getLines(d,p),b=y.length-1,w=a._getLines(d,h).length-1,k=d.split("\n").map((function(e,t){return t>=b&&t<=w&&e.startsWith(v)?e.substring(v.length):e})).join("\n");if(d!==k){var O=y[b];a._applyEdits({value:k,selectionStart:O.startsWith(v)?p-v.length:p,selectionEnd:h-(d.length-k.length)})}}else if(p!==h){var P=a._getLines(d,p),E=P.length-1,S=a._getLines(d,h).length-1,x=P[E];a._applyEdits({value:d.split("\n").map((function(e,t){return t>=E&&t<=S?v+e:e})).join("\n"),selectionStart:/\S/.test(x)?p+v.length:p,selectionEnd:h+v.length*(S-E+1)})}else{var C=p+v.length;a._applyEdits({value:d.substring(0,p)+v+d.substring(h),selectionStart:C,selectionEnd:C})}else if(8===e.keyCode){var j=p!==h;if(d.substring(0,p).endsWith(v)&&!j){e.preventDefault();var M=p-v.length;a._applyEdits({value:d.substring(0,p-v.length)+d.substring(h),selectionStart:M,selectionEnd:M})}}else if(13===e.keyCode){if(p===h){var T=a._getLines(d,p).pop().match(/^\s+/);if(T&&T[0]){e.preventDefault();var R="\n"+T[0],D=p+R.length;a._applyEdits({value:d.substring(0,p)+R+d.substring(h),selectionStart:D,selectionEnd:D})}}}else if(57===e.keyCode||e.keyCode===c||e.keyCode===s||e.keyCode===f){var A=void 0;57===e.keyCode&&e.shiftKey?A=["(",")"]:e.keyCode===c?A=e.shiftKey?["{","}"]:["[","]"]:e.keyCode===s?A=e.shiftKey?['"','"']:["'","'"]:e.keyCode!==f||e.shiftKey||(A=["`","`"]),p!==h&&A&&(e.preventDefault(),a._applyEdits({value:d.substring(0,p)+A[0]+d.substring(p,h)+A[1]+d.substring(h),selectionStart:p,selectionEnd:h+2}))}else!(g?e.metaKey&&e.keyCode===l:e.ctrlKey&&e.keyCode===l)||e.shiftKey||e.altKey?(g?e.metaKey&&e.keyCode===l&&e.shiftKey:m?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&e.keyCode===l&&e.shiftKey)&&!e.altKey?(e.preventDefault(),a._redoEdit()):77!==e.keyCode||!e.ctrlKey||g&&!e.shiftKey||(e.preventDefault(),a.setState((function(e){return{capture:!e.capture}}))):(e.preventDefault(),a._undoEdit())}},a._handleChange=function(e){var t=e.target,r=t.value,n=t.selectionStart,o=t.selectionEnd;a._recordChange({value:r,selectionStart:n,selectionEnd:o},!0),a.props.onValueChange(r)},a._history={stack:[],offset:-1},u(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var e=this,t=this.props,r=t.value,a=t.style,i=t.padding,u=t.highlight,l=t.textareaId,c=t.autoFocus,s=t.disabled,f=t.form,d=t.maxLength,p=t.minLength,m=t.name,g=t.placeholder,v=t.readOnly,b=t.required,w=t.onClick,k=t.onFocus,O=t.onBlur,P=t.onKeyUp,E=(t.onKeyDown,t.onValueChange,t.tabSize,t.insertSpaces,t.ignoreTabKey,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"])),S={paddingTop:i,paddingRight:i,paddingBottom:i,paddingLeft:i},x=u(r);return o.createElement("div",n({},E,{style:n({},y.container,a)}),o.createElement("textarea",{ref:function(t){return e._input=t},style:n({},y.editor,y.textarea,S),className:h,id:l,value:r,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:w,onKeyUp:P,onFocus:k,onBlur:O,disabled:s,form:f,maxLength:d,minLength:p,name:m,placeholder:g,readOnly:v,required:b,autoFocus:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),o.createElement("pre",n({"aria-hidden":"true",style:n({},y.editor,y.highlight,S)},"string"==typeof x?{dangerouslySetInnerHTML:{__html:x+"<br />"}}:{children:x})),o.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.npm__react-simple-code-editor__textarea:empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .npm__react-simple-code-editor__textarea {\n    color: transparent !important;\n  }\n\n  .npm__react-simple-code-editor__textarea::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"}}))}},{key:"session",get:function(){return{history:this._history}},set:function(e){this._history=e.history}}]),t}(o.Component);v.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t.default=v;var y={container:{position:"relative",textAlign:"left",whiteSpace:"pre-wrap",wordBreak:"keep-all",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"inherit",wordBreak:"inherit"}}}).call(this,r(54))},936:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.useSlotEditorStyles=t.default=void 0;var o=n(r(12)),i=n(r(36)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(14),c=r(17),s=r(83),f=r(161),d=r(23),p=n(r(108)),m=n(r(94)),g=n(r(302)),h=n(r(2112)),v=n(r(2113)),y=n(r(2114)),b=n(r(934));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}var k=function(e){var t=e.helperText;return u.default.createElement(d.TextField,(0,i.default)({},e,{helperText:u.default.createElement(s.SanitizedHTML,{html:t}),FormHelperTextProps:{component:"div"},fullWidth:!0}))},O=(0,l.observer)((function(e){var t=e.slot;return u.default.createElement(k,{label:t.name,helperText:t.description,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),P=(0,l.observer)((function(e){var t=e.slot;return u.default.createElement(d.TextField,{label:t.name,helperText:t.description,multiline:!0,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),E=function(){return u.default.createElement(d.SvgIcon,null,u.default.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"}))},S=(0,d.makeStyles)((function(e){return{card:{marginTop:e.spacing(1)}}})),x=(0,l.observer)((function(e){var t=e.slot,r=S(),n=(0,u.useState)(""),a=(0,o.default)(n,2),i=a[0],l=a[1];return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.InputLabel,null,t.name),Array.from(t.value,(function(e){var n=(0,o.default)(e,2),a=n[0],i=n[1];return u.default.createElement(d.Card,{raised:!0,key:a,className:r.card},u.default.createElement(d.CardHeader,{title:a,action:u.default.createElement(d.IconButton,{color:"secondary",onClick:function(){return t.remove(a)}},u.default.createElement(p.default,null))}),u.default.createElement(d.CardContent,null,u.default.createElement(h.default,{slot:{value:i,description:"Values associated with entry ".concat(a),setAtIndex:function(e,r){t.setAtKeyIndex(a,e,r)},removeAtIndex:function(e){t.removeAtKeyIndex(a,e)},add:function(e){t.addToKey(a,e)}}})))})),u.default.createElement(d.Card,{raised:!0,className:r.card},u.default.createElement(d.CardHeader,{disableTypography:!0,title:u.default.createElement(d.TextField,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return l(e.target.value)},InputProps:{endAdornment:u.default.createElement(d.InputAdornment,{position:"end"},u.default.createElement(d.IconButton,{disabled:""===i,onClick:function(){t.add(i,[]),l("")},color:"secondary"},u.default.createElement(m.default,null)))}})})),u.default.createElement(d.FormHelperText,null,t.description))})),C=(0,l.observer)((function(e){var t=e.slot,r=S(),n=(0,u.useState)(""),a=(0,o.default)(n,2),i=a[0],l=a[1];return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.InputLabel,null,t.name),Array.from(t.value,(function(e){var n=(0,o.default)(e,2),a=n[0],i=n[1];return u.default.createElement(d.Card,{raised:!0,key:a,className:r.card},u.default.createElement(d.CardHeader,{title:a,action:u.default.createElement(d.IconButton,{color:"secondary",onClick:function(){return t.remove(a)}},u.default.createElement(p.default,null))}),u.default.createElement(d.CardContent,null,u.default.createElement(j,{slot:{value:i,set:function(e){return t.add(a,e)}}})))})),u.default.createElement(d.Card,{raised:!0,className:r.card},u.default.createElement(d.CardHeader,{disableTypography:!0,title:u.default.createElement(d.TextField,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return l(e.target.value)},InputProps:{endAdornment:u.default.createElement(d.InputAdornment,{position:"end"},u.default.createElement(d.IconButton,{disabled:""===i,onClick:function(){t.add(i,0),l("")},color:"secondary"},u.default.createElement(m.default,null)))}})})),u.default.createElement(d.FormHelperText,null,t.description))})),j=(0,l.observer)((function(e){var t=e.slot,r=(0,u.useState)(t.value),n=(0,o.default)(r,2),a=n[0],i=n[1];return(0,u.useEffect)((function(){var e=parseFloat(a,10);Number.isNaN(e)?t.reset():t.set(e)}),[t,a]),u.default.createElement(k,{label:t.name,helperText:t.description,value:a,type:"number",onChange:function(e){return i(e.target.value)}})})),M=(0,l.observer)((function(e){var t=e.slot,r=(0,u.useState)(t.value),n=(0,o.default)(r,2),a=n[0],i=n[1];return(0,u.useEffect)((function(){var e=parseInt(a,10);Number.isNaN(e)||t.set(e)}),[t,a]),u.default.createElement(k,{label:t.name,helperText:t.description,value:a,type:"number",onChange:function(e){return i(e.target.value)}})})),T=(0,l.observer)((function(e){var t=e.slot;return u.default.createElement(d.FormControl,null,u.default.createElement(d.FormControlLabel,{label:t.name,control:u.default.createElement(d.Checkbox,{checked:t.value,onChange:function(e){return t.set(e.target.checked)}})}),u.default.createElement(d.FormHelperText,null,t.description))})),R=(0,l.observer)((function(e){var t=e.slot,r=e.slotSchema,n=(0,c.getPropertyMembers)((0,f.getSubType)(r)),a=(0,f.getUnionSubTypes)((0,f.getUnionSubTypes)((0,f.getSubType)((0,f.getPropertyType)(n,"value")))[1]).map((function(e){return e.value}));return u.default.createElement(k,{value:t.value,label:t.name,select:!0,helperText:t.description,onChange:function(e){return t.set(e.target.value)}},a.map((function(e){return u.default.createElement(d.MenuItem,{key:e,value:e},e)})))})),D=(0,l.observer)((function(e){var t,r=e.slot;return u.default.createElement(s.FileSelector,{location:r.value,setLocation:function(e){return r.set(e)},name:r.name,description:r.description,rootModel:null===(t=(0,c.getEnv)(r).pluginManager)||void 0===t?void 0:t.rootModel})})),A={string:O,text:P,fileLocation:D,stringArray:h.default,stringArrayMap:x,numberMap:C,number:j,integer:M,color:y.default,stringEnum:R,boolean:T,frozen:b.default,configRelationships:b.default},I=(0,d.makeStyles)((function(e){return{paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}}));t.useSlotEditorStyles=I;var _=(0,l.observer)((function(e){var t=e.slot,r=e.slotSchema,n=I(),a=t.type,o=t.isCallback?v.default:A[a];return o||(console.warn("no slot editor defined for ".concat(a,", editing as string")),o=O),a in A||console.warn("SlotEditor needs to implement ".concat(a)),u.default.createElement(d.Paper,{className:n.paper},u.default.createElement("div",{className:n.paperContent},u.default.createElement(o,{slot:t,slotSchema:r})),u.default.createElement("div",{className:n.slotModeSwitch},t.contextVariable.length?u.default.createElement(d.IconButton,{className:n.slotModeIcon,onClick:function(){return t.isCallback?t.convertToValue():t.convertToCallback()},title:"convert to ".concat(t.isCallback?"regular value":"callback"),color:"secondary"},t.isCallback?u.default.createElement(E,null):u.default.createElement(g.default,null)):null))}));t.default=_},937:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(96),a=(0,r(29).ConfigurationSchema)("UCSCTrackHubConnection",{hubTxtLocation:{type:"fileLocation",defaultValue:{uri:"http://mysite.com/path/to/hub.txt",locationType:"UriLocation"},description:"location of the hub file (usually called hub.txt)"},assemblyNames:{type:"stringArray",defaultValue:[],description:"optional list of genomes to import from this track hub, if empty all genomes will be imported"}},{baseConfiguration:n.baseConnectionConfig});t.default=a},938:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(19)),i=n(r(20)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(14),s=r(17),f=r(23),d=r(32),p=n(r(136)),m=n(r(357)),g=n(r(865)),h=n(r(2129)),v=n(r(2131)),y=n(r(2132));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}var w=(0,f.makeStyles)((function(e){return{root:{margin:e.spacing(1)},expandIcon:{color:"#fff"},adminBadge:{margin:"0.5em",borderRadius:3,backgroundColor:"#FFB11D",padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"0.5em",display:"flex",justifyContent:"center"}}}));var k=(0,c.observer)((function(e){var t=e.model,r=w(),n=(0,l.useState)(),a=(0,u.default)(n,2),c=a[0],b=a[1],k=(0,l.useState)(),O=(0,u.default)(k,2),P=O[0],E=O[1],S=(0,l.useState)(!1),x=(0,u.default)(S,2),C=x[0],j=x[1],M=(0,d.getSession)(t).adminMode,T=(0,s.getEnv)(t).pluginManager;return(0,l.useEffect)((function(){var e=new AbortController,t=e.signal;return(0,i.default)(o.default.mark((function e(){var r,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jbrowse.org/plugin-store/plugins.json",{signal:t});case 3:if((r=e.sent).ok){e.next=9;break}return e.next=7,r.text();case 7:throw n=e.sent,new Error("Failed to fetch plugin data: ".concat(r.status," ").concat(r.statusText," ").concat(n));case 9:return e.next=11,r.json();case 11:a=e.sent,t.aborted||b(a.plugins),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),E(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))(),function(){e.abort()}}),[]),l.default.createElement("div",{className:r.root},M&&l.default.createElement(l.default.Fragment,null,!d.isElectron&&l.default.createElement("div",{className:r.adminBadge},l.default.createElement(g.default,{style:{marginRight:"0.3em"}}),l.default.createElement(f.Typography,null,"You are using the ",l.default.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),l.default.createElement("div",{className:r.customPluginButton},l.default.createElement(f.Button,{variant:"contained",color:"primary",onClick:function(){return j(!0)}},"Add custom plugin")),l.default.createElement(y.default,{open:C,onClose:function(){return j(!1)},model:t})),l.default.createElement(f.TextField,{label:"Filter plugins",value:t.filterText,onChange:function(e){return t.setFilterText(e.target.value)},fullWidth:!0,InputProps:{endAdornment:l.default.createElement(f.InputAdornment,{position:"end"},l.default.createElement(f.IconButton,{color:"secondary",onClick:function(){return t.clearFilterText()}},l.default.createElement(m.default,null)))}}),l.default.createElement(f.Accordion,{defaultExpanded:!0},l.default.createElement(f.AccordionSummary,{expandIcon:l.default.createElement(p.default,{className:r.expandIcon})},l.default.createElement(f.Typography,{variant:"h5"},"Installed plugins")),l.default.createElement("div",{style:{margin:"1em"}},l.default.createElement(h.default,{pluginManager:T,model:t}))),l.default.createElement(f.Accordion,{defaultExpanded:!0},l.default.createElement(f.AccordionSummary,{expandIcon:l.default.createElement(p.default,{className:r.expandIcon})},l.default.createElement(f.Typography,{variant:"h5"},"Available plugins")),P?l.default.createElement(f.Typography,{color:"error"},"".concat(P)):c?c.filter((function(e){return!!(d.isElectron||e.esmUrl||e.url||e.umdUrl)&&e.name.toLowerCase().includes(t.filterText.toLowerCase())})).map((function(e){return l.default.createElement(v.default,{key:e.name,plugin:e,model:t,adminMode:!!M})})):l.default.createElement(f.Typography,null,"Loading...")))}));t.default=k},939:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.cartesianToPolar=u,t.thetaRangesOverlap=function(e,t,r,n){if(t<=0||n<=0)return!1;if(t+1e-4>=l||n+1e-4>=l)return!0;if((e=(e%l+l)%l+l)<(r=(r%l+l)%l+l)+n&&e+t>r)return!0;if(e<(r-=l)+n&&e+t>r)return!0;return e<(r+=l+l)+n&&e+t>r},t.viewportVisibleSection=function(e,t,r){var n=(0,a.default)(e,4),l=n[0],c=n[1],s=n[2],f=n[3],d=(0,a.default)(t,2),p=d[0],m=d[1];if(c-=p,s-=m,f-=m,(l-=p)<0&&c>0&&s<0&&f>0){for(var g=[[l,s],[c,s],[l,f],[c,f]],h=-1/0,v=0;v<g.length;v+=1){var y=(0,a.default)(g[v],2),b=y[0],w=y[1],k=Math.sqrt(b*b+w*w);k>h&&(h=k)}return{rho:[0,Math.min(r,h)],theta:[0,2*Math.PI]}}var O=[[l,s],[c,s],[l,f],[c,f]];i(l,0,0,r,O),i(c,0,0,r,O),o(s,0,0,r,O),o(f,0,0,r,O),-l<r&&O.push([l,0]);c<r&&O.push([c,0]);-s<r&&O.push([0,s]);f<r&&O.push([0,f]);for(var P=l>=0?-1:1,E=1/0,S=-1/0,x=1/0,C=-1/0,j=0;j<O.length;j+=1){var M=(0,a.default)(O[j],2),T=M[0],R=M[1];if(T>=l&&T<=c&&R>=s&&R<=f){var D=u(T*P,R*P),A=(0,a.default)(D,2),I=A[0],_=A[1];I<=r+.001&&(_<x&&I>1e-4&&(x=_),_>C&&I>1e-4&&(C=_),I<E&&(E=I),I>S&&(S=I))}}-1===P&&(x+=Math.PI,C+=Math.PI);x>2*Math.PI&&C>2*Math.PI&&(x-=2*Math.PI,C-=2*Math.PI);return{rho:[E,Math.min(r,S)],theta:[x,C]}};var a=n(r(12));function o(e,t,r,n,a){var o=Math.abs(e-r);if(!(o>n)){o===n&&a.push([t,e]);var i=Math.sqrt(n*n-o*o);a.push([t-i,e]),a.push([t+i,e])}}function i(e,t,r,n,a){var o=Math.abs(e-t);if(!(o>n)){o===n&&a.push([e,r]);var i=Math.sqrt(n*n-o*o);a.push([e,r-i]),a.push([e,r+i])}}function u(e,t){var r=Math.sqrt(e*e+t*t);if(0===r)return[0,0];var n=function(e,t){var r=(Math.atan(t/e)+2*Math.PI)%(2*Math.PI);return e<0&&(t<=0?r+=Math.PI:r-=Math.PI),r}(e,t);return[r,n]}var l=2*Math.PI},940:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return f.default}}),t.default=void 0;var o=n(r(12)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(14),l=r(23),c=r(29),s=r(83),f=n(r(2169)),d=n(r(2170));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var m=(0,l.makeStyles)({display:{position:"relative",whiteSpace:"nowrap",textAlign:"left",width:"100%",minHeight:"100%"}}),g=(0,u.observer)((function(e){var t=m(),r=(0,l.useTheme)(),n=(0,i.useRef)(null),a=(0,i.useState)(),u=(0,o.default)(a,2),f=u[0],p=u[1],g=(0,i.useState)([0,0]),h=(0,o.default)(g,2),v=h[0],y=h[1],b=(0,i.useState)([0,0]),w=(0,o.default)(b,2),k=w[0],O=w[1],P=(0,i.useState)(),E=(0,o.default)(P,2),S=E[0],x=E[1],C=e.model,j=e.children,M=C.TooltipComponent,T=C.DisplayMessageComponent,R=C.contextMenuItems,D=C.height,A=C.setContextMenuFeature;return i.default.createElement("div",{ref:n,"data-testid":"display-".concat((0,c.getConf)(C,"displayId")),className:t.display,onContextMenu:function(e){e.preventDefault(),S?x(void 0):n.current&&x([e.clientX,e.clientY])},onMouseMove:function(e){if(n.current){var t=n.current.getBoundingClientRect(),r=t.left,a=t.top;y([e.clientX-r,e.clientY-a]),O([e.clientX,e.clientY]),p(t)}}},T?i.default.createElement(T,{model:C}):i.default.createElement(d.default,e),j,i.default.createElement(M,{model:C,height:D,offsetMouseCoord:v,clientMouseCoord:k,clientRect:f,mouseCoord:v}),i.default.createElement(s.Menu,{open:Boolean(S)&&Boolean(R().length),onMenuItemClick:function(e,t){t(),x(void 0)},onClose:function(){x(void 0),A(void 0)},TransitionProps:{onExit:function(){x(void 0),A(void 0)}},anchorReference:"anchorPosition",anchorPosition:S?{top:S[1],left:S[0]}:void 0,style:{zIndex:r.zIndex.tooltip},menuItems:R(),"data-testid":"base_linear_display_context_menu"}))}));t.default=g},941:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Polygon=t.Cytobands=void 0;var a=n(r(12)),o=n(r(10)),i=n(r(1)),u=r(23),l=r(14),c=n(r(21)),s=n(r(362)),f=r(32),d=r(206),p=r(128),m=r(365),g=n(r(2178));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=(0,u.makeStyles)((function(e){return{scaleBar:{height:p.HEADER_OVERVIEW_HEIGHT},scaleBarBorder:{border:"1px solid"},scaleBarContig:{backgroundColor:e.palette.background.default,position:"absolute",top:0,height:p.HEADER_OVERVIEW_HEIGHT},scaleBarContigForward:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 9'%3E%3Cpath d='M-.1 0L6 4.5L-.1 9' fill='none' stroke='%23ddd'/%3E%3C/svg%3E\")",backgroundRepeat:"repeat"},scaleBarContigReverse:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 9'%3E%3Cpath d='M6 0L0 4.5L6 9' fill='none' stroke='%23ddd'/%3E%3C/svg%3E\")",backgroundRepeat:"repeat"},scaleBarRefName:{position:"absolute",fontWeight:"bold",pointerEvents:"none",zIndex:100},scaleBarLabel:{height:p.HEADER_OVERVIEW_HEIGHT,position:"absolute",display:"flex",justifyContent:"center",pointerEvents:"none"},scaleBarVisibleRegion:{position:"absolute",height:p.HEADER_OVERVIEW_HEIGHT,pointerEvents:"none",zIndex:100,border:"1px solid"},overview:{height:p.HEADER_BAR_HEIGHT,position:"relative"},overviewSvg:{width:"100%",position:"absolute"}}})),b=(0,l.observer)((function(e){var t=e.model,r=e.overview,n=e.useOffset,a=void 0===n||n,o=(0,u.useTheme)(),l=Number(a),c=t.interRegionPaddingWidth,s=t.offsetPx,f=t.dynamicBlocks,d=t.cytobandOffset,m=f.contentBlocks,g=f.totalWidthPxWithoutBorders,h=o.palette,y=h.tertiary,b=h.primary,w=y?y.light:b.light;if(!m.length)return null;var k=m[0],O=m[m.length-1],P=(r.bpToPx(v(v({},k),{},{coord:k.reversed?k.end:k.start}))||0)+d*l,E=(r.bpToPx(v(v({},O),{},{coord:O.reversed?O.start:O.end}))||0)+d*l,S=Math.max(0,-s),x=S+g+m.length*c/2,C=[[S,p.HEADER_BAR_HEIGHT],[x,p.HEADER_BAR_HEIGHT],[E,0],[P,0]];return i.default.createElement("polygon",{points:C.toString(),fill:(0,u.alpha)(w,.3),stroke:(0,u.alpha)(w,.8)})}));function w(e,t,r,n,a){return"M"+e+","+t+"h"+(r-a)+"a"+a+","+a+" 0 0 1 "+a+","+a+"v"+(n-2*a)+"a"+a+","+a+" 0 0 1 "+-a+","+a+"h"+(a-r)+"z"}t.Polygon=b;var k={gneg:"rgb(227,227,227)",gpos25:"rgb(142,142,142)",gpos50:"rgb(85,85,85)",gpos100:"rgb(0,0,0)",gpos75:"rgb(57,57,57)",gvar:"rgb(0,0,0)",stalk:"rgb(127,127,127)",acen:"#800"};function O(e,t){var r;return(null==e||null===(r=e.cytobands)||void 0===r?void 0:r.map((function(t){return{refName:e.getCanonicalRefName(t.get("refName")),start:t.get("start"),end:t.get("end"),type:t.get("type")}})).filter((function(e){return e.refName===t})))||[]}var P=(0,l.observer)((function(e){var t=e.overview,r=e.block,n=e.assembly,o=r.offsetPx,u=r.reversed,l=O(n,r.refName),c=l.map((function(e){var r=e.refName,n=e.start,a=e.end,o=e.type;return[t.bpToPx({refName:r,coord:n}),t.bpToPx({refName:r,coord:a}),o]})),s=l||[],f=u?s.length-1:0,d=u?0:s.length-1,m=!0;return i.default.createElement("g",{transform:"translate(-".concat(o,")")},c.map((function(e,t){var r,n,o,u,l,c=(0,a.default)(e,3),s=c[0],g=c[1],h=c[2],v="".concat(s,"-").concat(g,"-").concat(h);return"acen"===h&&m?(m=!1,i.default.createElement("polygon",{key:v,points:[[s,0],[g,p.HEADER_OVERVIEW_HEIGHT/2],[s,p.HEADER_OVERVIEW_HEIGHT]].toString(),fill:k[h]})):"acen"!==h||m?f===t?i.default.createElement("path",{key:v,d:(r=Math.min(s,g),n=0,o=Math.abs(g-s),u=p.HEADER_OVERVIEW_HEIGHT,l=8,"M"+(r+l)+","+n+"h"+(o-l)+"v"+u+"h"+(l-o)+"a"+l+","+l+" 0 0 1 "+-l+","+-l+"v"+(2*l-u)+"a"+l+","+l+" 0 0 1 "+l+","+-l+"z"),fill:k[h]}):d===t?i.default.createElement("path",{key:v,d:w(Math.min(s,g),0,Math.abs(g-s)-2,p.HEADER_OVERVIEW_HEIGHT,8),fill:k[h]}):i.default.createElement("rect",{key:v,x:Math.min(s,g),y:0,width:Math.abs(g-s),height:p.HEADER_OVERVIEW_HEIGHT,fill:k[h]}):i.default.createElement("polygon",{key:v,points:[[s,p.HEADER_OVERVIEW_HEIGHT/2],[g,0],[g,p.HEADER_OVERVIEW_HEIGHT]].toString(),fill:k[h]})})))}));t.Cytobands=P;var E=(0,l.observer)((function(e){for(var t=e.scale,r=e.model,n=e.block,a=e.overview,o=y(),l=r.cytobandOffset,s=r.bpPerPx,d=r.showCytobands,p=n.start,g=n.end,h=n.reversed,v=n.refName,b=n.assemblyName,w=(0,m.chooseGridPitch)(t,120,15).majorPitch,k=(0,f.getSession)(r).assemblyManager.get(b),E=null==k?void 0:k.getRefNameColor(v),S=[],x=0;x<Math.floor((g-p)/w);x++){var C=(x+1)*w;S.push(h?g-C:p+C)}var j=d&&O(k,n.refName).length;return i.default.createElement("div",null,i.default.createElement(u.Typography,{style:{left:n.offsetPx+3,color:j?"black":E},className:o.scaleBarRefName},v),i.default.createElement("div",{className:(0,c.default)(o.scaleBarContig,j?void 0:h?o.scaleBarContigReverse:o.scaleBarContigForward,j?void 0:o.scaleBarBorder),style:{left:n.offsetPx+l,width:n.widthPx,borderColor:E}},j?null:S.map((function(e,r){return i.default.createElement(u.Typography,{key:"".concat(JSON.stringify(n),"-").concat(e,"-").concat(r),className:o.scaleBarLabel,variant:"body2",style:{left:(r+1)*w/t,pointerEvents:"none",color:E}},(0,f.getTickDisplayStr)(e,s))})),j?i.default.createElement("svg",{style:{width:"100%"}},i.default.createElement(P,{overview:a,assembly:k,block:n})):null))})),S=(0,l.observer)((function(e){var t=e.model,r=e.scale,n=e.overview,a=y(),o=(0,u.useTheme)(),l=t.dynamicBlocks,c=t.showCytobands,s=t.cytobandOffset,f=l.contentBlocks,p=n.dynamicBlocks,m=o.palette,g=m.tertiary,h=m.primary,b=g?g.light:h.light;if(!f.length)return null;var w=f[0],k=n.bpToPx(v(v({},w),{},{coord:w.reversed?w.end:w.start}))||0,O=f[f.length-1],P=n.bpToPx(v(v({},O),{},{coord:O.reversed?O.start:O.end}))||0,S=c?"#f00":b,x=c?.1:.3;return i.default.createElement("div",{className:a.scaleBar},i.default.createElement("div",{className:a.scaleBarVisibleRegion,style:{width:P-k,left:k+s,background:(0,u.alpha)(S,x),borderColor:S}}),p.map((function(e,o){return e instanceof d.ContentBlock?i.default.createElement(E,{scale:r,block:e,model:t,overview:n,key:"".concat(JSON.stringify(e),"-").concat(o)}):i.default.createElement("div",{key:"".concat(JSON.stringify(e),"-").concat(o),className:a.scaleBarContig,style:{width:e.widthPx,left:e.offsetPx,backgroundColor:"#999",backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(255,255,255,.5) 1px, rgba(255,255,255,.5) 3px)"}})})))}));var x=(0,l.observer)((function(e){var t=e.model,r=e.children,n=y(),a=t.totalBp,o=t.width,u=t.cytobandOffset,l=t.displayedRegions,c=s.default.create({displayedRegions:JSON.parse(JSON.stringify(l)),interRegionPaddingWidth:0,minimumBlockWidth:t.minimumBlockWidth}),f=o-u;c.setVolatileWidth(f),c.showAllRegions();var d=a/(f-2*(l.length-1));return i.default.createElement("div",null,i.default.createElement(g.default,{model:t,overview:c,ControlComponent:i.default.createElement(S,{model:t,overview:c,scale:d})}),i.default.createElement("div",{className:n.overview},i.default.createElement("svg",{height:p.HEADER_BAR_HEIGHT,className:n.overviewSvg},i.default.createElement(b,{model:t,overview:c})),r))}));t.default=x},942:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(12)),i=n(r(20)),u=n(r(1)),l=r(14),c=r(23),s=r(32),f=n(r(528)),d=r(530),p=r(128),m=(0,c.makeStyles)((function(){return{headerRefName:{minWidth:100}}}));var g=(0,l.observer)((function(e){var t=e.model,r=e.showHelp,n=m(),l=(0,c.useTheme)(),g=(0,s.getSession)(t),h=g.textSearchManager,v=g.assemblyManager,y=t.assemblyNames,b=t.rankSearchResults,w=y[0],k=v.get(w),O=t.searchScope(w);function P(){return(P=(0,i.default)(a.default.mark((function e(r){var n,i,u,l,c,s,f,p,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getTrackId(),i=r.getLocation(),u=r.getLabel(),l=i.split(":"),c=(0,o.default)(l,2),s=c[0],f=c[1],p=(null==k?void 0:k.allRefNames)||[],e.prev=5,!(p.includes(i)||p.includes(s)&&void 0!==f&&!Number.isNaN(parseInt(f,10)))){e.next=10;break}t.navToLocString(i,w),e.next=21;break;case 10:return e.next=12,(0,d.fetchResults)({queryString:u,searchType:"exact",searchScope:O,rankSearchResults:b,textSearchManager:h,assembly:k});case 12:if(!((m=e.sent).length>1)){e.next=18;break}return t.setSearchResults(m,u.toLowerCase()),e.abrupt("return");case 18:1===m.length&&(i=m[0].getLocation(),n=m[0].getTrackId());case 19:t.navToLocString(i,w),n&&t.showTrack(n);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),console.error(e.t0),g.notify("".concat(e.t0),"warning");case 27:case"end":return e.stop()}}),e,null,[[5,23]])})))).apply(this,arguments)}return u.default.createElement(f.default,{showHelp:r,onSelect:function(e){return P.apply(this,arguments)},assemblyName:w,fetchResults:function(e){return(0,d.fetchResults)({queryString:e,searchScope:O,rankSearchResults:b,textSearchManager:h,assembly:k})},model:t,TextFieldProps:{variant:"outlined",className:n.headerRefName,style:{margin:p.SPACING,minWidth:"175px"},InputProps:{style:{padding:0,height:p.WIDGET_HEIGHT,background:(0,c.alpha)(l.palette.background.paper,.8)}}}})}));t.default=g},943:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(23),i=r(208),u=r(14),l=n(r(2181)),c=n(r(2183)),s=n(r(2185)),f=n(r(2190)),d=n(r(2191)),p=n(r(2192)),m=n(r(944)),g=(0,o.makeStyles)((function(e){return{note:{textAlign:"center",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},dots:{"&::after":{display:"inline-block",animation:"$ellipsis 1.5s infinite",content:'"."',width:"1em",textAlign:"left"}},"@keyframes ellipsis":{"0%":{content:'"."'},"33%":{content:'".."'},"66%":{content:'"..."'}}}})),h=(0,u.observer)((function(e){var t=e.model,r=t.tracks,n=t.error,u=t.hideHeader,h=t.initialized,v=t.hasDisplayedRegions,y=g();return h||n?!v||n?a.default.createElement(f.default,{model:t}):a.default.createElement("div",{style:{position:"relative"}},t.seqDialogDisplayed?a.default.createElement(p.default,{model:t,handleClose:function(){t.setSequenceDialogOpen(!1)}}):null,t.isSearchDialogDisplayed?a.default.createElement(m.default,{model:t,handleClose:function(){t.setSearchResults(void 0,void 0)}}):null,u?a.default.createElement("div",{style:{position:"absolute",right:0,zIndex:1001}},a.default.createElement(d.default,{model:t})):a.default.createElement(l.default,{model:t}),a.default.createElement(s.default,{model:t},r.length?r.map((function(e){return a.default.createElement(c.default,{key:e.id,model:t,track:e})})):a.default.createElement(o.Paper,{variant:"outlined",className:y.note},t.hideNoTracksActive?a.default.createElement("div",{style:{height:"48px"}}):a.default.createElement(a.default.Fragment,null,a.default.createElement(o.Typography,null,"No tracks active."),a.default.createElement(o.Button,{variant:"contained",color:"primary",onClick:t.activateTrackSelector,style:{zIndex:1e3},startIcon:a.default.createElement(i.TrackSelector,null)},"Open track selector"))))):a.default.createElement(o.Typography,{className:y.dots,variant:"h5"},"Loading")}));t.default=h},944:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r,n=e.model,s=e.optAssemblyName,f=e.handleClose,d=c(),p=(0,i.getSession)(n),m=(0,o.getEnv)(p).pluginManager,g=p.assemblyManager,h=s;n.displayedRegions.length>0&&(h=null===(r=n.displayedRegions[0])||void 0===r?void 0:r.assemblyName);if(!h)throw new Error("Assembly name not found");var v=g.get(h);if(!v)throw new Error("assembly ".concat(h," not found"));if(!v.regions)throw new Error("assembly ".concat(h," regions not loaded"));var y=v.regions;return a.default.createElement(u.Dialog,{open:!0,maxWidth:"xl",onClose:f},a.default.createElement(u.DialogTitle,null,"Search results",f?a.default.createElement(u.IconButton,{"data-testid":"close-resultsDialog",className:d.closeButton,onClick:function(){f()}},a.default.createElement(l.default,null)):null),a.default.createElement(u.Divider,null),a.default.createElement(u.DialogContent,null,null!==(t=n.searchResults)&&void 0!==t&&t.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Typography,null,"Showing results for ",a.default.createElement("b",null,n.searchQuery)),a.default.createElement(u.TableContainer,{component:u.Paper},a.default.createElement(u.Table,null,a.default.createElement(u.TableHead,null,a.default.createElement(u.TableRow,null,a.default.createElement(u.TableCell,null,"Name"),a.default.createElement(u.TableCell,{align:"right"},"Location"),a.default.createElement(u.TableCell,{align:"right"},"Track"),a.default.createElement(u.TableCell,{align:"right"}))),a.default.createElement(u.TableBody,null,n.searchResults.map((function(e){return a.default.createElement(u.TableRow,{key:"".concat(e.getId())},a.default.createElement(u.TableCell,{component:"th",scope:"row"},e.getLabel()),a.default.createElement(u.TableCell,{align:"right"},e.getLocation()),a.default.createElement(u.TableCell,{align:"right"},function(e){if(e){var t,r=m.pluggableConfigSchemaType("track"),a=(0,o.resolveIdentifier)(r,(0,o.getRoot)(n),e);if(a)return null===(t=a.name)||void 0===t?void 0:t.value}return""}(e.getTrackId())||"N/A"),a.default.createElement(u.TableCell,{align:"right"},a.default.createElement(u.Button,{onClick:function(){!function(e){try{var t=y.find((function(t){return e===t.refName}));t?(n.setDisplayedRegions([t]),n.showAllRegions()):n.navToLocString(e,h)}catch(e){console.warn(e),p.notify("".concat(e),"warning")}}(e.getLocation());var t=e.getTrackId();t&&n.showTrack(t),f()},color:"primary",variant:"contained"},"Go")))})))))):a.default.createElement(u.Typography,null,"No results found for ",a.default.createElement("b",null,n.searchQuery))),a.default.createElement(u.Divider,null),a.default.createElement(u.DialogActions,null,a.default.createElement(u.Button,{onClick:function(){return f()},color:"primary"},"Cancel")))},t.useStyles=void 0;var a=n(r(1)),o=r(17),i=r(32),u=r(23),l=n(r(41)),c=(0,u.makeStyles)((function(e){return{dialogContent:{width:"80em"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));t.useStyles=c},945:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"configSchema",{enumerable:!0,get:function(){return o.default}});var a=n(r(2202)),o=n(r(2203))},946:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(19)),o=n(r(20)),i=n(r(15)),u=n(r(16)),l=n(r(30)),c=n(r(25)),s=n(r(26)),f=n(r(24)),d=n(r(10)),p=r(375),m=r(89),g=r(97),h=r(115),v=r(32),y=n(r(85)),b=n(r(519));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var P=function(e){(0,c.default)(s,e);var t,r,n=O(s);function s(e,t,r){var u,c;(0,i.default)(this,s),u=n.call(this,e,t,r),(0,d.default)((0,l.default)(u),"fasta",void 0),(0,d.default)((0,l.default)(u),"header",void 0),(0,d.default)((0,l.default)(u),"seqCache",new y.default({cache:new b.default({maxSize:200}),fill:(c=(0,o.default)(a.default.mark((function e(t,r){var n,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.refName,o=t.start,i=t.end,e.abrupt("return",u.fasta.getSequence(n,o,i,k(k({},t),{},{signal:r})));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})}));var f=u.getConf("fastaLocation"),m=u.getConf("faiLocation"),h={fasta:(0,g.openLocation)(f,u.pluginManager),fai:(0,g.openLocation)(m,u.pluginManager)};return u.fasta=new p.IndexedFasta(h),u}return(0,u.default)(s,[{key:"getRefNames",value:function(e){return this.fasta.getSequenceNames(e)}},{key:"getRegions",value:(r=(0,o.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fasta.getSequenceSizes(t);case 2:return r=e.sent,e.abrupt("return",Object.keys(r).map((function(e){return{refName:e,start:0,end:r[e]}})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getHeader",value:(t=(0,o.default)(a.default.mark((function e(){var t,r=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=2;break}return e.abrupt("return",this.header);case 2:if(""!==(t=this.getConf("metadataLocation")).uri&&"/path/to/fa.metadata.yaml"!==t.uri){e.next=5;break}return e.abrupt("return",null);case 5:return this.header=(0,g.openLocation)(t).readFile("utf8").catch((function(e){throw r.header=void 0,e})),e.abrupt("return",this.header);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e,t){var r=this,n=e.refName,i=e.start,u=e.end;return(0,h.ObservableCreate)(function(){var e=(0,o.default)(a.default.mark((function e(o){var l,c,s,f,d,p,m,g,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fasta.getSequenceSize(n,t);case 2:for(l=e.sent,c=void 0!==l?Math.min(l,u):u,s=[],p=u+((f=128e3)-u%f),m=d=i-i%f;m<p;m+=f)g={refName:n,start:m,end:m+f},s.push(r.seqCache.get(JSON.stringify(g),g,null==t?void 0:t.signal));return e.next=11,Promise.all(s);case 11:(h=e.sent.join("").slice(i-d).slice(0,u-i))&&o.next(new v.SimpleFeature({id:"".concat(n," ").concat(i,"-").concat(c),data:{refName:n,start:i,end:c,seq:h}})),o.complete();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),s}(m.BaseSequenceAdapter);t.default=P},947:function(e,t,r){"use strict";var n=r(9),a=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tooltip=void 0;var o=n(r(36)),i=n(r(10)),u=n(r(12)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(14),s=r(23),f=r(368),d=r(370);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return+(+e).toPrecision(6)}var v=function(e){return e.toLocaleString("en-US")},y=(0,s.makeStyles)((function(e){return{tooltip:{position:"absolute",pointerEvents:"none",backgroundColor:(0,s.alpha)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(12),lineHeight:"".concat((t=1.4,Math.round(1e5*t)/1e5),"em"),maxWidth:300,wordWrap:"break-word"},hoverVertical:{background:"#333",border:"none",width:1,height:"100%",top:f.YSCALEBAR_LABEL_OFFSET,cursor:"default",position:"absolute",pointerEvents:"none"}};var t})),b=l.default.forwardRef((function(e,t){var r=e.feature,n=r.get("start"),a=r.get("end"),o=[r.get("refName"),n===a?v(n):"".concat(v(n),"..").concat(v(a))].filter((function(e){return!!e})).join(":");return void 0!==r.get("summary")?l.default.createElement("div",{ref:t},o,l.default.createElement("br",null),"Max: ",h(r.get("maxScore")),l.default.createElement("br",null),"Avg: ",h(r.get("score")),l.default.createElement("br",null),"Min: ",h(r.get("minScore"))):l.default.createElement("div",{ref:t},o,l.default.createElement("br",null),"".concat(h(r.get("score"))))})),w=(0,c.observer)((function(e){var t=e.model,r=e.height,n=e.clientMouseCoord,a=e.offsetMouseCoord,i=e.clientRect,c=e.TooltipContents,p=t.featureUnderMouse,m=(0,l.useState)(0),h=(0,u.default)(m,2),v=h[0],b=h[1],w=(0,l.useState)(null),k=(0,u.default)(w,2),O=k[0],P=k[1],E=y(),S=(0,l.useMemo)((function(){return{getBoundingClientRect:function(){var e=n[0]+v/2+20,t=(null==i?void 0:i.top)||0;return{top:t,left:e,bottom:t,right:e,width:0,height:0,x:e,y:t,toJSON:function(){}}}}}),[null==i?void 0:i.top,n,v]),x=(0,d.usePopper)(S,O),C=x.styles,j=x.attributes;return p?l.default.createElement(l.default.Fragment,null,l.default.createElement(s.Portal,null,l.default.createElement("div",(0,o.default)({ref:P,className:E.tooltip,style:g(g({},C.popper),{},{zIndex:1e5})},j.popper),l.default.createElement(c,{ref:function(e){b((null==e?void 0:e.getBoundingClientRect().width)||0)},feature:p}))),l.default.createElement("div",{className:E.hoverVertical,style:{left:a[0],height:r-2*f.YSCALEBAR_LABEL_OFFSET}})):null}));t.Tooltip=w;var k=(0,c.observer)((function(e){return l.default.createElement(w,(0,o.default)({TooltipContents:b},e))}));t.default=k},948:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"YScaleBar",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var a=n(r(1)),o=r(32),i=r(29),u=r(141),l=r(14),c=n(r(2241)),s=(0,l.observer)((function(e){var t=e.model,r=t.stats,n=t.height,l=t.needsScalebar,s="overlapping"===(0,o.getContainingView)(t).trackLabels?(0,o.measureText)((0,i.getConf)((0,o.getContainingTrack)(t),"name"),12.8)+100:50;return a.default.createElement("div",null,a.default.createElement(u.BaseLinearDisplayComponent,e),r&&l?a.default.createElement("svg",{style:{position:"absolute",top:0,left:s,pointerEvents:"none",height:n,width:50}},a.default.createElement(c.default,{model:t})):null)}));t.default=s},949:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return i.types.model("Configuration",{configuration:(0,a.ConfigurationSchema)("Root",{rpc:o.default.configSchema,highResolutionScaling:{type:"number",defaultValue:2},theme:{type:"frozen",defaultValue:{}}}),assembly:t,tracks:i.types.array(e.pluggableConfigSchemaType("track")),connections:i.types.array(e.pluggableConfigSchemaType("connection")),aggregateTextSearchAdapters:i.types.array(e.pluggableConfigSchemaType("text search adapter")),plugins:i.types.frozen()}).views((function(e){return{get assemblies(){return[e.assembly]},get assemblyName(){return(0,a.readConfObject)(e.assembly,"name")},get rpcManager(){return(0,i.getParent)(e).rpcManager}}}))};var a=r(29),o=n(r(932)),i=r(17)},95:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.isFeature=function(e){return"object"===(0,u.default)(e)&&null!==e&&"function"==typeof e.get&&"function"==typeof e.id};var a=n(r(15)),o=n(r(16)),i=n(r(10)),u=n(r(11));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e){return"uniqueId"in e&&"object"!==(0,u.default)(e.data)}var f=function(){function e(t){var r=this;(0,a.default)(this,e),(0,i.default)(this,"data",void 0),(0,i.default)(this,"subfeatures",void 0),(0,i.default)(this,"parentHandle",void 0),(0,i.default)(this,"uniqueId",void 0),s(t)?this.data=t:(this.data=t.data||{},this.parentHandle=t.parent);var n,o=s(t)?t.uniqueId:t.id;if(null==o)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(o),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error("invalid feature data, end less than start. end: ".concat(this.data.end," start: ").concat(this.data.start));this.data.subfeatures&&(this.subfeatures=null===(n=this.data.subfeatures)||void 0===n?void 0:n.map((function(t,n){return"function"!=typeof t.get?new e({id:t.uniqueId||"".concat(o,"-").concat(n),data:c({strand:r.data.strand},t),parent:r}):t})))}return(0,o.default)(e,[{key:"get",value:function(e){return"subfeatures"===e?this.subfeatures:"parent"===e?this.parent():this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t}},{key:"tags",value:function(){return Object.keys(this.data)}},{key:"id",value:function(){return this.uniqueId}},{key:"parent",value:function(){return this.parentHandle}},{key:"children",value:function(){return this.get("subfeatures")}},{key:"toJSON",value:function(){var e=c(c({},this.data),{},{uniqueId:this.id()}),t=this.parent();t&&(e.parentId=t.id());var r=this.children();return r&&(e.subfeatures=r.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(t){return new e(c({},t))}}]),e}();t.default=f},950:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=l.types.model("ReactCircularGenomeViewSession",{name:l.types.identifier,view:e.getViewType("CircularView").stateModel,widgets:l.types.map(e.pluggableMstType("widget","stateModel")),activeWidgets:l.types.map(l.types.safeReference(e.pluggableMstType("widget","stateModel"))),connectionInstances:l.types.array(e.pluggableMstType("connection","stateModel"))}).volatile((function(){return{selection:void 0,task:void 0,queueOfDialogs:[]}})).views((function(e){return{get DialogComponent(){if(e.queueOfDialogs.length){var t=e.queueOfDialogs[0];return t&&t[0]}},get DialogProps(){if(e.queueOfDialogs.length){var t=e.queueOfDialogs[0];return t&&t[1]}},get rpcManager(){return(0,l.getParent)(e).rpcManager},get configuration(){return(0,l.getParent)(e).config.configuration},get assemblies(){return[(0,l.getParent)(e).config.assembly]},get assemblyNames(){return[(0,l.getParent)(e).config.assemblyName]},get tracks(){return(0,l.getParent)(e).config.tracks},get aggregateTextSearchAdapters(){return(0,l.getParent)(e).config.aggregateTextSearchAdapters},get connections(){return(0,l.getParent)(e).config.connections},get adminMode(){return!1},get assemblyManager(){return(0,l.getParent)(e).assemblyManager},get version(){return""},get views(){return[e.view]},renderProps:function(){return{theme:(0,c.readConfObject)(this.configuration,"theme")}},get visibleWidget(){if((0,l.isAlive)(e))return Array.from(e.activeWidgets.values())[e.activeWidgets.size-1]},getReferring:function(t){var r=[];return(0,l.walk)((0,l.getParent)(e),(function(e){if((0,l.isModelType)((0,l.getType)(e))){var n=(0,l.getMembers)(e);Object.entries(n.properties).forEach((function(n){var a=(0,i.default)(n,2),o=a[0],u=a[1];(0,l.isReferenceType)(u)&&e[o]===t&&r.push({node:e,key:o})}))}})),r}}})).actions((function(t){return{queueDialog:function(e){var r=this,n=e((function(){r.removeActiveDialog()})),a=(0,i.default)(n,2),u=a[0],l=a[1];t.queueOfDialogs=[].concat((0,o.default)(t.queueOfDialogs),[[u,l]])},removeActiveDialog:function(){t.queueOfDialogs=t.queueOfDialogs.slice(1)},makeConnection:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.type;if(!a)throw new Error("track configuration has no `type` listed");var o=(0,c.readConfObject)(r,"name"),i=e.getConnectionType(a);if(!i)throw new Error("unknown connection type ".concat(a));var u=m(m({},n),{},{name:o,type:a,configuration:r}),l=t.connectionInstances.push(u);return t.connectionInstances[l-1]},removeReferring:function(e,t,r,n){var a=this;e.forEach((function(e){var o=e.node,i=!1;try{var c="open track(s)",s=(0,u.getContainingView)(o);r.push((function(){return s.hideTrack(t.trackId)})),i=!0,n[c]||(n[c]=0),n[c]+=1}catch(e){}if(a.hasWidget(o)){var f="configuration editor widget(s)";r.push((function(){return a.hideWidget(o)})),i=!0,n[f]||(n[f]=0),n[f]+=1}if(!i)throw new Error("Error when closing this connection, the following node is still referring to a track configuration: ".concat(JSON.stringify((0,l.getSnapshot)(o))))}))},prepareToBreakConnection:function(e){var r=this,n=[],a={},o=(0,c.readConfObject)(e,"name");t.connectionInstances.find((function(e){return e.name===o})).tracks.forEach((function(e){var o=t.getReferring(e);r.removeReferring(o,e,n,a)}));return[function(){n.forEach((function(e){return e()})),r.breakConnection(e)},a]},breakConnection:function(e){var r=(0,c.readConfObject)(e,"name"),n=t.connectionInstances.find((function(e){return e.name===r}));t.connectionInstances.remove(n)},addView:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.getElementType("view",r);if(!a)throw new Error("unknown view type ".concat(r));t.view=m(m({},n),{},{type:r})},removeView:function(){},addWidget:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{type:r},i=e.getElementType("widget",r);if(!i)throw new Error("unknown widget type ".concat(r));var u=m(m({},a),{},{id:n,type:r,configuration:o});return t.widgets.set(n,u),t.widgets.get(n)},showWidget:function(e){t.activeWidgets.has(e.id)&&t.activeWidgets.delete(e.id),t.activeWidgets.set(e.id,e)},hasWidget:function(e){return t.activeWidgets.has(e.id)},hideWidget:function(e){t.activeWidgets.delete(e.id)},hideAllWidgets:function(){t.activeWidgets.clear()},setSelection:function(e){t.selection=e},clearSelection:function(){t.selection=void 0},clearConnections:function(){t.connectionInstances.length=0},renameCurrentSession:function(e){return(0,l.getParent)(t).renameCurrentSession(e)}}})).views((function(e){return{getTrackActionMenuItems:function(t){return[{label:"About track",onClick:function(){e.queueDialog((function(e){return[f.default,{config:t,handleClose:e}]}))},icon:s.default}]}}}));return(0,d.default)(t)};var a=n(r(10)),o=n(r(33)),i=n(r(12)),u=r(32),l=r(17),c=r(29),s=n(r(902)),f=n(r(2250)),d=n(r(2251));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},96:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseConnectionModelFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"BaseDisplay",{enumerable:!0,get:function(){return u.BaseDisplay}}),Object.defineProperty(t,"BaseInternetAccountConfig",{enumerable:!0,get:function(){return c.BaseInternetAccountConfig}}),Object.defineProperty(t,"BaseViewModel",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"InternetAccount",{enumerable:!0,get:function(){return l.InternetAccount}}),Object.defineProperty(t,"baseConnectionConfig",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"createBaseTrackConfig",{enumerable:!0,get:function(){return f.createBaseTrackConfig}}),Object.defineProperty(t,"createBaseTrackModel",{enumerable:!0,get:function(){return s.createBaseTrackModel}});var a=n(r(2077)),o=n(r(2078)),i=n(r(2079)),u=r(2080),l=r(2081),c=r(2083),s=r(2084),f=r(2085)},97:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RemoteFileWithRangeCache",{enumerable:!0,get:function(){return c.RemoteFileWithRangeCache}}),t.getFetcher=function(e,t){if(!(0,s.isUriLocation)(e))throw new Error("Not a valid UriLocation: ".concat(JSON.stringify(e)));var r=g(e,t);if(r)return r.getFetcher(e);return h},t.openLocation=function(e,t){if(!e)throw new Error("must provide a location to openLocation");if(function(e){return"localPath"in e}(e)){if(!e.localPath)throw new Error("No local path provided");if(l.default||d.isElectron)return new u.LocalFile(e.localPath);throw new Error("can't use local files in the browser")}if(function(e){return"blobId"in e}(e)){var r=(0,f.getBlob)(e.blobId);if(!r)throw new Error('file ("'.concat(e.name,'") was opened locally from a previous session. To restore it, go to track settings and reopen the file'));return new u.BlobFile(r)}if((0,s.isUriLocation)(e)){if(!e.uri)throw new Error("No URI provided");var n=e.baseUri?m(m({},e),{},{uri:new URL(e.uri,e.baseUri).href}):e;if(t){var a=g(e,t);if(a)return a.openLocation(n)}return new c.RemoteFileWithRangeCache(n.uri,{fetch:h})}throw new Error("invalid fileLocation")};var a=n(r(19)),o=n(r(20)),i=n(r(10)),u=r(211),l=n(r(320)),c=r(2082),s=r(127),f=r(65),d=r(32);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r=t.rootModel;if(r&&(0,s.isAppRootModel)(r))return r.findAppropriateInternetAccount(e);if(e.internetAccountPreAuthorization){if(!e.internetAccountPreAuthorization.authInfo.token)throw new Error("Failed to obtain token from internet account. Try reloading the page");return t.getInternetAccountType(e.internetAccountPreAuthorization.internetAccountType).stateModel.create({type:e.internetAccountPreAuthorization.internetAccountType,configuration:e.internetAccountPreAuthorization.authInfo.configuration})}}function h(e,t){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(a.default.mark((function e(t,r){var n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:if(401!==(n=e.sent).status){e.next=7;break}if(!(o=n.headers.get("WWW-Authenticate"))||!o.includes("Basic")){e.next=7;break}throw new s.AuthNeededError("Accessing HTTPBasic resource without authentication",t.toString());case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=async-CircularGenomeView.js.map
//# sourceMappingURL=async-CircularGenomeView.js.map