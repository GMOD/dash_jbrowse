/*! For license information please see async-CircularGenomeView.js.LICENSE.txt */
(window.webpackJsonpdash_jbrowse=window.webpackJsonpdash_jbrowse||[]).push([[2],{1018:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new a.default.Jexl;return e.addFunction("get",(function(e,t){return e.get(t)})),e.addFunction("id",(function(e){return e.id()})),e.addFunction("cast",(function(e){return e})),e.addFunction("log",(function(e){return console.log(e),e})),e.addFunction("max",Math.max),e.addFunction("min",Math.min),e.addFunction("sqrt",Math.sqrt),e.addFunction("ceil",Math.ceil),e.addFunction("floor",Math.floor),e.addFunction("round",Math.round),e.addFunction("abs",Math.abs),e.addFunction("log10",Math.log10),e.addFunction("parseInt",Number.parseInt),e.addFunction("parseFloat",Number.parseFloat),e.addFunction("split",(function(e,t){return e.split(t)})),e.addFunction("charAt",(function(e,t){return e.charAt(t)})),e.addFunction("charCodeAt",(function(e,t){return e.charCodeAt(t)})),e.addFunction("codePointAt",(function(e,t){return e.codePointAt(t)})),e.addFunction("startsWith",(function(e,t,r){return e.startsWith(t,r)})),e.addFunction("endsWith",(function(e,t,r){return e.endsWith(t,r)})),e.addFunction("padEnd",(function(e,t,r){return e.padEnd(t,r)})),e.addFunction("padStart",(function(e,t,r){return e.padStart(t,r)})),e.addFunction("repeat",(function(e,t){return e.repeat(t)})),e.addFunction("replace",(function(e,t,r){return e.replace(t,r)})),e.addFunction("replaceAll",(function(e,t,r){return e.replaceAll(t,r)})),e.addFunction("slice",(function(e,t,r){return e.slice(t,r)})),e.addFunction("startsWith",(function(e,t,r){return e.startsWith(t,r)})),e.addFunction("substring",(function(e,t,r){return e.substring(t,r)})),e.addFunction("toLowerCase",(function(e){return e.toLowerCase()})),e.addFunction("toUpperCase",(function(e){return e.toUpperCase()})),e.addFunction("trim",(function(e){e.trim()})),e.addFunction("trimEnd",(function(e){return e.trimEnd()})),e.addFunction("trimStart",(function(e){return e.trimStart()})),e.addFunction("getTag",(function(e,t){var r=e.get("tags");return r?r[t]:e.get(t)})),e.addBinaryOp("&",15,(function(e,t){return e&t})),e};var a=n(r(735))},1019:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new TypeError("must provide a model object");var n=e,a=n.configuration;if(f(a))return c(a,t,r);throw new TypeError("cannot getConf on this model, it has no configuration")},t.getTypeNamesFromExplicitlyTypedUnion=function e(t){if((0,i.isType)(t)&&(t=(0,u.resolveLateType)(t),(0,i.isUnionType)(t))){var r=[];return(0,u.getUnionSubTypes)(t).forEach((function(t){t=(0,u.resolveLateType)(t);var n=e(t);n.length||(n=[(0,u.getDefaultValue)(t).type]);if(!n[0])throw new Error("invalid config schema type ".concat(t));r.push.apply(r,(0,o.default)(n))})),r}return[]},t.isBareConfigurationSchemaType=l,t.isConfigurationModel=f,t.isConfigurationSchemaType=s,t.isConfigurationSlotType=function(e){return"object"===(0,a.default)(e)&&null!==e&&"isJBrowseConfigurationSlot"in e},t.readConfObject=c;var a=n(r(20)),o=n(r(41)),i=r(18),u=r(206);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new TypeError("must provide conf object to read");if(!t)return JSON.parse(JSON.stringify((0,i.getSnapshot)(e)));if("string"==typeof t){var n=e[t];if(!n&&(0,i.isStateTreeNode)(e)&&(0,i.isMapType)((0,i.getType)(e))&&(n=e.get(t)),!n)return;if(n.expr){var a=n.expr.evalSync(r);return(0,i.isStateTreeNode)(a)?JSON.parse(JSON.stringify((0,i.getSnapshot)(a))):a}return(0,i.isStateTreeNode)(n)?JSON.parse(JSON.stringify((0,i.getSnapshot)(n))):n}var o=t[0];if(t.length>1){var u=t.slice(1),l=e[o];if(!l&&(0,i.isStateTreeNode)(e)&&(0,i.isMapType)((0,i.getType)(e))&&(l=e.get(o)),!l)return;return c(l,u,r)}return c(e,o,r)}function l(e){if((0,i.isType)(e)){if((0,i.isModelType)(e)&&("isJBrowseConfigurationSchema"in e||e.name.includes("ConfigurationSchema")))return!0;if((0,i.isLateType)(e))return!0}return!1}function s(e){return!!(0,i.isType)(e)&&(!!l(e)||((0,i.isUnionType)(e)?(0,u.getUnionSubTypes)(e).every((function(e){return s(e)||"undefined"===e.name})):!(!(0,i.isOptionalType)(e)||!s((0,u.getSubType)(e)))||(!(!(0,i.isArrayType)(e)||!s((0,u.getSubType)(e)))||!(!(0,i.isMapType)(e)||!s((0,u.getSubType)(e))))))}function f(e){return(0,i.isStateTreeNode)(e)&&s((0,i.getType)(e))}},1020:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.LogoFull=function(e){var t=e.variant;return a.default.createElement("svg",{viewBox:"0 0 641 175"},a.default.createElement(u,{variant:t}),a.default.createElement(i,{variant:t}))},t.Logomark=function(e){var t=e.variant;return a.default.createElement("svg",{viewBox:"0 0 175 175"},a.default.createElement(i,{variant:t}))};var a=n(r(1));function o(e){return"black"===e?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:"white"===e?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function i(e){var t=o(e.variant);return a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),a.default.createElement("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),a.default.createElement("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),a.default.createElement("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),a.default.createElement("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"}))}function u(e){var t=o(e.variant);return a.default.createElement("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight}},a.default.createElement("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),a.default.createElement("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),a.default.createElement("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),a.default.createElement("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),a.default.createElement("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),a.default.createElement("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),a.default.createElement("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"}))}},1021:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(59)),i=n(r(21)),u=n(r(66)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(23),s=n(r(12)),f=["onDrag","vertical","flexbox","className"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=(0,l.makeStyles)({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});var h=function(e){var t,r=e.onDrag,n=e.vertical,a=void 0!==n&&n,l=e.flexbox,d=void 0!==l&&l,h=e.className,m=(0,u.default)(e,f),y=(0,c.useState)(!1),g=(0,i.default)(y,2),v=g[0],b=g[1],w=(0,c.useRef)(0),O=p();return(0,c.useEffect)((function(){function e(e){e.preventDefault();var t=a?e.clientX:e.clientY,n=t-w.current;n&&(r(n),w.current=t)}function t(){b(!1)}return v?(window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",t,!0),function(){window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",t,!0)}):function(){}}),[v,r,a]),t=d?a?O.flexbox_verticalHandle:O.flexbox_horizontalHandle:a?O.verticalHandle:O.horizontalHandle,c.default.createElement("div",(0,o.default)({"data-resizer":"true",onMouseDown:function(e){e.preventDefault(),w.current=a?e.clientX:e.clientY,b(!0)},role:"presentation",className:(0,s.default)(t,h)},m))};t.default=h},1022:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.abortBreakPoint=function(e){return b.apply(this,arguments)},t.checkAbortSignal=g,t.isAbortException=function(e){return e instanceof Error&&("AbortError"===e.name||"ERR_ABORTED"===e.code||!!e.message.match(/\b(aborted|AbortError)\b/i))},t.makeAbortError=w,t.observeAbortSignal=function(e){if(!e)return h.Observable.create();return(0,h.fromEvent)(e,"abort")};var a=n(r(22)),o=n(r(24)),i=n(r(16)),u=n(r(15)),c=n(r(35)),l=n(r(27)),s=n(r(28)),f=n(r(26)),d=n(r(223)),p=n(r(13)),h=r(181);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var y=function(e){(0,l.default)(r,e);var t=m(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"code",void 0),e}return(0,i.default)(r)}((0,d.default)(Error));function g(e){if(e){if(!(e instanceof AbortSignal))throw new TypeError("must pass an AbortSignal");if(e.aborted)throw w()}}function v(e){return new Promise((function(t){return setTimeout(t,e)}))}function b(){return(b=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(1);case 2:g(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){if("undefined"!=typeof DOMException)return new DOMException("aborted","AbortError");var e=new y("aborted");return e.code="ERR_ABORTED",e}},1023:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesIntersect2=function(e,t,r,n){return t>r&&e<n},t.intersection2=function(e,t,r,n){if(t>r&&e<n&&n-r&&t-e)return e>r?t<n?[e,t]:[e,n]:t<n?[r,t]:[r,n];return[]},t.isContainedWithin=function(e,t,r,n){return r<=e&&n>=t}},1024:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.renderToAbstractCanvas=function(e,t,r,n){return l.apply(this,arguments)};var a=n(r(22)),o=n(r(24)),i=n(r(1)),u=r(599),c=r(45);function l(){return(l=(0,o.default)(a.default.mark((function e(t,r,n,o){var l,s,f,d,p,h,m,y,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.exportSVG,s=n.highResolutionScaling,f=void 0===s?1:s,!l||l.rasterizeLayers){e.next=7;break}return d=new u.PonyfillOffscreenCanvas(t,r),p=d.getContext("2d"),e.next=6,o(p);case 6:return e.abrupt("return",{reactElement:d.getSerializedSvg()});case 7:if(!l||!l.rasterizeLayers){e.next=32;break}return 4,h=(0,u.createCanvas)(Math.ceil(4*t),4*r),(m=h.getContext("2d")).scale(4,4),e.next=14,o(m);case 14:if(e.t0=i.default,e.t1=t,e.t2=r,!h.convertToBlob){e.next=27;break}return e.t4=c.blobToDataURL,e.next=21,h.convertToBlob({type:"image/png"});case 21:return e.t5=e.sent,e.next=24,(0,e.t4)(e.t5);case 24:e.t3=e.sent,e.next=28;break;case 27:e.t3=h.toDataURL();case 28:return e.t6=e.t3,e.t7={width:e.t1,height:e.t2,xlinkHref:e.t6},e.t8=e.t0.createElement.call(e.t0,"image",e.t7),e.abrupt("return",{reactElement:e.t8});case 32:return y=(0,u.createCanvas)(Math.ceil(t*f),r*f),(g=y.getContext("2d")).scale(f,f),e.next=37,o(g);case 37:return e.next=39,(0,u.createImageBitmap)(y);case 39:return e.t9=e.sent,e.abrupt("return",{imageData:e.t9});case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1025:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1809)).default;t.default=a},1026:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(85)),o=n(r(120)),i=n(r(148)),u=n(r(149)),c=n(r(287)),l=n(r(191)),s=n(r(1));t.default=function(e){var t=e.onClose,r=e.open,n=e.onFactoryReset;function f(e){"reset"===e&&n(),t()}return s.default.createElement(o.default,{open:r,onClose:function(){return f()}},s.default.createElement(i.default,{id:"alert-dialog-title"},"Reset"),s.default.createElement(u.default,null,s.default.createElement(c.default,{id:"alert-dialog-description"},"Are you sure you want to reset? This will restore the default configuration.")),s.default.createElement(l.default,null,s.default.createElement(a.default,{onClick:function(){return f()},color:"primary"},"Cancel"),s.default.createElement(a.default,{onClick:function(){return f("reset")},color:"primary",variant:"contained"},"OK")))}},1027:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html,r=c(t)?t:(0,o.default)(t);return a.default.createElement("div",{dangerouslySetInnerHTML:{__html:i.default.sanitize(r)}})},t.isHTML=c;var a=n(r(1)),o=n(r(776)),i=n(r(777)),u=new RegExp(["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","td","tfoot","th","thead","tr","u","ul"].map((function(e){return"<".concat(e,"\\b[^>]*>")})).join("|"),"i");function c(e){return u.test(e)}},1028:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAbortSignal=function(e){var t=e.abortSignalId,r=u.get(t);r||(r=new AbortController,u.set(t,r));return r.signal},t.isRemoteAbortSignal=function(e){return"object"===(0,a.default)(e)&&null!==e&&"abortSignalId"in e&&"number"==typeof e.abortSignalId},t.remoteAbort=c,t.remoteAbortRpcHandler=function(){return{signalAbort:c}},t.serializeAbortSignal=function(e,t){var r=i.get(e);r||(o+=1,i.set(e,o),r=o,e.addEventListener("abort",(function(){var r=i.get(e);void 0!==r&&t("signalAbort",r)})));return{abortSignalId:r}};var a=n(r(20)),o=0,i=new WeakMap;var u=new Map;function c(e){var t=e.signalId,r=u.get(t);r&&r.abort()}},1029:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13)),f=n(r(143)),d=r(206);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,!n.stateModel)throw new Error("no stateModel defined for internet account type ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for internet account type ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var a=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(a," is not explicitlyTyped"))}return n}return(0,a.default)(r)}(f.default);t.default=h},1030:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"AdapterClass",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"description",void 0),n.description=e.description,n.configSchema=e.configSchema,n.AdapterClass=e.AdapterClass,!n.AdapterClass)throw new Error("no AdapterClass defined for adapter type ".concat(n.name));return n}return(0,a.default)(r)}(n(r(143)).default);t.default=d},1031:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1820)).default;t.default=a},1032:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.blankStats=function(){return{scoreMin:0,scoreMax:0,scoreMean:0,scoreStdDev:0,scoreSum:0,scoreSumSquares:0,featureCount:0,featureDensity:0,basesCovered:0}},t.calcPerBaseStats=function(e,t){var r=e.start,n=e.end,a=[],o=t.sort((function(e,t){return e.get("start")-t.get("start")})),i=r,u=0,c=0;for(;i<n;){for(;u<o.length&&i>=o[u].get("end");)u+=1;var l=o[u];l&&i>=l.get("start")&&i<l.get("end")?a[c]=l.get("score"):a[c]=0,c+=1,i+=1}return a},t.calcStdFromSums=s,t.rectifyStats=f,t.scoresToStats=function(e,t){return d.apply(this,arguments)};var a=n(r(22)),o=n(r(24)),i=n(r(13)),u=r(58);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return 0===r?0:(a?n=t/r-e*e/(r*r):(n=t-e*e/r,r>1&&(n/=r-1)),n<0?0:Math.sqrt(n))}function f(e){return l(l({},e),{},{scoreMean:(e.scoreSum||0)/(e.featureCount||e.basesCovered||1),scoreStdDev:s(e.scoreSum,e.scoreSumSquares,e.featureCount||e.basesCovered),featureDensity:(e.featureCount||1)/e.basesCovered})}function d(){return(d=(0,o.default)(a.default.mark((function e(t,r){var n,o,i,c,l,s,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.start,o=t.end,e.next=3,r.pipe((0,u.reduce)((function(e,t){var r=t.get("score");return e.scoreMax=Math.max(e.scoreMax,t.get("summary")?t.get("maxScore"):r),e.scoreMin=Math.min(e.scoreMin,t.get("summary")?t.get("minScore"):r),e.scoreSum+=r,e.scoreSumSquares+=r*r,e.featureCount+=1,e}),{scoreMin:Number.MAX_VALUE,scoreMax:Number.MIN_VALUE,scoreSum:0,scoreSumSquares:0,featureCount:0})).toPromise();case 3:return i=e.sent,c=i.scoreMin,l=i.scoreMax,s=i.scoreSum,d=i.scoreSumSquares,p=i.featureCount,e.abrupt("return",f({scoreMax:l,scoreMin:c,scoreSum:s,scoreSumSquares:d,featureCount:p,basesCovered:o-n+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1033:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(t),i=0;i<n.length;i++){var u=n[i];if(r.length>5e3)break;"object"===(0,a.default)(t[u])&&t[u]?r+=e(t[u],r):r+="".concat(u,"-").concat(t[u],";")}return(0,o.hashCode)(r)};var a=n(r(20)),o=r(45)},1034:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateUTRs=function(e,t){var r=e[0],n=e[e.length-1],o=t.findIndex((function(e){return e.end>=r.start&&e.start<=r.start})),i=t.findIndex((function(e){return e.end>=n.end&&e.start<=n.end})),c=t[i],l=t[o],s=[].concat((0,a.default)(t.slice(0,o)),[{start:l.start,end:r.start}]).map((function(e){return u(u({},e),{},{type:"five_prime_UTR"})})),f=[{start:n.end,end:c.end}].concat((0,a.default)(t.slice(i+1))).map((function(e){return u(u({},e),{},{type:"three_prime_UTR"})}));return[].concat((0,a.default)(s),(0,a.default)(f))},t.dedupe=function(e){return e.filter((function(e,t,r){return!t||c(e)!==c(r[t-1])}))},t.ellipses=function(e){return e.length>20?"".concat(e.slice(0,20),"..."):e},t.revlist=function(e,t){return e.map((function(e){return u(u({},e),{},{start:t-e.end,end:t-e.start})})).sort((function(e,t){return e.start-t.start}))},t.stitch=function(e,t){return e.map((function(e){return t.slice(e.start,e.end)})).join("")};var a=n(r(41)),o=n(r(13));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e){return"".concat(e.start,"-").concat(e.end)}},1035:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.InterRegionPaddingBlock=t.ElidedBlock=t.ContentBlock=t.BlockSet=t.BaseBlock=void 0;var a=n(r(35)),o=n(r(27)),i=n(r(28)),u=n(r(26)),c=n(r(13)),l=n(r(15)),s=n(r(16));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(){function e(t=[]){(0,l.default)(this,e)}return(0,s.default)(e,[{key:"push",value:function(e){if(e instanceof g&&this.blocks.length){var t=this.blocks[this.blocks.length-1];if(t instanceof g)return void t.push(e)}this.blocks.push(e)}},{key:"getBlocks",value:function(){return this.blocks}},{key:"getRegions",value:function(){return this.blocks.map((function(e){return e.toRegion()}))}},{key:"map",value:function(e,t){return this.blocks.map(e,t)}},{key:"forEach",value:function(e,t){return this.blocks.forEach(e,t)}},{key:"length",get:function(){return this.blocks.length}},{key:"totalWidthPx",get:function(){return this.blocks.length?this.blocks.map((function(e){return e.widthPx})).reduce((function(e,t){return e+t})):0}},{key:"totalWidthPxWithoutBorders",get:function(){return this.blocks.length?this.blocks.filter((function(e){return"boundary"!==e.variant})).map((function(e){return e.widthPx})).reduce((function(e,t){return e+t})):0}},{key:"offsetPx",get:function(){return this.blocks.length?this.blocks[0].offsetPx:0}},{key:"contentBlocks",get:function(){return this.blocks.filter((function(e){return e instanceof y}))}},{key:"totalBp",get:function(){return this.contentBlocks.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)}}]),e}();t.BlockSet=h;var m=function(){function e(t){(0,l.default)(this,e),(0,c.default)(this,"regionNumber",void 0),(0,c.default)(this,"reversed",void 0),(0,c.default)(this,"refName",void 0),(0,c.default)(this,"start",void 0),(0,c.default)(this,"end",void 0),(0,c.default)(this,"assemblyName",void 0),(0,c.default)(this,"key",void 0),(0,c.default)(this,"offsetPx",void 0),(0,c.default)(this,"widthPx",0),(0,c.default)(this,"variant",void 0),(0,c.default)(this,"isLeftEndOfDisplayedRegion",void 0),Object.assign(this,t),this.assemblyName=t.assemblyName,this.refName=t.refName,this.start=t.start,this.end=t.end,this.key=t.key,this.offsetPx=t.offsetPx}return(0,s.default)(e,[{key:"renameReference",value:function(e){return this.refName&&e!==this.refName?new this.constructor(p(p({},this),{},{refName:e})):this}},{key:"toRegion",value:function(){return{refName:this.refName,start:this.start,end:this.end,assemblyName:this.assemblyName,reversed:this.reversed}}}]),e}();t.BaseBlock=m;var y=function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,l.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r)}(m);t.ContentBlock=y;var g=function(e){(0,o.default)(r,e);var t=f(r);function r(e){var n;return(0,l.default)(this,r),n=t.call(this,e),(0,c.default)((0,a.default)(n),"widthPx",void 0),(0,c.default)((0,a.default)(n),"elidedBlockCount",0),n.widthPx=e.widthPx,n}return(0,s.default)(r,[{key:"push",value:function(e){this.elidedBlockCount+=1,e&&(this.refName="",this.start=0,this.end=0,this.widthPx+=e.widthPx)}}]),r}(m);t.ElidedBlock=g;var v=function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,l.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r)}(m);t.InterRegionPaddingBlock=v},1036:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LayoutSession=void 0;var a=n(r(22)),o=n(r(21)),i=n(r(24)),u=n(r(35)),c=n(r(93)),l=n(r(27)),s=n(r(28)),f=n(r(26)),d=n(r(15)),p=n(r(16)),h=n(r(13)),m=n(r(518)),y=n(r(1037)),g=n(r(603)),v=n(r(604)),b=n(r(254)),w=r(46);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var x=function(){function e(t){if((0,d.default)(this,e),(0,h.default)(this,"config",void 0),(0,h.default)(this,"bpPerPx",void 0),(0,h.default)(this,"filters",void 0),(0,h.default)(this,"cachedLayout",void 0),this.config=t.config,!(0,w.isConfigurationModel)(this.config))throw new Error("configuration required");this.bpPerPx=t.bpPerPx,this.filters=t.filters,this.update(t)}return(0,p.default)(e,[{key:"update",value:function(e){Object.assign(this,e)}},{key:"makeLayout",value:function(){return new g.default(y.default,{maxHeight:(0,w.readConfObject)(this.config,"maxHeight"),displayMode:(0,w.readConfObject)(this.config,"displayMode"),pitchX:this.bpPerPx,pitchY:(0,w.readConfObject)(this.config,"noSpacing")?1:3})}},{key:"cachedLayoutIsValid",value:function(e){return e&&e.layout.subLayoutConstructorArgs.pitchX===this.bpPerPx&&(0,m.default)((0,w.readConfObject)(this.config),e.config)&&(0,m.default)(this.filters,e.filters)}},{key:"layout",get:function(){return this.cachedLayout&&this.cachedLayoutIsValid(this.cachedLayout)||(this.cachedLayout={layout:this.makeLayout(),config:(0,w.readConfObject)(this.config),filters:this.filters}),this.cachedLayout.layout}}]),e}();t.LayoutSession=x;var j=function(e){(0,l.default)(s,e);var t,r,n=E(s);function s(){var e;(0,d.default)(this,s);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,h.default)((0,u.default)(e),"sessions",{}),e}return(0,p.default)(s,[{key:"getWorkerSession",value:function(e){var t=e.sessionId;this.sessions[t]||(this.sessions[t]=this.createSession(e));var r=this.sessions[t];return r.update(e),r}},{key:"getExpandedRegion",value:function(e,t){if(!e)return e;var r=t.bpPerPx,n=t.config,a=void 0===n?0:(0,w.readConfObject)(n,"maxFeatureGlyphExpansion");if(!a)return e;var o=Math.round(a*r);return k(k({},e),{},{start:Math.floor(Math.max(e.start-o,0)),end:Math.ceil(e.end+o)})}},{key:"createSession",value:function(e){return new x(e)}},{key:"freeResourcesInClient",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.sessionId,o=r.regions,i=0,u=this.sessions[n],!o&&u&&(delete this.sessions[n],i=1),u&&o&&u.layout.discardRange(o[0].refName,o[0].start,o[0].end),e.t0=i,e.next=8,(0,c.default)((0,f.default)(s.prototype),"freeResourcesInClient",this).call(this,t,r);case 8:return e.t1=e.sent,e.abrupt("return",e.t0+e.t1);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deserializeLayoutInClient",value:function(e){return new v.default(e)}},{key:"deserializeResultsInClient",value:function(e,t){var r=this.deserializeLayoutInClient(e.layout);return(0,c.default)((0,f.default)(s.prototype),"deserializeResultsInClient",this).call(this,k(k({},e),{},{layout:r}),t)}},{key:"createLayoutInWorker",value:function(e){var t=e.regions;return this.getWorkerSession(e).layout.getSublayout(t[0].refName)}},{key:"serializeResultsInWorker",value:function(e,t){var r=(0,c.default)((0,f.default)(s.prototype),"serializeResultsInWorker",this).call(this,e,t),n=(0,o.default)(t.regions,1)[0];return r.layout=e.layout.serializeRegion(this.getExpandedRegion(n,t)),r.layout.rectangles&&(r.features=r.features.filter((function(e){return Boolean(r.layout.rectangles[e.uniqueId])}))),r.maxHeightReached=r.layout.maxHeightReached,r}},{key:"render",value:(t=(0,i.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.layout||this.createLayoutInWorker(t),e.next=3,(0,c.default)((0,f.default)(s.prototype),"render",this).call(this,k(k({},t),{},{layout:r}));case 3:return n=e.sent,e.abrupt("return",k(k({},n),{},{layout:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),s}(b.default);t.default=j},1037:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(21)),o=n(r(15)),i=n(r(16)),u=n(r(13)),c=r(45);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n){return t>=r&&n>=e}var d=function(){function e(){(0,o.default)(this,e),(0,u.default)(this,"padding",void 0),(0,u.default)(this,"allFilled",void 0),(0,u.default)(this,"widthLimit",void 0),(0,u.default)(this,"rowState",void 0),this.padding=1,this.widthLimit=1e6}return(0,i.default)(e,[{key:"setAllFilled",value:function(e){this.allFilled=e}},{key:"getItemAt",value:function(e){if(this.allFilled)return this.allFilled;if(this.rowState&&void 0!==this.rowState.min&&!(e<this.rowState.min||e>=this.rowState.max)){var t=e-this.rowState.offset;return this.rowState.bits[t]}}},{key:"isRangeClear",value:function(e,t){if(this.allFilled)return!1;if(!this.rowState)return!0;var r=this.rowState,n=r.min,a=r.max;if(t<=n||e>=a)return!0;for(var o=Math.min(a,t),i=Math.max(n,e);i<t&&i<o;i+=1)if(this.getItemAt(i))return!1;return!0}},{key:"initialize",value:function(e,t){var r=t-e;return{offset:e-r,min:e,max:t,bits:new Array(3*r)}}},{key:"addRect",value:function(e,t){var r=e.l,n=e.r+this.padding;this.rowState||(this.rowState=this.initialize(r,n));var a=r-this.rowState.offset,o=n-this.rowState.offset,i=this.rowState.bits.length;if(o>=this.rowState.bits.length){var u=o+1;this.rowState.bits.length+u>this.widthLimit?(console.warn("Layout width limit exceeded, discarding old layout. Please be more careful about discarding unused blocks."),this.rowState=this.initialize(r,n)):u>0&&(this.rowState.bits=this.rowState.bits.concat(new Array(u)))}if(r<this.rowState.offset){var c=Math.min(i-a,this.rowState.offset);this.rowState.bits.length+c>this.widthLimit?(console.warn("Layout width limit exceeded, discarding old layout. Please be more careful about discarding unused blocks."),this.rowState=this.initialize(r,n)):(this.rowState.bits=new Array(c).concat(this.rowState.bits),this.rowState.offset-=c)}(o=n-this.rowState.offset)-(a=r-this.rowState.offset)>2e4&&console.warn("Layout X pitch set too low, feature spans ".concat(o-a," bits in a single row."),e,t);for(var l=a;l<o;l+=1)this.rowState.bits[l]=t;r<this.rowState.min&&(this.rowState.min=r),n>this.rowState.max&&(this.rowState.max=n)}},{key:"discardRange",value:function(e,t){if(!this.allFilled&&this.rowState&&!(t<=this.rowState.min||e>=this.rowState.max))if(e<=this.rowState.min&&t>=this.rowState.max)this.rowState=void 0;else{if(t>this.rowState.min&&e<=this.rowState.min&&(this.rowState.min=t),e<this.rowState.max&&t>=this.rowState.max&&(this.rowState.max=e),this.rowState.offset<this.rowState.min-1e4&&this.rowState.bits.length>this.rowState.max+1e4-this.rowState.offset){var r=this.rowState.min-this.rowState.offset,n=this.rowState.bits.length-1-(this.rowState.max-this.rowState.offset);this.rowState.bits=this.rowState.bits.slice(r,this.rowState.bits.length-n),this.rowState.offset+=r}else if(this.rowState.offset<this.rowState.min-1e4){var a=this.rowState.min-Math.floor(5e3)-this.rowState.offset;this.rowState.bits.splice(0,a),this.rowState.offset+=a}else if(this.rowState.bits.length>this.rowState.max-this.rowState.offset+1e4){var o=this.rowState.max-this.rowState.offset+1+Math.floor(5e3);this.rowState.bits.length=o}for(var i=Math.max(this.rowState.min,e)-this.rowState.offset,u=Math.min(t,this.rowState.max)-this.rowState.offset,c=i;c>=0&&c<u;c+=1)this.rowState.bits[c]=void 0}}}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pitchX,n=void 0===r?10:r,a=t.pitchY,i=void 0===a?10:a,c=t.maxHeight,l=void 0===c?1e4:c,s=t.hardRowLimit,f=void 0===s?1e4:s,d=t.displayMode,p=void 0===d?"normal":d;(0,o.default)(this,e),(0,u.default)(this,"pitchX",void 0),(0,u.default)(this,"pitchY",void 0),(0,u.default)(this,"hardRowLimit",void 0),(0,u.default)(this,"bitmap",void 0),(0,u.default)(this,"rectangles",void 0),(0,u.default)(this,"maxHeightReached",void 0),(0,u.default)(this,"maxHeight",void 0),(0,u.default)(this,"displayMode",void 0),(0,u.default)(this,"pTotalHeight",void 0),this.pitchX=n,this.pitchY=i,this.hardRowLimit=f,this.maxHeightReached=!1,this.displayMode=p,"compact"===this.displayMode&&(this.pitchY=Math.round(this.pitchY/4)||1,this.pitchX=Math.round(this.pitchX/4)||1),this.bitmap=[],this.rectangles=new Map,this.maxHeight=Math.ceil(l/this.pitchY),this.pTotalHeight=0}return(0,i.default)(e,[{key:"addRect",value:function(e,t,r,n,a){var o=this.rectangles.get(e);if(o)return null===o.top?null:(this.addRectToBitmap(o),o.top*this.pitchY);var i=Math.floor(t/this.pitchX),u=Math.floor(r/this.pitchX),c=Math.ceil(n/this.pitchY),l={id:e,l:i,r:u,top:null,h:c,originalHeight:n,data:a},s=this.maxHeight-c,f=0;if("collapse"!==this.displayMode){for(;f<=s&&this.collides(l,f);f+=1);if(f>s)return l.top=null,this.rectangles.set(e,l),this.maxHeightReached=!0,null}return l.top=f,this.addRectToBitmap(l),this.rectangles.set(e,l),this.pTotalHeight=Math.max(this.pTotalHeight||0,f+c),f*this.pitchY}},{key:"collides",value:function(e,t){for(var r=this.bitmap,n=t+e.h,a=t;a<n;a+=1){var o=r[a];if(o&&!o.isRangeClear(e.l,e.r))return!0}return!1}},{key:"autovivifyRow",value:function(e,t){var r=e[t];if(!r){if(t>this.hardRowLimit)throw new Error("layout hard limit (".concat(this.hardRowLimit*this.pitchY,"px) exceeded, aborting layout"));r=new d,e[t]=r}return r}},{key:"addRectToBitmap",value:function(e){if(null!==e.top){var t=e.data||e.id,r=this.bitmap,n=e.top+e.h;if(e.r-e.l>2e4)for(var a=e.top;a<n;a+=1)this.autovivifyRow(r,a).setAllFilled(t);else for(var o=e.top;o<n;o+=1)this.autovivifyRow(r,o).addRect(e,t)}}},{key:"discardRange",value:function(e,t){for(var r=Math.floor(e/this.pitchX),n=Math.floor(t/this.pitchX),a=this.bitmap,o=0;o<a.length;o+=1){var i=a[o];i&&i.discardRange(r,n)}}},{key:"hasSeen",value:function(e){return this.rectangles.has(e)}},{key:"getByCoord",value:function(e,t){var r=Math.floor(t/this.pitchY),n=this.bitmap[r];if(n){var a=Math.floor(e/this.pitchX);return n.getItemAt(a)}}},{key:"getByID",value:function(e){var t=this.rectangles.get(e);if(t){var r=t.top*this.pitchY;return[t.l*this.pitchX,r,t.r*this.pitchX,r+t.originalHeight]}}},{key:"cleanup",value:function(){}},{key:"getTotalHeight",value:function(){return this.pTotalHeight*this.pitchY}},{key:"totalHeight",get:function(){return this.getTotalHeight()}},{key:"getRectangles",value:function(){var e=this;return new Map(Array.from(this.rectangles.entries()).map((function(t){var r=(0,a.default)(t,2),n=r[0],o=r[1],i=o.l,u=o.r,c=o.originalHeight,l=(o.top||0)*e.pitchY,s=l+c;return[n,[i*e.pitchX,l,u*e.pitchX,s]]})))}},{key:"serializeRegion",value:function(e){var t,r={},n=!1,o=l(this.rectangles.entries());try{for(o.s();!(t=o.n()).done;){var i=(0,a.default)(t.value,2),u=i[0],c=i[1],s=c.l,d=c.r,p=c.originalHeight,h=c.top;if(null===c.top)n=!0;else{var m=(h||0)*this.pitchY,y=m+p,g=s*this.pitchX,v=d*this.pitchX;f(e.start,e.end,g-this.pitchX,v+this.pitchX)&&(r[u]=[g,m,v,y])}}}catch(e){o.e(e)}finally{o.f()}return{rectangles:r,totalHeight:this.getTotalHeight(),maxHeightReached:n}}},{key:"toJSON",value:function(){return{rectangles:(0,c.objectFromEntries)(this.getRectangles()),totalHeight:this.getTotalHeight(),maxHeightReached:this.maxHeightReached}}}]),e}();t.default=p},1038:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(13)),u=r(598),c=function(){function e(t){var r=t.filters,n=void 0===r?[]:r;(0,a.default)(this,e),(0,i.default)(this,"filterChain",void 0),this.filterChain=n.map((function(e){if("string"==typeof e)return{expr:(0,u.stringToJexlExpression)(e),string:e};throw new Error('invalid inputFilter string "'.concat(e,'"'))}))}return(0,o.default)(e,[{key:"passes",value:function(){for(var e=0;e<this.filterChain.length;e+=1)if(!this.filterChain[e].expr.evalSync({feature:arguments.length<=0?void 0:arguments[0]}))return!1;return!0}},{key:"toJSON",value:function(){return{filters:this.filterChain.map((function(e){return e.string}))}}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}();t.default=c},1039:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.useRef)(null),r=e.theme,n=e.html,a=e.RenderingComponent,d=(0,o.default)(e,f),p=(0,l.createJBrowseTheme)(r);return(0,u.useEffect)((function(){var e=t.current;return e&&(e&&(0,c.unmountComponentAtNode)(e),e.innerHTML=n,(0,s.rIC)((function(){(0,c.hydrate)(u.default.createElement(i.ThemeProvider,{theme:p},u.default.createElement(a,d)),e)}),{timeout:300})),function(){e&&(0,c.unmountComponentAtNode)(e)}}),[n,p,d,a]),u.default.createElement("div",{ref:t,"data-html-size":n.length,className:"ssr-container"})};var o=n(r(66)),i=r(23),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),c=r(6),l=r(158),s=r(45),f=["theme","html","RenderingComponent"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}},1040:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.watchWorker=v;var a=n(r(22)),o=n(r(41)),i=n(r(21)),u=n(r(20)),c=n(r(15)),l=n(r(16)),s=n(r(13)),f=n(r(24)),d=r(18),p=r(45),h=r(1028);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e){return"function"!=typeof e&&!(e instanceof Error)}function v(e,t,r){return b.apply(this,arguments)}function b(){return(b=(0,f.default)(a.default.mark((function e(t,r,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call("ping",[],{timeout:1e8,rpcDriverClassName:n});case 2:return e.abrupt("return",new Promise((function(e,o){!function e(){setTimeout((0,f.default)(a.default.mark((function i(){return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.call("ping",[],{timeout:2*r,rpcDriverClassName:n});case 3:e(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),o(a.t0);case 9:case"end":return a.stop()}}),i,null,[[0,6]])}))),r)}()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){function e(t){(0,c.default)(this,e),(0,s.default)(this,"worker",void 0)}return(0,l.default)(e,[{key:"getWorker",value:function(e,t){var r=this;if(!this.worker){var n=this.driver.makeWorker(e);v(n,this.driver.maxPingTime,t).catch((function(e){r.worker&&(console.warn("worker did not respond, killing and generating new one ".concat(e)),r.worker.destroy(),r.worker.status="killed",r.worker.error=e,r.worker=void 0)})),this.worker=n}return this.worker}}]),e}(),O=function(){function e(t){(0,c.default)(this,e),(0,s.default)(this,"name",void 0),(0,s.default)(this,"lastWorkerAssignment",-1),(0,s.default)(this,"workerAssignments",new Map),(0,s.default)(this,"workerCount",0),(0,s.default)(this,"workerPool",void 0),(0,s.default)(this,"maxPingTime",3e4),(0,s.default)(this,"workerCheckFrequency",5e3),(0,s.default)(this,"config",void 0),this.config=t.config}var t;return(0,l.default)(e,[{key:"filterArgs",value:function(e,t,r){var n=this;if(Array.isArray(e))return e.filter(g).map((function(e){return n.filterArgs(e,t,r)}));if("object"===(0,u.default)(e)&&null!==e){if(e instanceof AbortSignal)return(0,h.serializeAbortSignal)(e,this.remoteAbort.bind(this,t,r));if((0,d.isStateTreeNode)(e)&&!(0,d.isAlive)(e))throw new Error("dead state tree node passed to RPC call");return e instanceof File?e:(0,p.objectFromEntries)(Object.entries(e).filter((function(e){return g(e[1])})).map((function(e){var a=(0,i.default)(e,2),o=a[0],u=a[1];return[o,n.filterArgs(u,t,r)]})))}return e}},{key:"remoteAbort",value:function(e,t,r,n){this.getWorker(t,e).call(r,{signalId:n},{timeout:1e6,rpcDriverClassName:this.name})}},{key:"createWorkerPool",value:function(){var e,t,r=this,n=(e="undefined"!=typeof window,t=e&&"hardwareConcurrency"in window.navigator,e&&t?window.navigator.hardwareConcurrency:1),a=this.workerCount||Math.max(1,Math.ceil((n-2)/3));return(0,o.default)(new Array(a)).map((function(){return new w(r)}))}},{key:"getWorkerPool",value:function(){if(!this.workerPool){var e=this.createWorkerPool();return this.workerPool=e,e}return this.workerPool}},{key:"getWorker",value:function(e,t){var r=this.getWorkerPool(),n=this.workerAssignments.get(e);if(void 0===n){var a=(this.lastWorkerAssignment+1)%r.length;this.workerAssignments.set(e,a),this.lastWorkerAssignment=a,n=a}var o=r[n].getWorker(t,this.name);if(!o)throw new Error("no web workers registered for RPC");return o}},{key:"call",value:(t=(0,f.default)(a.default.mark((function e(t,r,n,o){var i,u,c,l,s,f,d,p,h,m,g=this,v=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.length>4&&void 0!==v[4]?v[4]:{},r){e.next=3;break}throw new TypeError("sessionId is required");case 3:return u=!1,c=this.getWorker(r,t),l=t.getRpcMethodType(n),e.next=8,l.serializeArguments(o,this.name);case 8:return s=e.sent,f=this.filterArgs(s,t,r),d=c.call(n,f,y({timeout:3e5,statusCallback:o.statusCallback,rpcDriverClassName:this.name},i)).finally((function(){u=!0})),h=new Promise((function(e,t){p=setInterval((function(){"killed"===c.status?t(new Error("operation timed out, worker process stopped responding, ".concat(c.error))):u&&e(!0)}),g.workerCheckFrequency)})).finally((function(){clearInterval(p)})),m=Promise.race([d,h]),e.abrupt("return",l.deserializeReturn(m,o,this.name));case 14:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),e}();t.default=O},1041:function(e,t,r){"use strict";r.r(t),r.d(t,"ConfigurationEditor",(function(){return et})),r.d(t,"JsonEditor",(function(){return Qe}));var n=r(1),a=r.n(n),o=r(179),i=r.n(o),u=r(208),c=r.n(u),l=r(160),s=r.n(l),f=r(34),d=r(18),p=r(46),h=r(106),m=r(209),y=r(159),g=r.n(y),v=r(253),b=r(784),w=r(180),O=r(45),k=r(683),E=r(711),x=r(1925),j=r(1922),C=r(70),S=r(732),P=r(697),T=r(731),M=r(692),R=r(1927),A=r(1928),N=r(717),_=r(701),L=r(1913),F=r(702),I=r(712),D=r(1054),B=r(721),W=r(695),V=r(965),z=r.n(V),q=r(1958),H=r(968),U=r.n(H),G=r(969),J=r.n(G),X=r(970),Y=r.n(X),$=r(713),K=r(714),Z=r(966),Q=r(158),ee=r(206),te=r(221),re=r.n(te),ne=r(424),ae=r.n(ne),oe=r(363),ie=r.n(oe),ue=r(598),ce=r(971),le=r.n(ce),se=r(0),fe=r.n(se),de=r(436);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function ye(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){me(o,n,a,i,u,"next",e)}function u(e){me(o,n,a,i,u,"throw",e)}i(void 0)}))}}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t,r){return t&&ve(e.prototype,t),r&&ve(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&xe(e,t)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var a=Ee(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return je(this,r)}}function Se(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}function Pe(){return(Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Se(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function Te(e,t){return Re(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||Ne(e,t)||Le()}function Me(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||Ae(e)||Ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e){if(Array.isArray(e))return e}function Ae(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ne(e,t){if(e){if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(e,t):void 0}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ne(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}var Ie=function(e){return d.types.model("ConfigurationEditorWidget",{id:h.ElementId,type:d.types.literal("ConfigurationEditorWidget"),target:d.types.safeReference(e.pluggableConfigSchemaType("track"))}).actions((function(e){return{setTarget:function(t){e.target=t}}}))},De=Object(p.ConfigurationSchema)("ConfigurationEditorWidget",{}),Be=Object(f.observer)((function(e){var t=e.model;if(t&&t.target){if(t.target.type)return"".concat(t.target.type," settings");if(Object(d.isStateTreeNode)(t.target)){var r=Object(d.getType)(t.target);if(r&&r.name)return"".concat(r.name.replace("ConfigurationSchema","")," settings")}}return"Settings"}));function We(e,t){return e(t={exports:{}},t.exports),t.exports}var Ve=We((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),ze=function(e){ke(a,e);var t,r,n=Ce(a);function a(e,t,r){var o;ge(this,a),o=n.call(this,e,t,r);var i=Object(p.readConfObject)(e,"features");return o.features=a.makeFeatures(i||[]),o}return be(a,[{key:"getRefNames",value:(r=ye(Ve.mark((function e(){return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Me(this.features.keys()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNameAliases",value:(t=ye(Ve.mark((function e(){return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array.from(this.features.values()).map((function(e){return{refName:e[0].get("refName"),aliases:e[0].get("aliases")}})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=e.refName,n=e.start,a=e.end;return Object(v.ObservableCreate)(function(){var e=ye(Ve.mark((function e(o){var i,u,c;return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.features.get(r)||[],u=0;u<i.length;u++)(c=i[u]).get("end")>n&&c.get("start")<a&&o.next(c);o.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}],[{key:"makeFeatures",value:function(e){for(var t=new Map,r=0;r<e.length;r+=1)if(e[r]){var n=this.makeFeature(e[r]),a=n.get("refName"),o=t.get(a);o||(o=[],t.set(a,o)),o.push(n)}var i,u=Fe(t.values());try{for(u.s();!(i=u.n()).done;){i.value.sort((function(e,t){return e.get("start")-t.get("start")}))}}catch(e){u.e(e)}finally{u.f()}return t}},{key:"makeFeature",value:function(e){return new g.a(e)}}]),a}(m.BaseFeatureDataAdapter),qe=function(e){ke(n,e);var t,r=Ce(n);function n(e,t,a){var o;ge(this,n),o=r.call(this,e,t,a);var i=Object(p.readConfObject)(e,"features");return o.features=ze.makeFeatures(i||[]),o}return be(n,[{key:"getRegions",value:(t=ye(Ve.mark((function e(){var t,r,n,a,o,i,u,c,l,s;return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Fe(this.features);try{for(r.s();!(n=r.n()).done;){a=Te(n.value,2),o=a[0],i=a[1],u=void 0,c=Fe(i);try{for(c.s();!(l=c.n()).done;)s=l.value,u&&u.end>=s.get("start")&&u.start<=s.get("end")?u.end=s.get("end"):(u&&t.push(u),u={refName:o,start:s.get("start"),end:s.get("end")})}catch(e){c.e(e)}finally{c.f()}u&&t.push(u)}}catch(e){r.e(e)}finally{r.f()}return t.sort((function(e,t){return e.refName.localeCompare(t.refName)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(m.BaseAdapter),He=function(e){ke(n,e);var t,r=Ce(n);function n(){return ge(this,n),r.apply(this,arguments)}return be(n,[{key:"getFeatures",value:function(e){var t=this,r=Pe(Ee(n.prototype),"getFeatures",this);return Object(v.ObservableCreate)(function(){var n=ye(Ve.mark((function n(a){var o,i;return Ve.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.call(t,e).pipe(Object(b.a)()).toPromise();case 2:o=n.sent,i=o[0],a.next(new g.a(he(he({},i.toJSON()),{},{uniqueId:"".concat(i.id(),":").concat(e.start,"-").concat(e.end),end:e.end,start:e.start,seq:i.get("seq").slice(Math.max(e.start-i.get("start"),0),Math.max(e.end-i.get("start"),0))}))),a.complete();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"getRegions",value:(t=ye(Ve.mark((function e(){var t,r,n,a,o,i,u,c,l,s;return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Fe(this.features);try{for(r.s();!(n=r.n()).done;){a=Te(n.value,2),o=a[0],i=a[1],u=void 0,c=Fe(i);try{for(c.s();!(l=c.n()).done;)s=l.value,u&&u.end>=s.get("start")&&u.start<=s.get("end")?u.end=s.get("end"):(u&&t.push(u),u={refName:o,start:s.get("start"),end:s.get("end")})}catch(e){c.e(e)}finally{c.f()}u&&t.push(u)}}catch(e){r.e(e)}finally{r.f()}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(ze),Ue=Object(p.ConfigurationSchema)("FromConfigAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"}),Ge=Object(p.ConfigurationSchema)("FromConfigRegionsAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"}),Je=Object(p.ConfigurationSchema)("FromConfigSequenceAdapter",{features:{type:"frozen",defaultValue:[]},featureClass:{type:"string",defaultValue:"SimpleFeature"}},{explicitlyTyped:!0,implicitIdentifier:"adapterId"}),Xe=function(e){ke(a,e);var t,r,n=Ce(a);function a(){return ge(this,a),n.apply(this,arguments)}return be(a,[{key:"getRefNameAliases",value:(r=ye(Ve.mark((function e(){var t,r;return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=Object(p.readConfObject)(this.config,"location")).uri&&"/path/to/my/aliases.txt"!==t.uri){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,Object(w.openLocation)(t).readFile("utf8");case 5:return r=e.sent,e.abrupt("return",r.trim().split("\n").map((function(e){var t,r=e.split("\t"),n=Re(t=r)||Ae(t)||Ne(t)||Le();return{refName:n[0],aliases:n.slice(1)}})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"freeResources",value:(t=ye(Ve.mark((function e(){return Ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),a}(m.BaseAdapter),Ye=Object(p.ConfigurationSchema)("RefNameAliasAdapter",{location:{type:"fileLocation",defaultValue:{uri:"/path/to/my/aliases.txt",locationType:"UriLocation"}}},{explicitlyTyped:!0}),$e=Object(k.a)({error:{color:"red",fontSize:"0.8em"}}),Ke=Object(n.lazy)((function(){return Promise.resolve().then((function(){return at}))}));function Ze(e){var t=e.slot,r=$e(),o=Te(Object(n.useState)(JSON.stringify(t.value,null,"  ")),2),i=o[0],u=o[1],c=Te(Object(n.useState)(),2),l=c[0],s=c[1],f=Object(O.useDebounce)(i,400);return Object(n.useEffect)((function(){try{t.set(JSON.parse(f)),s(void 0)}catch(e){s(e.message)}}),[f]),a.a.createElement(a.a.Fragment,null,l?a.a.createElement("p",{className:r.error},l):null,a.a.createElement(E.a,{error:l},a.a.createElement(x.a,{shrink:!0,htmlFor:"callback-editor"},t.name),a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(Ke,{contents:i,setContents:u})),a.a.createElement(j.a,null,t.description)))}Ze.propTypes={slot:f.PropTypes.objectOrObservableObject.isRequired};var Qe=Object(f.observer)(Ze),et=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Mt}))})),tt=function(e){ke(r,e);var t=Ce(r);function r(){var e;return ge(this,r),(e=t.apply(this,arguments)).name="ConfigurationPlugin",e}return be(r,[{key:"install",value:function(e){e.addAdapterType((function(){return new i.a({name:"FromConfigAdapter",configSchema:Ue,AdapterClass:ze,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new i.a({name:"FromConfigRegionsAdapter",configSchema:Ge,AdapterClass:qe,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new i.a({name:"FromConfigSequenceAdapter",configSchema:Je,AdapterClass:He,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addAdapterType((function(){return new i.a({name:"RefNameAliasAdapter",configSchema:Ye,AdapterClass:Xe,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}})})),e.addWidgetType((function(){return new c.a({name:"ConfigurationEditorWidget",HeadingComponent:Be,configSchema:De,stateModel:Ie(e),ReactComponent:et})}))}}]),r}(s.a),rt='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',nt=Object(k.a)({callbackEditor:{fontFamily:rt,fontSize:"12px",overflowX:"auto",marginTop:"16px",borderBottom:"1px solid rgba(0,0,0,0.42)"},syntaxHighlighter:{margin:0,fontFamily:rt,fontSize:"12px"}});var at={__proto__:null,default:function(e){var t=e.contents,r=e.setContents,o=nt(),i=Object(C.a)();return Object(n.useEffect)((function(){q.a.registerLanguage("json",U.a)}),[]),a.a.createElement(z.a,{className:o.callbackEditor,value:t,onValueChange:r,highlight:function(e){return a.a.createElement(q.a,{language:"json",style:"dark"===i.palette.type?J.a:Y.a,className:o.syntaxHighlighter,customStyle:{background:"none",padding:0}},e)},padding:10,style:{}})}},ot=Object(k.a)((function(e){return{callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),fontFamily:'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',fontSize:"12px"}}}));function it(e){var t=e.slot,r=ot(),o=Te(Object(n.useState)(t.value),2),i=o[0],u=o[1],c=Te(Object(n.useState)(),2),l=c[0],s=c[1],f=Object(O.useDebounce)(i,400);return Object(n.useEffect)((function(){try{var e,r=f.startsWith("jexl:")?f:"jexl:".concat(f);Object(ue.stringToJexlExpression)(r,null===(e=Object(d.getEnv)(t).pluginManager)||void 0===e?void 0:e.jexl),t.set(r),s(null)}catch(e){s(e)}}),[f,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,null,a.a.createElement(x.a,{shrink:!0,htmlFor:"callback-editor"},t.name),a.a.createElement(z.a,{className:r.callbackEditor,value:i.startsWith("jexl:")?i.split("jexl:")[1]:i,onValueChange:function(e){u(e)},highlight:function(e){return e},padding:10,style:{background:l?"#fdd":void 0}}),a.a.createElement(j.a,null,t.description)),a.a.createElement(S.a,{title:a.a.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",a.a.createElement("br",null)," Names of available context items: ",t.contextVariable),arrow:!0},a.a.createElement(P.a,{color:"primary",onClick:function(){var e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},a.a.createElement(le.a,null))))}it.propTypes={slot:f.PropTypes.objectOrObservableObject.isRequired};var ut=Object(f.observer)(it),ct=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Nt}))}));var lt=function(e){var t=e.value,r=e.label,o=e.TextFieldProps,i=e.onChange,u=Te(Object(n.useState)(!1),2),c=u[0],l=u[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,Object.assign({value:t,label:r,InputProps:{style:{color:t,borderRightWidth:"25px",borderRightStyle:"solid",borderRightColor:t}},onClick:function(){return l(!c)},onChange:function(e){i(e.target.value)}},o)),c?a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(ct,{color:t,onChange:function(e){i(function(e){if(e instanceof Object){var t=e.r,r=e.g,n=e.b,a=e.a;return void 0===a?"rgb(".concat(t,",").concat(r,",").concat(n,")"):"rgba(".concat(t,",").concat(r,",").concat(n,",").concat(a,")")}return e}(e.rgb))}})):null)};function st(e){var t=e.slot;return a.a.createElement(lt,{label:t.name,value:t.value,onChange:function(e){t.set(e)},TextFieldProps:{helperText:t.description,fullWidth:!0}})}lt.propTypes={onChange:fe.a.func.isRequired,label:fe.a.string,TextFieldProps:fe.a.shape({}),value:fe.a.string},lt.defaultProps={label:"",value:"#000",TextFieldProps:{}},st.propTypes={slot:fe.a.shape({name:fe.a.string.isRequired,description:fe.a.string,value:fe.a.string.isRequired,set:fe.a.func.isRequired}).isRequired};var ft=Object(f.observer)(st),dt=Object(f.observer)((function(e){var t=e.slot;return a.a.createElement(T.a,{label:t.name,helperText:t.description,fullWidth:!0,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),pt=Object(f.observer)((function(e){var t=e.slot;return a.a.createElement(T.a,{label:t.name,helperText:t.description,fullWidth:!0,multiline:!0,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),ht=function(){return a.a.createElement(M.a,null,a.a.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"}))},mt=Object(f.observer)((function(e){var t=e.slot,r=Te(Object(n.useState)(""),2),o=r[0],i=r[1];return a.a.createElement(a.a.Fragment,null,t.name?a.a.createElement(x.a,null,t.name):null,a.a.createElement(R.a,{disablePadding:!0},t.value.map((function(e,r){return a.a.createElement(A.a,{key:r,disableGutters:!0},a.a.createElement(T.a,{value:e,onChange:function(e){return t.setAtIndex(r,e.target.value)},InputProps:{endAdornment:a.a.createElement(N.a,{position:"end"},a.a.createElement(P.a,{color:"secondary",onClick:function(){return t.removeAtIndex(r)}},a.a.createElement(re.a,null)))}}))})),a.a.createElement(A.a,{disableGutters:!0},a.a.createElement(T.a,{value:o,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:a.a.createElement(N.a,{position:"end"},a.a.createElement(P.a,{onClick:function(){t.add(o),i("")},disabled:""===o,color:"secondary","data-testid":"stringArrayAdd-".concat(t.name)},a.a.createElement(ae.a,null)))}}))),a.a.createElement(j.a,null,t.description))})),yt=Object(k.a)((function(e){return{card:{marginTop:e.spacing(1)}}})),gt=Object(f.observer)((function(e){var t=e.slot,r=yt(),o=Te(Object(n.useState)(""),2),i=o[0],u=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,null,t.name),Array.from(t.value,(function(e){var n=Te(e,2),o=n[0],i=n[1];return a.a.createElement(_.a,{raised:!0,key:o,className:r.card},a.a.createElement(L.a,{title:o,action:a.a.createElement(P.a,{color:"secondary",onClick:function(){return t.remove(o)}},a.a.createElement(re.a,null))}),a.a.createElement(F.a,null,a.a.createElement(mt,{slot:{value:i,description:"Values associated with entry ".concat(o),setAtIndex:function(e,r){t.setAtKeyIndex(o,e,r)},removeAtIndex:function(e){t.removeAtKeyIndex(o,e)},add:function(e){t.addToKey(o,e)}}})))})),a.a.createElement(_.a,{raised:!0,className:r.card},a.a.createElement(L.a,{disableTypography:!0,title:a.a.createElement(T.a,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:a.a.createElement(N.a,{position:"end"},a.a.createElement(P.a,{disabled:""===i,onClick:function(){t.add(i,[]),u("")},color:"secondary"},a.a.createElement(ae.a,null)))}})})),a.a.createElement(j.a,null,t.description))})),vt=Object(f.observer)((function(e){var t=e.slot,r=yt(),o=Te(Object(n.useState)(""),2),i=o[0],u=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,null,t.name),Array.from(t.value,(function(e){var n=Te(e,2),o=n[0],i=n[1];return a.a.createElement(_.a,{raised:!0,key:o,className:r.card},a.a.createElement(L.a,{title:o,action:a.a.createElement(P.a,{color:"secondary",onClick:function(){return t.remove(o)}},a.a.createElement(re.a,null))}),a.a.createElement(F.a,null,a.a.createElement(bt,{slot:{value:i,set:function(e){return t.add(o,e)}}})))})),a.a.createElement(_.a,{raised:!0,className:r.card},a.a.createElement(L.a,{disableTypography:!0,title:a.a.createElement(T.a,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:a.a.createElement(N.a,{position:"end"},a.a.createElement(P.a,{disabled:""===i,onClick:function(){t.add(i,0),u("")},color:"secondary"},a.a.createElement(ae.a,null)))}})})),a.a.createElement(j.a,null,t.description))})),bt=Object(f.observer)((function(e){var t=e.slot,r=Te(Object(n.useState)(t.value),2),o=r[0],i=r[1];return Object(n.useEffect)((function(){var e=parseFloat(o,10);Number.isNaN(e)?t.reset():t.set(e)}),[t,o]),a.a.createElement(T.a,{label:t.name,helperText:t.description,value:o,type:"number",onChange:function(e){return i(e.target.value)}})})),wt=Object(f.observer)((function(e){var t=e.slot,r=Te(Object(n.useState)(t.value),2),o=r[0],i=r[1];return Object(n.useEffect)((function(){var e=parseInt(o,10);Number.isNaN(e)||t.set(e)}),[t,o]),a.a.createElement(T.a,{label:t.name,helperText:t.description,value:o,type:"number",onChange:function(e){return i(e.target.value)}})})),Ot=Object(f.observer)((function(e){var t=e.slot;return a.a.createElement(E.a,null,a.a.createElement(I.a,{label:t.name,control:a.a.createElement(D.a,{checked:t.value,onChange:function(e){return t.set(e.target.checked)}})}),a.a.createElement(j.a,null,t.description))})),kt=Object(f.observer)((function(e){var t=e.slot,r=e.slotSchema,n=Object(d.getPropertyMembers)(Object(ee.getSubType)(r)),o=Object(ee.getUnionSubTypes)(Object(ee.getUnionSubTypes)(Object(ee.getSubType)(Object(ee.getPropertyType)(n,"value")))[1]).map((function(e){return e.value}));return a.a.createElement(T.a,{value:t.value,label:t.name,select:!0,helperText:t.description,fullWidth:!0,onChange:function(e){return t.set(e.target.value)}},o.map((function(e){return a.a.createElement(B.a,{key:e,value:e},e)})))})),Et={string:dt,text:pt,fileLocation:Object(f.observer)((function(e){var t,r=e.slot;return a.a.createElement(Q.FileSelector,{location:r.value,setLocation:function(e){return r.set(e)},name:r.name,description:r.description,rootModel:null===(t=Object(d.getEnv)(r).pluginManager)||void 0===t?void 0:t.rootModel})})),stringArray:mt,stringArrayMap:gt,numberMap:vt,number:bt,integer:wt,color:ft,stringEnum:kt,boolean:Ot,frozen:Qe,configRelationships:Qe},xt=Object(k.a)((function(e){return{paper:{display:"flex",marginBottom:e.spacing(2),position:"relative",overflow:"visible"},paperContent:{flex:"auto",padding:e.spacing(1),overflow:"auto"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}})),jt=Object(f.observer)((function(e){var t=e.slot,r=e.slotSchema,n=xt(),o=t.type,i=t.isCallback?ut:Et[o];return i||(console.warn("no slot editor defined for ".concat(o,", editing as string")),i=dt),o in Et||console.warn("SlotEditor needs to implement ".concat(o)),a.a.createElement(W.a,{className:n.paper},a.a.createElement("div",{className:n.paperContent},a.a.createElement(i,{slot:t,slotSchema:r})),a.a.createElement("div",{className:n.slotModeSwitch},t.contextVariable.length?a.a.createElement(P.a,{className:n.slotModeIcon,onClick:function(){return t.isCallback?t.convertToValue():t.convertToCallback()},title:"convert to ".concat(t.isCallback?"regular value":"callback"),color:"secondary"},t.isCallback?a.a.createElement(ht,null):a.a.createElement(ie.a,null)):null))})),Ct=Object(f.observer)((function(e){var t=e.typeNameChoices,r=e.slot,n=e.slotName,o=e.onChange,i=xt();return a.a.createElement(W.a,{className:i.paper},a.a.createElement("div",{className:i.paperContent},a.a.createElement(T.a,{value:r.type,label:"Type",select:!0,helperText:"Type of ".concat(n," to use"),fullWidth:!0,onChange:o},t.map((function(e){return a.a.createElement(B.a,{key:e,value:e},e)})))))})),St=Object(k.a)((function(e){return{subSchemaContainer:{marginLeft:e.spacing(1),borderLeft:"1px solid ".concat(e.palette.secondary.main),paddingLeft:e.spacing(1),marginBottom:e.spacing(1)},root:{padding:e.spacing(1,3,1,1),background:e.palette.background.default,overflowX:"hidden"}}})),Pt=Object(f.observer)((function(e){var t,r=St(),n=e.slotName,o=e.slotSchema,i=e.schema,u=e.slot,c=void 0===u?i[n]:u;if(Object(p.isConfigurationSchemaType)(o)){if(c.length)return a.a.createElement(a.a.Fragment,null,c.map((function(t,r){var o="".concat(Object(Z.singular)(n)," ").concat(r+1);return a.a.createElement(Pt,Oe({},e,{key:o,slot:t,slotName:o}))})));var l=Object(p.getTypeNamesFromExplicitlyTypedUnion)(o);return l.length&&(t=a.a.createElement(Ct,{typeNameChoices:l,slotName:n,slot:c,onChange:function(e){e.target.value!==c.type&&i.setSubschema(n,{type:e.target.value})}})),a.a.createElement(a.a.Fragment,null,a.a.createElement(K.a,null,n),a.a.createElement("div",{className:r.subSchemaContainer},t,a.a.createElement($.a,null,a.a.createElement(Tt,{schema:c}))))}return Object(p.isConfigurationSlotType)(o)?a.a.createElement(jt,{key:n,slot:c,slotSchema:o}):null})),Tt=Object(f.observer)((function(e){var t=e.schema;return Object(O.iterMap)(Object.entries(Object(d.getMembers)(t).properties),(function(e){var r=Te(e,2),n=r[0],o=r[1];return a.a.createElement(Pt,{key:n,slotName:n,slotSchema:o,schema:t})}))})),Mt={__proto__:null,default:Object(f.observer)((function(e){var t=e.model,r=St(),n=t.target&&Object(p.readConfObject)(t.target,"trackId");return a.a.createElement("div",{className:r.root,key:n,"data-testid":"configEditor"},t.target?a.a.createElement(Tt,{schema:t.target}):"no target set")}))},Rt=Object(k.a)({popover:{position:"absolute",zIndex:2},cover:{position:"fixed",top:0,right:0,bottom:0,left:0}});function At(e){var t=e.color,r=e.onChange,o=Rt(),i=Te(Object(n.useState)(!0),2),u=i[0],c=i[1];return a.a.createElement("div",null,u?a.a.createElement("div",{className:o.popover},a.a.createElement("div",{role:"presentation",className:o.cover,onClick:function(){c(!1)}}),a.a.createElement(de.a,{color:t,onChange:r})):null)}At.propTypes={color:fe.a.string.isRequired,onChange:fe.a.func.isRequired};var Nt={__proto__:null,ColorPicker:At,default:At};t.default=tt},1042:function(e,t,r){"use strict";r.r(t),r.d(t,"BaseChordDisplayComponentFactory",(function(){return Oe})),r.d(t,"BaseChordDisplayModel",(function(){return Ce})),r.d(t,"baseChordDisplayConfig",(function(){return Se}));var n=r(1),a=r.n(n),o=r(45),i=r(160),u=r.n(i),c=r(431),l=r.n(c),s=r(1011),f=r.n(s),d=r(18),p=r(106),h=r(51),m=r(46),y=r(210),g=r(435),v=r.n(g),b=r(159),w=r(142),O=r(34),k=r(523),E=r.n(k),x=r(524),j=r.n(x),C=r(1012),S=r.n(C),P=r(1013),T=r.n(P),M=r(1014),R=r.n(M),A=r(1015),N=r.n(A),_=r(1857),L=r(683),F=r(698),I=r(703),D=r(715),B=r(699),W=r(697),V=r(470),z=r(158),q=r(605),H=r(70),U=r(1858),G=r.n(U);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Y(o,n,a,i,u,"next",e)}function u(e){Y(o,n,a,i,u,"throw",e)}i(void 0)}))}}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t,r){return t&&Z(e.prototype,t),r&&Z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ae(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var a=te(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ae(this,r)}}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ce(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function fe(e,t,r,n,a){var o=Math.abs(e-r);if(!(o>n)){o===n&&a.push([t,e]);var i=Math.sqrt(n*n-o*o);a.push([t-i,e]),a.push([t+i,e])}}function de(e,t,r,n,a){var o=Math.abs(e-t);if(!(o>n)){o===n&&a.push([e,r]);var i=Math.sqrt(n*n-o*o);a.push([e,r-i]),a.push([e,r+i])}}function pe(e,t){var r=Math.sqrt(e*e+t*t);return 0===r?[0,0]:[r,function(e,t){var r=(Math.atan(t/e)+2*Math.PI)%(2*Math.PI);return e<0&&(t<=0?r+=Math.PI:r-=Math.PI),r}(e,t)]}var he=2*Math.PI;var me=function(){function e(t,r,n,a){K(this,e),this.region=r,this.radianWidth=a;var i=t.bpPerRadian;this.key=Object(o.assembleLocString)(r),this.offsetRadians=n,this.bpPerRadian=i,this.flipped=!1,this.startRadians=this.offsetRadians,this.endRadians=r.widthBp/this.bpPerRadian+this.offsetRadians,Object.freeze(this)}return Q(e,[{key:"bpToXY",value:function(e,t){var r=(this.region.elided?this.region.widthBp/2:this.flipped?this.region.end-e:e-this.region.start)/this.bpPerRadian+this.offsetRadians;return Object(o.polarToCartesian)(t,r)}},{key:"toJSON",value:function(){return Object(o.objectFromEntries)(Object.entries(this))}}]),e}();function ye(e,t){var r,n,a,o,i=ie(e.visibleSection.theta,2),u=i[0],c=i[1];return r=t.offsetRadians+e.offsetRadians,n=t.radianWidth,a=u,o=c-u,!(n<=0||o<=0)&&(n+1e-4>=he||o+1e-4>=he||(r=(r%he+he)%he+he)<(a=(a%he+he)%he+he)+o&&r+n>a||r<(a-=he)+o&&r+n>a||r<(a+=he+he)+o&&r+n>a)}function ge(e){return d.types.compose(y.BaseViewModel,d.types.model("CircularView",{type:d.types.literal("CircularView"),offsetRadians:-Math.PI/2,bpPerPx:2e6,tracks:d.types.array(e.pluggableMstType("track","stateModel")),hideVerticalResizeHandle:!1,hideTrackSelectorButton:!1,lockedFitToWindow:!0,disableImportForm:!1,height:d.types.optional(d.types.refinement("trackHeight",d.types.number,(function(e){return e>=40})),400),minimumRadiusPx:25,spacingPx:10,paddingPx:80,lockedPaddingPx:100,minVisibleWidth:6,minimumBlockWidth:20,displayedRegions:d.types.array(p.Region),scrollX:0,scrollY:0,trackSelectorType:"hierarchical"}).volatile((function(){return{width:800}})).views((function(e){return{get staticSlices(){return function(e){var t,r=[],n=0,a=se(e.elidedRegions);try{for(a.s();!(t=a.n()).done;){var o=t.value,i=o.widthBp/e.bpPerRadian+e.spacingPx/e.pxPerRadian;r.push(new me(e,o,n,i)),n+=i}}catch(e){a.e(e)}finally{a.f()}return r}(e)},get visibleStaticSlices(){return this.staticSlices.filter(ye.bind(this,e))},get visibleSection(){return function(e,t,r){var n=ie(e,4),a=n[0],o=n[1],i=n[2],u=n[3],c=ie(t,2),l=c[0],s=c[1];if(o-=l,i-=s,u-=s,(a-=l)<0&&o>0&&i<0&&u>0){for(var f=[[a,i],[o,i],[a,u],[o,u]],d=-1/0,p=0;p<f.length;p+=1){var h=ie(f[p],2),m=h[0],y=h[1],g=Math.sqrt(m*m+y*y);g>d&&(d=g)}return{rho:[0,Math.min(r,d)],theta:[0,2*Math.PI]}}var v=[[a,i],[o,i],[a,u],[o,u]];de(a,0,0,r,v),de(o,0,0,r,v),fe(i,0,0,r,v),fe(u,0,0,r,v),-a<r&&v.push([a,0]),o<r&&v.push([o,0]),-i<r&&v.push([0,i]),u<r&&v.push([0,u]);for(var b=a>=0?-1:1,w=1/0,O=-1/0,k=1/0,E=-1/0,x=0;x<v.length;x+=1){var j=ie(v[x],2),C=j[0],S=j[1];if(C>=a&&C<=o&&S>=i&&S<=u){var P=ie(pe(C*b,S*b),2),T=P[0],M=P[1];T<=r+.001&&(M<k&&T>1e-4&&(k=M),M>E&&T>1e-4&&(E=M),T<w&&(w=T),T>O&&(O=T))}}return-1===b&&(k+=Math.PI,E+=Math.PI),k>2*Math.PI&&E>2*Math.PI&&(k-=2*Math.PI,E-=2*Math.PI),{rho:[w,Math.min(r,O)],theta:[k,E]}}([e.scrollX,e.scrollX+e.width,e.scrollY,e.scrollY+e.height],this.centerXY,this.radiusPx)},get circumferencePx(){var t,r=0,n=se(this.elidedRegions);try{for(n.s();!(t=n.n()).done;){r+=t.value.widthBp}}catch(e){n.e(e)}finally{n.f()}return r/e.bpPerPx+e.spacingPx*this.elidedRegions.length},get radiusPx(){return this.circumferencePx/(2*Math.PI)},get bpPerRadian(){return e.bpPerPx*this.radiusPx},get pxPerRadian(){return this.radiusPx},get centerXY(){return[this.radiusPx+e.paddingPx,this.radiusPx+e.paddingPx]},get totalBp(){var t,r=0,n=se(e.displayedRegions);try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=a.end-a.start}}catch(e){n.e(e)}finally{n.f()}return r},get maximumRadiusPx(){return e.lockedFitToWindow?Math.min(e.width,e.height)/2-e.lockedPaddingPx:1e6},get maxBpPerPx(){var t=2*Math.PI*e.minimumRadiusPx;return this.totalBp/t},get minBpPerPx(){var e=2*Math.PI*this.maximumRadiusPx;return Object(o.clamp)(this.totalBp/e,1e-10,this.maxBpPerPx)},get atMaxBpPerPx(){return e.bpPerPx>=this.maxBpPerPx},get atMinBpPerPx(){return e.bpPerPx<=this.minBpPerPx},get tooSmallToLock(){return this.minBpPerPx<=1e-10},get figureDimensions(){return[2*this.radiusPx+2*e.paddingPx,2*this.radiusPx+2*e.paddingPx]},get figureWidth(){return this.figureDimensions[0]},get figureHeight(){return this.figureDimensions[1]},get elidedRegions(){var t=[];e.displayedRegions.forEach((function(r){var n=r.end-r.start;if(n/e.bpPerPx<e.minVisibleWidth){var a=t[t.length-1];a&&a.elided?(a.regions.push(X({},r)),a.widthBp+=n):t.push({elided:!0,widthBp:n,regions:[X({},r)]})}else t.push(X(X({},r),{},{widthBp:n}))}));for(var r=0;r<t.length;r+=1){var n=t[r];n.elided&&1===n.regions.length&&(delete n.elided,t[r]=X(X({},n),n.regions[0]))}return t},get assemblyNames(){var t=[];return e.displayedRegions.forEach((function(e){t.includes(e.assemblyName)||t.push(e.assemblyName)})),t},get initialized(){var t=Object(o.getSession)(e).assemblyManager;return this.assemblyNames.every((function(e){var r;return null===(r=t.assemblyList)||void 0===r||!r.map((function(e){return e.name})).includes(e)||(t.get(e)||{}).initialized}))}}})).volatile((function(){return{error:void 0}})).actions((function(t){return{setWidth:function(e){return t.width=Math.max(e,100),t.width},setHeight:function(e){return t.height=Math.max(e,40),t.height},resizeHeight:function(e){var r=t.height,n=this.setHeight(t.height+e);return this.setModelViewWhenAdjust(!t.tooSmallToLock),n-r},resizeWidth:function(e){var r=t.width,n=this.setWidth(t.width+e);return this.setModelViewWhenAdjust(!t.tooSmallToLock),n-r},rotateClockwiseButton:function(){this.rotateClockwise(Math.PI/6)},rotateCounterClockwiseButton:function(){this.rotateCounterClockwise(Math.PI/6)},rotateClockwise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.17;t.offsetRadians+=e},rotateCounterClockwise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.17;t.offsetRadians-=e},zoomInButton:function(){this.setBpPerPx(t.bpPerPx/1.4)},zoomOutButton:function(){this.setBpPerPx(1.4*t.bpPerPx)},setBpPerPx:function(e){t.bpPerPx=Object(o.clamp)(e,t.minBpPerPx,t.maxBpPerPx)},setModelViewWhenAdjust:function(e){t.lockedFitToWindow&&e&&this.setBpPerPx(t.minBpPerPx)},closeView:function(){Object(d.getParent)(t,2).removeView(t)},setDisplayedRegions:function(e){var r=0===t.displayedRegions.length;t.displayedRegions=Object(d.cast)(e),r?this.setBpPerPx(t.minBpPerPx):this.setBpPerPx(t.bpPerPx)},activateTrackSelector:function(){if("hierarchical"===t.trackSelectorType){var e=Object(o.getSession)(t);if(Object(o.isSessionModelWithWidgets)(e)){var r=e.addWidget("HierarchicalTrackSelectorWidget","hierarchicalTrackSelector",{view:t});return e.showWidget(r),r}}throw new Error("invalid track selector type ".concat(t.trackSelectorType))},toggleTrack:function(e){this.hideTrack(e)||this.showTrack(e)},setError:function(e){console.error(e),t.error=e},showTrack:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.pluggableConfigSchemaType("track"),o=Object(d.resolveIdentifier)(a,Object(d.getRoot)(t),r),i=e.getTrackType(o.type);if(!i)throw new Error("unknown track type ".concat(o.type));var u=e.getViewType(t.type),c=u.displayTypes.map((function(e){return e.name})),l=o.displays.find((function(e){return c.includes(e.type)})),s=i.stateModel.create(X(X({},n),{},{type:o.type,configuration:o,displays:[{type:l.type,configuration:l}]}));t.tracks.push(s)},addTrackConf:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.type,o=Object(m.readConfObject)(r,"name"),i=e.getTrackType(a);if(!i)throw new Error("unknown track type ".concat(r.type));var u=e.getViewType(t.type),c=u.displayTypes.map((function(e){return e.name})),l=r.displays.find((function(e){return c.includes(e.type)})),s=i.stateModel.create(X(X({},n),{},{name:o,type:a,configuration:r,displays:[{type:l.type,configuration:l}]}));t.tracks.push(s)},hideTrack:function(r){var n=e.pluggableConfigSchemaType("track"),a=Object(d.resolveIdentifier)(n,Object(d.getRoot)(t),r),o=t.tracks.filter((function(e){return e.configuration===a}));return Object(h.transaction)((function(){return o.forEach((function(e){return t.tracks.remove(e)}))})),o.length},toggleFitToWindowLock:function(){return t.lockedFitToWindow=!t.lockedFitToWindow,this.setModelViewWhenAdjust(t.atMinBpPerPx),t.lockedFitToWindow}}})))}var ve=function(e){var t=e.lib,r=t.react,n=r.useState,a=r.useEffect,o=t["@material-ui/core/styles"].makeStyles,i=t["mobx-react"].observer,u=o((function(e){return{path:{strokeDasharray:187,strokeDashoffset:50,animation:"$dash ".concat(1.4,"s ease-in-out infinite, $colors ").concat(5.6,"s ease-in-out infinite")},"@keyframes colors":{"0%":{stroke:e.palette.primary.light},"25%":{stroke:e.palette.secondary.light},"50%":{stroke:e.palette.tertiary.light},"75%":{stroke:e.palette.quaternary.light},"100%":{stroke:e.palette.primary.light}},"@keyframes dash":{"0%":{strokeDashoffset:2},"50%":{strokeDashoffset:.5,transform:"rotate(135deg)"},"100%":{strokeDashoffset:2,transform:"rotate(720deg)"}}}}));return i((function(e){var t=e.model.renderProps.radius,o=u(),i=ie(n(!1),2),c=i[0],l=i[1];return a((function(){var e=setTimeout((function(){return l(!0)}),400);return function(){return clearTimeout(e)}})),c?r.createElement("g",null,r.createElement("defs",null,r.createElement("pattern",{id:"diagonalHatch",width:"10",height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},r.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:"rgba(255,255,255,0.5)",strokeWidth:10}}))),r.createElement("circle",{cx:"0",cy:"0",r:t,fill:"#f1f1f1"}),r.createElement("circle",{cx:"0",cy:"0",r:t,fill:"url(#diagonalHatch)"}),r.createElement("text",{x:"0",y:"0",transform:"rotate(90 0 0)",dominantBaseline:"middle",textAnchor:"middle"},"Loading"),r.createElement("circle",{className:o.path,fill:"none",strokeWidth:"4",strokeLinecap:"round",cx:"0",cy:"0",r:"60"})):null}))},be=function(e){var t=e.jbrequire,r=t("react"),n=t("@material-ui/core/styles").makeStyles,a=t("mobx-react").observer,o=n({errorMessage:{},errorBackground:{},errorText:{}});return a((function(e){var t=e.model,n=t.renderProps.radius,a=t.error,i=o();return r.createElement("g",{className:i.errorMessage},r.createElement("defs",null,r.createElement("pattern",{id:"diagonalHatch",width:"10",height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},r.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:"rgba(255,0,0,0.5)",strokeWidth:10}}))),r.createElement("circle",{className:i.errorBackground,cx:"0",cy:"0",r:n,fill:"#ffb4b4"}),r.createElement("circle",{className:i.errorPattern,cx:"0",cy:"0",r:n,fill:"url(#diagonalHatch)"}),r.createElement("text",{className:i.errorText,x:"0",y:"0",transform:"rotate(90 0 0)",dominantBaseline:"middle",textAnchor:"middle"},String(a)))}))},we=function(e){var t=e.jbrequire,r=t("react"),n=t("mobx-state-tree").isAlive,a=r.useEffect,o=r.useRef,i=t("mobx-react"),u=i.observer,c=i.PropTypes,l=t("react-dom"),s=l.unmountComponentAtNode,f=l.hydrate,d=t("@jbrowse/core/util").rIC;function p(e){var t=e.model,i=t.data,u=t.html,c=t.filled,l=t.renderingComponent,p=o(null);return a((function(){var e=p.current;return e&&c&&(e&&e.innerHTML&&(e.style.display="none",s(e)),e.style.outline="none",e.innerHTML=u,d((function(){if(n(t)){var a=r.createElement(l,X(X({},i),t.renderProps()),null);d((function(){n(t)&&f(a,e)}))}}))),function(){e&&s(e)}})),r.createElement("g",{ref:p})}return p.propTypes={model:c.observableObject.isRequired},u(p)},Oe=function(e){var t=e.lib,r=e.load,n=t.react,a=t["mobx-react"],o=a.observer,i=a.PropTypes,u=r(ve),c=r(be),l=r(we);function s(e){var t=e.display;return t.error?n.createElement(c,{model:t}):t.filled?n.createElement(l,{model:t}):n.createElement(u,{model:t})}return s.propTypes={display:i.observableObject.isRequired},o(s)};function ke(e,t){return e(t={exports:{}},t.exports),t.exports}var Ee=ke((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),xe=["html"],je=function(e){var t=e.jbrequire,r=t("@jbrowse/core/util/tracks").getRpcSessionId,n=t("@jbrowse/core/util").getContainingView,a=t("@jbrowse/core/util").getSession;function o(){return(o=$(Ee.mark((function e(t,r,n){var a,o,i,u,c,l,s,f;return Ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("cannot render with no props");case 2:if(a=t.rendererType,o=t.rpcManager,i=t.cannotBeRenderedReason,u=t.renderArgs,c=t.renderProps,!i){e.next=5;break}return e.abrupt("return",{message:i});case 5:if(t.renderProps.radius&&t.renderArgs.regions&&t.renderArgs.regions.length){e.next=7;break}return e.abrupt("return",{message:"Skipping render"});case 7:if(n.isCompatibleWithRenderer(a)){e.next=9;break}throw new Error("renderer ".concat(a.name," is not compatible with this display type"));case 9:return e.next=11,a.renderInClient(o,X(X(X({},u),c),{},{signal:r}));case 11:return l=e.sent,s=l.html,f=ne(l,xe),e.abrupt("return",{html:s,data:f,renderingComponent:a.ReactComponent});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{renderReactionData:function(e){var t,o=n(e),i=e.rendererType;return{rendererType:i,rpcManager:a(o).rpcManager,renderProps:e.renderProps(),renderArgs:{assemblyName:null===(t=o.displayedRegions[0])||void 0===t?void 0:t.assemblyName,adapterConfig:JSON.parse(JSON.stringify(e.adapterConfig)),rendererType:i.name,regions:JSON.parse(JSON.stringify(o.displayedRegions)),blockDefinitions:e.blockDefinitions,sessionId:r(e),timeout:1e6}}},renderReactionEffect:function(e,t,r){return o.apply(this,arguments)}}},Ce=d.types.compose("BaseChordDisplay",y.BaseDisplay,d.types.model({bezierRadiusRatio:.1,assemblyName:d.types.maybe(d.types.string)})).volatile((function(){return{filled:!1,reactElement:void 0,data:void 0,message:"",renderingComponent:void 0,refNameMap:void 0}})).actions((function(e){var t=Object(d.getEnv)(e).pluginManager,r=e;return{onChordClick:function(n){Object(m.getConf)(e,"onChordClick",{feature:n,track:r,pluginManager:t})}}})).views((function(e){return{get blockDefinitions(){var t=Object(o.getContainingView)(e).staticSlices;if(!e.refNameMap)return t;var r=JSON.parse(JSON.stringify(t));return r.forEach((function(t){(t.region.elided?t.region.regions:[t.region]).forEach((function(t){var r,n=null===(r=e.refNameMap)||void 0===r?void 0:r[t.refName];n&&t.refName!==n&&(t.refName=n)}))})),r},renderProps:function(){var t=Object(o.getContainingView)(e);return X(X({},Object(w.getParentRenderProps)(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e,bezierRadius:t.radiusPx*e.bezierRadiusRatio,radius:t.radiusPx,blockDefinitions:this.blockDefinitions,onChordClick:e.onChordClick})},get rendererType(){var t=e,r=Object(d.getEnv)(e).pluginManager.getRendererType(e.rendererTypeName);if(!r)throw new Error('renderer "'.concat(t.rendererTypeName,'" not found'));if(!r.ReactComponent)throw new Error("renderer ".concat(t.rendererTypeName," has no ReactComponent, it may not be completely implemented yet"));return r},isCompatibleWithRenderer:function(e){return!!(e instanceof v.a)},get selectedFeatureId(){if(Object(d.isAlive)(e)){var t=Object(o.getSession)(e);if(t){var r=t.selection;return Object(b.isFeature)(r)?r.id():void 0}}}}})).actions((function(e){return{renderStarted:function(){e.filled=!1,e.message="",e.reactElement=void 0,e.data=void 0,e.error=void 0,e.renderingComponent=void 0},renderSuccess:function(t){var r=t.message,n=t.data,a=t.reactElement,o=t.renderingComponent;r?(e.filled=!1,e.message=r,e.reactElement=void 0,e.data=void 0,e.error=void 0,e.renderingComponent=void 0):(e.filled=!0,e.message="",e.reactElement=a,e.data=n,e.error=void 0,e.renderingComponent=o)},renderError:function(t){console.error(t),e.filled=!1,e.message="",e.reactElement=void 0,e.data=void 0,e.error=t,e.renderingComponent=void 0},setRefNameMap:function(t){e.refNameMap=t}}})).actions((function(e){var t=Object(d.getEnv)(e).pluginManager.jbrequire(je),r=t.renderReactionData,n=t.renderReactionEffect;return{afterAttach:function(){Object(o.makeAbortableReaction)(e,r,n,{name:"".concat(e.type," ").concat(e.id," rendering"),fireImmediately:!0},e.renderStarted,e.renderSuccess,e.renderError),Object(o.makeAbortableReaction)(e,(function(){return{assemblyNames:Object(w.getTrackAssemblyNames)(e.parentTrack),adapter:Object(m.getConf)(Object(d.getParent)(e,2),"adapter"),assemblyManager:Object(o.getSession)(e).assemblyManager}}),function(){var t=$(Ee.mark((function t(r,n){var a,o,i;return Ee.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.assemblyNames,o=r.adapter,i=r.assemblyManager,t.abrupt("return",i.getRefNameMapForAdapter(o,a[0],{signal:n,sessionId:Object(w.getRpcSessionId)(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),{name:"".concat(e.type," ").concat(e.id," getting refNames"),fireImmediately:!0},(function(){}),(function(t){e.setRefNameMap(t)}),(function(t){console.error(t),e.setError(t)}))}}})),Se=Object(m.ConfigurationSchema)("BaseChordDisplay",{onChordClick:{type:"boolean",description:"callback that should be run when a chord in the track is clicked",defaultValue:!1,contextVariable:["feature","track","pluginManager"]}},{explicitIdentifier:"displayId"}),Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&re(e,t)}(r,e);var t=oe(r);function r(){var e;return K(this,r),(e=t.apply(this,arguments)).name="CircularViewPlugin",e}return Q(r,[{key:"install",value:function(e){e.addViewType((function(){return new l.a({ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Ve}))})),stateModel:ge(e),name:"CircularView"})}))}},{key:"configure",value:function(e){Object(o.isAbstractMenuManager)(e.rootModel)&&e.rootModel.appendToSubMenu(["Add"],{label:"Circular view",icon:f.a,onClick:function(e){e.addView("CircularView",{})}})}}]),r}(u.a),Te=Object(L.a)({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function Me(e,t,r,n){if(e.flipped){var a=[n,r];r=a[0],n=a[1]}var o=e.bpToXY(r,t),i=e.bpToXY(n,t),u=Math.abs(n-r)/e.bpPerRadian>Math.PI?"1":"0";return["M"].concat(ue(o),["A",t,t,"0",u,"1"],ue(i)).join(" ")}var Re=Object(O.observer)((function(e){var t=e.model,r=e.slice,n=Object(H.a)(),i=t.radiusPx+1,u=r.endRadians,c=r.startRadians,l=r.region,s=Object(o.polarToCartesian)(i,c),f=Object(o.polarToCartesian)(i,u),d=(u-c)*i,p=u-c>Math.PI?"1":"0",h=(u+c)/2,m="[".concat(Number(l.regions.length).toLocaleString(),"]");return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,{text:m,view:t,maxWidthPx:d,radians:h,radiusPx:i,title:"".concat(Number(l.regions.length).toLocaleString()," more regions"),color:n.palette.text.primary}),a.a.createElement("path",{d:["M"].concat(ue(s),["A",i,i,"0",p,"1"],ue(f)).join(" "),stroke:n.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"}))})),Ae=Object(O.observer)((function(e){var t=e.view,r=e.text,n=e.maxWidthPx,i=e.radians,u=e.radiusPx,c=e.title,l=e.color,s=Te(),f=Object(o.polarToCartesian)(u+5,i);return r?6.5*r.length<n?a.a.createElement("text",{x:0,y:0,className:s.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:"translate(".concat(f,") rotate(").concat(Object(o.radToDeg)(i)+90,")"),style:{fill:l}},r,a.a.createElement("title",null,c||r)):n>4?Object(o.radToDeg)(i+t.offsetRadians-Math.PI/2)>=180?a.a.createElement("text",{x:0,y:0,className:s.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:"translate(".concat(f,") rotate(").concat(Object(o.radToDeg)(i),")"),style:{fill:l}},r,a.a.createElement("title",null,c||r)):a.a.createElement("text",{x:0,y:0,className:s.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:"translate(".concat(f,") rotate(").concat(Object(o.radToDeg)(i)+180,")"),style:{fill:l}},r,a.a.createElement("title",null,c||r)):null:null})),Ne=Object(O.observer)((function(e){var t,r=e.model,n=e.slice,i=Object(H.a)(),u=r.radiusPx,c=n.region,l=n.endRadians,s=n.startRadians,f=(l+s)/2,d=(l-s)*u,p=Object(o.getSession)(r).assemblyManager.get(n.region.assemblyName);if(p&&(t=p.getRefNameColor(c.refName)),t)try{t=Object(q.makeContrasting)(t,i.palette.background.paper)}catch(e){t=i.palette.text.primary}else t=i.palette.text.primary;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,{text:c.refName,view:r,maxWidthPx:d,radians:f,radiusPx:u,color:t}),a.a.createElement("path",{d:Me(n,u+1,c.start,c.end),stroke:t,strokeWidth:2,fill:"none"},a.a.createElement("title",null,c.refName)))})),_e=Object(O.observer)((function(e){var t=e.model,r=e.slice;return r.region.elided?a.a.createElement(Re,{key:Object(o.assembleLocString)(r.region.regions[0]),model:t,slice:r}):a.a.createElement(Ne,{key:Object(o.assembleLocString)(r.region),model:t,slice:r})})),Le=Object(L.a)((function(e){return{importFormContainer:{marginBottom:e.spacing(4)}}})),Fe=Object(O.observer)((function(e){var t=e.error;return a.a.createElement(F.a,{variant:"h6",color:"error"},"".concat(t))})),Ie=Object(O.observer)((function(e){var t=e.model,r=Le(),i=Object(o.getSession)(t),u=t.error,c=i.assemblyNames,l=i.assemblyManager,s=ie(Object(n.useState)(c[0]),2),f=s[0],d=s[1],p=ie(Object(n.useState)(u),2),h=p[0],m=p[1],y=l.get(f),g=c.length?null==y?void 0:y.error:"No configured assemblies",v=(null==y?void 0:y.regions)||[],b=g||h;return a.a.createElement(a.a.Fragment,null,a.a.createElement(I.a,{className:r.importFormContainer},b?a.a.createElement(D.a,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.a.createElement(D.a,{item:!0},a.a.createElement(Fe,{error:b}))):null,a.a.createElement(D.a,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.a.createElement(D.a,{item:!0},a.a.createElement(G.a,{onChange:function(e){m(void 0),d(e)},session:i,selected:f})),a.a.createElement(D.a,{item:!0},a.a.createElement(B.a,{disabled:!(v&&v.length),onClick:function(){return t.setDisplayedRegions(v)},variant:"contained",color:"primary"},v.length?"Open":"Loading")))))})),De=Object(L.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden",background:"white"},scroller:{overflow:"auto"},sliceRoot:{background:"none",boxSizing:"content-box",display:"block"},iconButton:{padding:"4px",margin:"0 2px 0 2px"},controls:{overflow:"hidden",whiteSpace:"nowrap",position:"absolute",background:V.a[200],boxSizing:"border-box",borderRight:"1px solid #a2a2a2",borderBottom:"1px solid #a2a2a2",left:0,top:0},importFormContainer:{marginBottom:e.spacing(4)}}})),Be=Object(O.observer)((function(e){var t=e.model;return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Fragment,null,t.staticSlices.map((function(e){return a.a.createElement(_e,{key:Object(o.assembleLocString)(e.region.elided?e.region.regions[0]:e.region),model:t,slice:e})}))),a.a.createElement(a.a.Fragment,null,t.tracks.map((function(e){var r=e.displays[0];return a.a.createElement(r.RenderingComponent,{key:r.id,display:r,view:t})}))))})),We=Object(O.observer)((function(e){var t=e.model,r=e.showingFigure,n=De();return a.a.createElement("div",{className:n.controls},a.a.createElement(W.a,{onClick:t.zoomOutButton,className:n.iconButton,title:t.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:!r||t.atMaxBpPerPx||t.lockedFitToWindow,color:"secondary"},a.a.createElement(E.a,null)),a.a.createElement(W.a,{onClick:t.zoomInButton,className:n.iconButton,title:"zoom in",disabled:!r||t.atMinBpPerPx,color:"secondary"},a.a.createElement(j.a,null)),a.a.createElement(W.a,{onClick:t.rotateCounterClockwiseButton,className:n.iconButton,title:"rotate counter-clockwise",disabled:!r,color:"secondary"},a.a.createElement(S.a,null)),a.a.createElement(W.a,{onClick:t.rotateClockwiseButton,className:n.iconButton,title:"rotate clockwise",disabled:!r,color:"secondary"},a.a.createElement(T.a,null)),a.a.createElement(W.a,{onClick:t.toggleFitToWindowLock,className:n.iconButton,title:t.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:t.tooSmallToLock,color:"secondary"},t.lockedFitToWindow?a.a.createElement(R.a,null):a.a.createElement(N.a,null)),t.hideTrackSelectorButton?null:a.a.createElement(W.a,{onClick:t.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",color:"secondary"},a.a.createElement(_.TrackSelector,null)))})),Ve={__proto__:null,default:Object(O.observer)((function(e){var t=e.model,r=De(),n=!!t.displayedRegions.length&&t.figureWidth&&t.figureHeight,o=!n&&!t.disableImportForm,i=n&&!o;return a.a.createElement("div",{className:r.root,style:{width:t.width,height:t.height},"data-testid":t.id},t.error?a.a.createElement("p",{style:{color:"red"}},t.error.message):a.a.createElement(a.a.Fragment,null,o?a.a.createElement(Ie,{model:t}):null,a.a.createElement(a.a.Fragment,null,i?a.a.createElement("div",{className:r.scroller,style:{width:t.width,height:t.height}},a.a.createElement("div",{className:r.rotator,style:{transform:["rotate(".concat(t.offsetRadians,"rad)")].join(" "),transition:"transform 0.5s",transformOrigin:t.centerXY.map((function(e){return"".concat(e,"px")})).join(" ")}},a.a.createElement("svg",{style:{position:"absolute",left:0,top:0},className:r.sliceRoot,width:"".concat(t.figureWidth,"px"),height:"".concat(t.figureHeight,"px"),version:"1.1"},a.a.createElement("g",{transform:"translate(".concat(t.centerXY,")")},a.a.createElement(Be,{model:t}))))):null,a.a.createElement(We,{model:t,showingFigure:i}),t.hideVerticalResizeHandle?null:a.a.createElement(z.ResizeHandle,{onDrag:t.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))))}))};t.default=Pe},1043:function(e,t,r){(function(e){t.fetch=u(e.fetch)&&u(e.ReadableStream),t.writableStream=u(e.WritableStream),t.abortController=u(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var r;function n(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){r=null}}else r=null;return r}function a(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var o=void 0!==e.ArrayBuffer,i=o&&u(e.ArrayBuffer.prototype.slice);function u(e){return"function"==typeof e}t.arraybuffer=t.fetch||o&&a("arraybuffer"),t.msstream=!t.fetch&&i&&a("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&a("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&u(n().overrideMimeType),t.vbArray=u(e.VBArray),r=null}).call(this,r(49))},1044:function(e,t,r){(function(e,n,a){var o=r(1043),i=r(101),u=r(1045),c=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(t,r,i,c){var l=this;if(u.Readable.call(l),l._mode=i,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",(function(){e.nextTick((function(){l.emit("close")}))})),"fetch"===i){if(l._fetchResponse=r,l.url=r.url,l.statusCode=r.status,l.statusMessage=r.statusText,r.headers.forEach((function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)})),o.writableStream){var s=new WritableStream({write:function(e){return new Promise((function(t,r){l._destroyed?r():l.push(new n(e))?t():l._resumeFetch=t}))},close:function(){a.clearTimeout(c),l._destroyed||l.push(null)},abort:function(e){l._destroyed||l.emit("error",e)}});try{return void r.body.pipeTo(s).catch((function(e){a.clearTimeout(c),l._destroyed||l.emit("error",e)}))}catch(e){}}var f=r.body.getReader();!function e(){f.read().then((function(t){if(!l._destroyed){if(t.done)return a.clearTimeout(c),void l.push(null);l.push(new n(t.value)),e()}})).catch((function(e){a.clearTimeout(c),l._destroyed||l.emit("error",e)}))}()}else{if(l._xhr=t,l._pos=0,l.url=t.responseURL,l.statusCode=t.status,l.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===l.headers[r]&&(l.headers[r]=[]),l.headers[r].push(t[2])):void 0!==l.headers[r]?l.headers[r]+=", "+t[2]:l.headers[r]=t[2],l.rawHeaders.push(t[1],t[2])}})),l._charset="x-user-defined",!o.overrideMimeType){var d=l.rawHeaders["mime-type"];if(d){var p=d.match(/;\s*charset=([^;])(;|$)/);p&&(l._charset=p[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};i(l,u.Readable),l.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==c.DONE)break;try{r=new a.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new n(o.length),u=0;u<o.length;u++)i[u]=255&o.charCodeAt(u);e.push(i)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==c.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==c.LOADING)break;var l=new a.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(r)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(76),r(38).Buffer,r(49))},1045:function(e,t,r){(t=e.exports=r(1046)).Stream=t,t.Readable=t,t.Writable=r(1049),t.Duplex=r(255),t.Transform=r(1050),t.PassThrough=r(1877)},1046:function(e,t,r){"use strict";(function(t,n){var a=r(172);e.exports=b;var o,i=r(1873);b.ReadableState=v;r(311).EventEmitter;var u=function(e,t){return e.listeners(t).length},c=r(1047),l=r(239).Buffer,s=t.Uint8Array||function(){};var f=Object.create(r(135));f.inherits=r(101);var d=r(1874),p=void 0;p=d&&d.debuglog?d.debuglog("stream"):function(){};var h,m=r(1875),y=r(1048);f.inherits(b,c);var g=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var n=t instanceof(o=o||r(255));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,i=e.readableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(i||0===i)?i:u,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(312).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||r(255),!(this instanceof b))return new b(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function w(e,t,r,n,a){var o,i=e._readableState;null===t?(i.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}(e,i)):(a||(o=function(e,t){var r;n=t,l.isBuffer(n)||n instanceof s||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(i,t)),o?e.emit("error",o):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):O(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?O(e,i,t,!1):j(e,i)):O(e,i,t,!1))):n||(i.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(i)}function O(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e)),j(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=y.destroy,b.prototype._undestroy=y.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return h||(h=r(312).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(x,e):x(e))}function x(e){p("emit readable"),e.emit("readable"),T(e)}function j(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function S(e){p("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,a=r.data;e-=a.length;for(;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(i===o.length?a+=o:a+=o.slice(0,e),0===(e-=i)){i===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(i));break}++n}return t.length-=n,a}(e,t):function(e,t){var r=l.allocUnsafe(e),n=t.head,a=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,i=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,i),0===(e-=i)){i===o.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(i));break}++a}return t.length-=a,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):E(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&R(this),null;var n,a=t.needReadable;return p("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",a=!0),t.ended||t.reading?p("reading or ended",a=!1):a&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var c=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:b;function l(t,n){p("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",f),e.removeListener("error",y),e.removeListener("unpipe",l),r.removeListener("end",s),r.removeListener("end",b),r.removeListener("data",m),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function s(){p("onend"),e.end()}o.endEmitted?a.nextTick(c):r.once("end",c),e.on("unpipe",l);var f=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&u(e,"data")&&(t.flowing=!0,T(e))}}(r);e.on("drain",f);var d=!1;var h=!1;function m(t){p("ondata"),h=!1,!1!==e.write(t)||h||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==N(o.pipes,e))&&!d&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function y(t){p("onerror",t),b(),e.removeListener("error",y),0===u(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),b()}function v(){p("onfinish"),e.removeListener("close",g),b()}function b(){p("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",g),e.once("finish",v),e.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)n[o].emit("unpipe",this,r);return this}var i=N(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&E(this):a.nextTick(S,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(P,e,t))}(this,e)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(p("wrapped data"),r.decoder&&(a=r.decoder.write(a)),r.objectMode&&null==a)||(r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=M}).call(this,r(49),r(76))},1047:function(e,t,r){e.exports=r(311).EventEmitter},1048:function(e,t,r){"use strict";var n=r(172);function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return o||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(a,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},1049:function(e,t,r){"use strict";(function(t,n,a){var o=r(172);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var a=n.callback;t.pendingcb--,a(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var u,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=g;var l=Object.create(r(135));l.inherits=r(101);var s={deprecate:r(853)},f=r(1047),d=r(239).Buffer,p=a.Uint8Array||function(){};var h,m=r(1048);function y(){}function g(e,t){u=u||r(255),e=e||{};var n=t instanceof u;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,l=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(l||0===l)?l:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,a){--t.pendingcb,r?(o.nextTick(a,n),o.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(a(n),e._writableState.errorEmitted=!0,e.emit("error",n),x(e,t))}(e,r,n,t,a);else{var i=k(r);i||r.corked||r.bufferProcessing||!r.bufferedRequest||O(e,r),n?c(w,e,r,i,a):w(e,r,i,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function v(e){if(u=u||r(255),!(h.call(v,this)||this instanceof u))return new v(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,r,n,a,o,i){t.writelen=n,t.writecb=i,t.writing=!0,t.sync=!0,r?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),x(e,t)}function O(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,a=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var u=0,c=!0;r;)a[u]=r,r.isBuf||(c=!1),r=r.next,u+=1;a.allBuffers=c,b(e,t,!0,t.length,a,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,s=r.encoding,f=r.callback;if(b(e,t,!1,t.objectMode?1:l.length,l,s,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var r=k(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}l.inherits(v,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===v&&(e&&e._writableState instanceof g)}})):h=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var n,a=this._writableState,i=!1,u=!a.objectMode&&(n=e,d.isBuffer(n)||n instanceof p);return u&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=y),a.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(u||function(e,t,r,n){var a=!0,i=!1;return null===r?i=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),o.nextTick(n,i),a=!1),a}(this,a,e,r))&&(a.pendingcb++,i=function(e,t,r,n,a,o){if(!r){var i=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,n,a);n!==i&&(r=!0,a="buffer",n=i)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,u,n,a,o);return c}(this,a,u,e,t,r)),i},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||O(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(76),r(488).setImmediate,r(49))},1050:function(e,t,r){"use strict";e.exports=i;var n=r(255),a=Object.create(r(135));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a.inherits=r(101),a.inherits(i,n),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},106:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UriLocationRaw=t.UriLocation=t.Region=t.PropTypes=t.NoAssemblyRegion=t.LocalPathLocation=t.FileLocation=t.ElementId=t.BlobLocation=void 0;var a=n(r(13)),o=n(r(66)),i=n(r(360)),u=r(18),c=n(r(0)),l=r(34),s=["baseUri"],f=["locationType"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=u.types.optional(u.types.identifier,i.default.generate);t.ElementId=h;var m={Region:c.default.shape({refName:c.default.string.isRequired,start:c.default.number.isRequired,end:c.default.number.isRequired}),ConfigSchema:l.PropTypes.objectOrObservableObject,Feature:c.default.shape({get:c.default.func.isRequired,id:c.default.func.isRequired})};t.PropTypes=m;var y=u.types.model("NoAssemblyRegion",{refName:u.types.string,start:u.types.number,end:u.types.number,reversed:u.types.optional(u.types.boolean,!1)}).actions((function(e){return{setRefName:function(t){e.refName=t}}}));t.NoAssemblyRegion=y;var g=u.types.compose("Region",y,u.types.model({assemblyName:u.types.string}));t.Region=g;var v=u.types.model("LocalPathLocation",{locationType:u.types.literal("LocalPathLocation"),localPath:u.types.string});t.LocalPathLocation=v;var b=u.types.model("BlobLocation",{locationType:u.types.literal("BlobLocation"),name:u.types.string,blobId:u.types.string});t.BlobLocation=b;var w=u.types.model("UriLocation",{locationType:u.types.literal("UriLocation"),uri:u.types.string,baseUri:u.types.maybe(u.types.string),internetAccountId:u.types.maybe(u.types.string),internetAccountPreAuthorization:u.types.maybe(u.types.model("InternetAccountPreAuthorization",{internetAccountType:u.types.string,authInfo:u.types.frozen()}))});t.UriLocationRaw=w;var O=u.types.snapshotProcessor(w,{postProcessor:function(e){var t=e.baseUri,r=(0,o.default)(e,s);return t?e:r}});t.UriLocation=O;var k=u.types.snapshotProcessor(u.types.union(v,O,b),{preProcessor:function(e){if(e){var t=e.locationType,r=(0,o.default)(e,f);if(!t){var n=r.uri,a=r.localPath,i=r.blob,u="";return void 0!==n?u="UriLocation":void 0!==a?u="LocalPathLocation":void 0!==i&&(u="BlobLocation"),p(p({},r),{},{locationType:u})}return e}}});t.FileLocation=k},142:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNSUPPORTED=t.UNKNOWN=void 0,t.generateUnknownTrackConf=function(e,t,r){var n={type:"FeatureTrack",name:"".concat(e," (Unknown)"),description:'Could not determine track type for "'.concat(t,'"'),category:r,trackId:""};return n.trackId=(0,a.objectHash)(n),n},t.generateUnsupportedTrackConf=function(e,t,r){var n={type:"FeatureTrack",name:"".concat(e," (Unsupported)"),description:'Support not yet implemented for "'.concat(t,'"'),category:r,trackId:""};return n.trackId=(0,a.objectHash)(n),n},t.getBlob=function(e){return i[e]},t.getBlobMap=function(){return i},t.getFileName=function(e){var t="uri"in e?e.uri:void 0,r="localPath"in e?e.localPath:void 0,n="blobId"in e?e:void 0;return(null==n?void 0:n.name)||(null==t?void 0:t.slice(t.lastIndexOf("/")+1))||(null==r?void 0:r.slice(r.lastIndexOf("/")+1))||""},t.getParentRenderProps=function(e){for(var t=(0,n.getParent)(e);!(0,n.isRoot)(t);t=(0,n.getParent)(t))if("renderProps"in t)return t.renderProps();return{}},t.getRpcSessionId=function(e){for(var t,r=e;!(0,n.isRoot)(r);r=(0,n.getParent)(r))"rpcSessionId"in r&&(t=r.rpcSessionId);if(!t)throw new Error("getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute");return t},t.getTrackAssemblyNames=function(e){var t=e.configuration,r=(0,o.readConfObject)(t,"assemblyNames");if(!r){var a=(0,n.getParent)(e.configuration);if("sequence"in a)return[(0,o.readConfObject)(a,"name")]}return r},t.guessAdapter=function(e,t,r,o){if(o){var i=(0,a.getSession)(o),u=(0,n.getEnv)(i).pluginManager.evaluateExtensionPoint("Core-guessAdapterForLocation",(function(e,t,r){}))(e,t,r);if(u)return u}return{type:"UNKNOWN"}},t.guessTrackType=function(e,t){if(t){var r=(0,a.getSession)(t),o=(0,n.getEnv)(r).pluginManager.evaluateExtensionPoint("Core-guessTrackTypeForLocation",(function(e){}))(e);if(o)return o}return"FeatureTrack"},t.makeIndex=function(e,t){if("uri"in e)return{uri:e.uri+t,locationType:"UriLocation"};if("localPath"in e)return{localPath:e.localPath+t,locationType:"LocalPathLocation"};return e},t.makeIndexType=function(e,t,r){return null!=e&&e.toUpperCase().endsWith(t)?t:r},t.setBlobMap=function(e){i=e},t.storeBlobLocation=function(e){if(e&&"blob"in e){var t="b".concat(+Date.now());return i[t]=e.blob,{name:null==e?void 0:e.blob.name,blobId:t,locationType:"BlobLocation"}}return e};var n=r(18),a=r(45),o=r(46);t.UNKNOWN="UNKNOWN";t.UNSUPPORTED="UNSUPPORTED";var i={}},143:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(13)),u=(0,a.default)((function e(t){(0,o.default)(this,e),(0,i.default)(this,"name",""),this.name=t.name}));t.default=u},158:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0});var o={LogoFull:!0,Logomark:!0,App:!0,FileSelector:!0,PrerenderedCanvas:!0,ResizeHandle:!0,EditableTypography:!0,FactoryResetDialog:!0,Tooltip:!0,FatalErrorDialog:!0,Menu:!0,SanitizedHTML:!0};Object.defineProperty(t,"App",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"EditableTypography",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"FactoryResetDialog",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"FatalErrorDialog",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"FileSelector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"LogoFull",{enumerable:!0,get:function(){return u.LogoFull}}),Object.defineProperty(t,"Logomark",{enumerable:!0,get:function(){return u.Logomark}}),Object.defineProperty(t,"Menu",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"PrerenderedCanvas",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ResizeHandle",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"SanitizedHTML",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return h.default}});var i=r(1800);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var u=r(1020),c=n(r(1801)),l=n(r(1025)),s=n(r(1812)),f=n(r(1021)),d=n(r(600)),p=n(r(1026)),h=n(r(1813)),m=n(r(1814)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(430));Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var g=n(r(1027));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}},159:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.isFeature=function(e){return"object"===(0,u.default)(e)&&null!==e&&"function"==typeof e.get&&"function"==typeof e.id};var a=n(r(15)),o=n(r(16)),i=n(r(13)),u=n(r(20));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e){return"uniqueId"in e&&"object"!==(0,u.default)(e.data)}var f=function(){function e(t){var r=this;(0,a.default)(this,e),(0,i.default)(this,"data",void 0),(0,i.default)(this,"subfeatures",void 0),(0,i.default)(this,"parentHandle",void 0),(0,i.default)(this,"uniqueId",void 0),s(t)?this.data=t:(this.data=t.data||{},this.parentHandle=t.parent);var n,o=s(t)?t.uniqueId:t.id;if(null==o)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(o),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error("invalid feature data, end less than start. end: ".concat(this.data.end," start: ").concat(this.data.start));this.data.subfeatures&&(this.subfeatures=null===(n=this.data.subfeatures)||void 0===n?void 0:n.map((function(t,n){return"function"!=typeof t.get?new e({id:t.uniqueId||"".concat(o,"-").concat(n),data:l({strand:r.data.strand},t),parent:r}):t})))}return(0,o.default)(e,[{key:"get",value:function(e){return"subfeatures"===e?this.subfeatures:this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t}},{key:"tags",value:function(){return Object.keys(this.data)}},{key:"id",value:function(){return this.uniqueId}},{key:"parent",value:function(){return this.parentHandle}},{key:"children",value:function(){return this.get("subfeatures")}},{key:"toJSON",value:function(){var e=l(l({},this.data),{},{uniqueId:this.id()}),t=this.parent();t&&(e.parentId=t.id());var r=this.children();return r&&(e.subfeatures=r.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(t){return new e(l({},t))}}]),e}();t.default=f},160:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(13)),u=function(){function e(){(0,a.default)(this,e),(0,i.default)(this,"name",void 0),(0,i.default)(this,"url",void 0),(0,i.default)(this,"version",void 0),(0,i.default)(this,"configurationSchema",void 0)}return(0,o.default)(e,[{key:"install",value:function(e){}},{key:"configure",value:function(e){}}]),e}();t.default=u},179:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(16)),u=n(r(15)),c=n(r(35)),l=n(r(27)),s=n(r(28)),f=n(r(26)),d=n(r(13));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,l.default)(r,e);var t=p(r);function r(e){var n;if((0,u.default)(this,r),n=t.call(this,e),(0,d.default)((0,c.default)(n),"AdapterClass",void 0),(0,d.default)((0,c.default)(n),"getAdapterClass",void 0),(0,d.default)((0,c.default)(n),"configSchema",void 0),(0,d.default)((0,c.default)(n),"adapterCapabilities",void 0),(0,d.default)((0,c.default)(n),"adapterMetadata",void 0),"AdapterClass"in e)n.AdapterClass=e.AdapterClass,n.getAdapterClass=(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.AdapterClass);case 1:case"end":return t.stop()}}),t)})));else{if(!("getAdapterClass"in e))throw new Error("no AdapterClass or getAdapterClass is defined for adapter type ".concat(n.name));n.getAdapterClass=e.getAdapterClass}return n.configSchema=e.configSchema,n.adapterCapabilities=e.adapterCapabilities||[],n.adapterMetadata=e.adapterMetadata,n}return(0,i.default)(r)}(n(r(143)).default);t.default=h},1797:function(e,t,r){"use strict";e.exports=r(1798)},1798:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),i=r(34),u=r(18),c=r(46),l=r(158),s=r(33),f=n(r(1057)),d=r(23),p=n(r(228)),h=n(r(778)),m=r(45),y=r(1815),g=n(y),v=n(r(1819)),b=n(r(1851)),w=n(r(1855)),O=n(r(1041)),k=n(r(1856)),E=n(r(1042)),x=n(r(1859)),j=n(r(1860)),C=n(r(1861)),S=n(r(1016)),P=n(r(1862)),T=r(51),M=n(r(1863)),R=s.makeStyles({paper:{overflow:"auto"}}),A=i.observer((function(e){var t=e.session,r=t.visibleWidget;if(!r)return o.createElement(s.AppBar,{position:"relative"},o.createElement(s.Toolbar,null));var n=u.getEnv(t).pluginManager.getWidgetType(r.type),i=n.ReactComponent,c=n.HeadingComponent,l=n.heading;return o.createElement(o.Fragment,null,o.createElement(s.AppBar,{position:"static"},o.createElement(s.Toolbar,null,c?o.createElement(c,{model:r}):o.createElement(s.Typography,{variant:"h6"},l))),r&&i?o.createElement(a.Suspense,{fallback:o.createElement("div",null,"Loading...")},o.createElement(f,null,o.createElement(i,{model:r,session:t,overrideDimensions:{height:5*window.innerHeight/8,width:800}}))):null)})),N=i.observer((function(e){var t=e.session,r=R(),n=t.hideAllWidgets;return o.createElement(s.Dialog,{open:Boolean(t.visibleWidget),onClose:n,maxWidth:"xl"},o.createElement(s.Paper,{className:r.paper},o.createElement(A,{session:t})))})),_=s.makeStyles((function(e){return{viewContainer:{overflow:"hidden",background:e.palette.secondary.main,margin:e.spacing(1)},icon:{color:e.palette.secondary.contrastText},displayName:{marginTop:2,color:e.palette.secondary.contrastText},grow:{flexGrow:1},iconRoot:{"&:hover":{backgroundColor:d.alpha(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}})),L=i.observer((function(e){var t,r=e.model,n=e.IconButtonProps,i=e.IconProps,u=a.useState(),c=u[0],f=u[1];return null!=(t=r.menuItems())&&t.length?o.createElement(o.Fragment,null,o.createElement(s.IconButton,Object.assign({},n,{"aria-label":"more","aria-controls":"view-menu","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},"data-testid":"view_menu_icon"}),o.createElement(p,Object.assign({},i))),o.createElement(l.Menu,{anchorEl:c,open:Boolean(c),onMenuItemClick:function(e,t){t(),f(void 0)},onClose:function(){f(void 0)},menuItems:r.menuItems()})):null})),F=i.observer((function(e){var t=e.view,r=e.children,n=_(),i=s.useTheme(),c=m.getSession(t),f=h(),d=f[0],p=f[1].width,y=i.spacing(1);return a.useEffect((function(){p&&u.isAlive(t)&&t.setWidth(p-2*y)}),[y,t,p]),o.createElement(s.Paper,{elevation:12,ref:d,className:n.viewContainer,style:{padding:"0px "+y+"px "+y+"px"}},c.DialogComponent?o.createElement(a.Suspense,{fallback:o.createElement("div",null)},o.createElement(c.DialogComponent,Object.assign({},c.DialogProps))):null,o.createElement("div",{style:{display:"flex"}},o.createElement(L,{model:t,IconButtonProps:{classes:{root:n.iconRoot},edge:"start"},IconProps:{className:n.icon}}),o.createElement("div",{className:n.grow}),t.displayName?o.createElement(s.Typography,{variant:"body2",className:n.displayName},t.displayName):null,o.createElement("div",{className:n.grow}),o.createElement("div",{style:{width:20,height:20}},o.createElement(l.Logomark,{variant:"white"}))),o.createElement(s.Paper,null,r))})),I=s.makeStyles((function(){return{avoidParentStyle:{all:"initial"}}})),D=i.observer((function(e){var t=e.viewState,r=I(),n=t.session,i=n.view,d=u.getEnv(n).pluginManager.getViewType(i.type);if(!d)throw new Error("unknown view type "+i.type);var p=d.ReactComponent,h=l.createJBrowseTheme(c.readConfObject(t.config.configuration,"theme"));return o.createElement(s.ThemeProvider,{theme:h},o.createElement("div",{className:r.avoidParentStyle},o.createElement(f,null,o.createElement(F,{key:"view-"+i.id,view:i},o.createElement(a.Suspense,{fallback:o.createElement("div",null,"Loading...")},o.createElement(p,{model:i,session:n}))),o.createElement(N,{session:n}))))})),B=[O,k,E,x,j,C];function W(e,t){return u.types.model("Configuration",{configuration:c.ConfigurationSchema("Root",{rpc:b.configSchema,highResolutionScaling:{type:"number",defaultValue:2},theme:{type:"frozen",defaultValue:{}}}),assembly:t,tracks:u.types.array(e.pluggableConfigSchemaType("track")),connections:u.types.array(e.pluggableConfigSchemaType("connection")),aggregateTextSearchAdapters:u.types.array(e.pluggableConfigSchemaType("text search adapter")),plugins:u.types.frozen()}).views((function(e){return{get assemblies(){return[e.assembly]},get assemblyName(){return c.readConfObject(e.assembly,"name")},get rpcManager(){return u.getParent(e).rpcManager}}}))}function V(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){V(o,n,a,i,u,"next",e)}function u(e){V(o,n,a,i,u,"throw",e)}i(void 0)}))}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var H=a.lazy((function(){return new Promise((function(e){e(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t.default=e,t}(r(1882)))}))}));function U(e){var t=new v([].concat(B,e).map((function(e){return new e})));t.createPluggableElements();var r=function(e){var t=u.types.model("ReactCircularGenomeViewSession",{name:u.types.identifier,view:e.getViewType("CircularView").stateModel,widgets:u.types.map(e.pluggableMstType("widget","stateModel")),activeWidgets:u.types.map(u.types.safeReference(e.pluggableMstType("widget","stateModel"))),connectionInstances:u.types.array(e.pluggableMstType("connection","stateModel"))}).volatile((function(){return{selection:void 0,task:void 0,queueOfDialogs:[]}})).views((function(e){return{get DialogComponent(){if(e.queueOfDialogs.length){var t=e.queueOfDialogs[0];return t&&t[0]}},get DialogProps(){if(e.queueOfDialogs.length){var t=e.queueOfDialogs[0];return t&&t[1]}},get rpcManager(){return u.getParent(e).rpcManager},get configuration(){return u.getParent(e).config.configuration},get assemblies(){return[u.getParent(e).config.assembly]},get assemblyNames(){return[u.getParent(e).config.assemblyName]},get tracks(){return u.getParent(e).config.tracks},get aggregateTextSearchAdapters(){return u.getParent(e).config.aggregateTextSearchAdapters},get connections(){return u.getParent(e).config.connections},get adminMode(){return!1},get assemblyManager(){return u.getParent(e).assemblyManager},get version(){return""},get views(){return[e.view]},renderProps:function(){return{theme:c.readConfObject(this.configuration,"theme")}},get visibleWidget(){if(u.isAlive(e))return Array.from(e.activeWidgets.values())[e.activeWidgets.size-1]},getReferring:function(t){var r=[];return u.walk(u.getParent(e),(function(e){if(u.isModelType(u.getType(e))){var n=u.getMembers(e);Object.entries(n.properties).forEach((function(n){var a=n[0];u.isReferenceType(n[1])&&e[a]===t&&r.push({node:e,key:a})}))}})),r}}})).actions((function(t){return{queueDialog:function(e){var r=this,n=e((function(){r.removeActiveDialog()}));t.queueOfDialogs=[].concat(t.queueOfDialogs,[[n[0],n[1]]])},removeActiveDialog:function(){t.queueOfDialogs=t.queueOfDialogs.slice(1)},makeConnection:function(r,n){void 0===n&&(n={});var a=r.type;if(!a)throw new Error("track configuration has no `type` listed");var o=c.readConfObject(r,"name");if(!e.getConnectionType(a))throw new Error("unknown connection type "+a);var i=q({},n,{name:o,type:a,configuration:r}),u=t.connectionInstances.push(i);return t.connectionInstances[u-1]},removeReferring:function(e,t,r,n){var a=this;e.forEach((function(e){var o=e.node,i=!1;try{var c="open track(s)",l=m.getContainingView(o);r.push((function(){return l.hideTrack(t.trackId)})),i=!0,n[c]||(n[c]=0),n[c]+=1}catch(e){}if(a.hasWidget(o)){var s="configuration editor widget(s)";r.push((function(){return a.hideWidget(o)})),i=!0,n[s]||(n[s]=0),n[s]+=1}if(!i)throw new Error("Error when closing this connection, the following node is still referring to a track configuration: "+JSON.stringify(u.getSnapshot(o)))}))},prepareToBreakConnection:function(e){var r=this,n=[],a={},o=c.readConfObject(e,"name");return t.connectionInstances.find((function(e){return e.name===o})).tracks.forEach((function(e){var o=t.getReferring(e);r.removeReferring(o,e,n,a)})),[function(){n.forEach((function(e){return e()})),r.breakConnection(e)},a]},breakConnection:function(e){var r=c.readConfObject(e,"name"),n=t.connectionInstances.find((function(e){return e.name===r}));t.connectionInstances.remove(n)},addView:function(r,n){if(void 0===n&&(n={}),!e.getElementType("view",r))throw new Error("unknown view type "+r);t.view=q({},n,{type:r})},removeView:function(){},addWidget:function(r,n,a,o){if(void 0===a&&(a={}),void 0===o&&(o={type:r}),!e.getElementType("widget",r))throw new Error("unknown widget type "+r);var i=q({},a,{id:n,type:r,configuration:o});return t.widgets.set(n,i),t.widgets.get(n)},showWidget:function(e){t.activeWidgets.has(e.id)&&t.activeWidgets.delete(e.id),t.activeWidgets.set(e.id,e)},hasWidget:function(e){return t.activeWidgets.has(e.id)},hideWidget:function(e){t.activeWidgets.delete(e.id)},hideAllWidgets:function(){t.activeWidgets.clear()},setSelection:function(e){t.selection=e},clearSelection:function(){t.selection=void 0},clearConnections:function(){t.connectionInstances.length=0},renameCurrentSession:function(e){return u.getParent(t).renameCurrentSession(e)}}})).views((function(e){return{getTrackActionMenuItems:function(t){return[{label:"About track",onClick:function(){e.queueDialog((function(e){return[H,{config:t,handleClose:e}]}))},icon:S}]}}}));return P(t)}(t),n=y.assemblyConfigSchemaFactory(t),a=g(n,t);return{model:u.types.model("ReactCircularGenomeView",{config:W(t,n),session:r,assemblyManager:a}).volatile((function(){return{error:void 0}})).actions((function(e){return{setSession:function(t){e.session=u.cast(t)},renameCurrentSession:function(t){if(e.session){var r=JSON.parse(JSON.stringify(u.getSnapshot(e.session)));r.name=t,this.setSession(r)}},setError:function(t){e.error=t}}})).views((function(e){return{get jbrowse(){return e.config},get pluginManager(){return t}}})).volatile((function(e){return{rpcManager:new b(t,e.config.configuration.rpc,{MainThreadRpcDriver:{}}),textSearchManager:new w(t)}})),pluginManager:t}}var G=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=Object.create((t&&t.prototype instanceof f?t:f).prototype),o=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,o),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function J(){return(J=z(G.mark((function e(t){var r;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new M(t)).installGlobalReExports(window),e.next=4,r.load();case 4:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.JBrowseCircularGenomeView=D,t.createModel=U,t.createViewState=function(e){var t=e.assembly,r=e.tracks,n=e.configuration,a=e.aggregateTextSearchAdapters,o=e.onChange,i=U(e.plugins||[]),c=i.pluginManager,l=e.defaultSession;l||(l={name:"this session",view:{id:"circularView",type:"CircularView"}});var s=i.model.create({config:{configuration:n,assembly:t,tracks:r,aggregateTextSearchAdapters:a,defaultSession:l},assemblyManager:{},session:l},{pluginManager:c});return c.setRootModel(s),c.configure(),T.autorun((function(e){s.assemblyManager.allPossibleRefNames&&s.assemblyManager.allPossibleRefNames.length&&s.session.view.initialized&&(s.session.view.setDisplayedRegions(s.assemblyManager.assemblies[0].regions),e.dispose())})),o&&u.onPatch(s,o),s},t.loadPlugins=function(e){return J.apply(this,arguments)}},1799:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=t.description,n=void 0===r?"":r,u=t.model,s=t.type,f=t.defaultValue,h=t.contextVariable,m=void 0===h?[]:h;if(!s)throw new Error("type name required");u||(u=c[s]);if(!u)throw new Error('no builtin config slot type "'.concat(s,"\", and no 'model' param provided"));if(void 0===f)throw new Error("no 'defaultValue' provided");var y="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1),"ConfigSlot"),g=o.types.model(y,{name:o.types.literal(e),description:o.types.literal(n),type:o.types.literal(s),value:o.types.optional(o.types.union(p,u),f)}).volatile((function(){return{contextVariable:m}})).views((function(e){return{get isCallback(){return String(e.value).startsWith("jexl:")}}})).views((function(e){return{get expr(){if(e.isCallback){var t=(0,o.getEnv)(e).pluginManager;return t||"undefined"!=typeof jest||console.warn("no pluginManager detected on config env (if you dynamically instantiate a config, for example in renderProps for your display model, check that you add the env argument)"),(0,i.stringToJexlExpression)(String(e.value),null==t?void 0:t.jexl)}return{evalSync:function(){return e.value}}},get valueJSON(){var t;if(!e.isCallback)return(t=e.value)&&t.toJSON?t.toJSON():'"'.concat(t,'"')}}})).preProcessSnapshot((function(t){return"object"===(0,a.default)(t)&&t.name===e?t:{name:e,description:n,type:s,value:t}})).postProcessSnapshot((function(e){return"object"===(0,a.default)(e.value)?JSON.stringify(e.value)!==JSON.stringify(f)?e.value:void 0:e.value!==f?e.value:void 0})).actions((function(e){return{set:function(t){e.value=t},reset:function(){e.value=f},convertToCallback:function(){e.isCallback||(e.value="jexl:".concat(e.valueJSON||"''"))},convertToValue:function(){if(e.isCallback){try{var t=e.expr.evalSync();if(void 0!==t)return void(e.value=t)}catch(e){}if(e.value=f,e.isCallback){if(!(s in l))throw new Error("no fallbackDefault defined for type ".concat(s));e.value=l[s]}}}}}));d[s]&&(g=g.extend(d[s]));var v=o.types.optional(g,{name:e,type:s,description:n,value:f});return Object.defineProperty(v,"isJBrowseConfigurationSlot",{value:!0}),v};var a=n(r(20)),o=r(18),i=r(598),u=r(106);var c={stringArray:o.types.array(o.types.string),stringArrayMap:o.types.map(o.types.array(o.types.string)),numberMap:o.types.map(o.types.number),boolean:o.types.boolean,color:o.types.refinement("Color",o.types.string,(function(){return!0})),integer:o.types.integer,number:o.types.number,string:o.types.string,text:o.types.string,fileLocation:u.FileLocation,frozen:o.types.frozen()},l={stringArray:[],stringArrayMap:{},numberMap:{},boolean:!0,color:"black",integer:1,number:1,string:"",text:"",fileLocation:{uri:"/path/to/resource.txt",locationType:"UriLocation"},frozen:{}},s=function(e){return{views:{get valueJSON(){return e.value}}}},f=function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}}}},d={fileLocation:f,number:s,integer:s,boolean:s,frozen:f,stringArray:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t){e.value.push(t)},removeAtIndex:function(t){e.value.splice(t,1)},setAtIndex:function(t,r){e.value[t]=r}}}},stringArrayMap:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t,r){e.value.set(t,r)},remove:function(t){e.value.delete(t)},addToKey:function(t,r){var n=e.value.get(t);if(!n)throw new Error("".concat(t," not found"));n.push(r)},removeAtKeyIndex:function(t,r){var n=e.value.get(t);if(!n)throw new Error("".concat(t," not found"));n.splice(r,1)},setAtKeyIndex:function(t,r,n){var a=e.value.get(t);if(!a)throw new Error("".concat(t," not found"));a[r]=n}}}},numberMap:function(e){return{views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add:function(t,r){e.value.set(t,r)},remove:function(t){e.value.delete(t)}}}}},p=o.types.refinement("JexlString",o.types.string,(function(e){return e.startsWith("jexl:")}))},180:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RemoteFileWithRangeCache",{enumerable:!0,get:function(){return u.RemoteFileWithRangeCache}}),t.openLocation=function(e,t){function r(){return(r=(0,o.default)(a.default.mark((function t(r,n){var o,i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(r,n);case 2:if(401!==(o=t.sent).status){t.next=7;break}if(i=o.headers.get("WWW-Authenticate"),!((0,c.isUriLocation)(e)&&i&&i.includes("Basic"))){t.next=7;break}throw new c.AuthNeededError("Accessing HTTPBasic resource without authentication",e);case 7:return t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(!e)throw new Error("must provide a location to openLocation");if(function(e){return"localPath"in e}(e)){if(!e.localPath)throw new Error("No local path provided");if(s.default)return new i.LocalFile(e.localPath);throw new Error("can't use local files in the browser")}if(function(e){return"blobId"in e}(e)){var n=(0,l.getBlob)(e.blobId);if(!n)throw new Error('file ("'.concat(e.name,'") was opened locally from a previous session. To restore it, go to track settings and reopen the file'));return new i.BlobFile(n)}if((0,c.isUriLocation)(e)){if(!e.uri)throw new Error("No URI provided");if(e.internetAccountPreAuthorization){if(!t)throw new Error("need plugin manager to open locations with an internet account");var f,d=t.rootModel;if(d&&!(0,c.isAppRootModel)(d))throw new Error("This context does not support internet accounts");if(d)f=d.findAppropriateInternetAccount(e);else{var p=t.getInternetAccountType(e.internetAccountPreAuthorization.internetAccountType);if(f=p.stateModel.create({type:e.internetAccountPreAuthorization.internetAccountType,configuration:e.internetAccountPreAuthorization.authInfo.configuration}),!e.internetAccountPreAuthorization.authInfo.token)throw new Error("Failed to obtain token from internet account. Try reloading the page")}if(!f)throw new Error("Could not find associated internet account");return f.openLocation(e)}if(e.internetAccountId){if(!t)throw new Error("need plugin manager to open locations with an internet account");var h=t.rootModel;if(h&&!(0,c.isAppRootModel)(h))throw new Error("This context does not support internet accounts");if(h){var m=JSON.parse(JSON.stringify(e)),y=h.findAppropriateInternetAccount(e);if(!y)throw new Error("Could not find associated internet account");return y.getPreAuthorizationInformation(e).then((function(e){return m.internetAccountPreAuthorization=e})),y.openLocation(m)}throw new Error("Could not pre-authorize location")}var g=e.baseUri?new URL(e.uri,e.baseUri).href:e.uri;return new u.RemoteFileWithRangeCache(g,{fetch:function(e,t){return r.apply(this,arguments)}})}throw new Error("invalid fileLocation")};var a=n(r(22)),o=n(r(24)),i=r(107),u=r(1836),c=r(207),l=r(142),s=n(r(380))},1800:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createJBrowseDefaultOverrides=p,t.createJBrowseDefaultProps=d,t.createJBrowseTheme=function(e){var t,r;if(!e)return(0,i.createTheme)(h);null!==(t=e.palette)&&void 0!==t&&t.tertiary&&(e=l(l({},e),{},{palette:l(l({},e.palette),{},{tertiary:s.palette.augmentColor(e.palette.tertiary)})}));null!==(r=e.palette)&&void 0!==r&&r.quaternary&&(e=l(l({},e),{},{palette:l(l({},e.palette),{},{quaternary:s.palette.augmentColor(e.palette.quaternary)})}));return e=l(l({},e),{},{props:(0,u.default)({MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}},e.props||{}),overrides:(0,u.default)(p(e.palette),e.overrides||{})}),(0,i.createTheme)((0,u.default)(h,e))},t.jbrowseDefaultPalette=t.jbrowseBaseTheme=void 0;var a=n(r(13)),o=r(258),i=r(23),u=(r(688),n(r(357)));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=(0,i.createTheme)(),f={primary:{main:"#0D233F"},secondary:{main:"#721E63"},tertiary:s.palette.augmentColor({main:"#135560"}),quaternary:s.palette.augmentColor({main:"#FFB11D"}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:s.palette.augmentColor(o.green),C:s.palette.augmentColor(o.blue),G:s.palette.augmentColor(o.amber),T:s.palette.augmentColor(o.red)}};function d(){return{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.default)(f,e);return{MuiIconButton:{colorSecondary:{color:t.tertiary.main}},MuiButton:{textSecondary:{color:t.tertiary.main}},MuiFab:{secondary:{backgroundColor:t.quaternary.main}},MuiLink:{root:{color:t.tertiary.main}},MuiAccordionSummary:{root:{backgroundColor:t.tertiary.main+" !important",width:"100%","&$expanded":{minHeight:0,color:t.tertiary.contrastText,backgroundColor:t.tertiary.main},minHeight:0},content:{"&$expanded":{margin:"8px 8px"},margin:"8px 8px",color:t.tertiary.contrastText}},MuiMenuItem:{root:{paddingTop:3,paddingBottom:3}},MuiListItemIcon:{root:{minWidth:32}},MuiListItemText:{inset:{paddingLeft:32}}}}t.jbrowseDefaultPalette=f;var h={palette:f,typography:{fontSize:12},spacing:4,props:{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiList:{dense:!0},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense",size:"small"},MuiToolbar:{variant:"dense"},MuiSvgIcon:{fontSize:"small"},MuiToggleButtonGroup:{size:"small"},MuiCheckbox:{size:"small"},MuiLink:{underline:"always"}},overrides:p()};t.jbrowseBaseTheme=h},1801:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(33),c=n(r(733)),l=r(34),s=r(18),f=r(46),d=n(r(1802)),p=n(r(1804)),h=n(r(600)),m=r(1020),y=n(r(1807)),g=n(r(1808));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var b=(0,u.makeStyles)((function(e){return{"@global":{html:{"font-family":"Roboto"},"*":{"scrollbar-width":"auto","scrollbar-color":"rgba(0,0,0,.5) rgba(128,128,128)"},"*::-webkit-scrollbar":{"-webkit-appearance":"none",width:"12px"},"*::-webkit-scrollbar-thumb":{"background-color":"rgba(0,0,0,.5)","-webkit-box-shadow":"0 0 1px rgba(255,255,255,.5)"}},root:{display:"grid",height:"100vh",width:"100%"},fabLeft:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),left:e.spacing(2)},fabRight:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},menuBarAndComponents:{gridColumn:"main",display:"grid",gridTemplateRows:"[menubar] min-content [components] auto",height:"100vh"},menuBar:{gridRow:"menubar"},components:{overflowY:"auto",gridRow:"components"},appBar:{flexGrow:1},grow:{flexGrow:1},inputBase:{color:e.palette.primary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.primary.light}},inputFocused:{borderColor:e.palette.secondary.main,backgroundColor:e.palette.primary.light},selectPaper:{padding:e.spacing(4)}}})),w=(0,l.observer)((function(e){var t=e.session.configuration,r=(0,f.readConfObject)(t,"logoPath");return null!=r&&r.uri?i.default.createElement("img",{src:r.uri,alt:"Custom logo"}):i.default.createElement(m.LogoFull,{variant:"white"})})),O=(0,l.observer)((function(e){var t,r,n=e.session,a=e.HeaderButtons,l=void 0===a?i.default.createElement("div",null):a,f=b(),m=(0,s.getEnv)(n).pluginManager,v=m.getElementTypeRecord("view").all(),O=(0,i.useState)(null===(t=v[0])||void 0===t?void 0:t.name),k=(0,o.default)(O,2),E=k[0],x=k[1],j=n.visibleWidget,C=n.drawerWidth,S=n.minimized,P=n.activeWidgets,T=n.savedSessionNames,M=n.name,R=n.menus,A=n.views,N=n.drawerPosition;var _,L=j&&!S;return"right"===N?_=["[main] 1fr",L?"[drawer] ".concat(C,"px"):void 0]:"left"===N&&(_=[L?"[drawer] ".concat(C,"px"):void 0,"[main] 1fr"]),i.default.createElement("div",{className:f.root,style:{gridTemplateColumns:null===(r=_)||void 0===r?void 0:r.filter((function(e){return!!e})).join(" ")}},L&&"left"===N?i.default.createElement(d.default,{session:n}):null,n.DialogComponent?i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(n.DialogComponent,n.DialogProps)):null,i.default.createElement("div",{className:f.menuBarAndComponents},i.default.createElement("div",{className:f.menuBar},i.default.createElement(u.AppBar,{className:f.appBar,position:"static"},i.default.createElement(u.Toolbar,null,R.map((function(e){return i.default.createElement(p.default,{key:e.label,menuTitle:e.label,menuItems:e.menuItems,session:n})})),i.default.createElement("div",{className:f.grow}),i.default.createElement(u.Tooltip,{title:"Rename Session",arrow:!0},i.default.createElement(h.default,{value:M,setValue:function(e){null!=T&&T.includes(e)?n.notify('Cannot rename session to "'.concat(e,'", a saved session with that name already exists'),"warning"):n.renameCurrentSession(e)},variant:"body1",classes:{inputBase:f.inputBase,inputRoot:f.inputRoot,inputFocused:f.inputFocused}})),l,i.default.createElement("div",{className:f.grow}),i.default.createElement("div",{style:{width:150,maxHeight:48}},i.default.createElement(w,{session:n}))))),i.default.createElement("div",{className:f.components},A.length?A.map((function(e){var t=m.getViewType(e.type);if(!t)throw new Error("unknown view type ".concat(e.type));var r=t.ReactComponent;return i.default.createElement(g.default,{key:"view-".concat(e.id),view:e,onClose:function(){return n.removeView(e)}},i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(r,{model:e,session:n,getTrackType:m.getTrackType})))})):i.default.createElement(u.Paper,{className:f.selectPaper},i.default.createElement(u.Typography,null,"Select a view to launch"),i.default.createElement(u.Select,{value:E,onChange:function(e){return x(e.target.value)}},v.map((function(e){var t=e.name;return i.default.createElement(u.MenuItem,{key:t,value:t},t)}))),i.default.createElement(u.Button,{onClick:function(){n.addView(E,{})},variant:"contained",color:"primary"},"Launch view")),i.default.createElement("div",{style:{height:300}}))),P.size>0&&S?i.default.createElement(u.Tooltip,{title:"Open drawer widget"},i.default.createElement(u.Fab,{className:"right"===N?f.fabRight:f.fabLeft,color:"primary","data-testid":"drawer-maximize",onClick:function(){return n.showWidgetDrawer()}},i.default.createElement(c.default,null))):null,L&&"right"===N?i.default.createElement(d.default,{session:n}):null,i.default.createElement(y.default,{session:n}))}));t.default=O},1802:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(33),c=r(34),l=r(18),s=n(r(221)),f=n(r(82)),d=n(r(738)),p=n(r(490)),h=n(r(1803));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var y=(0,u.makeStyles)((function(e){return{drawerActions:{float:"right","&:hover":{backgroundColor:(0,u.alpha)(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},drawerToolbar:{paddingLeft:e.spacing(2)},spacer:{flexGrow:1},drawerSelect:{color:e.palette.secondary.contrastText},drawerLoading:{margin:e.spacing(2)},dropDownIcon:{color:e.palette.secondary.contrastText},header:{background:e.palette.secondary.main}}})),g=(0,c.observer)((function(e){var t=e.session,r=e.setToolbarHeight,n=(0,l.getEnv)(t).pluginManager,a=t.visibleWidget,c=t.activeWidgets,h=t.drawerPosition,m=y(),g=i.default.useState(null),v=(0,o.default)(g,2),b=v[0],w=v[1];return i.default.createElement(u.AppBar,{position:"sticky",className:m.header,ref:function(e){return r((null==e?void 0:e.getBoundingClientRect().height)||0)}},i.default.createElement(u.Toolbar,{disableGutters:!0,className:m.drawerToolbar},i.default.createElement(u.Select,{value:null==a?void 0:a.id,"data-testid":"widget-drawer-selects",className:m.drawerSelect,classes:{icon:m.dropDownIcon},renderValue:function(e){var r=t.activeWidgets.get(e);if(!r)return i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},"Unknown widget");var a=n.getWidgetType(r.type),o=a.HeadingComponent,c=a.heading;return o?i.default.createElement(o,{model:r}):i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},c)},onChange:function(e){var r=t.activeWidgets.get(e.target.value);r||t.notify("Widget not found "+e.target.value,"warning"),t.showWidget(r)}},Array.from(c.values()).map((function(e){var r=n.getWidgetType(e.type),a=r.HeadingComponent,o=r.heading;return i.default.createElement(u.MenuItem,{"data-testid":"widget-drawer-selects-item-".concat(e.type),key:e.id,value:e.id},a?i.default.createElement(a,{model:e}):i.default.createElement(u.Typography,{variant:"h6",color:"inherit"},o),i.default.createElement(u.ListItemSecondaryAction,null,i.default.createElement(u.IconButton,{"data-testid":"".concat(e.type,"-drawer-delete"),color:"inherit","aria-label":"Delete",onClick:function(){t.hideWidget(e)}},i.default.createElement(s.default,null))))}))),i.default.createElement("div",{className:m.spacer}),i.default.createElement("div",null,i.default.createElement(u.IconButton,{"data-testid":"drawer-close",color:"inherit",onClick:function(e){return w(e.currentTarget)}},i.default.createElement(p.default,null)),i.default.createElement(u.Tooltip,{title:"Minimize drawer"},i.default.createElement(u.IconButton,{"data-testid":"drawer-minimize",color:"inherit",onClick:function(){t.notify("Drawer minimized, click button on ".concat(h," side of screen to re-open"),"info"),t.minimizeWidgetDrawer()}},i.default.createElement(d.default,null))),i.default.createElement(u.Tooltip,{title:"Close drawer"},i.default.createElement(u.IconButton,{"data-testid":"drawer-close",color:"inherit",onClick:function(){t.hideWidget(a)}},i.default.createElement(f.default,null))))),i.default.createElement(u.Menu,{anchorEl:b,open:Boolean(b),onClose:function(){return w(null)}},["left","right"].map((function(e){return i.default.createElement(u.MenuItem,{key:e,selected:"option"===h,onClick:function(){t.setDrawerPosition(e),w(null)}},e)}))))})),v=(0,c.observer)((function(e){var t=e.session,r=t.visibleWidget,n=(0,l.getEnv)(t).pluginManager,a=r?n.getWidgetType(r.type).ReactComponent:null,u=(0,i.useState)(0),c=(0,o.default)(u,2),s=c[0],f=c[1];return i.default.createElement(h.default,{session:t},i.default.createElement(g,{session:t,setToolbarHeight:f}),i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(a,{model:r,session:t,toolbarHeight:s})))}));t.default=v},1803:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=n(r(60)),i=r(23),u=r(34),c=n(r(1021)),l=(0,i.makeStyles)((function(e){return{paper:{overflowY:"auto",height:"100%",zIndex:e.zIndex.drawer,outline:"none",background:e.palette.background.default},resizeHandle:{width:4,position:"fixed",top:0,zIndex:e.zIndex.drawer+1}}}));var s=(0,u.observer)((function(e){var t=e.children,r=e.session,n=r.drawerPosition,i=r.drawerWidth,u=l();return a.default.createElement(o.default,{className:u.paper,elevation:16,square:!0},"right"===n?a.default.createElement(c.default,{onDrag:r.resizeDrawer,className:u.resizeHandle,vertical:!0}):null,t,"left"===n?a.default.createElement(c.default,{onDrag:r.resizeDrawer,className:u.resizeHandle,style:{left:i},vertical:!0}):null)}));t.default=s},1804:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(33),c=r(23),l=n(r(222)),s=r(34),f=n(r(0)),d=n(r(430));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h=(0,c.makeStyles)((function(e){return{root:{display:"flex"},buttonRoot:{"&:hover":{backgroundColor:(0,c.alpha)(e.palette.primary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}));function m(e){var t=e.menuTitle,r=e.session,n=e.menuItems,a=(0,i.useState)(!1),c=(0,o.default)(a,2),s=c[0],f=c[1],p=(0,i.useRef)(null),m=h();function y(){f(!1)}return i.default.createElement("div",{className:m.root},i.default.createElement(u.Button,{ref:p,onClick:function(){f(!s)},color:"inherit","data-testid":"dropDownMenuButton",classes:{root:m.buttonRoot}},t,i.default.createElement(l.default,null)),i.default.createElement(d.default,{anchorEl:p.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},onMenuItemClick:function(e,t){t(r),y()},open:s,onClose:y,menuItems:n}))}m.propTypes={menuTitle:f.default.string.isRequired,menuItems:s.PropTypes.arrayOrObservableArray.isRequired,session:s.PropTypes.objectOrObservableObject.isRequired};var y=(0,s.observer)(m);t.default=y},1805:function(e,t,r){},1806:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.when=c,t.whenPresent=function(e){return l.apply(this,arguments)};var a=n(r(22)),o=n(r(24)),i=r(51),u=r(1022);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timeout,n=t.signal,a=t.name;return new Promise((function(t,o){var c,l=!1,s=(0,i.when)(e),f=function(){};r&&(c=setTimeout((function(){l||(l=!0,s.cancel(),o(new Error("timed out waiting for ".concat(a||"whenPresent"))))}),r),f=function(){return c&&clearTimeout(c)}),n&&n.addEventListener("abort",(function(){l||(l=!0,s.cancel(),f(),o((0,u.makeAbortError)()))})),s.then((function(){l||(l=!0,f(),t(!0))})).catch((function(e){l||(l=!0,f(),o(e))}))}))}function l(){return(l=(0,o.default)(a.default.mark((function e(t){var r,n=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,c((function(){var e=t();return null!=e}),r);case 3:return e.abrupt("return",t());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1807:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(33),c=n(r(82)),l=n(r(286));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,r(34).observer)((function(e){var t=e.session,r=(0,i.useState)(!1),n=(0,o.default)(r,2),a=n[0],s=n[1],f=(0,i.useState)(),d=(0,o.default)(f,2),p=d[0],h=d[1],m=t.popSnackbarMessage,y=t.snackbarMessages,g=y.length?y[y.length-1]:null;(0,i.useEffect)((function(){var e;return p?g?p[0]!==g[0]&&(s(!1),e=setTimeout((function(){h(g),s(!0)}),100)):h(void 0):g&&(h(g),s(!0)),function(){clearTimeout(e)}}),[g,p]);var v=function(e,t){"clickaway"!==t&&(m(),s(!1))},b=p||[],w=(0,o.default)(b,2),O=w[0],k=w[1];return i.default.createElement(u.Snackbar,{open:a&&!!O,onClose:v,action:i.default.createElement(u.IconButton,{"aria-label":"close",color:"inherit",onClick:v},i.default.createElement(c.default,null))},i.default.createElement(l.default,{onClose:v,severity:k||"warning"},O))}));t.default=f},1808:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(13)),i=n(r(59)),u=n(r(21)),c=r(33),l=n(r(82)),s=n(r(228)),f=r(23),d=r(34),p=r(18),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),m=r(771),y=n(r(600)),g=n(r(430));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=(0,c.makeStyles)((function(e){return{viewContainer:{overflow:"hidden",background:e.palette.secondary.main,margin:e.spacing(.5)},icon:{color:e.palette.secondary.contrastText},grow:{flexGrow:1},iconRoot:{"&:hover":{backgroundColor:(0,f.alpha)(e.palette.secondary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},input:{paddingBottom:0,paddingTop:2},inputBase:{color:e.palette.secondary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.secondary.light}},inputFocused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.secondary.light}}})),k=(0,d.observer)((function(e){var t=e.model,r=e.IconButtonProps,n=e.IconProps,a=(0,h.useState)(),o=(0,u.default)(a,2),l=o[0],f=o[1],d=t.menuItems,p="function"==typeof d?d():d;return null!=p&&p.length?h.default.createElement(h.default.Fragment,null,h.default.createElement(c.IconButton,(0,i.default)({},r,{"aria-label":"more","aria-controls":"view-menu","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},"data-testid":"view_menu_icon"}),h.default.createElement(s.default,n)),h.default.createElement(g.default,{anchorEl:l,open:Boolean(l),onMenuItemClick:function(e,t){t(),f(void 0)},onClose:function(){f(void 0)},menuItems:t.menuItems()})):null})),E=(0,m.withContentRect)("bounds")((0,d.observer)((function(e){var t=e.view,r=e.onClose,n=e.style,a=e.children,o=e.contentRect,i=e.measureRef,u=O(),s=(0,c.useTheme)().spacing(1),f=0;o.bounds&&(f=o.bounds.width),(0,h.useEffect)((function(){f&&(0,p.isAlive)(t)&&t.setWidth(f-2*s)}),[s,t,f]);var d=(0,h.useRef)(null);return(0,h.useEffect)((function(){var e;null!=d&&null!==(e=d.current)&&void 0!==e&&e.scrollIntoView&&d.current.scrollIntoView({block:"center"})}),[]),h.default.createElement(c.Paper,{elevation:12,ref:i,className:u.viewContainer,style:w(w({},n),{},{padding:"0px ".concat(s,"px ").concat(s,"px")})},h.default.createElement("div",{ref:d,style:{display:"flex"}},h.default.createElement(k,{model:t,IconButtonProps:{classes:{root:u.iconRoot},edge:"start"},IconProps:{className:u.icon}}),h.default.createElement("div",{className:u.grow}),h.default.createElement(c.Tooltip,{title:"Rename view",arrow:!0},h.default.createElement(y.default,{value:t.displayName||(t.assemblyNames?t.assemblyNames.join(","):"Untitled view"),setValue:function(e){t.setDisplayName(e)},variant:"body2",classes:{input:u.input,inputBase:u.inputBase,inputRoot:u.inputRoot,inputFocused:u.inputFocused}})),h.default.createElement("div",{className:u.grow}),h.default.createElement(c.IconButton,{"data-testid":"close_view",classes:{root:u.iconRoot},edge:"end",onClick:r},h.default.createElement(l.default,{className:u.icon}))),h.default.createElement(c.Paper,null,a))})));t.default=E},1809:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(41)),i=n(r(59)),u=n(r(13)),c=n(r(21)),l=n(r(66)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(33),d=r(257),p=r(34),h=r(207),m=n(r(222)),y=n(r(1810)),g=n(r(1811)),v=["title","children"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=e.title,r=e.children,n=(0,l.default)(e,v);return s.default.createElement(f.Tooltip,{title:t||""},s.default.createElement(d.ToggleButton,n,r))}var E=(0,p.observer)((function(e){var t=e.location,r=e.name,n=e.description,a=e.rootModel,u=e.setLocation,l=!t||(0,h.isUriLocation)(t)?"url":"file",p=(0,s.useState)(t&&"internetAccountId"in t&&t.internetAccountId?t.internetAccountId:l),v=(0,c.default)(p,2),b=v[0],w=v[1],E=(0,h.isAppRootModel)(a)?a.internetAccounts.slice():[],x=(0,s.useState)(E.slice(0,2)),j=(0,c.default)(x,2),C=j[0],S=j[1],P=(0,s.useState)(E.slice(2)),T=(0,c.default)(P,2),M=T[0],R=T[1],A=(0,s.useState)(null),N=(0,c.default)(A,2),_=N[0],L=N[1],F=E.find((function(e){return e.internetAccountId===b})),I=function(e){u(O(O({},e),{},{internetAccountId:F?F.internetAccountId:void 0}))};t&&F&&(0,h.isUriLocation)(t)&&t.internetAccountId!==F.internetAccountId&&I(t);var D=s.default.createElement(g.default,(0,i.default)({},e,{setLocation:I,label:null==F?void 0:F.selectorLabel}));if("file"===b&&(D=s.default.createElement(y.default,e)),null!=F&&F.SelectorComponent){var B=F.SelectorComponent;D=s.default.createElement(B,(0,i.default)({},e,{setLocation:I}))}return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Box,{display:"flex"},s.default.createElement(f.InputLabel,{shrink:!0},r)),s.default.createElement(f.Box,{display:"flex",flexDirection:"row"},s.default.createElement(f.Box,null,s.default.createElement(d.ToggleButtonGroup,{value:b,exclusive:!0,onChange:function(e,r){r&&w(r),(0,h.isUriLocation)(t)&&I(t)},"aria-label":"file, url, or account picker"},new URLSearchParams(window.location.search).get("adminKey")?null:s.default.createElement(d.ToggleButton,{value:"file","aria-label":"local file"},"File"),s.default.createElement(d.ToggleButton,{value:"url","aria-label":"url"},"URL"),C.map((function(e){var t,r,n=e.internetAccountId,a=e.toggleContents,o=e.name;return s.default.createElement(k,{key:n,value:n,"aria-label":o,title:o},(r=5,"string"==typeof(t=a||o)&&t.length>r?"".concat(t.substring(0,r),""):t))})),M.length?s.default.createElement(d.ToggleButton,{onClick:function(e){return L(e.target)},selected:!1},"More",s.default.createElement(m.default,null)):null),s.default.createElement(f.Menu,{open:Boolean(_),anchorEl:_,onClose:function(){return L(null)},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},null==M?void 0:M.map((function(e,t){return s.default.createElement(f.MenuItem,{key:e.internetAccountId,value:e.internetAccountId,onClick:function(){var r=C[C.length-1];S([].concat((0,o.default)(C.slice(0,C.length-1)),[e])),R([r].concat((0,o.default)(M.slice(0,t)),(0,o.default)(M.slice(t+1)))),w(e.internetAccountId),L(null)}},e.name)}))))),D,s.default.createElement(f.FormHelperText,null,n))}));t.default=E},1810:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(33),i=r(45),u=r(142);function c(e){return"blobId"in e}var l=(0,o.makeStyles)((function(e){return{filename:{marginLeft:e.spacing(1)}}}));var s=function(e){var t=l(),r=e.location,n=e.setLocation,s=r&&(c(r)&&r.name||function(e){return"localPath"in e}(r)&&r.localPath),f=r&&c(r)&&!(0,u.getBlob)(r.blobId);return a.default.createElement(o.Box,{display:"flex",flexDirection:"row",alignItems:"center"},a.default.createElement(o.Box,null,a.default.createElement(o.FormControl,{fullWidth:!0},a.default.createElement(o.Button,{variant:"outlined",component:"label"},"Choose File",a.default.createElement("input",{type:"file",hidden:!0,onChange:function(e){var t=e.target,r=t&&t.files&&t.files[0];r&&(i.isElectron?n({localPath:r.path,locationType:"LocalPathLocation"}):n((0,u.storeBlobLocation)({blob:r})))}})))),a.default.createElement(o.Box,null,a.default.createElement(o.Typography,{component:"span",className:t.filename,color:s?"initial":"textSecondary"},s||"No file chosen"),f?a.default.createElement(o.Typography,{color:"error"},"(need to reload)"):null))};t.default=s},1811:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(33),i=r(34),u=r(207);var c=(0,i.observer)((function(e){var t=e.location,r=e.setLocation,n=e.label;return a.default.createElement(a.default.Fragment,null,a.default.createElement(o.TextField,{fullWidth:!0,variant:"outlined",inputProps:{"data-testid":"urlInput"},defaultValue:t&&(0,u.isUriLocation)(t)?t.uri:"",label:n||"Enter URL",onChange:function(e){r({uri:e.target.value.trim(),locationType:"UriLocation"})}}))}));t.default=c},1812:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(13)),i=n(r(41)),u=n(r(0)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(599);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){var t=e.width,r=e.height,n=e.highResolutionScaling,a=e.style,o=e.imageData,u=e.blockKey,s=e.showSoftClip,f=(0,c.useRef)(null);(0,c.useEffect)((function(){if(o){var e=f.current;if(e){var t=e.getContext("2d");if(t)if(o.commands)o.commands.forEach((function(e){"strokeStyle"===e.type?t.strokeStyle=e.style:"fillStyle"===e.type?t.fillStyle=e.style:"font"===e.type?t.font=e.style:t[e.type].apply(t,(0,i.default)(e.args))}));else if(o instanceof l.ImageBitmapType)t.drawImage(o,0,0);else if(o.dataURL){var r=new Image;r.onload=function(){return t.drawImage(r,0,0)},r.src=o.dataURL}}}}),[o]);var p=u?"_"+u:"",h="prerendered_canvas".concat(s?"_softclipped":"").concat(p);return c.default.createElement("canvas",{"data-testid":h,ref:f,width:t*n,height:r*n,style:d({width:t,height:r},a)})}p.propTypes={height:u.default.number.isRequired,width:u.default.number.isRequired,highResolutionScaling:u.default.number,style:u.default.objectOf(u.default.any),imageData:u.default.any},p.defaultProps={imageData:void 0,highResolutionScaling:1,style:{}};var h=p;t.default=h},1813:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),u=r(23),c=r(34),l=r(46);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var f=(0,u.makeStyles)({hoverLabel:{border:"1px solid black",position:"absolute",background:"#fffa",pointerEvents:"none",zIndex:1e4}}),d=(0,c.observer)((function(e){var t=e.offsetX,r=e.offsetY,n=e.configuration,a=e.feature,u=e.timeout,c=void 0===u?300:u,s=f(),d=(0,i.useState)(!1),p=(0,o.default)(d,2),h=p[0],m=p[1];if((0,i.useEffect)((function(){var e=setTimeout((function(){return m(!0)}),c);return function(){return clearTimeout(e)}})),a&&h){var y=(0,l.readConfObject)(n,"mouseover",{feature:a});return i.default.createElement("div",{className:s.hoverLabel,style:{left:t,top:r}},y)}return null}));t.default=d},1814:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21)),i=n(r(85)),u=n(r(120)),c=n(r(191)),l=n(r(149)),s=n(r(148)),f=n(r(0)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),p=n(r(1026));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m=function(e){var t=e.onFactoryReset,r=e.resetButtonText,n=(0,d.useState)(!1),a=(0,o.default)(n,2),u=a[0],c=a[1];return d.default.createElement(d.default.Fragment,null,d.default.createElement(i.default,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:function(){return c(!0)}},r),d.default.createElement(p.default,{onClose:function(){return c(!1)},open:u,onFactoryReset:t}))};m.propTypes={onFactoryReset:f.default.func.isRequired,resetButtonText:f.default.string.isRequired};var y=function(e){var t=e.componentStack,r=e.error,n=e.onFactoryReset,a=e.resetButtonText;return d.default.createElement(u.default,{open:!0},d.default.createElement(s.default,{style:{backgroundColor:"#e88"}},"Fatal error"),d.default.createElement(l.default,null,d.default.createElement("pre",null,r.toString(),t)),d.default.createElement(c.default,null,d.default.createElement(i.default,{color:"secondary",variant:"contained",onClick:function(){return window.location.reload()}},"Refresh"),d.default.createElement(m,{onFactoryReset:n,resetButtonText:a})))};y.propTypes={componentStack:f.default.string,error:f.default.shape({}),onFactoryReset:f.default.func.isRequired,resetButtonText:f.default.string},y.defaultProps={error:{message:"No error message provided"},componentStack:"",resetButtonText:"Factory Reset"};var g=y;t.default=g},1815:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"assemblyConfigSchemaFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=n(r(1816)),o=n(r(1818))},1816:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,f.default)(e,t);return c.types.model({assemblies:c.types.array(r)}).views((function(e){return{get:function(t){return e.assemblies.find((function(e){return e.hasName(t)}))},get assemblyNamesList(){return this.assemblyList.map((function(e){return e.name}))},get assemblyList(){var t=(0,c.getParent)(e),r=t.jbrowse.assemblies,n=t.session,a=(n=void 0===n?{}:n).sessionAssemblies,o=void 0===a?[]:a;return[].concat((0,i.default)(r),(0,i.default)(o))},get rpcManager(){return(0,c.getParent)(e).rpcManager},get pluginManager(){return(0,c.getParent)(e).pluginManager},get allPossibleRefNames(){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e.assemblies);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!a.allRefNames)return;r=r.concat(a.allRefNames)}}catch(e){n.e(e)}finally{n.f()}return r}}})).views((function(e){return{waitForAssembly:function(t){return(0,o.default)(a.default.mark((function r(){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}throw new Error("no assembly name supplied to waitForAssembly");case 2:if(!(n=e.get(t))){r.next=9;break}return r.next=6,(0,l.when)((function(){return Boolean(n.regions&&n.refNameAliases)||!!n.error}));case 6:if(!n.error){r.next=8;break}throw n.error;case 8:return r.abrupt("return",n);case 9:return r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})))()},getRefNameMapForAdapter:function(t,r,n){return(0,o.default)(a.default.mark((function o(){var i;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.when)((function(){return Boolean(e.get(r))}),{signal:n.signal,name:"when assembly ready"});case 2:if(!(i=e.get(r))){a.next=5;break}return a.abrupt("return",i.getRefNameMapForAdapter(t,n));case 5:return a.abrupt("return",void 0);case 6:case"end":return a.stop()}}),o)})))()},getReverseRefNameMapForAdapter:function(t,r,n){return(0,o.default)(a.default.mark((function o(){var i;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.when)((function(){return Boolean(e.get(r))}),{signal:n.signal,name:"when assembly ready"});case 2:if(!(i=e.get(r))){a.next=5;break}return a.abrupt("return",i.getReverseRefNameMapForAdapter(t,n));case 5:return a.abrupt("return",void 0);case 6:case"end":return a.stop()}}),o)})))()},isValidRefName:function(t,r){if(r){var n=e.get(r);if(n)return n.isValidRefName(t);throw new Error("isValidRefName for ".concat(r," failed, assembly does not exist"))}if(!e.allPossibleRefNames)throw new Error("isValidRefName not available, assemblyManager has not yet finished loading. If you are looking for a refname in a specific assembly, pass assembly argument");return e.allPossibleRefNames.includes(t)}}})).actions((function(e){return{removeAssembly:function(t){e.assemblies.remove(t)},afterAttach:function(){var t=this;(0,c.addDisposer)(e,(0,u.reaction)((function(){return e.assemblyList}),(function(r){e.assemblies.forEach((function(e){e.configuration||t.removeAssembly(e)})),r.forEach((function(r){-1===e.assemblies.findIndex((function(e){return e.name===(0,s.readConfObject)(r,"name")}))&&t.addAssembly(r)}))}),{fireImmediately:!0,name:"assemblyManagerAfterAttach"}))},addAssembly:function(t){e.assemblies.push({configuration:t})},replaceAssembly:function(t,r){e.assemblies[t]=(0,c.cast)({configuration:r})}}}))};var a=n(r(22)),o=n(r(24)),i=n(r(41)),u=r(51),c=r(18),l=r(45),s=r(46),f=n(r(1817));function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},1817:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new d.default({cache:new m.default({maxSize:1e3}),fill:function(e,t,r){return(0,l.default)(i.default.mark((function n(){var a,o,u;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.adapterConf,o=e.self,u=e.options,n.abrupt("return",w(o,a,v(v({},u),{},{statusCallback:r}),t));case 2:case"end":return n.stop()}}),n)})))()}});return f.types.model({configuration:f.types.safeReference(e)}).volatile((function(){return{error:void 0,regions:void 0,refNameAliases:void 0,cytobands:void 0}})).views((function(e){return{get initialized(){return!!e.refNameAliases},get name(){return(0,p.getConf)(e,"name")},get aliases(){return(0,p.getConf)(e,"aliases")},hasName:function(e){return this.allAliases.includes(e)},get allAliases(){return[this.name].concat((0,u.default)(this.aliases))},get refNames(){var t;return null===(t=e.regions)||void 0===t?void 0:t.map((function(e){return e.refName}))},get allRefNames(){return e.refNameAliases?Object.keys(e.refNameAliases):void 0},get rpcManager(){return(0,f.getParent)(e,2).rpcManager},get refNameColors(){var t=(0,p.getConf)(e,"refNameColors");return 0===t.length?b:t}}})).views((function(e){return{getCanonicalRefName:function(t){if(!e.refNameAliases)throw new Error("aliases not loaded, we expect them to be loaded before getCanonicalRefName can be called");return e.refNameAliases[t]},getRefNameColor:function(t){var r,n=null===(r=e.refNames)||void 0===r?void 0:r.findIndex((function(e){return e===t}));if(void 0!==n&&-1!==n)return e.refNameColors[n%e.refNameColors.length]},isValidRefName:function(t){if(!e.refNameAliases)throw new Error("isValidRefName cannot be called yet, the assembly has not finished loading");return!!this.getCanonicalRefName(t)}}})).actions((function(e){return{setLoading:function(){},setLoaded:function(e){var t=e.adapterRegionsWithAssembly,r=e.refNameAliases,n=e.cytobands;this.setRegions(t),this.setRefNameAliases(r),this.setCytobands(n)},setError:function(t){console.error(t),e.error=t},setRegions:function(t){e.regions=t},setRefNameAliases:function(t){e.refNameAliases=t},setCytobands:function(t){e.cytobands=t},afterAttach:function(){(0,h.makeAbortableReaction)(e,function(e){return function(t){if(t.configuration){var r=t.configuration,n=r.sequence,a=r.refNameAliases,o=r.cytobands,i=n.adapter,u=null==a?void 0:a.adapter,c=null==o?void 0:o.adapter;return{sequenceAdapterConfig:i,assemblyName:t.name,refNameAliasesAdapterConfig:u,cytobandAdapterConfig:c,pluginManager:e}}}}(t),E,{name:"".concat(e.name," assembly loading"),fireImmediately:!0},this.setLoading,this.setLoaded,this.setError)}}})).views((function(e){return{getAdapterMapEntry:function(t,n){n.signal;var a=n.statusCallback,i=(0,o.default)(n,y);if(!n.sessionId)throw new Error("sessionId is required");var u=function(e){return(0,s.default)(e)}(t);return r.get(u,{adapterConf:t,self:e,options:i},void 0,a)},getRefNameMapForAdapter:function(e,t){var r=this;return(0,l.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.sessionId){n.next=2;break}throw new Error("sessionId is required");case 2:return n.next=4,r.getAdapterMapEntry(e,t);case 4:return a=n.sent,n.abrupt("return",a.forwardMap);case 6:case"end":return n.stop()}}),n)})))()},getReverseRefNameMapForAdapter:function(e,t){var r=this;return(0,l.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getAdapterMapEntry(e,t);case 2:return a=n.sent,n.abrupt("return",a.reverseMap);case 4:case"end":return n.stop()}}),n)})))()}}}))};var a=n(r(21)),o=n(r(66)),i=n(r(22)),u=n(r(41)),c=n(r(13)),l=n(r(24)),s=n(r(779)),f=r(18),d=n(r(110)),p=r(46),h=r(45),m=n(r(601)),y=["signal","statusCallback"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=["rgb(153, 102, 0)","rgb(102, 102, 0)","rgb(153, 153, 30)","rgb(204, 0, 0)","rgb(255, 0, 0)","rgb(255, 0, 204)","rgb(165, 132, 132)","rgb(204, 122, 0)","rgb(178, 142, 0)","rgb(153, 153, 0)","rgb(122, 153, 0)","rgb(0, 165, 0)","rgb(53, 128, 0)","rgb(0, 0, 204)","rgb(96, 145, 242)","rgb(107, 142, 178)","rgb(0, 165, 165)","rgb(122, 153, 153)","rgb(153, 0, 204)","rgb(204, 51, 255)","rgb(173, 130, 216)","rgb(102, 102, 102)","rgb(145, 145, 145)","rgb(142, 142, 142)","rgb(142, 142, 107)","rgb(96, 163, 48)"];function w(e,t,r,n){return O.apply(this,arguments)}function O(){return(O=(0,l.default)(i.default.mark((function e(t,r,n,o){var u,c,l,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.sessionId,e.next=3,(0,h.when)((function(){return Boolean(t.regions&&t.refNameAliases)}),{signal:o,name:"when assembly ready"});case 3:return e.next=5,t.rpcManager.call(u,"CoreGetRefNames",v({adapterConfig:r,signal:o},n),{timeout:1e6});case 5:if(c=e.sent,t.refNameAliases){e.next=9;break}throw new Error("error loading assembly ".concat(t.name,"'s refNameAliases"));case 9:return l=Object.fromEntries(c.map((function(e){return k(e),[t.getCanonicalRefName(e),e]}))),s=Object.fromEntries(Object.entries(l).map((function(e){var t=(0,a.default)(e,2),r=t[0];return[t[1],r]}))),e.abrupt("return",{forwardMap:l,reverseMap:s});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){if(!e.match(/[0-9A-Za-z!#$%&+./:;?@^_|~-][0-9A-Za-z!#$%&*+./:;=?@^_|~-]*/))throw new Error('Encountered invalid refName: "'.concat(e,'"'))}function E(e,t){return x.apply(this,arguments)}function x(){return(x=(0,l.default)(i.default.mark((function e(t,r){var n,a,o,u,c,l,s,f,d,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.sequenceAdapterConfig,a=t.assemblyName,o=t.refNameAliasesAdapterConfig,u=t.cytobandAdapterConfig,c=t.pluginManager,e.next=5,T(n,c,r);case 5:return l=e.sent,s=l.map((function(e){return k(e.refName),v(v({},e),{},{assemblyName:a})})),f={},e.next=10,j(o,c,r);case 10:return d=e.sent,e.next=13,S(u,c);case 13:return p=e.sent,d.forEach((function(e){var t=e.refName;e.aliases.forEach((function(e){k(e),f[e]=t}))})),s.forEach((function(e){f[e.refName]=e.refName})),e.abrupt("return",{adapterRegionsWithAssembly:s,refNameAliases:f,cytobands:p});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r){return C.apply(this,arguments)}function C(){return(C=(0,l.default)(i.default.mark((function e(t,r,n){var a,o,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.getAdapterType(t.type),e.next=3,null===(a=o.getAdapterClass)||void 0===a?void 0:a.call(o);case 3:return u=e.sent,c=new u(t,void 0,r),e.abrupt("return",c.getRefNameAliases({signal:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return P.apply(this,arguments)}function P(){return(P=(0,l.default)(i.default.mark((function e(t,r){var n,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getAdapterType(t.type),e.next=3,n.getAdapterClass();case 3:return a=e.sent,o=new a(t,void 0,r),e.abrupt("return",o.getData());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,r){return M.apply(this,arguments)}function M(){return(M=(0,l.default)(i.default.mark((function e(t,r,n){var a,o,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getAdapterType(t.type),e.next=3,a.getAdapterClass();case 3:return o=e.sent,u=new o(t,void 0,r),e.abrupt("return",u.getRegions({signal:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(46);t.default=function(e){return(0,n.ConfigurationSchema)("BaseAssembly",{aliases:{type:"stringArray",defaultValue:[],description:"Other possible names for the assembly"},sequence:e.getTrackType("ReferenceSequenceTrack").configSchema,refNameColors:{type:"stringArray",defaultValue:[],description:"Define custom colors for each reference sequence. Will cycle through this list if there are not enough colors for every sequence."},refNameAliases:(0,n.ConfigurationSchema)("RefNameAliases",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:function(e){return e.adapter?e:{adapter:{type:"RefNameAliasAdapter"}}}}),cytobands:(0,n.ConfigurationSchema)("Cytoband",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:function(e){return e.adapter?e:{adapter:{type:"CytobandAdapter"}}}}),displayName:{type:"string",defaultValue:"",description:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)" while the assembly name may just be "hg38"'}},{explicitIdentifier:"name"})}},1819:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(41)),o=n(r(21)),i=n(r(15)),u=n(r(16)),c=n(r(13)),l=r(18),s=n(r(332)),f=n(r(179)),d=n(r(252)),p=n(r(333)),h=n(r(431)),m=n(r(208)),y=n(r(602)),g=n(r(432)),v=n(r(1029)),b=n(r(1030)),w=r(46),O=n(r(160)),k=n(r(1031)),E=n(r(1847)),x=n(r(1018));function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){function e(){(0,i.default)(this,e),(0,c.default)(this,"phaseCallbacks",new Map),(0,c.default)(this,"phaseOrder",[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.phaseOrder=r}return(0,u.default)(e,[{key:"add",value:function(e,t){if(!this.phaseOrder.includes(e))throw new Error("unknown phase ".concat(e));var r=this.phaseCallbacks.get(e);r||(r=[],this.phaseCallbacks.set(e,r)),r.push(t)}},{key:"run",value:function(){var e=this;this.phaseOrder.forEach((function(t){var r=e.phaseCallbacks.get(t);r&&r.forEach((function(e){return e()}))}))}}]),e}(),P=function(){function e(t,r){(0,i.default)(this,e),(0,c.default)(this,"registeredTypes",{})}return(0,u.default)(e,[{key:"add",value:function(e,t){this.registeredTypes[e]=t}},{key:"has",value:function(e){return e in this.registeredTypes}},{key:"get",value:function(e){if(!this.has(e))throw new Error("".concat(this.typeName," '").concat(e,"' not found, perhaps its plugin is not loaded or its plugin has not added it."));return this.registeredTypes[e]}},{key:"all",value:function(){return Object.values(this.registeredTypes)}}]),e}(),T=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,i.default)(this,e),(0,c.default)(this,"plugins",[]),(0,c.default)(this,"jexl",(0,x.default)()),(0,c.default)(this,"pluginMetadata",{}),(0,c.default)(this,"runtimePluginDefinitions",[]),(0,c.default)(this,"elementCreationSchedule",new S("renderer","adapter","text search adapter","display","track","connection","view","widget","rpc method","internet account")),(0,c.default)(this,"rendererTypes",new P("RendererType",s.default)),(0,c.default)(this,"adapterTypes",new P("AdapterType",f.default)),(0,c.default)(this,"textSearchAdapterTypes",new P("TextSearchAdapterType",b.default)),(0,c.default)(this,"trackTypes",new P("TrackType",d.default)),(0,c.default)(this,"displayTypes",new P("DisplayType",p.default)),(0,c.default)(this,"connectionTypes",new P("ConnectionType",y.default)),(0,c.default)(this,"viewTypes",new P("ViewType",h.default)),(0,c.default)(this,"widgetTypes",new P("WidgetType",m.default)),(0,c.default)(this,"rpcMethods",new P("RpcMethodType",g.default)),(0,c.default)(this,"internetAccountTypes",new P("InternetAccountType",v.default)),(0,c.default)(this,"configured",!1),(0,c.default)(this,"rootModel",void 0),(0,c.default)(this,"extensionPoints",new Map),(0,c.default)(this,"jbrequireCache",new Map),(0,c.default)(this,"lib",k.default),(0,c.default)(this,"load",(function(e){return t.jbrequireCache.has(e)||t.jbrequireCache.set(e,e(t)),t.jbrequireCache.get(e)})),(0,c.default)(this,"jbrequire",(function(e){if("string"==typeof e){var r=t.lib[e];if(!r)throw new TypeError("No jbrequire re-export defined for package '".concat(e,"'. If this package must be shared between plugins, add it to ReExports.js. If it does not need to be shared, just import it normally."));return r}if("function"==typeof e)return t.load(e);if(e.default)return t.jbrequire(e.default);throw new TypeError("lib passed to jbrequire must be either a string or a function")})),this.addPlugin({plugin:new E.default,metadata:{isCore:!0}}),r.forEach((function(e){t.addPlugin(e)}))}return(0,u.default)(e,[{key:"pluginConfigurationSchemas",value:function(){var e={};return this.plugins.forEach((function(t){t.configurationSchema&&(e[t.name]=t.configurationSchema)})),e}},{key:"addPlugin",value:function(e){if(this.configured)throw new Error("JBrowse already configured, cannot add plugins");var t=e instanceof O.default?[e,{}]:[e.plugin,e.metadata],r=(0,o.default)(t,2),n=r[0],a=r[1],i=void 0===a?{}:a;if(this.plugins.includes(n))throw new Error("plugin already installed");return this.pluginMetadata[n.name]=i,"definition"in e&&this.runtimePluginDefinitions.push(e.definition),n.install(this),this.plugins.push(n),this}},{key:"getPlugin",value:function(e){return this.plugins.find((function(t){return t.name===e}))}},{key:"hasPlugin",value:function(e){return void 0!==this.getPlugin(e)}},{key:"createPluggableElements",value:function(){return this.elementCreationSchedule&&(this.elementCreationSchedule.run(),delete this.elementCreationSchedule),this}},{key:"setRootModel",value:function(e){this.rootModel=e}},{key:"configure",value:function(){var e=this;if(this.configured)throw new Error("already configured");return this.plugins.forEach((function(t){return t.configure(e)})),this.configured=!0,this}},{key:"getElementTypeRecord",value:function(e){switch(e){case"adapter":return this.adapterTypes;case"text search adapter":return this.textSearchAdapterTypes;case"connection":return this.connectionTypes;case"widget":return this.widgetTypes;case"renderer":return this.rendererTypes;case"display":return this.displayTypes;case"track":return this.trackTypes;case"view":return this.viewTypes;case"rpc method":return this.rpcMethods;case"internet account":return this.internetAccountTypes;default:throw new Error("invalid element type '".concat(e,"'"))}}},{key:"addElementType",value:function(e,t){var r=this;if("function"!=typeof t)throw new Error("must provide a callback function that returns the new type object");var n=this.getElementTypeRecord(e);return this.elementCreationSchedule&&this.elementCreationSchedule.add(e,(function(){var a=t(r);if(!a.name)throw new Error("cannot add a ".concat(e," with no name"));if(n.has(a.name))throw new Error("".concat(e," ").concat(a.name," already registered, cannot register it again"));a=r.evaluateExtensionPoint("Core-extendPluggableElement",a),n.add(a.name,a)})),this}},{key:"getElementType",value:function(e,t){return this.getElementTypeRecord(e).get(t)}},{key:"getElementTypesInGroup",value:function(e){return this.getElementTypeRecord(e).all()}},{key:"pluggableMstType",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.types.maybe(l.types.null),n=this.getElementTypeRecord(e).all().map((function(e){return e[t]})).filter((function(e){return(0,l.isType)(e)&&(0,l.isModelType)(e)}));return 0===n.length?(console.warn("No JBrowse pluggable types found matching ('".concat(e,"','").concat(t,"')")),r):l.types.union.apply(l.types,(0,a.default)(n))}},{key:"pluggableConfigSchemaType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"configSchema",r=this.getElementTypeRecord(e).all().map((function(e){return e[t]})).filter((function(e){return(0,w.isBareConfigurationSchemaType)(e)}));return 0===r.length&&r.push((0,w.ConfigurationSchema)("Null",{})),l.types.union.apply(l.types,(0,a.default)(r))}},{key:"getRendererType",value:function(e){return this.rendererTypes.get(e)}},{key:"getRendererTypes",value:function(){return this.rendererTypes.all()}},{key:"getAdapterType",value:function(e){return this.adapterTypes.get(e)}},{key:"getTextSearchAdapterType",value:function(e){return this.textSearchAdapterTypes.get(e)}},{key:"getTrackType",value:function(e){return this.trackTypes.get(e)}},{key:"getDisplayType",value:function(e){return this.displayTypes.get(e)}},{key:"getViewType",value:function(e){return this.viewTypes.get(e)}},{key:"getWidgetType",value:function(e){return this.widgetTypes.get(e)}},{key:"getConnectionType",value:function(e){return this.connectionTypes.get(e)}},{key:"getRpcMethodType",value:function(e){return this.rpcMethods.get(e)}},{key:"getInternetAccountType",value:function(e){return this.internetAccountTypes.get(e)}},{key:"addRendererType",value:function(e){return this.addElementType("renderer",e)}},{key:"addAdapterType",value:function(e){return this.addElementType("adapter",e)}},{key:"addTextSearchAdapterType",value:function(e){return this.addElementType("text search adapter",e)}},{key:"addTrackType",value:function(e){var t=this;return this.addElementType("track",(function(){var r=e(t);return t.getElementTypesInGroup("display").forEach((function(e){e.trackType!==r.name||r.displayTypes.includes(e)||r.addDisplayType(e)})),r}))}},{key:"addDisplayType",value:function(e){return this.addElementType("display",e)}},{key:"addViewType",value:function(e){var t=this;return this.addElementType("view",(function(){var r=e(t);return t.getElementTypesInGroup("display").forEach((function(e){e.viewType!==r.name||r.displayTypes.includes(e)||r.addDisplayType(e)})),r}))}},{key:"addWidgetType",value:function(e){return this.addElementType("widget",e)}},{key:"addConnectionType",value:function(e){return this.addElementType("connection",e)}},{key:"addRpcMethod",value:function(e){return this.addElementType("rpc method",e)}},{key:"addInternetAccountType",value:function(e){return this.addElementType("internet account",e)}},{key:"addToExtensionPoint",value:function(e,t){var r=this.extensionPoints.get(e);r||(r=[],this.extensionPoints.set(e,r)),r.push(t)}},{key:"evaluateExtensionPoint",value:function(e,t){var r=this.extensionPoints.get(e),n=t;if(r){var a,o=j(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;try{n=i(n)}catch(e){console.error(e)}}}catch(e){o.e(e)}finally{o.f()}}return n}}]),e}();t.default=T},1820:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=Ee(r(6)),u=Ee(r(51)),c=Ee(r(18)),l=Ee(r(34)),s=n(r(0)),f=Ee(r(23)),d=Ee(r(33)),p=Ee(r(40)),h=n(r(150)),m=Ee(r(257)),y=Ee(r(229)),g=n(r(269)),v=n(r(85)),b=n(r(291)),w=n(r(292)),O=n(r(293)),k=n(r(230)),E=n(r(294)),x=n(r(120)),j=n(r(167)),C=n(r(147)),S=n(r(231)),P=n(r(168)),T=n(r(295)),M=n(r(296)),R=n(r(77)),A=n(r(297)),N=n(r(232)),_=n(r(233)),L=n(r(298)),F=n(r(299)),I=n(r(122)),D=n(r(300)),B=n(r(271)),W=n(r(169)),V=n(r(301)),z=n(r(234)),q=n(r(111)),H=n(r(151)),U=n(r(54)),G=n(r(302)),J=n(r(303)),X=Ee(r(209)),Y=Ee(r(433)),$=n(r(1823)),K=Ee(r(1826)),Z=n(r(431)),Q=n(r(179)),ee=n(r(333)),te=n(r(252)),re=n(r(208)),ne=Ee(r(210)),ae=Ee(r(334)),oe=n(r(435)),ie=Ee(r(1036)),ue=Ee(r(254)),ce=Ee(r(332)),le=Ee(r(46)),se=n(r(160)),fe=Ee(r(158)),de=Ee(r(45)),pe=Ee(r(605)),he=Ee(r(1841)),me=Ee(r(142)),ye=Ee(r(180)),ge=Ee(r(206)),ve=Ee(r(253)),be=Ee(r(1845)),we=Ee(r(106)),Oe=n(r(1846));function ke(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(ke=function(e){return e?r:t})(e)}function Ee(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=ke(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var xe={mobx:u,"mobx-state-tree":c,react:o.default,"react-dom":i,"mobx-react":l,"prop-types":s.default,"@material-ui/core":d,"@material-ui/core/SvgIcon":h.default,"@material-ui/core/utils":p,"@material-ui/lab":m,"@mui/x-data-grid":y,"@material-ui/data-grid":y,"@material-ui/core/colors":be,"@material-ui/core/styles":f,"@material-ui/core/Box":g.default,"@material-ui/core/Button":v.default,"@material-ui/core/ButtonGroup":b.default,"@material-ui/core/Card":w.default,"@material-ui/core/CardContent":O.default,"@material-ui/core/Container":E.default,"@material-ui/core/Checkbox":k.default,"@material-ui/core/Dialog":x.default,"@material-ui/core/FormGroup":P.default,"@material-ui/core/FormLabel":j.default,"@material-ui/core/FormControl":C.default,"@material-ui/core/FormControlLabel":S.default,"@material-ui/core/Grid":T.default,"@material-ui/core/Icon":M.default,"@material-ui/core/IconButton":R.default,"@material-ui/core/InputAdornment":A.default,"@material-ui/core/LinearProgress":N.default,"@material-ui/core/ListItemIcon":_.default,"@material-ui/core/ListItemText":L.default,"@material-ui/core/Menu":F.default,"@material-ui/core/MenuItem":I.default,"@material-ui/core/RadioGroup":B.default,"@material-ui/core/Radio":D.default,"@material-ui/core/Select":W.default,"@material-ui/core/Snackbar":V.default,"@material-ui/core/SnackbarContent":z.default,"@material-ui/core/TextField":q.default,"@material-ui/core/Tooltip":H.default,"@material-ui/core/Typography":U.default,"@material-ui/lab/ToggleButton":G.default,"@material-ui/lab/ToggleButtonGroup":J.default,"@jbrowse/core/Plugin":se.default,"@jbrowse/core/pluggableElementTypes":K,"@jbrowse/core/pluggableElementTypes/ViewType":Z.default,"@jbrowse/core/pluggableElementTypes/AdapterType":Q.default,"@jbrowse/core/pluggableElementTypes/DisplayType":ee.default,"@jbrowse/core/pluggableElementTypes/TrackType":te.default,"@jbrowse/core/pluggableElementTypes/WidgetType":re.default,"@jbrowse/core/pluggableElementTypes/models":ne,"@jbrowse/core/pluggableElementTypes/renderers/ServerSideRendererType":ae,"@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType":oe.default,"@jbrowse/core/pluggableElementTypes/renderers/BoxRendererType":ie,"@jbrowse/core/pluggableElementTypes/renderers/FeatureRendererType":ue,"@jbrowse/core/pluggableElementTypes/renderers/RendererType":ce,"@jbrowse/core/configuration":le,"@jbrowse/core/util/types/mst":we,"@jbrowse/core/ui":fe,"@jbrowse/core/util":de,"@jbrowse/core/util/color":pe,"@jbrowse/core/util/layouts":he,"@jbrowse/core/util/tracks":me,"@jbrowse/core/util/Base1DViewModel":$.default,"@jbrowse/core/util/io":ye,"@jbrowse/core/util/mst-reflection":ge,"@jbrowse/core/util/rxjs":ve,"@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail":Y,"@jbrowse/core/data_adapters/BaseAdapter":X};Oe.default.forEach((function(e){if(!(e in xe))throw new Error("ReExports/modules is missing ".concat(e))}));var je=xe;t.default=je},1821:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.SequencePanel=void 0,t.default=function(e){var t,r=e.model,n=e.feature,a=w(),c=n,l=null===(t=c.subfeatures)||void 0===t?void 0:t.find((function(e){return"CDS"===e.type})),y=(0,s.useRef)(null),g=(0,d.useInView)(),v=g.ref,b=g.inView,O=(0,s.useState)(),k=(0,u.default)(O,2),E=k[0],j=k[1],C=(0,s.useState)(),S=(0,u.default)(C,2),P=S[0],T=S[1],M=(0,s.useState)(l?"cds":"cdna"),R=(0,u.default)(M,2),A=R[0],N=R[1],_=(0,s.useState)(!1),L=(0,u.default)(_,2),F=L[0],I=L[1],D=(0,s.useState)(!1),B=(0,u.default)(D,2),W=B[0],V=B[1];(0,s.useEffect)((function(){var e,t=!1;if(!r||!b)return function(){};var a=(0,h.getSession)(r),c=a.assemblyManager,l=a.rpcManager,s=(null===(e=r.view)||void 0===e?void 0:e.assemblyNames)||[],f=(0,u.default)(s,1)[0];function d(e,t,r){return p.apply(this,arguments)}function p(){return(p=(0,i.default)(o.default.mark((function e(t,r,n){var a,i,s,d,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.waitForAssembly(f);case 2:if(a=e.sent){e.next=5;break}throw new Error("assembly not found");case 5:return"getSequence",e.next=8,l.call("getSequence","CoreGetFeatures",{adapterConfig:(0,m.getConf)(a,["sequence","adapter"]),sessionId:"getSequence",region:{start:t,end:r,refName:a.getCanonicalRefName(n)}});case 8:if(i=e.sent,s=i,d=(0,u.default)(s,1),p=d[0]){e.next=12;break}throw new Error("sequence not found for feature with refName:".concat(n));case 12:return e.abrupt("return",p.get("seq"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.default)(o.default.mark((function e(){var r,a,i,u,c,l,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(r=n).start,i=r.end,u=r.refName,e.next=4,d(a,i,u);case 4:return c=e.sent,e.next=7,d(Math.max(0,a-500),a,u);case 7:return l=e.sent,e.next=10,d(i,i+500,u);case 10:s=e.sent,t||j({seq:c,upstream:l,downstream:s}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),T(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))(),function(){t=!0}}),[n,b,r]);var z=!E;return s.default.createElement("div",{ref:v},s.default.createElement(f.Select,{value:A,onChange:function(e){return N(e.target.value)}},l?s.default.createElement(f.MenuItem,{value:"cds"},"CDS"):null,l?s.default.createElement(f.MenuItem,{value:"protein"},"Protein"):null,s.default.createElement(f.MenuItem,{value:"gene"},"Gene w/ introns"),s.default.createElement(f.MenuItem,{value:"gene_collapsed_intron"},"Gene w/ 10bp of intron"),s.default.createElement(f.MenuItem,{value:"gene_updownstream"},"Gene w/ 500bp up+down stream"),s.default.createElement(f.MenuItem,{value:"gene_updownstream_collapsed_intron"},"Gene w/ 500bp up+down stream w/ 10bp intron"),s.default.createElement(f.MenuItem,{value:"cdna"},"cDNA")),s.default.createElement(f.Button,{className:a.button,type:"button",variant:"contained",onClick:function(){var e=y.current;e&&((0,p.default)(e.textContent||"",{format:"text/plain"}),I(!0),setTimeout((function(){return I(!1)}),1e3))}},F?"Copied to clipboard!":"Copy as plaintext"),s.default.createElement(f.Tooltip,{title:"Note that 'Copy as HTML' can retain the colors but cannot be pasted into some programs like notepad that only expect plain text"},s.default.createElement(f.Button,{className:a.button,type:"button",variant:"contained",onClick:function(){var e=y.current;e&&((0,p.default)(e.innerHTML,{format:"text/html"}),V(!0),setTimeout((function(){return V(!1)}),1e3))}},W?"Copied to clipboard!":"Copy as HTML")),s.default.createElement("div",{"data-testid":"feature_sequence"},P?s.default.createElement(f.Typography,{color:"error"},"".concat(P)):z?s.default.createElement("div",null,"Loading gene sequence..."):E?s.default.createElement(x,{ref:y,feature:c,mode:A,sequence:E}):s.default.createElement("div",null,"No sequence found")))};var o=n(r(22)),i=n(r(24)),u=n(r(21)),c=n(r(13)),l=n(r(41)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(33),d=r(1822),p=n(r(386)),h=r(45),m=r(46),y=r(1034);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=(0,f.makeStyles)((function(e){return{button:{margin:e.spacing(1)}}}));function O(e){var t=e.cds,r=e.sequence;return s.default.createElement("span",{style:{background:"rgb(220,220,180)"}},(0,y.stitch)(t,r))}function k(e){for(var t=e.cds,r=e.sequence,n=e.codonTable,a=(0,y.stitch)(t,r),o="",i=0;i<a.length;i+=3)o+=n[a.slice(i,i+3)]||"&";return s.default.createElement("span",{style:{background:"rgb(220,160,220)"}},o)}function E(e){var t=e.utr,r=e.cds,n=e.exons,a=e.sequence,o=e.upstream,i=e.downstream,u=e.includeIntrons,c=e.collapseIntron,f=r.length?[].concat((0,l.default)(r),(0,l.default)(t)).sort((function(e,t){return e.start-t.start})):n;return s.default.createElement(s.default.Fragment,null,o?s.default.createElement("span",{style:{background:"rgba(250,200,200)"}},o):null,f.filter((function(e){return e.start!==e.end})).map((function(e,t){var r,n=a.slice(e.end,null===(r=f[t+1])||void 0===r?void 0:r.start);return s.default.createElement(s.default.Fragment,{key:JSON.stringify(e)},s.default.createElement("span",{style:{background:"CDS"===e.type?"rgb(220,220,180)":"rgb(200,240,240)"}},a.slice(e.start,e.end)),u&&t<f.length-1?s.default.createElement("span",{style:{background:void 0}},c&&n.length>20?"".concat(n.slice(0,10),"...").concat(n.slice(-10)):n):null)})),i?s.default.createElement("span",{style:{background:"rgba(250,200,200)"}},i):null)}var x=s.default.forwardRef((function(e,t){var r=e.feature,n=e.mode,a=e.sequence,o=a.seq,i=a.upstream,u=void 0===i?"":i,c=a.downstream,l=void 0===c?"":c,f=r.subfeatures,d=(0,h.generateCodonTable)(h.defaultCodonTable);if(!f)return null;var p=f.sort((function(e,t){return e.start-t.start})).map((function(e){return b(b({},e),{},{start:e.start-r.start,end:e.end-r.start})})),m=(0,y.dedupe)(p.filter((function(e){return"CDS"===e.type}))),g=(0,y.dedupe)(p.filter((function(e){return e.type.match(/utr/i)}))),v=(0,y.dedupe)(p.filter((function(e){return"exon"===e.type})));if(!g.length&&m.length&&v.length&&(g=(0,y.calculateUTRs)(m,v)),-1===r.strand){var w=[(0,h.revcom)(o),(0,h.revcom)(l),(0,h.revcom)(u)];o=w[0],u=w[1],l=w[2],m=(0,y.revlist)(m,o.length),v=(0,y.revlist)(v,o.length),g=(0,y.revlist)(g,o.length)}return s.default.createElement("div",{ref:t,"data-testid":"sequence_panel"},s.default.createElement("div",{style:{fontFamily:"monospace",wordWrap:"break-word",maxWidth:600}},">".concat(r.name||r.id||"unknown","-").concat(n,"\n"),"cds"===n?s.default.createElement(O,{cds:m,sequence:o}):"cdna"===n?s.default.createElement(E,{exons:v,cds:m,utr:g,sequence:o}):"protein"===n?s.default.createElement(k,{cds:m,codonTable:d,sequence:o}):"gene"===n?s.default.createElement(E,{exons:v,cds:m,utr:g,sequence:o,includeIntrons:!0}):"gene_collapsed_intron"===n?s.default.createElement(E,{exons:v,cds:m,sequence:o,utr:g,includeIntrons:!0,collapseIntron:!0}):"gene_updownstream"===n?s.default.createElement(E,{exons:v,cds:m,sequence:o,utr:g,upstream:u,downstream:l,includeIntrons:!0}):"gene_updownstream_collapsed_intron"===n?s.default.createElement(E,{exons:v,cds:m,sequence:o,utr:g,upstream:u,downstream:l,includeIntrons:!0,collapseIntron:!0}):s.default.createElement("div",null,"Unknown type")))}));t.SequencePanel=x},1822:function(e,t,r){"use strict";r.r(t),r.d(t,"InView",(function(){return m})),r.d(t,"default",(function(){return m})),r.d(t,"defaultFallbackInView",(function(){return s})),r.d(t,"observe",(function(){return d})),r.d(t,"useInView",(function(){return y}));var n=r(1);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=new Map,u=new WeakMap,c=0,l=void 0;function s(e){l=e}function f(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(r=e.root)?(u.has(r)||(c+=1,u.set(r,c.toString())),u.get(r)):"0":e[t]);var r})).toString()}function d(e,t,r,n){if(void 0===r&&(r={}),void 0===n&&(n=l),void 0===window.IntersectionObserver&&void 0!==n){var a=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),function(){}}var o=function(e){var t=f(e),r=i.get(t);if(!r){var n,a=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var r,o=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=a.get(t.target))||r.forEach((function(e){e(o,t)}))}))}),e);n=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:a},i.set(t,r)}return r}(r),u=o.id,c=o.observer,s=o.elements,d=s.get(e)||[];return s.has(e)||s.set(e,d),d.push(t),c.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(s.delete(e),c.unobserve(e)),0===s.size&&(c.disconnect(),i.delete(u))}}var p=["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function h(e){return"function"!=typeof e.children}var m=function(e){var t,r;function i(t){var r;return(r=e.call(this,t)||this).node=null,r._unobserveCb=null,r.handleNode=function(e){r.node&&(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),h(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!t.initialInView,entry:void 0},r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,o(t,r);var u=i.prototype;return u.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},u.componentWillUnmount=function(){this.unobserve(),this.node=null},u.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin,a=e.trackVisibility,o=e.delay,i=e.fallbackInView;this._unobserveCb=d(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n,trackVisibility:a,delay:o},i)}},u.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},u.render=function(){if(!h(this.props)){var e=this.state,t=e.inView,r=e.entry;return this.props.children({inView:t,entry:r,ref:this.handleNode})}var o=this.props,i=o.children,u=o.as,c=o.tag,l=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(o,p);return n.createElement(u||c||"div",a({ref:this.handleNode},l),i)},i}(n.Component);function y(e){var t=void 0===e?{}:e,r=t.threshold,a=t.delay,o=t.trackVisibility,i=t.rootMargin,u=t.root,c=t.triggerOnce,l=t.skip,s=t.initialInView,f=t.fallbackInView,p=n.useRef(),h=n.useState({inView:!!s}),m=h[0],y=h[1],g=n.useCallback((function(e){void 0!==p.current&&(p.current(),p.current=void 0),l||e&&(p.current=d(e,(function(e,t){y({inView:e,entry:t}),t.isIntersecting&&c&&p.current&&(p.current(),p.current=void 0)}),{root:u,rootMargin:i,threshold:r,trackVisibility:o,delay:a},f))}),[Array.isArray(r)?r.toString():r,u,i,c,l,o,f,a]);Object(n.useEffect)((function(){p.current||!m.entry||c||l||y({inView:!!s})}));var v=[g,m.inView,m.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}m.displayName="InView",m.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},1823:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(13)),o=r(18),i=r(45),u=r(106),c=n(r(1824)),l=n(r(1825));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=o.types.model("Base1DView",{displayedRegions:o.types.array(u.Region),bpPerPx:0,offsetPx:0,interRegionPaddingWidth:o.types.optional(o.types.number,0),minimumBlockWidth:o.types.optional(o.types.number,0)}).volatile((function(){return{features:void 0,volatileWidth:0}})).actions((function(e){return{setDisplayedRegions:function(t){e.displayedRegions=(0,o.cast)(t)},setBpPerPx:function(t){e.bpPerPx=t},setVolatileWidth:function(t){e.volatileWidth=t}}})).views((function(e){return{get width(){return e.volatileWidth},get displayedRegionsTotalPx(){return this.totalBp/e.bpPerPx},get maxOffset(){return this.displayedRegionsTotalPx-10},get minOffset(){return 30-this.width},get totalBp(){return e.displayedRegions.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)},bpToPx:function(t){var r=this,n=t.refName,a=t.coord,o=t.regionNumber,i=0,u=e.interRegionPaddingWidth*e.bpPerPx,c=e.minimumBlockWidth*e.bpPerPx,l=e.displayedRegions.findIndex((function(t,l){var s=t.end-t.start;return n===t.refName&&a>=t.start&&a<=t.end&&(!o||o===l)?(i+=t.reversed?t.end-a:a-t.start,!0):(t.end-t.start>c&&i/e.bpPerPx>0&&i/e.bpPerPx<r.width?i+=s+u:i+=s,!1)}));if(e.displayedRegions[l])return Math.round(i/e.bpPerPx)},pxToBp:function(t){var r=0,n=(e.offsetPx+t)*e.bpPerPx,a=e.displayedRegions.length;if(n<0){var i=e.displayedRegions[0],u=n;return f(f({},(0,o.getSnapshot)(i)),{},{oob:!0,coord:i.reversed?Math.floor(i.end-u)+1:Math.floor(i.start+u)+1,offset:u,index:0})}for(var c=e.interRegionPaddingWidth*e.bpPerPx,l=e.minimumBlockWidth*e.bpPerPx,s=0;s<e.displayedRegions.length;s+=1){var d=e.displayedRegions[s],p=d.end-d.start,h=n-r;if(p+r>n&&r<=n)return f(f({},(0,o.getSnapshot)(d)),{},{oob:!1,offset:h,coord:d.reversed?Math.floor(d.end-h)+1:Math.floor(d.start+h)+1,index:s});d.end-d.start>l&&h/e.bpPerPx>0&&h/e.bpPerPx<this.width?r+=p+c:r+=p}if(n>=r){var m=e.displayedRegions[a-1],y=n-r+(m.end-m.start);return f(f({},(0,o.getSnapshot)(m)),{},{oob:!0,offset:y,coord:m.reversed?Math.floor(m.end-y)+1:Math.floor(m.start+y)+1,index:a-1})}return{coord:0,index:0,start:0,refName:"",oob:!0,assemblyName:"",offset:0,reversed:!1}}}})).views((function(e){return{get dynamicBlocks(){return(0,c.default)(e)},get staticBlocks(){return(0,l.default)(e)},get currBp(){return this.dynamicBlocks.map((function(e){return e.end-e.start})).reduce((function(e,t){return e+t}),0)}}})).actions((function(e){return{setFeatures:function(t){e.features=t},zoomToDisplayedRegions:function(e,t){if(void 0!==e&&void 0!==t){if(e.refName===t.refName&&e.index===t.index&&t.offset<e.offset||e.index>t.index){var r=[t,e];e=r[0],t=r[1]}var n={start:e.start,end:e.end,index:e.index,offset:e.offset},a={start:t.start,end:t.end,index:t.index,offset:t.offset};if(!n||!a)throw new Error("regions not found");this.moveTo(n,a)}},showAllRegions:function(){e.bpPerPx=e.totalBp/e.width,e.offsetPx=0},moveTo:function(t,r){var n=0;if(t.index===r.index)n+=r.offset-t.offset;else{var a=e.displayedRegions[t.index];if(n+=a.end-a.start-t.offset,r.index-t.index>=2)for(var o=t.index+1;o<r.index;o+=1)n+=e.displayedRegions[o].end-e.displayedRegions[o].start;n+=r.offset}this.zoomTo(n/(e.width-e.interRegionPaddingWidth*(r.index-t.index)));for(var i=0,u=0;u<e.displayedRegions.length;u+=1){var c=e.displayedRegions[u];if(t.index===u){i+=t.offset;break}i+=c.end-c.start}e.offsetPx=Math.round(i/e.bpPerPx)+e.interRegionPaddingWidth*t.index},zoomOut:function(){this.zoomTo(2*e.bpPerPx)},zoomIn:function(){this.zoomTo(e.bpPerPx/2)},zoomTo:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.width/2,n=t;if(n!==e.bpPerPx){var a=e.bpPerPx;e.bpPerPx=n,e.offsetPx=(0,i.clamp)(Math.round((e.offsetPx+r)*a/n-r),e.minOffset,e.maxOffset)}},scroll:function(t){var r=e.offsetPx,n=(0,i.clamp)(e.offsetPx+t,e.minOffset,e.maxOffset);return e.offsetPx=n,n-r}}}));t.default=d},1824:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.offsetPx,c=e.displayedRegions,l=e.bpPerPx,s=e.width,f=e.minimumBlockWidth,d=e.interRegionPaddingWidth;if(!s)throw new Error("view has no width, cannot calculate displayed blocks");var p=new u.BlockSet,h=0,m=n,y=m+s;return c.forEach((function(e,g){var v=e.assemblyName,b=e.refName,w=e.start,O=e.end,k=e.reversed,E=h+(O-w)/l,x=(O-w)/l;if(h<y&&E>m){var j,C,S,P,T,M=(0,o.intersection2)(m,y,h,E),R=(0,a.default)(M,2),A=R[0],N=R[1];k?(j=Math.max(w,O-(N-h)*l),S=(C=O-(A-h)*l)===O,P=j===w,T=h+(O-C)/l):(S=(j=(A-h)*l+w)===w,P=(C=Math.min(O,(N-h)*l+w))===O,T=h+(j-w)/l);var _={assemblyName:v,refName:b,start:j,end:C,reversed:k,offsetPx:T,parentRegion:e,regionNumber:g,widthPx:(C-j)/l,isLeftEndOfDisplayedRegion:S,isRightEndOfDisplayedRegion:P,key:""};_.key="".concat((0,i.assembleLocString)(_),"-").concat(g).concat(k?"-reversed":""),t&&0===p.length&&S&&p.push(new u.InterRegionPaddingBlock({key:"".concat(_.key,"-beforeFirstRegion"),widthPx:-n,offsetPx:_.offsetPx+n,variant:"boundary"})),r&&x<f?p.push(new u.ElidedBlock(_)):p.push(new u.ContentBlock(_)),t&&(x>=f&&_.isRightEndOfDisplayedRegion&&g<c.length-1&&(p.push(new u.InterRegionPaddingBlock({key:"".concat(_.key,"-rightpad"),widthPx:d,offsetPx:_.offsetPx+_.widthPx})),h+=d),g===c.length-1&&_.isRightEndOfDisplayedRegion&&(T=_.offsetPx+_.widthPx,p.push(new u.InterRegionPaddingBlock({key:"".concat(_.key,"-afterLastRegion"),widthPx:s-T+n,offsetPx:T,variant:"boundary"}))))}h+=(O-w)/l})),p};var a=n(r(21)),o=r(1023),i=r(45),u=r(1035)},1825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"undefined"!=typeof window&&window.innerWidth||e.width,u=e.offsetPx,c=e.displayedRegions,l=e.bpPerPx,s=e.minimumBlockWidth,f=e.interRegionPaddingWidth,d=u*l,p=(u+i)*l,h=i,m=Math.ceil(h*l),y=0,g=new a.BlockSet;return c.forEach((function(e,u){var h=e.assemblyName,v=e.refName,b=e.start,w=e.end,O=e.reversed,k=Math.ceil((w-b)/m),E=Math.floor((p-y)/m)+o;E>=k&&(E=k-1);var x=Math.floor((d-y)/m)-o;x<0&&(x=0);for(var j=(w-b)/l,C=x;C<=E;C+=1){var S=void 0,P=void 0,T=void 0,M=void 0;O?(S=Math.max(b,w-(C+1)*m),T=(P=w-C*m)===w,M=S===b):(T=(S=b+C*m)===b,M=(P=Math.min(w,b+(C+1)*m))===w);var R={assemblyName:h,refName:v,start:S,end:P,reversed:O,offsetPx:(y+C*m)/l,parentRegion:e,regionNumber:u,widthPx:(P-S)/l,isLeftEndOfDisplayedRegion:T,isRightEndOfDisplayedRegion:M,key:""};R.key="".concat((0,n.assembleLocString)(R),"-").concat(u).concat(O?"-reversed":""),t&&0===u&&0===C&&g.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-beforeFirstRegion"),widthPx:i,offsetPx:R.offsetPx-i,variant:"boundary"})),r&&j<s?g.push(new a.ElidedBlock(R)):g.push(new a.ContentBlock(R)),t&&(j>=s&&R.isRightEndOfDisplayedRegion&&u<c.length-1&&(y+=f*l,g.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-rightpad"),widthPx:f,offsetPx:R.offsetPx+R.widthPx}))),u===c.length-1&&R.isRightEndOfDisplayedRegion&&(y+=f*l,g.push(new a.InterRegionPaddingBlock({key:"".concat(R.key,"-afterLastRegion"),widthPx:i,offsetPx:R.offsetPx+R.widthPx,variant:"boundary"}))))}y+=w-b})),g};var n=r(45),a=r(1035)},1826:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={AdapterType:!0,ConnectionType:!0,RendererType:!0,WidgetType:!0,TrackType:!0,DisplayType:!0,ViewType:!0,RpcMethodType:!0,InternetAccountType:!0,TextSearchAdapterType:!0};Object.defineProperty(t,"AdapterType",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ConnectionType",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DisplayType",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"InternetAccountType",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"RendererType",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"RpcMethodType",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"TextSearchAdapterType",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"TrackType",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ViewType",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"WidgetType",{enumerable:!0,get:function(){return c.default}});var o=n(r(179)),i=n(r(602)),u=n(r(332)),c=n(r(208)),l=n(r(252)),s=n(r(333)),f=n(r(431)),d=n(r(432)),p=n(r(1029)),h=n(r(1030)),m=r(1827);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var y=r(210);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}))},1827:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoxRendererType",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"CircularChordRendererType",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ComparativeServerSideRendererType",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"FeatureRendererType",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"RendererType",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ServerSideRenderedContent",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ServerSideRendererType",{enumerable:!0,get:function(){return s.default}});var a=n(r(1036)),o=n(r(435)),i=n(r(1830)),u=n(r(254)),c=n(r(332)),l=n(r(1039)),s=n(r(334))},1828:function(e,t,r){"use strict";e.exports=r(1829)},1829:function(e,t,r){"use strict";var n=r(520),a=r(1);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=60106,u=60107,c=60108,l=60114,s=60109,f=60110,d=60112,p=60113,h=60120,m=60115,y=60116,g=60121,v=60117,b=60119,w=60129,O=60131;if("function"==typeof Symbol&&Symbol.for){var k=Symbol.for;i=k("react.portal"),u=k("react.fragment"),c=k("react.strict_mode"),l=k("react.profiler"),s=k("react.provider"),f=k("react.context"),d=k("react.forward_ref"),p=k("react.suspense"),h=k("react.suspense_list"),m=k("react.memo"),y=k("react.lazy"),g=k("react.block"),v=k("react.fundamental"),b=k("react.scope"),w=k("react.debug_trace_mode"),O=k("react.legacy_hidden")}function E(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case i:return"Portal";case l:return"Profiler";case c:return"StrictMode";case p:return"Suspense";case h:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case s:return(e._context.displayName||"Context")+".Provider";case d:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return E(e.type);case g:return E(e._render);case y:t=e._payload,e=e._init;try{return E(e(t))}catch(e){}}return null}var x=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j={};function C(e,t){for(var r=0|e._threadCount;r<=t;r++)e[r]=e._currentValue2,e._threadCount=r+1}for(var S=new Uint16Array(16),P=0;15>P;P++)S[P]=P+1;S[15]=0;var T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M=Object.prototype.hasOwnProperty,R={},A={};function N(e){return!!M.call(A,e)||!M.call(R,e)&&(T.test(e)?A[e]=!0:(R[e]=!0,!1))}function _(e,t,r,n,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){L[e]=new _(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];L[t]=new _(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){L[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){L[e]=new _(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){L[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){L[e]=new _(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){L[e]=new _(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){L[e]=new _(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){L[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)}));var F=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(F,I);L[t]=new _(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(F,I);L[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(F,I);L[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){L[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)})),L.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){L[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)}));var D=/["'&<>]/;function B(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=D.exec(e);if(t){var r,n="",a=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==r&&(n+=e.substring(a,r)),a=r+1,n+=t}e=a!==r?n+e.substring(a,r):n}return e}function W(e,t){var r,n=L.hasOwnProperty(e)?L[e]:null;return(r="style"!==e)&&(r=null!==n?0===n.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),r||function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,n,!1)?"":null!==n?(e=n.attributeName,3===(r=n.type)||4===r&&!0===t?e+'=""':(n.sanitizeURL&&(t=""+t),e+'="'+B(t)+'"')):N(e)?e+'="'+B(t)+'"':""}var V="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},z=null,q=null,H=null,U=!1,G=!1,J=null,X=0;function Y(){if(null===z)throw Error(o(321));return z}function $(){if(0<X)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function K(){return null===H?null===q?(U=!1,q=H=$()):(U=!0,H=q):null===H.next?(U=!1,H=H.next=$()):(U=!0,H=H.next),H}function Z(e,t,r,n){for(;G;)G=!1,X+=1,H=null,r=e(t,n);return Q(),r}function Q(){z=null,G=!1,q=null,X=0,H=J=null}function ee(e,t){return"function"==typeof t?t(e):t}function te(e,t,r){if(z=Y(),H=K(),U){var n=H.queue;if(t=n.dispatch,null!==J&&void 0!==(r=J.get(n))){J.delete(n),n=H.memoizedState;do{n=e(n,r.action),r=r.next}while(null!==r);return H.memoizedState=n,[n,t]}return[H.memoizedState,t]}return e=e===ee?"function"==typeof t?t():t:void 0!==r?r(t):t,H.memoizedState=e,e=(e=H.queue={last:null,dispatch:null}).dispatch=ne.bind(null,z,e),[H.memoizedState,e]}function re(e,t){if(z=Y(),t=void 0===t?null:t,null!==(H=K())){var r=H.memoizedState;if(null!==r&&null!==t){var n=r[1];e:if(null===n)n=!1;else{for(var a=0;a<n.length&&a<t.length;a++)if(!V(t[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),H.memoizedState=[e,t],e}function ne(e,t,r){if(!(25>X))throw Error(o(301));if(e===z)if(G=!0,e={action:r,next:null},null===J&&(J=new Map),void 0===(r=J.get(t)))J.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}}function ae(){}var oe=null,ie={readContext:function(e){var t=oe.threadID;return C(e,t),e[t]},useContext:function(e){Y();var t=oe.threadID;return C(e,t),e[t]},useMemo:re,useReducer:te,useRef:function(e){z=Y();var t=(H=K()).memoizedState;return null===t?(e={current:e},H.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return re((function(){return e}),t)},useImperativeHandle:ae,useEffect:ae,useDebugValue:ae,useDeferredValue:function(e){return Y(),e},useTransition:function(){return Y(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(oe.identifierPrefix||"")+"R:"+(oe.uniqueID++).toString(36)},useMutableSource:function(e,t){return Y(),t(e._source)}},ue="http://www.w3.org/1999/xhtml";function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var le={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},se=n({menuitem:!0},le),fe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(fe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var pe=/([A-Z])/g,he=/^ms-/,me=a.Children.toArray,ye=x.ReactCurrentDispatcher,ge={listing:!0,pre:!0,textarea:!0},ve=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},we={};var Oe=Object.prototype.hasOwnProperty,ke={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Ee(e,t){if(void 0===e)throw Error(o(152,E(t)||"Component"))}function xe(e,t,r){function i(a,i){var u=i.prototype&&i.prototype.isReactComponent,c=function(e,t,r,n){if(n&&("object"==typeof(n=e.contextType)&&null!==n))return C(n,r),n[r];if(e=e.contextTypes){for(var a in r={},e)r[a]=t[a];t=r}else t=j;return t}(i,t,r,u),l=[],s=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){s=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}};if(u){if(u=new i(a.props,c,f),"function"==typeof i.getDerivedStateFromProps){var d=i.getDerivedStateFromProps.call(null,a.props,u.state);null!=d&&(u.state=n({},u.state,d))}}else if(z={},u=i(a.props,c,f),null==(u=Z(i,a.props,u,c))||null==u.render)return void Ee(e=u,i);if(u.props=a.props,u.context=c,u.updater=f,void 0===(f=u.state)&&(u.state=f=null),"function"==typeof u.UNSAFE_componentWillMount||"function"==typeof u.componentWillMount)if("function"==typeof u.componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&u.UNSAFE_componentWillMount(),l.length){f=l;var p=s;if(l=null,s=!1,p&&1===f.length)u.state=f[0];else{d=p?f[0]:u.state;var h=!0;for(p=p?1:0;p<f.length;p++){var m=f[p];null!=(m="function"==typeof m?m.call(u,d,a.props,c):m)&&(h?(h=!1,d=n({},d,m)):n(d,m))}u.state=d}}else l=null;if(Ee(e=u.render(),i),"function"==typeof u.getChildContext&&"object"==typeof(a=i.childContextTypes)){var y=u.getChildContext();for(var g in y)if(!(g in a))throw Error(o(108,E(i)||"Unknown",g))}y&&(t=n({},t,y))}for(;a.isValidElement(e);){var u=e,c=u.type;if("function"!=typeof c)break;i(u,c)}return{child:e,context:t}}var je=function(){function e(e,t,r){a.isValidElement(e)?e.type!==u?e=[e]:(e=e.props.children,e=a.isValidElement(e)?[e]:me(e)):e=me(e),e={type:null,domNamespace:ue,children:e,childIndex:0,context:j,footer:""};var n=S[0];if(0===n){var i=S,c=2*(n=i.length);if(!(65536>=c))throw Error(o(304));var l=new Uint16Array(c);for(l.set(i),(S=l)[0]=n+1,i=n;i<c-1;i++)S[i]=i+1;S[c-1]=0}else S[0]=S[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=r&&r.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;S[e]=S[0],S[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,r=e.type._context,n=this.threadID;C(r,n);var a=r[n];this.contextStack[t]=r,this.contextValueStack[t]=a,r[n]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],r=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=r},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=oe;oe=this;var r=ye.current;ye.current=ie;try{for(var n=[""],a=!1;n[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;S[i]=S[0],S[0]=i;break}var u=this.stack[this.stack.length-1];if(a||u.childIndex>=u.children.length){var c=u.footer;if(""!==c&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===u.type)this.currentSelectValue=null;else if(null!=u.type&&null!=u.type.type&&u.type.type.$$typeof===s)this.popProvider(u.type);else if(u.type===p){this.suspenseDepth--;var l=n.pop();if(a){a=!1;var f=u.fallbackFrame;if(!f)throw Error(o(303));this.stack.push(f),n[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}n[this.suspenseDepth]+=l}n[this.suspenseDepth]+=c}else{var d=u.children[u.childIndex++],h="";try{h+=this.render(d,u.context,u.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(o(294));throw e}n.length<=this.suspenseDepth&&n.push(""),n[this.suspenseDepth]+=h}}return n[0]}finally{ye.current=r,oe=t,Q()}},t.render=function(e,t,r){if("string"==typeof e||"number"==typeof e)return""===(r=""+e)?"":this.makeStaticMarkup?B(r):this.previousWasTextNode?"\x3c!-- --\x3e"+B(r):(this.previousWasTextNode=!0,B(r));if(e=(t=xe(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((r=e.$$typeof)===i)throw Error(o(257));throw Error(o(258,r.toString()))}return e=me(e),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}var g=e.type;if("string"==typeof g)return this.renderDOM(e,t,r);switch(g){case O:case w:case c:case l:case h:case u:return e=me(e.props.children),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case p:throw Error(o(294));case b:throw Error(o(343))}if("object"==typeof g&&null!==g)switch(g.$$typeof){case d:z={};var k=g.render(e.props,e.ref);return k=Z(g.render,e.props,k,e.ref),k=me(k),this.stack.push({type:null,domNamespace:r,children:k,childIndex:0,context:t,footer:""}),"";case m:return e=[a.createElement(g.type,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case s:return r={type:e,domNamespace:r,children:g=me(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(r),"";case f:g=e.type,k=e.props;var E=this.threadID;return C(g,E),g=me(k.children(g[E])),this.stack.push({type:e,domNamespace:r,children:g,childIndex:0,context:t,footer:""}),"";case v:throw Error(o(338));case y:return g=(k=(g=e.type)._init)(g._payload),e=[a.createElement(g,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}throw Error(o(130,null==g?g:typeof g,""))},t.renderDOM=function(e,t,r){var i=e.type.toLowerCase();if(r===ue&&ce(i),!be.hasOwnProperty(i)){if(!ve.test(i))throw Error(o(65,i));be[i]=!0}var u=e.props;if("input"===i)u=n({type:void 0},u,{defaultChecked:void 0,defaultValue:void 0,value:null!=u.value?u.value:u.defaultValue,checked:null!=u.checked?u.checked:u.defaultChecked});else if("textarea"===i){var c=u.value;if(null==c){c=u.defaultValue;var l=u.children;if(null!=l){if(null!=c)throw Error(o(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(o(93));l=l[0]}c=""+l}null==c&&(c="")}u=n({},u,{value:void 0,children:""+c})}else if("select"===i)this.currentSelectValue=null!=u.value?u.value:u.defaultValue,u=n({},u,{value:void 0});else if("option"===i){l=this.currentSelectValue;var s=function(e){if(null==e)return e;var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(u.children);if(null!=l){var f=null!=u.value?u.value+"":s;if(c=!1,Array.isArray(l)){for(var d=0;d<l.length;d++)if(""+l[d]===f){c=!0;break}}else c=""+l===f;u=n({selected:void 0,children:void 0},u,{selected:c,children:s})}}if(c=u){if(se[i]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw Error(o(137,i));if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw Error(o(60));if("object"!=typeof c.dangerouslySetInnerHTML||!("__html"in c.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=c.style&&"object"!=typeof c.style)throw Error(o(62))}c=u,l=this.makeStaticMarkup,s=1===this.stack.length,f="<"+e.type;e:if(-1===i.indexOf("-"))d="string"==typeof c.is;else switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":d=!1;break e;default:d=!0}for(O in c)if(Oe.call(c,O)){var p=c[O];if(null!=p){if("style"===O){var h=void 0,m="",y="";for(h in p)if(p.hasOwnProperty(h)){var g=0===h.indexOf("--"),v=p[h];if(null!=v){if(g)var b=h;else if(b=h,we.hasOwnProperty(b))b=we[b];else{var w=b.replace(pe,"-$1").toLowerCase().replace(he,"-ms-");b=we[b]=w}m+=y+b+":",y=h,m+=g=null==v||"boolean"==typeof v||""===v?"":g||"number"!=typeof v||0===v||fe.hasOwnProperty(y)&&fe[y]?(""+v).trim():v+"px",y=";"}}p=m||null}h=null,d?ke.hasOwnProperty(O)||(h=N(h=O)&&null!=p?h+'="'+B(p)+'"':""):h=W(O,p),h&&(f+=" "+h)}}l||s&&(f+=' data-reactroot=""');var O=f;c="",le.hasOwnProperty(i)?O+="/>":(O+=">",c="</"+e.type+">");e:{if(null!=(l=u.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=u.children)||"number"==typeof l){l=B(l);break e}l=null}return null!=l?(u=[],ge.hasOwnProperty(i)&&"\n"===l.charAt(0)&&(O+="\n"),O+=l):u=me(u.children),e=e.type,r=null==r||"http://www.w3.org/1999/xhtml"===r?ce(e):"http://www.w3.org/2000/svg"===r&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":r,this.stack.push({domNamespace:r,type:i,children:u,childIndex:0,context:t,footer:c}),this.previousWasTextNode=!1,O},e}();t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){e=new je(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){e=new je(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},1830:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(13)),u=n(r(15)),c=n(r(16)),l=n(r(93)),s=n(r(27)),f=n(r(28)),d=n(r(26)),p=r(58),h=n(r(334)),m=r(434);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var b=function(e){(0,s.default)(i,e);var t,r,n=v(i);function i(){return(0,u.default)(this,i),n.apply(this,arguments)}return(0,c.default)(i,[{key:"serializeArgsInClient",value:function(e){var t=g(g({},e),{},{displayModel:{}});return(0,l.default)((0,d.default)(i.prototype),"serializeArgsInClient",this).call(this,t)}},{key:"deserializeResultsInClient",value:function(e,t){return g(g({},(0,l.default)((0,d.default)(i.prototype),"deserializeResultsInClient",this).call(this,e,t)),{},{blockKey:t.blockKey})}},{key:"renderInClient",value:(r=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.call(r.sessionId,"ComparativeRender",r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"featurePassesFilters",value:function(e,t){return!e.filters||e.filters.passes(t,e)}},{key:"getFeatures",value:(t=(0,o.default)(a.default.mark((function e(t){var r,n,o,i,u,c,l,s,f=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signal,n=t.sessionId,o=t.adapterConfig,e.next=3,(0,m.getAdapter)(this.pluginManager,n,o);case 3:if(i=e.sent,u=i.dataAdapter,c=[],(c=t.regions)&&0!==c.length){e.next=10;break}return console.warn("no regions supplied to comparative renderer"),e.abrupt("return",[]);case 10:return l=c.map((function(e){var t=g({},e);return t.start&&(t.start=Math.floor(t.start)),t.end&&(t.end=Math.floor(t.end)),t})),s=u.getFeaturesInMultipleRegions(l,{signal:r}),e.abrupt("return",s.pipe((0,p.filter)((function(e){return f.featurePassesFilters(t,e)})),(0,p.toArray)()).toPromise());case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(h.default);t.default=b},1831:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(46).ConfigurationSchema)("BaseConnection",{name:{type:"string",defaultValue:"nameOfConnection",description:"a unique name for this connection"},assemblyNames:{type:"stringArray",defaultValue:[],description:"optional list of names of assemblies in this connection"}},{explicitlyTyped:!0,explicitIdentifier:"connectionId"});t.default=n},1832:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(41)),o=r(18);t.default=function(e){return o.types.model("Connection",{name:o.types.identifier,tracks:o.types.array(e.pluggableConfigSchemaType("track"))}).actions((function(e){return{afterAttach:function(){e.tracks.length||e.connect(e.configuration)},addTrackConf:function(t){var r=e.tracks.push(t);return e.tracks[r-1]},addTrackConfs:function(t){var r,n=(r=e.tracks).push.apply(r,(0,a.default)(t));return e.tracks.slice(n-1-t.length,n-1)},setTrackConfs:function(t){return e.tracks=t,e.tracks},clear:function(){}}}))}},1833:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(18),a=r(106),o=n.types.model("BaseView",{id:a.ElementId,displayName:n.types.maybe(n.types.string)}).volatile((function(){return{width:800}})).views((function(){return{menuItems:function(){return[]}}})).actions((function(e){return{setDisplayName:function(t){e.displayName=t},setWidth:function(t){e.width=t}}}));t.default=o},1834:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDisplay=void 0;var a=n(r(13)),o=r(18),i=r(46),u=r(142),c=r(106);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=o.types.model("BaseDisplay",{id:c.ElementId,type:o.types.string,rpcDriverName:o.types.maybe(o.types.string)}).volatile((function(){return{rendererTypeName:"",error:void 0}})).views((function(e){return{get RenderingComponent(){return(0,o.getEnv)(e).pluginManager.getDisplayType(e.type).ReactComponent},get DisplayBlurb(){return null},get adapterConfig(){return(0,i.getConf)(this.parentTrack,"adapter")},get parentTrack(){for(var t=(0,o.getParent)(e);!t.configuration||!(0,i.getConf)(t,"trackId");){if((0,o.isRoot)(t))throw new Error("No parent track found for ".concat(e.type," ").concat(e.id));t=(0,o.getParent)(t)}return t},renderProps:function(){return s(s({},(0,u.getParentRenderProps)(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e})},get rendererType(){var t=(0,o.getEnv)(e).pluginManager.getRendererType(e.rendererTypeName);if(!t)throw new Error('renderer "'.concat(e.rendererTypeName,'" not found'));if(!t.ReactComponent)throw new Error("renderer ".concat(e.rendererTypeName," has no ReactComponent, it may not be completely implemented yet"));return t},get DisplayMessageComponent(){},trackMenuItems:function(){return[]},get viewMenuActions(){return[]},regionCannotBeRendered:function(){}}})).actions((function(e){return{setError:function(t){e.error=t},setRpcDriverName:function(t){e.rpcDriverName=t},reload:function(){}}}));t.BaseDisplay=f},1835:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.InternetAccount=void 0;var a=n(r(22)),o=n(r(24)),i=r(18),u=r(46),c=r(180),l=r(106),s=i.types.model("InternetAccount",{id:l.ElementId,type:i.types.string}).views((function(e){return{get name(){return(0,u.getConf)(e,"name")},get internetAccountId(){return(0,u.getConf)(e,"internetAccountId")},get tokenType(){return(0,u.getConf)(e,"tokenType")},get accountConfig(){return(0,u.getConf)(e)},get toggleContents(){return null},get SelectorComponent(){},get selectorLabel(){},handlesLocation:function(e){return!1}}})).actions((function(e){return{openLocation:function(e){return new c.RemoteFileWithRangeCache(String(e.uri))},getPreAuthorizationInformation:function(t){return(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{internetAccountType:e.type});case 1:case"end":return t.stop()}}),t)})))()}}}));t.InternetAccount=s},1836:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteFileWithRangeCache=void 0,t.clearCache=function(){E.reset()};var a=n(r(22)),o=n(r(13)),i=n(r(21)),u=n(r(24)),c=n(r(15)),l=n(r(16)),s=n(r(93)),f=n(r(27)),d=n(r(28)),p=n(r(26)),h=r(798),m=r(38),y=r(107);function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var k={};var E=new h.HttpRangeFetcher({fetch:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=k[e];if(!a)throw new Error("fetch not registered for ".concat(e));return a(e,t,r,n)},size:500*Math.pow(1024,2),chunkSize:15872,maxFetchSize:100*Math.pow(1024,2),minimumTTL:864e5});var x=function(e){(0,f.default)(o,e);var t,r,n=O(o);function o(){return(0,c.default)(this,o),n.apply(this,arguments)}return(0,l.default)(o,[{key:"fetch",value:(r=(0,u.default)(a.default.mark((function e(t,r){var n,u,c,l,f,d,h,m,y,g,v,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k[String(t)]||(k[String(t)]=this.fetchBinaryRange.bind(this)),(n=r&&r.headers)&&(n instanceof Headers?u=n.get("range"):Array.isArray(n)?(c=n.find((function(e){return"range"===(0,i.default)(e,1)[0]}))||[void 0,void 0],l=(0,i.default)(c,2),u=l[1]):u=n.range),!u){e.next=14;break}if(!(f=/bytes=(\d+)-(\d+)/.exec(u))){e.next=14;break}return d=(0,i.default)(f,3),h=d[1],m=d[2],y=parseInt(h,10),g=parseInt(m,10),e.next=11,E.getRange(t,y,g-y+1,{signal:r&&r.signal});case 11:return v=e.sent,b=v.headers,e.abrupt("return",new Response(v.buffer,{status:206,headers:b}));case 14:return e.abrupt("return",(0,s.default)((0,p.default)(o.prototype),"fetch",this).call(this,t,r));case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchBinaryRange",value:(t=(0,u.default)(a.default.mark((function e(t,r,n){var u,c,l,f,d,h,y,v,b,O,k,E,x,j,C=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=C.length>3&&void 0!==C[3]?C[3]:{},c=new Date,l=w(w({},u.headers),{},{range:"bytes=".concat(r,"-").concat(n)}),e.next=5,(0,s.default)((0,p.default)(o.prototype),"fetch",this).call(this,t,w(w({},u),{},{headers:l}));case 5:if(f=e.sent,d=new Date,206===f.status){e.next=11;break}throw h="HTTP ".concat(f.status," (").concat(f.statusText,") when fetching ").concat(t," bytes ").concat(r,"-").concat(n),y=" (should be 206 for range requests)",new Error("".concat(h).concat(200===f.status?y:""));case 11:v={},b=g(f.headers.entries());try{for(b.s();!(O=b.n()).done;)k=(0,i.default)(O.value,2),E=k[0],x=k[1],v[E]=x}catch(e){b.e(e)}finally{b.f()}return e.next=16,f.arrayBuffer();case 16:return j=e.sent,e.abrupt("return",{headers:v,requestDate:c,responseDate:d,buffer:m.Buffer.from(j)});case 18:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),o}(y.RemoteFile);t.RemoteFileWithRangeCache=x},1837:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInternetAccountConfig=void 0;var n=(0,r(46).ConfigurationSchema)("InternetAccount",{name:{description:"descriptive name of the internet acount",type:"string",defaultValue:""},description:{description:"a description of the internet account",type:"string",defaultValue:""}},{explicitIdentifier:"internetAccountId",explicitlyTyped:!0});t.BaseInternetAccountConfig=n},1838:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createBaseTrackModel=function(e,t,r){return u.types.model(t,{id:d.ElementId,type:u.types.literal(t),configuration:(0,l.ConfigurationReference)(r),displays:u.types.array(e.pluggableMstType("display","stateModel"))}).views((function(e){return{get rpcSessionId(){return e.configuration.trackId},get name(){return(0,c.getConf)(e,"name")},get textSearchAdapter(){return(0,c.getConf)(e,"textSearchAdapter")},get adapterType(){var t=(0,c.getConf)(e,"adapter"),r=(0,u.getEnv)(e).pluginManager;if(!t)throw new Error("no adapter configuration provided for ".concat(e.type));var n=r.getAdapterType(t.type);if(!n)throw new Error("unknown adapter type ".concat(t.type));return n},get viewMenuActions(){var t=[];return e.displays.forEach((function(e){t.push.apply(t,(0,o.default)(e.viewMenuActions))})),t},get canConfigure(){var t=(0,s.getSession)(e);return(0,f.isSessionModelWithConfigEditing)(t)&&(t.adminMode||t.sessionTracks.find((function(t){return t.trackId===e.configuration.trackId})))}}})).actions((function(t){return{activateConfigurationUI:function(){var e=(0,s.getSession)(t),r=(0,s.getContainingView)(t);if((0,f.isSessionModelWithConfigEditing)(e)){var n=e.editTrackConfiguration(t.configuration);n&&n!==t.configuration&&(r.hideTrack(t.configuration),r.showTrack(n))}},showDisplay:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.pluggableConfigSchemaType("display"),o=(0,u.resolveIdentifier)(a,(0,u.getRoot)(t),r),i=e.getDisplayType(o.type);if(!i)throw new Error("unknown display type ".concat(o.type));var c=i.stateModel.create(h(h({},n),{},{type:o.type,configuration:o}));t.displays.push(c)},hideDisplay:function(r){var n=e.pluggableConfigSchemaType("display"),a=(0,u.resolveIdentifier)(n,(0,u.getRoot)(t),r),o=t.displays.filter((function(e){return e.configuration===a}));return(0,i.transaction)((function(){return o.forEach((function(e){return t.displays.remove(e)}))})),o.length},replaceDisplay:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.displays.findIndex((function(e){return e.configuration.displayId===r}));if(-1===o)throw new Error("could not find display id ".concat(r," to replace"));var i=e.pluggableConfigSchemaType("display"),c=(0,u.resolveIdentifier)(i,(0,u.getRoot)(t),n),l=e.getDisplayType(c.type);if(!l)throw new Error("unknown display type ".concat(c.type));t.displays.splice(o,1,h(h({},a),{},{type:c.type,configuration:c}))}}})).views((function(t){return{trackMenuItems:function(){var r=[];t.displays.forEach((function(e){r.push.apply(r,(0,o.default)(e.trackMenuItems()))}));var n=[],a=(0,s.getContainingView)(t),i=e.getViewType(a.type).displayTypes.map((function(e){return e.name})),u=t.configuration.displays.filter((function(e){return i.includes(e.type)})),c=t.displays[0].configuration.displayId;return u.length>1&&(n.push({type:"divider"},{type:"subHeader",label:"Display types"}),u.forEach((function(e){n.push({type:"radio",label:"".concat(e.type),onClick:function(){t.replaceDisplay(c,e.displayId)},checked:e.displayId===c})}))),[].concat(r,n)}}}))};var a=n(r(13)),o=n(r(41)),i=r(51),u=r(18),c=r(46),l=r(597),s=r(45),f=r(207),d=r(106);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},1839:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createBaseTrackConfig=function(e){return(0,i.ConfigurationSchema)("BaseTrack",{name:{description:"descriptive name of the track",type:"string",defaultValue:"Track"},assemblyNames:{description:"name of the assembly (or assemblies) track belongs to",type:"stringArray",defaultValue:["assemblyName"]},description:{description:"a description of the track",type:"string",defaultValue:""},category:{description:"the category and sub-categories of a track",type:"stringArray",defaultValue:[]},metadata:{type:"frozen",description:"anything to add about this track",defaultValue:{}},adapter:e.pluggableConfigSchemaType("adapter"),textSearching:(0,i.ConfigurationSchema)("textSearching",{indexingAttributes:{type:"stringArray",description:"list of which feature attributes to index for text searching",defaultValue:["Name","ID"]},indexingFeatureTypesToExclude:{type:"stringArray",description:"list of feature types to exclude in text search index",defaultValue:["CDS","exon"]},textSearchAdapter:e.pluggableConfigSchemaType("text search adapter")}),displays:o.types.array(e.pluggableConfigSchemaType("display"))},{preProcessSnapshot:function(t){var r=JSON.parse(JSON.stringify(t)),n=new Set,a=r.displays,o=void 0===a?[]:a;"placeholderId"!==r.trackId&&(o.forEach((function(e){return e&&n.add(e.type)})),e.getTrackType(r.type).displayTypes.forEach((function(e){n.has(e.name)||o.push({displayId:"".concat(r.trackId,"-").concat(e.name),type:e.name})})));return c(c({},r),{},{displays:o})},explicitIdentifier:"trackId",explicitlyTyped:!0,actions:function(e){return{addDisplayConf:function(t){var r=t.type;if(!r)throw new Error("unknown display type ".concat(r));var n=e.displays.find((function(e){return e&&e.displayId===t.displayId}));if(n)return n;var a=e.displays.push(t);return e.displays[a-1]}}}})};var a=n(r(13)),o=r(18),i=r(46);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},1840:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNamedColor=function(e){return!!n[e]},t.namedColorToHex=function(e){return n[e]};var n={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}},1841:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={GranularRectLayout:!0,MultiLayout:!0,PrecomputedLayout:!0,PrecomputedMultiLayout:!0,SceneGraph:!0};Object.defineProperty(t,"GranularRectLayout",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"MultiLayout",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"PrecomputedLayout",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"PrecomputedMultiLayout",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"SceneGraph",{enumerable:!0,get:function(){return s.default}});var o=r(1842);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(r(1037)),u=n(r(603)),c=n(r(604)),l=n(r(1843)),s=n(r(1844))},1842:function(e,t,r){},1843:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(21)),o=n(r(27)),i=n(r(28)),u=n(r(26)),c=n(r(16)),l=n(r(15)),s=n(r(603)),f=n(r(604));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var p=(0,c.default)((function e(){throw(0,l.default)(this,e),new Error("invalid layout name")})),h=function(e){(0,o.default)(r,e);var t=d(r);function r(e){var n;return(0,l.default)(this,r),n=t.call(this,p),Object.entries(e).forEach((function(e){var t=(0,a.default)(e,2),r=t[0],o=t[1];n.subLayouts.set(r,new f.default(o))})),n}return(0,c.default)(r)}(s.default);t.default=h},1844:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(13)),u=r(45);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(t,r,n,o,c,l){if((0,a.default)(this,e),(0,i.default)(this,"children",void 0),(0,i.default)(this,"absoluteCache",void 0),(0,i.default)(this,"parent",void 0),u.inDevelopment&&("string"!=typeof t||"number"!=typeof r||Number.isNaN(r)||"number"!=typeof n||Number.isNaN(n)||"number"!=typeof o||Number.isNaN(o)||"number"!=typeof c||Number.isNaN(c)))throw new TypeError("invalid SceneGraph arguments");this.children=new Map,this.absoluteCache={dirty:!0}}return(0,o.default)(e,[{key:"addChild",value:function(t,r,n,a,o,i){var u;if(!((u=t instanceof e?t:new e(t,r,n,a,o,i))instanceof e))throw new TypeError("argument to addChild must be an array or a SceneGraph");if(this.children.has(u.name))throw new Error('child named "'.concat(u.name,'" already exists'));u.parent=this;var c=u.absolute,l=c.left,s=c.right,f=c.top,d=c.bottom;return void 0!==l&&void 0!==s&&void 0!==f&&void 0!==d&&(this.expand(l,s,f,d),this.children.set(u.name,u)),u}},{key:"getSubRecord",value:function(e){return this.children.get(e)}},{key:"expand",value:function(e,t,r,n){var a=this.absolute,o=a.left,i=a.right,u=a.top,c=a.bottom;if(void 0!==o&&e<o){var l=o-e;this.width+=l,this.left-=l}if(void 0!==i&&t>i&&(this.width+=t-i),void 0!==u&&r<u){var s=u-r;this.height+=s,this.top-=s}void 0!==c&&n>c&&(this.height+=n-c),this.parent&&this.parent.expand(e,t,r,n),this.absoluteCache.dirty=!0}},{key:"bottom",get:function(){return this.top+this.height}},{key:"right",get:function(){return this.left+this.width}},{key:"walkParents",value:function(e){this.parent&&(e(this.parent),this.parent.walkParents(e))}},{key:"walkChildren",value:function(e){var t,r=c(this.children.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;e(n),n.walkChildren(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"absolute",get:function(){if(this.absoluteCache.dirty){var e=0,t=0;this.walkParents((function(r){e+=r.left,t+=r.top})),this.absoluteCache={dirty:!1,left:this.left+e,right:this.right+e,top:this.top+t,bottom:this.bottom+t,width:this.width,height:this.height}}return this.absoluteCache}},{key:"move",value:function(e,t){this.left+=e,this.top+=t,this.absoluteCache.dirty=!0,this.walkChildren((function(e){e.absoluteCache.dirty=!0}));var r=this.absolute,n=r.left,a=r.right,o=r.top,i=r.bottom;void 0!==n&&void 0!==a&&void 0!==o&&void 0!==i&&this.expand(n,a,o,i)}}]),e}();t.default=s},1845:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"amber",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"blue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"blueGrey",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"brown",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"cyan",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"deepOrange",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"deepPurple",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"green",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"grey",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"indigo",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"lightBlue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"lightGreen",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"lime",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"orange",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"pink",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"purple",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"red",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"teal",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"yellow",{enumerable:!0,get:function(){return y.default}});var a=n(r(478)),o=n(r(477)),i=n(r(800)),u=n(r(801)),c=n(r(476)),l=n(r(480)),s=n(r(802)),f=n(r(803)),d=n(r(804)),p=n(r(481)),h=n(r(805)),m=n(r(806)),y=n(r(807)),g=n(r(808)),v=n(r(479)),b=n(r(809)),w=n(r(810)),O=n(r(475)),k=n(r(811))},1846:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=["mobx","mobx-state-tree","react","react-dom","mobx-react","prop-types","@material-ui/core","@material-ui/core/SvgIcon","@material-ui/core/utils","@material-ui/lab","@mui/x-data-grid","@jbrowse/core/Plugin","@jbrowse/core/pluggableElementTypes","@jbrowse/core/pluggableElementTypes/ViewType","@jbrowse/core/pluggableElementTypes/AdapterType","@jbrowse/core/pluggableElementTypes/DisplayType","@jbrowse/core/pluggableElementTypes/TrackType","@jbrowse/core/pluggableElementTypes/WidgetType","@jbrowse/core/pluggableElementTypes/models","@jbrowse/core/pluggableElementTypes/renderers/ServerSideRendererType","@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType","@jbrowse/core/pluggableElementTypes/renderers/BoxRendererType","@jbrowse/core/pluggableElementTypes/renderers/FeatureRendererType","@jbrowse/core/pluggableElementTypes/renderers/RendererType","@jbrowse/core/configuration","@jbrowse/core/util/types/mst","@jbrowse/core/ui","@jbrowse/core/util","@jbrowse/core/util/color","@jbrowse/core/util/layouts","@jbrowse/core/util/tracks","@jbrowse/core/util/Base1DViewModel","@jbrowse/core/util/io","@jbrowse/core/util/mst-reflection","@jbrowse/core/util/rxjs","@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail","@jbrowse/core/data_adapters/BaseAdapter"]},1847:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(15)),i=n(r(16)),u=n(r(35)),c=n(r(27)),l=n(r(28)),s=n(r(26)),f=n(r(13)),d=r(1),p=r(1848),h=n(r(160)),m=n(r(179)),y=w(r(1849)),g=n(r(208)),v=r(1850);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var k=function(e){(0,c.default)(n,e);var t=O(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,u.default)(e),"name","CorePlugin"),e}return(0,i.default)(n,[{key:"install",value:function(e){Object.values(y).forEach((function(t){e.addRpcMethod((function(){return new t(e)}))})),e.addAdapterType((function(){return new m.default({name:"CytobandAdapter",configSchema:v.configSchema,AdapterClass:v.DataAdapter})})),e.addWidgetType((function(){return new g.default({name:"BaseFeatureWidget",heading:"Feature details",configSchema:p.configSchema,stateModel:(0,p.stateModelFactory)(e),ReactComponent:(0,d.lazy)((function(){return Promise.resolve().then((function(){return w(r(433))}))}))})}))}}]),n}(h.default);t.default=k},1848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=void 0,t.stateModelFactory=t.default=function(e){return n.types.model("BaseFeatureWidget",{id:o.ElementId,type:n.types.literal("BaseFeatureWidget"),featureData:n.types.frozen(),view:n.types.safeReference(e.pluggableMstType("view","stateModel"))}).actions((function(e){return{setFeatureData:function(t){e.featureData=t},clearFeatureData:function(){e.featureData=void 0}}}))};var n=r(18),a=r(46),o=r(106),i=(0,a.ConfigurationSchema)("BaseFeatureWidget",{});t.configSchema=i},1849:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CoreRender=t.CoreGetRefNames=t.CoreGetMetadata=t.CoreGetFileInfo=t.CoreGetFeatures=t.CoreFreeResources=void 0;var a=n(r(22)),o=n(r(93)),i=n(r(24)),u=n(r(15)),c=n(r(16)),l=n(r(35)),s=n(r(27)),f=n(r(28)),d=n(r(26)),p=n(r(13)),h=r(58),m=r(434),y=n(r(432)),g=n(r(334)),v=r(209),b=r(45),w=n(r(159));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var x=function(e){(0,s.default)(n,e);var t,r=E(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,l.default)(e),"name","CoreGetRefNames"),e}return(0,c.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,m.getAdapter)(this.pluginManager,o,i);case 6:if(u=e.sent,!((c=u.dataAdapter)instanceof v.BaseFeatureDataAdapter)){e.next=10;break}return e.abrupt("return",c.getRefNames(n));case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(y.default);t.CoreGetRefNames=x;var j=function(e){(0,s.default)(n,e);var t,r=E(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,l.default)(e),"name","CoreGetInfo"),e}return(0,c.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,m.getAdapter)(this.pluginManager,o,i);case 6:return u=e.sent,c=u.dataAdapter,e.abrupt("return",(0,v.isFeatureAdapter)(c)?c.getHeader(n):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(y.default);t.CoreGetFileInfo=j;var C=function(e){(0,s.default)(n,e);var t,r=E(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,p.default)((0,l.default)(e),"name","CoreGetMetadata"),e}return(0,c.default)(n,[{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.sessionId,i=n.adapterConfig,e.next=6,(0,m.getAdapter)(this.pluginManager,o,i);case 6:return u=e.sent,c=u.dataAdapter,e.abrupt("return",(0,v.isFeatureAdapter)(c)?c.getMetadata(n):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(y.default);t.CoreGetMetadata=C;var S=function(e){(0,s.default)(f,e);var t,r,n=E(f);function f(){var e;(0,u.default)(this,f);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,l.default)(e),"name","CoreGetFeatures"),e}return(0,c.default)(f,[{key:"deserializeReturn",value:(r=(0,i.default)(a.default.mark((function e(t,r,n){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)((0,d.default)(f.prototype),"deserializeReturn",this).call(this,t,r,n);case 2:return i=e.sent,e.abrupt("return",i.map((function(e){return new w.default(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"execute",value:(t=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,c,l,s,f,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,o=n.signal,i=n.sessionId,u=n.adapterConfig,c=n.region,l=n.opts,e.next=6,(0,m.getAdapter)(this.pluginManager,i,u);case 6:if(s=e.sent,f=s.dataAdapter,(0,v.isFeatureAdapter)(f)){e.next=10;break}return e.abrupt("return",[]);case 10:return d=f.getFeatures(c,k(k({},l),{},{signal:o})),e.next=13,d.pipe((0,h.toArray)()).toPromise();case 13:return p=e.sent,e.abrupt("return",p.map((function(e){return e.toJSON()})));case 15:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(y.default);t.CoreGetFeatures=S;var P=function(e){(0,s.default)(o,e);var t,r,n=E(o);function o(){var e;(0,u.default)(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,p.default)((0,l.default)(e),"name","CoreFreeResources"),e}return(0,c.default)(o,[{key:"execute",value:(r=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,r+=(0,m.freeAdapterResources)(t),this.pluginManager.getRendererTypes().forEach((function(e){var t=e.freeResources();t&&(r+=t)})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"serializeArguments",value:(t=(0,i.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),o}(y.default);t.CoreFreeResources=P;var T=function(e){(0,s.default)(h,e);var t,r,n,f=E(h);function h(){var e;(0,u.default)(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=f.call.apply(f,[this].concat(r)),(0,p.default)((0,l.default)(e),"name","CoreRender"),e}return(0,c.default)(h,[{key:"serializeArguments",value:(n=(0,i.default)(a.default.mark((function e(t,r){var n,i,u,c,l,s,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=null===(n=this.pluginManager.rootModel)||void 0===n||null===(i=n.session)||void 0===i?void 0:i.assemblyManager)){e.next=7;break}return e.next=4,(0,b.renameRegionsIfNeeded)(u,t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:return c=e.t0,e.next=11,(0,o.default)((0,d.default)(h.prototype),"serializeArguments",this).call(this,c,r);case 11:if(l=e.sent,"MainThreadRpcDriver"!==r){e.next=14;break}return e.abrupt("return",l);case 14:return s=t.rendererType,f=M(s,this.pluginManager.getRendererType(s)),e.abrupt("return",f.serializeArgsInClient(l));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"execute",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,u,c,l,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,"MainThreadRpcDriver"===r){e.next=5;break}return e.next=4,this.deserializeArguments(t,r);case 4:n=e.sent;case 5:if(i=(o=n).sessionId,u=o.rendererType,c=o.signal,i){e.next=8;break}throw new Error("must pass a unique session id");case 8:if((0,b.checkAbortSignal)(c),l=M(u,this.pluginManager.getRendererType(u)),"MainThreadRpcDriver"!==r){e.next=16;break}return e.next=13,l.render(n);case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,l.renderInWorker(n);case 18:e.t0=e.sent;case 19:return s=e.t0,(0,b.checkAbortSignal)(c),e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deserializeReturn",value:(t=(0,i.default)(a.default.mark((function e(t,r,n){var i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)((0,d.default)(h.prototype),"deserializeReturn",this).call(this,t,r,n);case 2:if(i=e.sent,"MainThreadRpcDriver"!==n){e.next=5;break}return e.abrupt("return",i);case 5:return u=r.rendererType,c=M(u,this.pluginManager.getRendererType(u)),e.abrupt("return",c.deserializeResultsInClient(i,r));case 8:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),h}(y.default);function M(e,t){if(!t)throw new Error('renderer "'.concat(e,'" not found'));if(!t.ReactComponent)throw new Error("renderer ".concat(e," has no ReactComponent, it may not be completely implemented yet"));if(!(t instanceof g.default))throw new Error("CoreRender requires a renderer that is a subclass of ServerSideRendererType");return t}t.CoreRender=T},1850:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.configSchema=t.DataAdapter=void 0;var a=n(r(22)),o=n(r(21)),i=n(r(24)),u=n(r(15)),c=n(r(16)),l=n(r(27)),s=n(r(28)),f=n(r(26)),d=n(r(159)),p=r(46),h=r(180),m=r(209);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var g=(0,p.ConfigurationSchema)("CytobandAdapter",{cytobandLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/cytoband.txt.gz"}}},{explicitlyTyped:!0});t.configSchema=g;var v=function(e){(0,l.default)(n,e);var t,r=y(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,c.default)(n,[{key:"getData",value:(t=(0,i.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=(0,p.readConfObject)(this.config,"cytobandLocation")).uri&&"/path/to/cytoband.txt.gz"!==t.uri){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,(0,h.openLocation)(t).readFile("utf8");case 5:return r=e.sent,e.abrupt("return",r.split("\n").filter((function(e){return!!e.trim()})).map((function(e){var t=e.split("\t"),r=(0,o.default)(t,5),n=r[0],a=r[1],i=r[2],u=r[3],c=r[4];return new d.default({uniqueId:e,refName:n,start:+a,end:+i,name:u,type:c})})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),n}(m.BaseAdapter);t.DataAdapter=v},1851:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(15)),u=n(r(16)),c=n(r(13)),l=r(46),s=n(r(1852)),f=n(r(1853)),d=n(r(1854)),p={WebWorkerRpcDriver:f.default,MainThreadRpcDriver:d.default},h=function(){function e(t,r,n){if((0,i.default)(this,e),(0,c.default)(this,"driverObjects",void 0),!r)throw new Error("RpcManager requires at least a main configuration");this.driverObjects=new Map}var t,r;return(0,u.default)(e,[{key:"getDriver",value:function(e){var t=this.driverObjects.get(e);if(t)return t;var r=this.backendConfigurations[e],n=p[e];if(!n)throw new Error('requested RPC driver "'.concat(e,'" is not installed'));if(!r)throw new Error('requested RPC driver "'.concat(e,'" is missing config'));var a=new n(r,{plugins:this.pluginManager.runtimePluginDefinitions});return this.driverObjects.set(e,a),a}},{key:"getDriverForCall",value:(r=(0,o.default)(a.default.mark((function e(t,r,n){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.rpcDriverName||(0,l.readConfObject)(this.mainConfiguration,"defaultDriver"),e.abrupt("return",this.getDriver(o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"call",value:(t=(0,o.default)(a.default.mark((function e(t,r,n){var o,i,u=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length>3&&void 0!==u[3]?u[3]:{},t){e.next=3;break}throw new Error("sessionId is required");case 3:return e.next=5,this.getDriverForCall(t,r,n);case 5:return i=e.sent,e.abrupt("return",i.call(this.pluginManager,t,r,n,o));case 7:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();t.default=h,(0,c.default)(h,"configSchema",s.default)},1852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(18),a=r(46),o=(0,a.ConfigurationSchema)("MainThreadRpcDriver",{},{explicitlyTyped:!0}),i=(0,a.ConfigurationSchema)("WebWorkerRpcDriver",{},{explicitlyTyped:!0}),u=(0,a.ConfigurationSchema)("ElectronRpcDriver",{},{explicitlyTyped:!0}),c=(0,a.ConfigurationSchema)("RpcOptions",{defaultDriver:{type:"string",description:"the RPC driver to use for tracks and tasks that are not configured to use a specific RPC backend",defaultValue:"MainThreadRpcDriver"},drivers:n.types.optional(n.types.map(n.types.union(o,i,u)),{MainThreadRpcDriver:{type:"MainThreadRpcDriver"}})},{actions:function(e){return{addDriverConfig:function(t,r){e.drivers.set(t,r)}}}});t.default=c},1853:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(35)),i=n(r(13)),u=n(r(24)),c=n(r(15)),l=n(r(16)),s=n(r(93)),f=n(r(27)),d=n(r(28)),p=n(r(26)),h=n(r(812)),m=n(r(360)),y=n(r(1040));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var w=function(e){(0,f.default)(n,e);var t,r=b(n);function n(){return(0,c.default)(this,n),r.apply(this,arguments)}return(0,l.default)(n,[{key:"destroy",value:function(){this.workers[0].terminate()}},{key:"call",value:(t=(0,u.default)(a.default.mark((function e(t,r,o){var i,u,c,l,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.statusCallback,u=o.rpcDriverClassName,c="message-".concat(m.default.generate()),l=function(e){i&&i(e)},this.on(c,l),e.next=6,(0,s.default)((0,p.default)(n.prototype),"call",this).call(this,t,v(v({},r),{},{channel:c,rpcDriverClassName:u}),o);case 6:return f=e.sent,this.off(c,l),e.abrupt("return",f);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),n}(h.default.Client),O=function(e){(0,f.default)(r,e);var t=b(r);function r(e,n){var a;return(0,c.default)(this,r),a=t.call(this,e),(0,i.default)((0,o.default)(a),"name","WebWorkerRpcDriver"),(0,i.default)((0,o.default)(a),"WorkerClass",void 0),a.WorkerClass=e.WorkerClass,a}return(0,l.default)(r,[{key:"makeWorker",value:function(){var e=new w({workers:[new this.WorkerClass]});return e.workers[0].postMessage(this.workerBootConfiguration),e}}]),r}(y.default);t.default=O},1854:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(35)),i=n(r(27)),u=n(r(28)),c=n(r(26)),l=n(r(13)),s=n(r(24)),f=n(r(15)),d=n(r(16)),p=n(r(1040));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var m=function(){function e(){(0,f.default)(this,e)}var t;return(0,d.default)(e,[{key:"destroy",value:function(){}},{key:"call",value:(t=(0,s.default)(a.default.mark((function e(t,r){var n=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>2&&void 0!==n[2]&&n[2],e.abrupt("return",void 0);case 2:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),y=function(e){(0,i.default)(n,e);var t,r=h(n);function n(e){var t;return(0,f.default)(this,n),t=r.call(this,e),(0,l.default)((0,o.default)(t),"name","MainThreadRpcDriver"),(0,l.default)((0,o.default)(t),"makeWorker",void 0),t.makeWorker=function(){return new m},t}return(0,d.default)(n,[{key:"call",value:(t=(0,s.default)(a.default.mark((function e(t,r,n,o){var i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new TypeError("sessionId is required");case 2:return i=t.getRpcMethodType(n),e.next=5,i.serializeArguments(o,this.name);case 5:return u=e.sent,e.next=8,i.execute(u,this.name);case 8:return c=e.sent,e.abrupt("return",i.deserializeReturn(c,o,this.name));case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),n}(p.default);t.default=y},1855:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(41)),u=n(r(15)),c=n(r(16)),l=n(r(13)),s=n(r(601)),f=r(46),d=function(){function e(t){(0,u.default)(this,e),(0,l.default)(this,"adapterCache",void 0),this.adapterCache=new s.default({maxSize:15})}var t;return(0,c.default)(e,[{key:"loadTextSearchAdapters",value:function(e){var t=this;return this.relevantAdapters(e).map((function(e){var r=(0,f.readConfObject)(e,"textSearchAdapterId");if(t.adapterCache.has(r))return t.adapterCache.get(r);var n=new(0,t.pluginManager.getTextSearchAdapterType(e.type).AdapterClass)(e,void 0,t.pluginManager);return t.adapterCache.set(r,n),n}))}},{key:"relevantAdapters",value:function(e){var t,r=null===(t=this.pluginManager.rootModel)||void 0===t?void 0:t.jbrowse,n=r.aggregateTextSearchAdapters,a=r.tracks,o=e.assemblyName;return[].concat((0,i.default)(this.getAdaptersWithAssembly(o,n)),(0,i.default)(this.getAdaptersWithAssembly(o,a.map((function(e){return(0,f.readConfObject)(e,["textSearching","textSearchAdapter"])})))))}},{key:"getAdaptersWithAssembly",value:function(e,t){return t.filter((function(t){var r;return null===(r=(0,f.readConfObject)(t,"assemblyNames"))||void 0===r?void 0:r.includes(e)}))}},{key:"search",value:(t=(0,o.default)(a.default.mark((function e(t,r,n){var o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.loadTextSearchAdapters(r),e.next=3,Promise.all(o.map((function(e){return e.searchIndex(t)})));case 3:return i=e.sent,e.abrupt("return",this.sortResults(i.flat(),n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"sortResults",value:function(e,t){return t(e.sort((function(e,t){return-t.getLabel().localeCompare(e.getLabel())}))).sort((function(e,t){return e.getScore()-t.getScore()}))}}]),e}();t.default=d},1856:function(e,t,r){"use strict";r.r(t),r.d(t,"AssemblyManager",(function(){return Kt})),r.d(t,"SetDefaultSession",(function(){return $t}));var n=r(1),a=r.n(n),o=r(602),i=r.n(o),u=r(208),c=r.n(u),l=r(160),s=r.n(l),f=r(210),d=r(46),p=r(45),h=r(18),m=r(180),y=r(142),g=r(106),v=r(34),b=r(683),w=r(732),O=r(704),k=r(709),E=r(697),x=r(707),j=r(698),C=r(706),S=r(699),P=r(1928),T=r(1927),M=r(701),R=r(702),A=r(1926),N=r(1912),_=r(708),L=r(731),F=r(1907),I=r(717),D=r(1906),B=r(1908),W=r(1946),V=r(1942),z=r(1943),q=r(695),H=r(1940),U=r(1944),G=r(1941),J=r(721),X=r(715),Y=r(712),$=r(1054),K=r(1919),Z=r(486),Q=r(1929),ee=r(1938),te=r(1934),re=r(1935),ne=r(1937),ae=r(385),oe=r.n(ae),ie=r(977),ue=r.n(ie),ce=r(976),le=r.n(ce),se=r(82),fe=r.n(se),de=r(973),pe=r.n(de),he=r(207),me=r(974),ye=r.n(me),ge=r(424),ve=r.n(ge),be=r(975),we=r.n(be),Oe=r(12),ke=r(979),Ee=r.n(ke),xe=r(978),je=r.n(xe),Ce=r(221),Se=r.n(Ce),Pe=r(1025),Te=r.n(Pe),Me=r(1041),Re=r(222),Ae=r.n(Re),Ne=r(362),_e=r.n(Ne),Le=r(228),Fe=r.n(Le),Ie=r(980),De=r.n(Ie),Be=r(981),We=r.n(Be),Ve=r(972),ze=r(430),qe=r.n(ze),He=r(1052),Ue=r(1053),Ge=r(158),Je=r(982),Xe=r.n(Je);function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function Qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ze(o,n,a,i,u,"next",e)}function u(e){Ze(o,n,a,i,u,"throw",e)}i(void 0)}))}}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=nt(e);if(t){var a=nt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ot(this,r)}}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e){return function(e){if(Array.isArray(e))return st(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){if(e){if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=lt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}var dt=Object(d.ConfigurationSchema)("UCSCTrackHubConnection",{hubTxtLocation:{type:"fileLocation",defaultValue:{uri:"http://mysite.com/path/to/hub.txt",locationType:"UriLocation"},description:"location of the hub file (usually called hub.txt)"},assemblyNames:{type:"stringArray",defaultValue:[],description:"optional list of genomes to import from this track hub, if empty all genomes will be imported"}},{baseConfiguration:f.baseConnectionConfig});function pt(e,t){return e(t={exports:{}},t.exports),t.exports}var ht=pt((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function mt(){return(mt=Qe(ht.mark((function e(t){var n,a,o;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.openLocation)(t).readFile("utf8");case 3:return n=e.sent,e.next=6,r.e(0).then(r.t.bind(null,256,7));case 6:return a=e.sent,o=a.HubFile,e.abrupt("return",new o(n));case 11:throw e.prev=11,e.t0=e.catch(0),new Error("Not a valid hub.txt file, got error: '".concat(e.t0,"'"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function yt(e){return gt.apply(this,arguments)}function gt(){return(gt=Qe(ht.mark((function e(t){var n,a,o;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.openLocation)(t).readFile("utf8");case 2:return n=e.sent,e.next=5,r.e(0).then(r.t.bind(null,256,7));case 5:return a=e.sent,o=a.GenomesFile,e.abrupt("return",new o(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return bt.apply(this,arguments)}function bt(){return(bt=Qe(ht.mark((function e(t){var n,a,o;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.openLocation)(t).readFile("utf8");case 2:return n=e.sent,e.next=5,r.e(0).then(r.t.bind(null,256,7));case 5:return a=e.sent,o=a.TrackDbFile,e.abrupt("return",new o(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e,t,r,n){var a=[];return e.forEach((function(o,i){var u=Array.from(o.keys()),c=["superTrack","compositeTrack","container","view"];if(!u.some((function(e){return c.includes(e)}))){var l=[],s=i;do{if(s=e.get(s).get("parent")){var f=s.split(" ");s=ut(f,1)[0],l.push(e.get(s))}}while(s);l.reverse();var d=function(e,t,r,n,a){var o=e.get("type");o||(o=n.get(e.get("parent")).get("type"));var i,u,c=o.split(" ")[0];"bam"===c&&e.get("bigDataUrl").toLowerCase().endsWith("cram")&&(c="cram");i=r.uri?{uri:new URL(e.get("bigDataUrl"),r.uri).href,locationType:"UriLocation"}:{localPath:e.get("bigDataUrl"),locationType:"LocalPathLocation"};switch(c){case"bam":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".bai"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".bai"),locationType:"LocalPathLocation"},{type:"AlignmentsTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BamAdapter",bamLocation:i,index:{location:u}}};case"bed":case"bed5FloatScore":case"bedGraph":case"bedRnaElements":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);case"bigBarChart":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i},renderer:{type:"SvgFeatureRenderer"}};case"bigBed":case"bigGenePred":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i}};case"bigChain":case"bigInteract":case"bigMaf":case"bigPsl":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i},renderer:{type:"SvgFeatureRenderer"}};case"bigWig":return{type:"QuantitativeTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigWigAdapter",bigWigLocation:i}};case"broadPeak":case"coloredExon":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);case"cram":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".crai"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".crai"),locationType:"LocalPathLocation"},{type:"AlignmentsTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"CramAdapter",cramLocation:i,craiLocation:u,sequenceAdapter:a}};case"gvf":case"ld2":case"narrowPeak":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);case"bigNarrowPeak":return{type:"FeatureTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"BigBedAdapter",bigBedLocation:i}};case"peptideMapping":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);case"vcfTabix":return u=r.uri?e.get("bigDataIndex")?{uri:new URL(e.get("bigDataIndex"),r.uri).href,locationType:"UriLocation"}:{uri:new URL("".concat(e.get("bigDataUrl"),".tbi"),r.uri).href,locationType:"UriLocation"}:e.get("bigDataIndex")?{localPath:e.get("bigDataIndex"),locationType:"LocalPathLocation"}:{localPath:"".concat(e.get("bigDataUrl"),".tbi"),locationType:"LocalPathLocation"},{type:"VariantTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"VcfTabixAdapter",vcfGzLocation:i,index:{location:u}}};case"wig":case"wigMaf":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);case"hic":return{type:"HicTrack",name:e.get("shortLabel"),description:e.get("longLabel"),category:t,adapter:{type:"HicAdapter",hicLocation:i}};case"halSnake":return Object(y.generateUnsupportedTrackConf)(e.get("shortLabel"),c,t);default:return Object(y.generateUnknownTrackConf)(e.get("shortLabel"),c,t)}}(o,l.map((function(e){return e.get("shortLabel")})),t,e,n);d.trackId="ucsc-trackhub-".concat(Object(p.objectHash)(d)),d.assemblyNames=[r],a.push(d)}})),a}function Ot(e){return h.types.compose("UCSCTrackHubConnection",Object(f.BaseConnectionModelFactory)(e),h.types.model({configuration:Object(d.ConfigurationReference)(dt),type:h.types.literal("UCSCTrackHubConnection")}).actions((function(e){return{connect:function(){var t=Object(d.getConf)(e,"name"),r=Object(d.getConf)(e,"hubTxtLocation"),n=Object(p.getSession)(e);(function(e){return mt.apply(this,arguments)})(r).then((function(e){var t=r.uri?{uri:new URL(e.get("genomesFile"),r.uri).href,locationType:"UriLocation"}:{localPath:e.get("genomesFile"),locationType:"LocalPathLocation"};return Promise.all([e,yt(t)])})).then((function(a){var o,i=ut(a,2),u=i[0],c=i[1],l=[],s=ft(c);try{var f=function(){var a=ut(o.value,2),i=a[0],c=a[1],s=Object(d.getConf)(e,"assemblyNames");if(s.length>0&&!s.includes(i))return"break";var f=n.assemblies.find((function(e){return Object(d.readConfObject)(e,"name")===i}));if(!f)throw new Error('Cannot find assembly for "'.concat(i,'" from the genomes file for connection "').concat(t,'"'));var p=r.uri?{uri:new URL(c.get("trackDb"),new URL(u.get("genomesFile"),r.uri)).href,locationType:"UriLocation"}:{localPath:c.get("trackDb"),locationType:"LocalPathLocation"};l.push(Promise.all([p,vt(p),i,f]))};for(s.s();!(o=s.n()).done;){if("break"===f())break}}catch(e){s.e(e)}finally{s.f()}return Promise.all([].concat(l))})).then((function(t){var r,n=ft(t);try{for(n.s();!(r=n.n()).done;){var a=ut(r.value,4),o=a[0],i=a[1],u=a[2],c=a[3],l=wt(i,o,u,Object(d.readConfObject)(c,["sequence","adapter"]));e.addTrackConfs(l)}}catch(e){n.e(e)}finally{n.f()}})).catch((function(t){console.error(t),n.notify('There was a problem connecting to the UCSC Track Hub "'.concat(e.name,'". Please make sure you have entered a valid hub.txt file. The error that was thrown is: "').concat(t,'"'),"error"),n.breakConnection(e.configuration)}))}}})))}function kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return new URL(e),!0}catch(t){return e.startsWith("/")}}function Et(e){return h.types.model("AddTrackModel",{id:g.ElementId,type:h.types.literal("AddTrackWidget"),view:h.types.safeReference(e.pluggableMstType("view","stateModel"))}).volatile((function(){return{trackSource:"fromFile",trackData:void 0,indexTrackData:void 0,altAssemblyName:"",altTrackName:"",altTrackType:"",adapterHint:""}})).actions((function(e){return{setAdapterHint:function(t){e.adapterHint=t},setTrackSource:function(t){e.trackSource=t},setTrackData:function(t){e.trackData=t},setIndexTrackData:function(t){e.indexTrackData=t},setAssembly:function(t){e.altAssemblyName=t},setTrackName:function(t){e.altTrackName=t},setTrackType:function(t){e.altTrackType=t},clearData:function(){e.trackSource="",e.altTrackName="",e.altTrackType="",e.altAssemblyName="",e.adapterHint="",e.indexTrackData=void 0,e.trackData=void 0}}})).views((function(e){return{get trackAdapter(){var t=e.trackData,r=e.indexTrackData,n=e.adapterHint;return t?Object(y.guessAdapter)(t,r,n,e):void 0},get trackName(){return e.altTrackName||(e.trackData?Object(y.getFileName)(e.trackData):"")},get isFtp(){var t,r,n=e.trackData,a=e.indexTrackData;return!!(null!=a&&null!==(t=a.uri)&&void 0!==t&&t.startsWith("ftp://")||null!=n&&null!==(r=n.uri)&&void 0!==r&&r.startsWith("ftp://"))},get isRelativeTrackUrl(){var t,r=null===(t=e.trackData)||void 0===t?void 0:t.uri;return!!r&&!kt(r)},get isRelativeIndexUrl(){var t,r=null===(t=e.indexTrackData)||void 0===t?void 0:t.uri;return!!r&&!kt(r)},get isRelativeUrl(){return this.isRelativeIndexUrl||this.isRelativeTrackUrl},get trackHttp(){var t,r;return null===(t=e.trackData)||void 0===t||null===(r=t.uri)||void 0===r?void 0:r.startsWith("http://")},get indexHttp(){var t,r;return null===(t=e.indexTrackData)||void 0===t||null===(r=t.uri)||void 0===r?void 0:r.startsWith("http://")},get wrongProtocol(){return"https:"===window.location.protocol&&(this.trackHttp||this.indexHttp)},get unsupported(){var e;return(null===(e=this.trackAdapter)||void 0===e?void 0:e.type)===y.UNSUPPORTED},get assembly(){var t;return e.altAssemblyName||(null===(t=e.view.assemblyNames)||void 0===t?void 0:t[0])},get trackType(){return e.altTrackType||(this.trackAdapter?Object(y.guessTrackType)(this.trackAdapter.type,e):"")}}})).views((function(e){return{get warningMessage(){return e.isFtp?"Warning: JBrowse cannot access files using the ftp protocol":e.isRelativeUrl?"Warning: one or more of your files do not provide the protocol e.g.\n          https://, please provide an absolute URL unless you are sure a\n          relative URL is intended.":e.wrongProtocol?"Warning: You entered a http:// resources but we cannot access HTTP\n          resources from JBrowse when it is running on https. Please use an\n          https URL for your track, or access the JBrowse app from the http\n          protocol":""}}}))}var xt=Object(d.ConfigurationSchema)("AddTrackWidget",{}),jt=h.types.model("AddConnectionModel",{id:g.ElementId,type:h.types.literal("AddConnectionWidget")}),Ct=Object(d.ConfigurationSchema)("AddConnectionWidget",{}),St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!e.find((function(e){return t.includes(e)}))};function Pt(e){if(!e.trackId)throw new Error("not a track");return Object(d.readConfObject)(e,"name")||"Reference sequence (".concat(Object(d.readConfObject)(Object(h.getParent)(e),"name"),")")}function Tt(e,t,r){var n={children:[]},a=e.filterText,o=e.view;return t.filter((function(e){return t=a,n=Pt(r=e),o=Object(d.readConfObject)(r,"category")||[],i=t.toLowerCase(),!!n.toLowerCase().includes(i)||o.filter((function(e){return!!e.toLowerCase().includes(i)})).length;var t,r,n,o,i})).forEach((function(e){var t=ct(Object(d.readConfObject)(e,"category")||[]);e.trackId.endsWith("sessionTrack")&&t.unshift(" Session tracks");for(var a=n,i=function(e){var n=t[e],o=a.children.find((function(e){return e.name===n})),i=t.slice(0,e+1).join(",");if(o)a=o;else{var u={children:[],name:n,id:i,isOpenByDefault:!r.get(i)};a.children.push(u),a=u}},u=0;u<t.length;u++)i(u);a.children.splice(a.children.findIndex((function(e){return e.children.length})),0,{id:e.trackId,name:Pt(e),conf:e,checked:!!o.tracks.find((function(t){return t.configuration===e})),children:[]})})),n.children}var Mt=function(e){return h.types.model("HierarchicalTrackSelectorWidget",{id:g.ElementId,type:h.types.literal("HierarchicalTrackSelectorWidget"),collapsed:h.types.map(h.types.boolean),filterText:"",view:h.types.safeReference(e.pluggableMstType("view","stateModel"))}).actions((function(e){return{setView:function(t){e.view=t},toggleCategory:function(t){e.collapsed.set(t,!e.collapsed.get(t))},clearFilterText:function(){e.filterText=""},setFilterText:function(t){e.filterText=t}}})).views((function(t){return{getRefSeqTrackConf:function(r){var n=Object(p.getSession)(t).assemblyManager.get(r),a=null==n?void 0:n.configuration.sequence,o=e.getViewType(t.view.type);if(a){var i,u=ft(a.displays);try{var c=function(){var e=i.value;if(o.displayTypes.find((function(t){return t.name===e.type})))return{v:a}};for(u.s();!(i=u.n()).done;){var l=c();if("object"===Ke(l))return l.v}}catch(e){u.e(e)}finally{u.f()}}},trackConfigurations:function(r){if(!t.view)return[];var n=Object(p.getSession)(t),a=n.tracks,o=n.assemblyManager.get(r);if(!o)return[];var i=t.getRefSeqTrackConf(r);return(i?[i]:[]).concat(ct(a.filter((function(e){var t=Object(d.readConfObject)(e,"assemblyNames"),r=o.allAliases;return St(r,t)})).filter((function(r){var n=e.getViewType(t.view.type).displayTypes.map((function(e){return e.name})),a=r.displays.map((function(e){return e.type}));return St(n,a)}))))},get assemblyNames(){return t.view?t.view.assemblyNames:[]},connectionTrackConfigurations:function(r,n){if(!t.view)return[];var a=n.tracks,o=Object(p.getSession)(t).assemblyManager.get(r);return o&&o.initialized?a.filter((function(e){var t=Object(d.readConfObject)(e,"assemblyNames"),r=o.allAliases;return St(r,t)})).filter((function(r){var n=e.getViewType(t.view.type).displayTypes.map((function(e){return e.name})),a=r.displays.map((function(e){return e.type}));return St(n,a)})):[]},hierarchy:function(e){var r=this,n=Tt(t,t.trackConfigurations(e),t.collapsed),a=Object(p.getSession)(t),o=a.connectionInstances.filter((function(t){var r=Object(d.readConfObject)(t.configuration,"assemblyNames");return 0===r.length||r.includes(e)})).map((function(t,n){var o=a.connections[n];return{id:o.connectionId,name:Object(d.readConfObject)(o,"name"),children:r.connectionHierarchy(e,t),state:{expanded:!0}}}));return{name:"Root",id:"Root",children:[{name:"Tracks",id:"Tracks",children:n}].concat(ct(o))}},connectionHierarchy:function(e,r){return Tt(t,t.connectionTrackConfigurations(e,r),t.collapsed)},allTracksInCategoryPath:function(e,r,n){var a=r?t.connectionHierarchy(r):t.hierarchy(n);e.forEach((function(e){a=a.get(e)||new Map}));var o={};return a.forEach((function(r,n){r.trackId?o[r.trackId]=r:o=Object.assign(o,t.allTracksInCategoryPath(e.concat([n])))})),o}}}))},Rt=Object(d.ConfigurationSchema)("HierarchicalTrackSelectorWidget",{}),At=Object(b.a)((function(){return{closeDialog:{position:"absolute",right:0,top:0},dialogContainer:{margin:15},lockedPluginTooltip:{marginRight:"0.5rem"}}}));function Nt(){var e=At();return a.a.createElement(w.a,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},a.a.createElement(pe.a,null))}function _t(e){var t=e.onClose,r=e.plugin,n=At();return a.a.createElement(O.a,{open:!0,onClose:function(){return t()}},a.a.createElement(k.a,null,a.a.createElement(E.a,{className:n.closeDialog,"aria-label":"close-dialog",onClick:function(){return t()}},a.a.createElement(fe.a,null))),a.a.createElement(x.a,null,a.a.createElement(j.a,null,"Please confirm that you want to remove ",r,". Note: if any resources in this session still use this plugin, it may cause your session to crash"),a.a.createElement(C.a,null,a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){window.setTimeout((function(){t(r)}),500)}},"Confirm"),a.a.createElement(S.a,{variant:"contained",color:"secondary",onClick:function(){t()}},"Cancel"))))}function Lt(e){var t=e.plugin,r=e.model,o=e.pluginManager,i=ut(Object(n.useState)(),2),u=i[0],c=i[1],l=Object(p.getSession)(r),s=l.sessionPlugins,f=null==s?void 0:s.some((function(e){return o.pluginMetadata[t.name].url===e.url})),d=Object(h.getParent)(r,3),m=d.jbrowse,y=d.adminMode;return a.a.createElement(a.a.Fragment,null,u?a.a.createElement(_t,{plugin:u,onClose:function(e){if(e){var r=o.pluginMetadata[t.name];y?m.removePlugin(r):Object(he.isSessionWithSessionPlugins)(l)&&l.removeSessionPlugin(r)}c(void 0)}}):null,a.a.createElement(P.a,{key:t.name},y||f?a.a.createElement(E.a,{"aria-label":"removePlugin","data-testid":"removePlugin-".concat(t.name),onClick:function(){return c(t.name)}},a.a.createElement(fe.a,null)):a.a.createElement(Nt,null),a.a.createElement(j.a,null,t.name)))}var Ft=Object(v.observer)(Lt);function It(e){var t=e.pluginManager,r=e.model,n=t.plugins,o=n.filter((function(e){var r;return null===(r=t.pluginMetadata[e.name])||void 0===r?void 0:r.isCore})).map((function(e){return e.name})),i=n.filter((function(e){return!o.includes(e.name)}));return a.a.createElement(T.a,null,i.length?i.filter((function(e){return e.name.toLowerCase().includes(r.filterText.toLowerCase())})).map((function(e){return a.a.createElement(Ft,{key:e.name,plugin:e,model:r,pluginManager:t})})):a.a.createElement(j.a,null,"No plugins currently installed"))}var Dt=Object(v.observer)(It),Bt=Object(b.a)((function(){return{card:{margin:"1em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center",margin:"0.4em 0em"}}}));function Wt(e){var t=e.plugin,r=e.model,o=e.adminMode,i=Bt(),u=Object(p.getSession)(r),c=Object(h.getEnv)(r).pluginManager,l=Boolean(c.runtimePluginDefinitions.find((function(e){return e.url===t.url}))),s=ut(Object(n.useState)(!1),2),f=s[0],d=s[1],m=l||f,y=Object(h.getParent)(r,3).jbrowse;return a.a.createElement(M.a,{variant:"outlined",key:t.name,className:i.card},a.a.createElement(R.a,null,a.a.createElement("div",{className:i.dataField},a.a.createElement(j.a,{variant:"h5"},a.a.createElement(A.a,{href:"".concat(t.location,"#readme"),target:"_blank",rel:"noopener"},t.name))),a.a.createElement("div",{className:i.dataField},a.a.createElement(ye.a,{style:{marginRight:"0.5em"}}),a.a.createElement(j.a,null,t.authors.join(", "))),a.a.createElement(j.a,{className:i.bold},"Description:"),a.a.createElement(j.a,null,t.description)),a.a.createElement(N.a,null,a.a.createElement(S.a,{variant:"contained",color:"primary",disabled:m,startIcon:l?a.a.createElement(we.a,null):a.a.createElement(ve.a,null),onClick:function(){o?y.addPlugin({name:t.name,url:t.url}):Object(he.isSessionWithSessionPlugins)(u)&&u.addSessionPlugin(t),d(!0)}},l?"Installed":"Install")))}var Vt=Object(v.observer)(Wt),zt=Object(b.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},dialogContent:{display:"flex",flexDirection:"column"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function qt(e){var t=e.open,r=e.onClose,o=e.model,i=zt(),u=ut(Object(n.useState)(""),2),c=u[0],l=u[1],s=ut(Object(n.useState)(""),2),f=s[0],d=s[1],p=ut(Object(n.useState)(""),2),m=p[0],y=p[1],g=ut(Object(n.useState)(""),2),v=g[0],b=g[1],w=ut(Object(n.useState)(!1),2),j=w[0],P=w[1];function T(e){var t=e.target,r=t.name,n=t.value;"umdName"===r&&l(n),"umdUrl"===r&&d(n),"esmUrl"===r&&y(n),"cjsUrl"===r&&b(n)}var M=Object(h.getRoot)(o).jbrowse,R=Boolean(c&&f||m||v);function A(){if(R){var e={};c&&f&&(e.name=c,e.umdUrl=f),m&&(e.esmUrl=m),v&&(e.cjsUrl=v),M.addPlugin(e)}}function N(){l(""),d(""),y(""),b(""),r()}return a.a.createElement(O.a,{open:t,onClose:N},a.a.createElement(k.a,null,"Add custom plugin",a.a.createElement(E.a,{size:"medium",className:i.closeButton,onClick:function(){return r()}},a.a.createElement(fe.a,null))),a.a.createElement("form",{onSubmit:A},a.a.createElement(x.a,{className:i.dialogContent},a.a.createElement(_.a,null,"Enter the name of the plugin and its URL. The name should match what is defined in the plugin's build."),a.a.createElement(L.a,{id:"umd-name-input",name:"umdName",label:"Plugin name",variant:"outlined",value:c,onChange:T}),a.a.createElement(L.a,{id:"umd-url-input",name:"umdUrl",label:"Plugin URL",variant:"outlined",value:f,onChange:T}),a.a.createElement(_.a,{onClick:function(){P(!j)}},a.a.createElement(E.a,{className:Object(Oe.default)(i.expand,rt({},i.expandOpen,j)),"aria-expanded":j,"aria-label":"show more"},a.a.createElement(oe.a,null)),"Advanced options"),a.a.createElement(F.a,{in:j},a.a.createElement("div",{className:i.dialogContent},a.a.createElement(_.a,null,"The above fields assume that the plugin is built in UMD format. If your plugin is in another format, or you have additional builds you want to add (such as a CJS build for using NodeJS APIs in desktop), you can enter the URLs for those builds below."),a.a.createElement(L.a,{id:"esm-url-input",name:"esmUrl",label:"ESM build URL",variant:"outlined",value:m,onChange:T}),a.a.createElement(L.a,{id:"cjs-url-input",name:"cjsUrl",label:"CJS build URL",variant:"outlined",value:v,onChange:T})))),a.a.createElement(C.a,null,a.a.createElement(S.a,{variant:"contained",onClick:N},"Cancel"),a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:A,disabled:!R},"Submit"))))}var Ht=Object(v.observer)(qt),Ut=Object(b.a)((function(e){return{root:{margin:e.spacing(1)},expandIcon:{color:"#fff"},adminBadge:{margin:"0.5em",borderRadius:3,backgroundColor:"#FFB11D",padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"0.5em",display:"flex",justifyContent:"center"}}}));function Gt(e){var t=e.model,r=Ut(),o=ut(Object(n.useState)(),2),i=o[0],u=o[1],c=ut(Object(n.useState)(),2),l=c[0],s=c[1],f=ut(Object(n.useState)(!1),2),d=f[0],m=f[1],y=Object(p.getSession)(t).adminMode,g=Object(h.getEnv)(t).pluginManager;return Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return Qe(ht.mark((function e(){var r,n,a;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jbrowse.org/plugin-store/plugins.json",{signal:t});case 3:if((r=e.sent).ok){e.next=9;break}return e.next=7,r.text();case 7:throw n=e.sent,new Error("Failed to fetch plugin data: ".concat(r.status," ").concat(r.statusText," ").concat(n));case 9:return e.next=11,r.json();case 11:a=e.sent,t.aborted||u(a.plugins),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),s(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))(),function(){e.abort()}}),[]),a.a.createElement("div",{className:r.root},y&&a.a.createElement(a.a.Fragment,null,!p.isElectron&&a.a.createElement("div",{className:r.adminBadge},a.a.createElement(le.a,{style:{marginRight:"0.3em"}}),a.a.createElement(j.a,null,"You are using the ",a.a.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),a.a.createElement("div",{className:r.customPluginButton},a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return m(!0)}},"Add custom plugin")),a.a.createElement(Ht,{open:d,onClose:function(){return m(!1)},model:t})),a.a.createElement(L.a,{label:"Filter plugins",value:t.filterText,onChange:function(e){return t.setFilterText(e.target.value)},fullWidth:!0,InputProps:{endAdornment:a.a.createElement(I.a,{position:"end"},a.a.createElement(E.a,{color:"secondary",onClick:function(){return t.clearFilterText()}},a.a.createElement(ue.a,null)))}}),a.a.createElement(D.a,{defaultExpanded:!0},a.a.createElement(B.a,{expandIcon:a.a.createElement(oe.a,{className:r.expandIcon})},a.a.createElement(j.a,{variant:"h5"},"Installed plugins")),a.a.createElement("div",{style:{margin:"1em"}},a.a.createElement(Dt,{pluginManager:g,model:t}))),a.a.createElement(D.a,{defaultExpanded:!0},a.a.createElement(B.a,{expandIcon:a.a.createElement(oe.a,{className:r.expandIcon})},a.a.createElement(j.a,{variant:"h5"},"Available plugins")),l?a.a.createElement(j.a,{color:"error"},"".concat(l)):i?i.filter((function(e){return!!(p.isElectron||e.esmUrl||e.url||e.umdUrl)&&e.name.toLowerCase().includes(t.filterText.toLowerCase())})).map((function(e){return a.a.createElement(Vt,{key:e.name,plugin:e,model:t,adminMode:!!y})})):a.a.createElement(j.a,null,"Loading...")))}var Jt={__proto__:null,default:Object(v.observer)(Gt)};function Xt(e){return h.types.model("PluginStoreModel",{id:g.ElementId,type:h.types.literal("PluginStoreWidget"),filterText:"",view:h.types.safeReference(e.pluggableMstType("view","stateModel"))}).actions((function(e){return{clearFilterText:function(){e.filterText=""},setFilterText:function(t){e.filterText=t}}}))}var Yt=Object(d.ConfigurationSchema)("PluginStoreWidget",{}),$t=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Qt}))})),Kt=Object(n.lazy)((function(){return Promise.resolve().then((function(){return lr}))})),Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&at(e,t)}(u,e);var t,r,a,o=it(u);function u(){var e;return et(this,u),(e=o.apply(this,arguments)).name="DataManagementPlugin",e.exports={AssemblyManager:Kt,SetDefaultSession:$t},e}return t=u,(r=[{key:"install",value:function(e){e.addConnectionType((function(){return new i.a({name:"UCSCTrackHubConnection",configSchema:dt,stateModel:Ot(e),displayName:"UCSC Track Hub",description:"A track or assembly hub in the Track Hub format",url:"//genome.ucsc.edu/goldenPath/help/hgTrackHubHelp.html#Intro"})})),e.addWidgetType((function(){return new c.a({name:"HierarchicalTrackSelectorWidget",heading:"Available tracks",configSchema:Rt,stateModel:Mt(e),ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Er}))}))})})),e.addWidgetType((function(){return new c.a({name:"AddTrackWidget",heading:"Add a track",configSchema:xt,stateModel:Et(e),ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Dr}))}))})})),e.addWidgetType((function(){return new c.a({name:"AddConnectionWidget",heading:"Add a connection",configSchema:Ct,stateModel:jt,ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Hr}))}))})})),e.addWidgetType((function(){return new c.a({name:"PluginStoreWidget",heading:"Plugin store",configSchema:Yt,stateModel:Xt(e),ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Jt}))}))})}))}},{key:"configure",value:function(e){}}])&&tt(t.prototype,r),a&&tt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(s.a);var Qt={__proto__:null,default:Object(v.observer)((function(e){var t,r=e.rootModel,n=e.onClose;if(!r)return null;if("object"!==Ke(t=r)||!t||!("jbrowse"in t))return console.error("Incorrect rootmodel"),null;var o=r.jbrowse,i=r.session;return a.a.createElement(O.a,{open:!0,onClose:n},a.a.createElement(k.a,null,"Set default session"),a.a.createElement(x.a,null,a.a.createElement(j.a,null,'Select "Set current session as default" to make your current session saved to the config file. You can also hit "Clear default session", which would remove the default session from the config.')),a.a.createElement(C.a,null,a.a.createElement(S.a,{variant:"contained",onClick:function(){o.setDefaultSessionConf({name:"New session"}),n()}},"Clear default session"),a.a.createElement(S.a,{color:"secondary",variant:"contained",onClick:function(){return n()}},"Cancel"),a.a.createElement(S.a,{color:"primary",variant:"contained",onClick:function(){o.setDefaultSessionConf(i),n()}},"Set current session as default")))}))},er=Object(b.a)((function(){return{table:{minWidth:500,minHeight:150},buttonCell:{padding:3},button:{display:"inline-block",padding:3,minHeight:0,minWidth:0}}})),tr=Object(v.observer)((function(e){var t=e.rootModel,r=e.setIsAssemblyBeingEdited,n=e.setAssemblyBeingEdited,o=er();var i=t.jbrowse.assemblies.map((function(e){var i=Object(d.readConfObject)(e,"name"),u=Object(d.readConfObject)(e,"displayName"),c=Object(d.readConfObject)(e,"aliases");return a.a.createElement(W.a,{key:i},a.a.createElement(V.a,null,i),a.a.createElement(V.a,null,u),a.a.createElement(V.a,null,c?c.toString():""),a.a.createElement(V.a,{className:o.buttonCell},a.a.createElement(E.a,{"data-testid":"".concat(i,"-edit"),className:o.button,onClick:function(){r(!0),n(e)}},a.a.createElement(je.a,{color:"primary"})),a.a.createElement(E.a,{"data-testid":"".concat(i,"-delete"),className:o.button,onClick:function(){!function(e){t.jbrowse.removeAssemblyConf(e)}(i)}},a.a.createElement(Se.a,{color:"error"}))))}));return a.a.createElement(z.a,{component:q.a},a.a.createElement(H.a,{className:o.table},a.a.createElement(U.a,null,a.a.createElement(W.a,null,a.a.createElement(V.a,null,a.a.createElement(j.a,{variant:"h5"},"Name")),a.a.createElement(V.a,null,a.a.createElement(j.a,{variant:"h5"},"Display name")),a.a.createElement(V.a,null,a.a.createElement(j.a,{variant:"h5"},"Aliases")),a.a.createElement(V.a,null,a.a.createElement(j.a,{variant:"h5"},"Actions")))),a.a.createElement(G.a,null,i)))})),rr=Object(b.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",padding:e.spacing(0,3)},paper:{margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2)},createButton:{marginTop:"1em",justifyContent:"center"},paperContent:{flex:"auto",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(1),overflow:"auto"}}})),nr=Object(v.observer)((function(e){var t=e.adapterSelection,r=e.setAdapterSelection,n=e.adapterTypes;return a.a.createElement(L.a,{value:t,label:"Type",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:function(e){r(e.target.value)}},n.map((function(e){return a.a.createElement(J.a,{key:e,value:e},e)})))})),ar=Object(v.observer)((function(e){var t=e.adapterSelection,r=e.fastaLocation,n=e.setFastaLocation,o=e.faiLocation,i=e.setFaiLocation,u=e.gziLocation,c=e.setGziLocation,l=e.twoBitLocation,s=e.setTwoBitLocation,f=e.chromSizesLocation,d=e.setChromSizesLocation;return"IndexedFastaAdapter"===t||"BgzipFastaAdapter"===t?a.a.createElement(X.a,{container:!0,spacing:2},a.a.createElement(X.a,{item:!0},a.a.createElement(Te.a,{name:"fastaLocation",location:r,setLocation:function(e){return n(e)}})),a.a.createElement(X.a,{item:!0},a.a.createElement(Te.a,{name:"faiLocation",location:o,setLocation:function(e){return i(e)}})),"BgzipFastaAdapter"===t?a.a.createElement(X.a,{item:!0},a.a.createElement(Te.a,{name:"gziLocation",location:u,setLocation:function(e){return c(e)}})):null):"TwoBitAdapter"===t?a.a.createElement(X.a,{container:!0,spacing:2},a.a.createElement(X.a,{item:!0},a.a.createElement(Te.a,{name:"twoBitLocation",location:l,setLocation:function(e){return s(e)}})),a.a.createElement(X.a,{item:!0},a.a.createElement(Te.a,{name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:f,setLocation:function(e){return d(e)}}))):null})),or={uri:""},ir=Object(v.observer)((function(e){var t=e.rootModel,r=e.setFormOpen,o=rr(),i=["IndexedFastaAdapter","BgzipFastaAdapter","TwoBitAdapter"],u=ut(Object(n.useState)(""),2),c=u[0],l=u[1],s=ut(Object(n.useState)(""),2),f=s[0],d=s[1],p=ut(Object(n.useState)(i[0]),2),h=p[0],m=p[1],y=ut(Object(n.useState)(or),2),g=y[0],v=y[1],b=ut(Object(n.useState)(or),2),w=b[0],O=b[1],k=ut(Object(n.useState)(or),2),E=k[0],x=k[1],j=ut(Object(n.useState)(or),2),C=j[0],P=j[1],T=ut(Object(n.useState)(or),2),M=T[0],R=T[1];return a.a.createElement("div",{className:o.root},a.a.createElement(q.a,{className:o.paper},a.a.createElement(L.a,{id:"assembly-name",inputProps:{"data-testid":"assembly-name"},label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:c,onChange:function(e){return l(e.target.value)}}),a.a.createElement(L.a,{id:"assembly-name",inputProps:{"data-testid":"assembly-display-name"},label:"Assembly display name",helperText:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:f,onChange:function(e){return d(e.target.value)}}),a.a.createElement(nr,{adapterSelection:h,setAdapterSelection:m,adapterTypes:i}),a.a.createElement("div",{className:o.paperContent},a.a.createElement(ar,{adapterSelection:h,fastaLocation:g,setFastaLocation:v,faiLocation:w,setFaiLocation:O,gziLocation:E,setGziLocation:x,twoBitLocation:C,setTwoBitLocation:P,chromSizesLocation:M,setChromSizesLocation:R}))),a.a.createElement(X.a,{container:!0,className:o.createButton},a.a.createElement(X.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(ve.a,null),onClick:function(){var e;""===c?t.session.notify("Can't create an assembly without a name"):(r(!1),"IndexedFastaAdapter"===h?e={name:c,displayName:f,sequence:{adapter:{type:"IndexedFastaAdapter",fastaLocation:g,faiLocation:w}}}:"BgzipFastaAdapter"===h?e={name:c,displayName:f,sequence:{adapter:{type:"BgzipFastaAdapter",fastaLocation:g,faiLocation:w,gziLocation:E}}}:"TwoBitAdapter"===h&&(e={name:c,displayName:f,sequence:{adapter:{type:"TwoBitAdapter",twoBitLocation:C,chromSizesLocation:M}}}),t.jbrowse.addAssemblyConf(e),t.session.notify("Successfully added ".concat(c," assembly to JBrowse 2"),"success"))}},"Create new assembly"))))})),ur=Object(v.observer)((function(e){var t=e.assembly;return a.a.createElement(Me.ConfigurationEditor,{model:{target:t}})})),cr=Object(b.a)((function(e){return{titleBox:{color:"#fff",backgroundColor:e.palette.primary.main,textAlign:"center"},dialogContent:{width:"100%"},backButton:{color:"#fff",position:"absolute",left:e.spacing(4),top:e.spacing(4)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));var lr={__proto__:null,default:Object(v.observer)((function(e){var t=e.rootModel,r=e.onClose,o=cr(),i=ut(Object(n.useState)(!1),2),u=i[0],c=i[1],l=ut(Object(n.useState)(!1),2),s=l[0],f=l[1],d=ut(Object(n.useState)(),2),p=d[0],h=d[1],m=!u&&!s;return a.a.createElement(O.a,{open:!0,onClose:function(){return r(!1)}},a.a.createElement(k.a,{className:o.titleBox},m?"Assembly manager":null,u?a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{"aria-label":"back",className:o.backButton,onClick:function(){return c(!1)}},a.a.createElement(Ee.a,null)),"Add new assembly"):null,s?a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{"aria-label":"back",className:o.backButton,onClick:function(){return f(!1)}},a.a.createElement(Ee.a,null)),function(e){if(void 0!==e)return e.name;return null}(p)):null,a.a.createElement(E.a,{"aria-label":"close",className:o.closeButton,onClick:function(){return r(!1)}},a.a.createElement(fe.a,null))),a.a.createElement(x.a,null,a.a.createElement("div",{className:o.dialogContent},m?a.a.createElement(tr,{rootModel:t,setIsAssemblyBeingEdited:f,setAssemblyBeingEdited:h}):null,s?a.a.createElement(ur,{assembly:p}):null,u?a.a.createElement(ir,{rootModel:t,setFormOpen:c}):null)),a.a.createElement(C.a,null,m?a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{color:"secondary",variant:"contained",onClick:function(){return r(!1)}},"Close"),a.a.createElement(S.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(ve.a,null),onClick:function(){return c(!0)}},"Add new assembly")):null))}))},sr=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Gr}))})),fr=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Xr}))})),dr=Object(n.lazy)((function(){return Promise.resolve().then((function(){return Kr}))})),pr=Object(n.lazy)((function(){return Promise.resolve().then((function(){return en}))})),hr=Object(b.a)((function(e){var t,r;return{searchBox:{marginBottom:e.spacing(2)},menuIcon:{marginRight:e.spacing(1),marginBottom:0},fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)},compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:"#eee"}},accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:null===(t=e.palette.tertiary)||void 0===t?void 0:t.main,color:null===(r=e.palette.tertiary)||void 0===r?void 0:r.contrastText,width:"100%",display:"flex",paddingLeft:5},accordionText:{margin:"auto 0"}}})),mr=function(e){var t=e.data,r=e.isOpen,n=e.style,o=e.setOpen,i=t.isLeaf,u=t.nestingLevel,c=t.checked,l=t.id,s=t.name,f=t.onChange,p=t.toggleCollapse,h=t.conf,m=t.onMoreInfo,y=t.drawerPosition,g=hr(),v=10*u+(i?10:0),b=s&&(s.endsWith("(Unsupported)")||s.endsWith("(Unknown)")),O=h&&Object(d.readConfObject)(h,["description"])||"";return a.a.createElement("div",{style:n,className:i?void 0:g.accordionBase},new Array(u).fill(0).map((function(e,t){return a.a.createElement("div",{key:"mark-".concat(t),style:{left:10*t+4,height:n.height},className:g.nestingLevelMarker})})),a.a.createElement("div",{className:i?void 0:g.accordionCard,onClick:function(){p(l),o(!r)},style:{marginLeft:v,whiteSpace:"nowrap",width:"100%"}},a.a.createElement("div",{className:i?void 0:g.accordionColor},i?a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{title:O,placement:"left"===y?"right":"left"},a.a.createElement(Y.a,{className:g.checkboxLabel,control:a.a.createElement($.a,{className:g.compactCheckbox,checked:c,onChange:function(){return f(l)},color:"primary",disabled:b,inputProps:{"data-testid":"htsTrackEntry-".concat(l)}}),label:s})),a.a.createElement(E.a,{onClick:function(e){return m({target:e.currentTarget,id:l,conf:h})},color:"secondary","data-testid":"htsTrackEntryMenu-".concat(l)},a.a.createElement(De.a,null))):a.a.createElement("div",{className:g.accordionText},a.a.createElement(j.a,null,r?a.a.createElement(Ae.a,null):a.a.createElement(_e.a,null),s)))))},yr=function(e,t,r){var n=!!e.conf;return{data:$e($e({defaultHeight:n?22:40,isLeaf:n,isOpenByDefault:!0,nestingLevel:t},e),r),nestingLevel:t,node:e}},gr=Object(v.observer)((function(e){var t,r=e.height,o=e.tree,i=e.model,u=i.filterText,c=i.view,l=Object(n.useRef)(null),s=ut(Object(n.useState)(),2),f=s[0],d=s[1],h=Object(p.getSession)(i),m=h.drawerPosition,y=Object(n.useMemo)((function(){return{onChange:function(e){return c.toggleTrack(e)},toggleCollapse:function(e){return i.toggleCategory(e)},onMoreInfo:d,drawerPosition:m}}),[c,i,m]),g=Object(n.useCallback)(ht.mark((function e(){var t,r,n,a;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<o.children.length)){e.next=7;break}return e.next=4,yr(o.children[t],0,y);case 4:t++,e.next=1;break;case 7:return void(e.next=10);case 10:r=e.sent,n=0;case 12:if(!(n<r.node.children.length)){e.next=19;break}return a=r.node.children[n],e.next=16,yr(a,r.nestingLevel+1,y);case 16:n++,e.next=12;break;case 19:e.next=7;break;case 21:case"end":return e.stop()}}),e)})),[o,y]),v=null==f?void 0:f.conf,b=v&&(null===(t=h.getTrackActionMenuItems)||void 0===t?void 0:t.call(h,v))||[];return Object(n.useEffect)((function(){l.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})}),[o,u]),a.a.createElement(a.a.Fragment,null,a.a.createElement(He.a,{ref:l,treeWalker:g,height:r},mr),a.a.createElement(qe.a,{anchorEl:null==f?void 0:f.target,menuItems:b,onMenuItemClick:function(e,t){t(),d(void 0)},open:Boolean(f),onClose:function(){return d(void 0)}}))})),vr=function(e){var t=e.tree,r=e.model,n=e.offset;return"undefined"==typeof jest?a.a.createElement(Ve.a,{disableWidth:!0},(function(e){var o=e.height;return a.a.createElement(gr,{height:o-n,model:r,tree:t})})):a.a.createElement(gr,{height:9e3,model:r,tree:t})},br=function(e){var t=e.overrideDimensions,r=e.children;return t?a.a.createElement("div",{style:$e({},t)},r):a.a.createElement(a.a.Fragment,null,r)},wr=Object(v.observer)((function(e){var t=e.model,r=e.toolbarHeight,o=e.overrideDimensions,i=hr(),u=Object(p.getSession)(t),c=ut(Object(n.useState)(null),2),l=c[0],s=c[1];function f(){s(null)}return a.a.createElement(br,{overrideDimensions:o},a.a.createElement(kr,{model:t,toolbarHeight:r,overrideDimensions:o}),a.a.createElement(K.a,{color:"secondary",className:i.fab,onClick:function(e){s(e.currentTarget)}},a.a.createElement(ve.a,null)),a.a.createElement(Z.a,{anchorEl:l,open:Boolean(l),onClose:function(){return s(null)}},a.a.createElement(J.a,{onClick:function(){f();var e=u.addWidget("AddConnectionWidget","addConnectionWidget");u.showWidget(e)}},"Add connection"),a.a.createElement(J.a,{onClick:function(){f();var e=u.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id});u.showWidget(e)}},"Add track")))})),Or=Object(v.observer)((function(e){var t=e.model,r=e.setHeaderHeight,o=e.setAssemblyIdx,i=e.assemblyIdx,u=hr(),c=Object(p.getSession)(t),l=ut(Object(n.useState)(),2),s=l[0],f=l[1],h=ut(Object(n.useState)(),2),m=h[0],y=h[1],g=ut(Object(n.useState)(),2),v=g[0],b=g[1],w=ut(Object(n.useState)(),2),O=w[0],k=w[1],x=ut(Object(n.useState)(!1),2),j=x[0],C=x[1],S=ut(Object(n.useState)(!1),2),P=S[0],T=S[1],M=t.assemblyNames,R=M[i];function A(e,t){var r=Object(d.readConfObject)(e,"name"),n=c.prepareToBreakConnection(e);if(n){var a=ut(n,2),o=a[0],i=a[1];Object.keys(i).length>0?b({connectionConf:e,safelyBreakConnection:o,dereferenceTypeCount:i,name:r}):o()}t&&k({name:r,connectionConf:e})}var N=[{label:"Turn on/off connections...",onClick:function(){return T(!0)}},{label:"Delete connections...",onClick:function(){return C(!0)}}],_=M.length>1?[{label:"Select assembly...",subMenu:M.map((function(e,t){return{label:e,onClick:function(){o(t)}}}))}]:[],F=[{label:"Add track...",onClick:function(){c.showWidget(c.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id}))}}].concat(_);return a.a.createElement("div",{ref:function(e){return r((null==e?void 0:e.getBoundingClientRect().height)||0)},"data-testid":"hierarchical_track_selector"},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(E.a,{className:u.menuIcon,onClick:function(e){y(e.currentTarget)}},a.a.createElement(Fe.a,null)),a.a.createElement(E.a,{className:u.menuIcon,onClick:function(e){f(e.currentTarget)}},a.a.createElement(We.a,null)),a.a.createElement(L.a,{className:u.searchBox,label:"Filter tracks",value:t.filterText,onChange:function(e){return t.setFilterText(e.target.value)},fullWidth:!0,InputProps:{endAdornment:a.a.createElement(I.a,{position:"end"},a.a.createElement(E.a,{color:"secondary",onClick:t.clearFilterText},a.a.createElement(ue.a,null)))}})),a.a.createElement(qe.a,{anchorEl:s,open:Boolean(s),onMenuItemClick:function(e,t){t(),f(void 0)},onClose:function(){f(void 0)},menuItems:[{label:"Add connection",onClick:function(){c.showWidget(c.addWidget("AddConnectionWidget","addConnectionWidget"))}}].concat(N)}),a.a.createElement(qe.a,{anchorEl:m,open:Boolean(m),onMenuItemClick:function(e,t){t(),y(void 0)},onClose:function(){y(void 0)},menuItems:F}),a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},v?a.a.createElement(sr,{modalInfo:v,setModalInfo:b,session:c}):O?a.a.createElement(fr,{handleClose:function(){k(void 0)},deleteDialogDetails:O,session:c}):null,j?a.a.createElement(dr,{handleClose:function(){return C(!1)},breakConnection:A,session:c}):null,P?a.a.createElement(pr,{handleClose:function(){return T(!1)},session:c,breakConnection:A,assemblyName:R}):null))})),kr=Object(v.observer)((function(e){var t=e.model,r=e.toolbarHeight,o=void 0===r?0:r,i=ut(Object(n.useState)(0),2),u=i[0],c=i[1],l=ut(Object(n.useState)(0),2),s=l[0],f=l[1],d=t.assemblyNames[u];return d?a.a.createElement(a.a.Fragment,null,a.a.createElement(Or,{model:t,setHeaderHeight:f,setAssemblyIdx:c,assemblyIdx:u}),a.a.createElement(vr,{tree:t.hierarchy(d),model:t,offset:o+s})):null})),Er={__proto__:null,default:wr},xr=Object(b.a)((function(e){return{spacing:{marginBottom:e.spacing(3)}}}));function jr(e){var t,r=e.trackAdapter,n=e.trackType,o=xr();return"SNPCoverageAdapter"===r.type?a.a.createElement(j.a,{className:o.spacing},"Selected ",a.a.createElement("code",null,n),". Using adapter"," ",a.a.createElement("code",null,r.type)," with subadapter"," ",a.a.createElement("code",null,null===(t=r.subadapter)||void 0===t?void 0:t.type),". Please enter a track name and, if necessary, update the track type."):a.a.createElement(j.a,{className:o.spacing},"Using adapter ",a.a.createElement("code",null,r.type)," and guessing track type"," ",a.a.createElement("code",null,n),". Please enter a track name and, if necessary, update the track type.")}var Cr=Object(v.observer)((function(e){var t,r,n,o=e.model,i=xr(),u=Object(p.getSession)(o),c=o.trackAdapter,l=Object(h.getEnv)(u).pluginManager.getElementTypesInGroup("adapter");return a.a.createElement(L.a,{className:i.spacing,value:"UNKNOWN"!==(null==c?void 0:c.type)?null==c?void 0:c.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){return o.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}}},l.filter((function(e){var t,r;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI||null!==(r=e.adapterMetadata)&&void 0!==r&&r.category)})).map((function(e){var t,r;return a.a.createElement(J.a,{key:e.name,value:e.name},null!==(t=e.adapterMetadata)&&void 0!==t&&t.displayName?null===(r=e.adapterMetadata)||void 0===r?void 0:r.displayName:e.name)})),(t=l.filter((function(e){var t;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI)})),r="",n=[],t.forEach((function(e){var t,o,i,u,c,l,s,f;null!==(t=e.adapterMetadata)&&void 0!==t&&t.category&&(r!==(null===(o=e.adapterMetadata)||void 0===o?void 0:o.category)&&(r=null===(c=e.adapterMetadata)||void 0===c?void 0:c.category,n.push(a.a.createElement(Q.a,{key:null===(l=e.adapterMetadata)||void 0===l?void 0:l.category,value:null===(s=e.adapterMetadata)||void 0===s?void 0:s.category},null===(f=e.adapterMetadata)||void 0===f?void 0:f.category))),n.push(a.a.createElement(J.a,{key:e.name,value:e.name},null!==(i=e.adapterMetadata)&&void 0!==i&&i.displayName?null===(u=e.adapterMetadata)||void 0===u?void 0:u.displayName:e.name)))})),n))}));function Sr(e){var t=e.model,r=xr();return a.a.createElement(a.a.Fragment,null,a.a.createElement(j.a,{className:r.spacing},"JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",a.a.createElement(A.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse to see if they support this data type or"," ",a.a.createElement(A.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."),a.a.createElement(Cr,{model:t}))}var Pr=Object(v.observer)((function(e){var t=e.model,r=xr(),n=Object(p.getSession)(t),o=t.trackType,i=Object(h.getEnv)(n).pluginManager.getElementTypesInGroup("track");return a.a.createElement(L.a,{className:r.spacing,value:o,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){t.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}}},i.map((function(e){var t=e.name;return a.a.createElement(J.a,{key:t,value:t},t)})))})),Tr=Object(v.observer)((function(e){var t=e.model,r=Object(p.getSession)(t),n=t.assembly;return a.a.createElement(L.a,{value:n,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return t.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}},r.assemblies.map((function(e){return Object(d.readConfObject)(e,"name")})).map((function(e){return a.a.createElement(J.a,{key:e,value:e},e)})))}));function Mr(e){var t=e.model,r=xr(),n=t.trackName,o=t.trackAdapter,i=t.trackType,u=t.warningMessage,c=t.adapterHint;return t.unsupported?a.a.createElement(j.a,{className:r.spacing},"This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",a.a.createElement(A.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse or"," ",a.a.createElement(A.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."):(null==o?void 0:o.type)===y.UNKNOWN?a.a.createElement(Sr,{model:t}):(""===c&&o&&t.setAdapterHint(o.type),null!=o&&o.type?a.a.createElement("div",null,o?a.a.createElement(jr,{trackAdapter:o,trackType:i}):null,u?a.a.createElement(j.a,{style:{color:"orange"}},u):null,a.a.createElement(L.a,{className:r.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:n,onChange:function(e){return t.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),a.a.createElement(Cr,{model:t}),a.a.createElement(Pr,{model:t}),a.a.createElement(Tr,{model:t})):a.a.createElement(j.a,null,"Could not recognize this data type."))}var Rr=Object(v.observer)(Mr),Ar=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));function Nr(e){var t=e.model,r=Ar(),n=Object(h.getRoot)(t);return a.a.createElement(q.a,{className:r.paper},a.a.createElement(Ge.FileSelector,{name:"Main file",description:"",location:t.trackData,setLocation:t.setTrackData,setName:t.setTrackName,rootModel:n}),a.a.createElement("div",{className:r.spacer}),a.a.createElement(Ge.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:t.indexTrackData,setLocation:t.setIndexTrackData,setName:t.setTrackName,rootModel:n}))}var _r=Object(v.observer)(Nr),Lr=Object(b.a)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),Fr=["Enter track data","Confirm track type"];function Ir(e){var t=e.model,r=ut(Object(n.useState)(0),2),o=r[0],i=r[1],u=Lr(),c=Object(p.getSession)(t),l=t.assembly,s=t.trackAdapter,f=t.trackData,h=t.trackName,m=t.trackType,y=ut(Object(n.useState)(),2),g=y[0],v=y[1];function b(){return w.apply(this,arguments)}function w(){return(w=Qe(ht.mark((function e(){var r,n;return ht.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o===Fr.length-1){e.next=3;break}return i(o+1),e.abrupt("return");case 3:r="".concat(h.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(c.adminMode?"":"-sessionTrack"),n=c.assemblyManager.get(l),s&&"UNKNOWN"!==s.type?(c.addTrackConf({trackId:r,type:m,name:h,assemblyNames:[l],adapter:$e($e({},s),{},{sequenceAdapter:Object(d.getConf)(n,["sequence","adapter"])})}),t.view?t.view.showTrack(r):c.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),t.clearData(),c.hideWidget(t)):v("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){v(void 0),i(o-1)}function k(){switch(o){case 0:return!f;case 1:return!(h&&m&&null!=s&&s.type&&l);default:return!0}}return a.a.createElement("div",{className:u.root},a.a.createElement(ee.a,{className:u.stepper,activeStep:o,orientation:"vertical"},Fr.map((function(e,r){return a.a.createElement(te.a,{key:e},a.a.createElement(re.a,null,e),a.a.createElement(ne.a,null,function(e){switch(e){case 0:return a.a.createElement(_r,{model:t});case 1:return a.a.createElement(Rr,{model:t});default:return a.a.createElement(j.a,null,"Unknown step")}}(r),a.a.createElement("div",{className:u.actionsContainer},a.a.createElement(S.a,{disabled:0===o,onClick:O,className:u.button},"Back"),a.a.createElement(S.a,{disabled:k(),variant:"contained",color:"primary",onClick:b,className:u.button,"data-testid":"addTrackNextButton"},o===Fr.length-1?"Add":"Next")),g?a.a.createElement("div",{className:u.alertContainer},a.a.createElement(Ue.a,{severity:"error"},g)):null))}))))}var Dr={__proto__:null,default:Object(v.observer)(Ir)},Br=Object(v.observer)((function(e){var t=e.connectionType,r=e.model,o=e.setModelReady,i=t.configEditorComponent||Me.ConfigurationEditor;return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(i,{model:{target:r},setModelReady:o}))}));function Wr(e){var t=e.connectionTypeChoices,r=e.connectionType,o=e.setConnectionType;return Object(n.useEffect)((function(){r.name||o(t[0])})),r.name?a.a.createElement("form",{autoComplete:"off"},a.a.createElement(L.a,{value:r.name,label:"connectionType",helperText:r.description?a.a.createElement(a.a.Fragment,null,r.description,r.url?a.a.createElement(E.a,{href:r.url,rel:"noopener noreferrer",target:"_blank",color:"secondary"},a.a.createElement(Xe.a,null)):null):null,select:!0,fullWidth:!0,onChange:function(e){o(t.find((function(t){return t.name===e.target.value})))},variant:"outlined"},t.map((function(e){return a.a.createElement(J.a,{key:e.name,value:e.name},e.displayName||e.name)})))):null}var Vr=Object(b.a)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}}})),zr=["Select a Connection Type","Configure Connection"];function qr(e){var t=e.model,r=ut(Object(n.useState)({}),2),o=r[0],i=r[1],u=ut(Object(n.useState)({}),2),c=u[0],l=u[1],s=ut(Object(n.useState)(!0),2),f=s[0],d=s[1],m=ut(Object(n.useState)(0),2),y=m[0],g=m[1],v=Vr(),b=Object(p.getSession)(t),w=Object(h.getEnv)(b).pluginManager;function O(e){i(e),l(e.configSchema.create({connectionId:"".concat(e.name,"-").concat(Date.now())},Object(h.getEnv)(t)))}function k(){var e;y===zr.length-1?(e=b.addConnectionConf(c),b.makeConnection(e),b.hideWidget(t)):g(y+1)}function E(){g(y-1)}return a.a.createElement("div",{className:v.root},a.a.createElement(ee.a,{className:v.stepper,activeStep:y,orientation:"vertical"},zr.map((function(e){return a.a.createElement(te.a,{key:e},a.a.createElement(re.a,null,e),a.a.createElement(ne.a,null,function(){switch(y){case 0:return a.a.createElement(Wr,{connectionTypeChoices:w.getElementTypesInGroup("connection"),connectionType:o,setConnectionType:O});case 1:return a.a.createElement(Br,{connectionType:o,model:c,setModelReady:d});default:return a.a.createElement(j.a,null,"Unknown step")}}(),a.a.createElement("div",{className:v.actionsContainer},a.a.createElement(S.a,{disabled:0===y,onClick:E,className:v.button},"Back"),a.a.createElement(S.a,{disabled:!(0===y&&o.name||1===y&&c&&f),variant:"contained",color:"primary",onClick:k,className:v.button,"data-testid":"addConnectionNext"},y===zr.length-1?"Connect":"Next"))))}))))}qr.propTypes={model:v.PropTypes.observableObject.isRequired};var Hr={__proto__:null,default:Object(v.observer)(qr)};function Ur(e){var t=e.modalInfo,r=void 0===t?{}:t,n=e.setModalInfo,o=r.name,i=r.dereferenceTypeCount,u=r.safelyBreakConnection;return a.a.createElement(O.a,{open:!0},a.a.createElement(k.a,null,'Close connection "',o,'"'),a.a.createElement(x.a,null,i?a.a.createElement(a.a.Fragment,null,a.a.createElement(_.a,null,"Closing this connection will close:"),a.a.createElement(T.a,null,Object.entries(i).map((function(e){var t=ut(e,2),r=t[0],n=t[1];return a.a.createElement(P.a,{key:r},"".concat(n," ").concat(r))})))):null,a.a.createElement(_.a,null,"Are you sure you want to close this connection?")),a.a.createElement(C.a,null,a.a.createElement(S.a,{onClick:function(){n()},color:"primary"},"Cancel"),a.a.createElement(S.a,{variant:"contained",onClick:r?function(){u&&u(),n()}:function(){},color:"primary"},"OK")))}var Gr={__proto__:null,default:Object(v.observer)(Ur)};function Jr(e){var t=e.deleteDialogDetails,r=e.session,n=e.handleClose,o=t.connectionConf,i=t.name;return a.a.createElement(O.a,{open:!0},a.a.createElement(k.a,null,'Delete connection "',i,'"'),a.a.createElement(x.a,null,a.a.createElement(_.a,null,"Are you sure you want to delete this connection?")),a.a.createElement(C.a,null,a.a.createElement(S.a,{onClick:function(){return n()},color:"primary"},"Cancel"),a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){var e;o&&(null===(e=r.deleteConnection)||void 0===e||e.call(r,o));n()}},"OK")))}var Xr={__proto__:null,default:Object(v.observer)(Jr)},Yr=Object(b.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{margin:e.spacing(4),width:500}}}));function $r(e){var t=e.session,r=e.handleClose,n=e.breakConnection,o=Yr(),i=t.adminMode,u=t.connections,c=t.sessionConnections;return a.a.createElement(O.a,{open:!0,onClose:r,maxWidth:"lg"},a.a.createElement(k.a,null,"Delete connections",a.a.createElement(E.a,{className:o.closeButton,onClick:function(){return r()}},a.a.createElement(fe.a,null))),a.a.createElement(x.a,null,a.a.createElement(j.a,null,"Click the X icon to delete the connection from your config completely"),a.a.createElement("div",{className:o.connectionContainer},u.map((function(e){var t=Object(d.readConfObject)(e,"name");return a.a.createElement("div",{key:"conn-".concat(t)},a.a.createElement(j.a,null,i||null!=c&&c.includes(e)?a.a.createElement(E.a,{onClick:function(){return n(e,!0)}},a.a.createElement(fe.a,{color:"error"})):a.a.createElement(w.a,{title:"Unable to delete connection in config file as non-admin user"},a.a.createElement(E.a,null,a.a.createElement(fe.a,{color:"disabled"}))),t))})),u.length?null:a.a.createElement(j.a,null,"No connections found"))),a.a.createElement(C.a,null,a.a.createElement(S.a,{onClick:function(){return r()},variant:"contained",color:"primary"},"Close")))}var Kr={__proto__:null,default:Object(v.observer)($r)},Zr=Object(b.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{width:500,margin:e.spacing(4)}}}));function Qr(e){var t=e.session,r=e.handleClose,n=e.assemblyName,o=e.breakConnection,i=Zr(),u=t.connections,c=t.connectionInstances,l=u.filter((function(e){var t=Object(d.readConfObject)(e,"assemblyNames");return 0===t.length||t.includes(n)}));return a.a.createElement(O.a,{open:!0,onClose:r,maxWidth:"lg"},a.a.createElement(k.a,null,"Turn on/off connections",a.a.createElement(E.a,{className:i.closeButton,onClick:function(){return r()}},a.a.createElement(fe.a,null))),a.a.createElement(x.a,null,a.a.createElement(j.a,null,"Use the checkbox to turn on/off connections"),a.a.createElement("div",{className:i.connectionContainer},l.map((function(e){var r=Object(d.readConfObject)(e,"name");return a.a.createElement("div",{key:e.connectionId},a.a.createElement(Y.a,{control:a.a.createElement($.a,{checked:!(null==c||!c.find((function(e){return r===e.name}))),onChange:function(){var r;null!=c&&c.find((function(t){return t.name===Object(d.readConfObject)(e,"name")}))?o(e):null===(r=t.makeConnection)||void 0===r||r.call(t,e)},color:"primary"}),label:r}))})),l.length?null:a.a.createElement(j.a,null,"No connections found for ",n))),a.a.createElement(C.a,null,a.a.createElement(S.a,{onClick:function(){return r()},variant:"contained",color:"primary"},"Close")))}var en={__proto__:null,default:Object(v.observer)(Qr)};t.default=Zt},1857:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.Cable=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z"}))},t.ContentCopy=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"}))},t.ContentCut=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z"}))},t.ContentPaste=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"}))},t.DNA=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z"}))},t.Save=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}))},t.SaveAs=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{fill:"currentColor",d:"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z"}))},t.TrackSelector=function(e){return o.default.createElement(a.default,e,o.default.createElement("path",{d:"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"}))};var a=n(r(150)),o=n(r(1))},1858:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o=r(34),i=r(46),u=r(33),c=(0,u.makeStyles)((function(){return{importFormEntry:{minWidth:180}}})),l=(0,o.observer)((function(e){var t=e.session,r=e.onChange,n=e.selected,o=c(),l=t.assemblyNames,s=t.assemblyManager,f=l.length?"":"No configured assemblies";return a.default.createElement(u.TextField,{select:!0,label:"Assembly",variant:"outlined",margin:"normal",helperText:f||"Select assembly to view",value:f?"":n,inputProps:{"data-testid":"assembly-selector"},onChange:function(e){return r(e.target.value)},error:!!f,disabled:!!f,className:o.importFormEntry},l.map((function(e){var t=s.get(e),r=t?(0,i.getConf)(t,"displayName"):"";return a.default.createElement(u.MenuItem,{key:e,value:e},r||e)})))}));t.default=l},1859:function(e,t,r){"use strict";r.r(t);var n=r(179),a=r.n(n),o=r(210),i=r(254),u=r.n(i),c=r(252),l=r.n(c),s=r(160),f=r.n(s),d=r(171),p=r(142),h=r(46),m=r(605),y=r(158),g=r(34),v=r(1),b=r.n(v),w=r(45),O=r(18),k=r(209),E=r(253),x=r(159),j=r.n(x),C=r(784),S=r(180),P=r(1007),T=r(1009),M=r(110),R=r.n(M),A=r(601),N=r.n(A);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){F(o,n,a,i,u,"next",e)}function u(e){F(o,n,a,i,u,"throw",e)}i(void 0)}))}}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&H(e,t)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var a=q(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return U(this,r)}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=Object(h.ConfigurationSchema)("BgzipFastaAdapter",{fastaLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz",locationType:"UriLocation"}},faiLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz.fai",locationType:"UriLocation"}},gziLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.gz.gzi",locationType:"UriLocation"}}},{explicitlyTyped:!0}),Z=Object(h.ConfigurationSchema)("ChromSizesAdapter",{chromSizesLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/species.chrom.sizes",locationType:"UriLocation"}}},{explicitlyTyped:!0});function Q(e){for(var t=e.codonTable,r=e.seq,n=e.frame,a=e.bpPerPx,o=e.region,i=e.height,u=e.y,c=e.reverse,l=void 0!==c&&c,s=e.theme,f=a,d=3-o.start%3,p=(n+d+3)%3,h=r.slice(p),m=[],y=0;y<h.length;y+=3){var g=h.slice(y,y+3),v=l?Object(w.revcom)(g):g,O=t[v]||"";m.push({letter:O,codon:v.toUpperCase()})}var k=1/f*3,E=0===o.start?0:k,x=1/a>=12,j=(o.end-o.start)/a,C=["#d8d8d8","#adadad","#8f8f8f"].reverse();return b.a.createElement(b.a.Fragment,null,m.map((function(e,t){var r=o.reversed?j-(k*(t+1)+p/f-E):k*t+p/f-E,a=e.letter,c=e.codon;return b.a.createElement(b.a.Fragment,{key:"".concat(t,"-").concat(a)},b.a.createElement("rect",{x:r,y:u,width:x?k:k+.7,height:i,stroke:x?"#555":"none",fill:w.defaultStarts.includes(c)?s.palette.startCodon:w.defaultStops.includes(c)?s.palette.stopCodon:C[Math.abs(n)]}),x?b.a.createElement("text",{x:r+k/2,y:u+i/2,dominantBaseline:"middle",textAnchor:"middle"},a):null)})))}function ee(e){var t=e.bpPerPx,r=e.region,n=e.feature,a=e.theme,o=e.height,i=e.seq,u=e.y,c=1/t>=12,l=J(Object(w.bpSpanPx)(n.get("start"),n.get("end"),r,t),2),s=l[0],f=l[1],d=r.reversed,p=n.get("end")-n.get("start"),h=Math.max((f-s)/p,.8);return b.a.createElement(b.a.Fragment,null,i.split("").map((function(e,t){var r=a.palette.bases[e.toUpperCase()],n=d?f-(t+1)*h:s+t*h;return b.a.createElement(b.a.Fragment,{key:t},b.a.createElement("rect",{x:n,y:u,width:h,height:o,fill:r?r.main:"#aaa",stroke:c?"#555":"none"}),c?b.a.createElement("text",{x:n+h/2,y:u+o/2,dominantBaseline:"middle",textAnchor:"middle",fill:r?Object(m.contrastingTextColor)(r.main):"black"},e):null)})))}var te=function(e){var t=e.regions,r=e.theme,n=e.features,a=void 0===n?new Map:n,o=e.showReverse,i=e.showForward,u=e.showTranslation,c=e.bpPerPx,l=J(t,1)[0],s=Object(y.createJBrowseTheme)(r),f=Object(w.generateCodonTable)(w.defaultCodonTable),d=X(a.values())[0];if(!d)return null;var p=d.get("seq");if(!p)return null;var h=-20;return b.a.createElement(b.a.Fragment,null,u&&(l.reversed?o:i)?[2,1,0].map((function(e){return b.a.createElement(Q,{key:"translation-".concat(e),seq:p,y:h+=20,codonTable:f,frame:e,bpPerPx:c,region:l,theme:s,height:20,reverse:l.reversed})})):null,i?b.a.createElement(ee,{height:20,y:h+=20,feature:d,region:l,seq:l.reversed?Object(w.complement)(p):p,bpPerPx:c,theme:s}):null,o?b.a.createElement(ee,{height:20,y:h+=20,feature:d,region:l,seq:l.reversed?p:Object(w.complement)(p),bpPerPx:c,theme:s}):null,u&&(l.reversed?i:o)?[0,-1,-2].map((function(e){return b.a.createElement(Q,{key:"rev-translation-".concat(e),seq:p,y:h+=20,codonTable:f,frame:e,bpPerPx:c,region:l,theme:s,height:20,reverse:!l.reversed})})):null)},re=function(e){var t=e.exportSVG,r=e.width,n=e.totalHeight,a=e.children;return t?b.a.createElement(b.a.Fragment,null,a):b.a.createElement("svg",{width:r,height:n,style:{width:r,height:n}},a)};function ne(e){var t=e.regions,r=e.bpPerPx,n=J(t,1)[0],a=(n.end-n.start)/r;return b.a.createElement(re,Object.assign({},e,{totalHeight:200,width:a}),b.a.createElement(te,Object.assign({},e)))}var ae=Object(g.observer)(ne),oe=Object(h.ConfigurationSchema)("DivSequenceRenderer",{height:{type:"number",description:"height in pixels of each line of sequence",defaultValue:16}},{explicitlyTyped:!0}),ie=Object(h.ConfigurationSchema)("IndexedFastaAdapter",{fastaLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa",locationType:"UriLocation"}},faiLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/seq.fa.fai",locationType:"UriLocation"}}},{explicitlyTyped:!0}),ue=Object(h.ConfigurationSchema)("LinearReferenceSequenceDisplay",{renderer:oe},{explicitIdentifier:"displayId",explicitlyTyped:!0});var ce=Object(h.ConfigurationSchema)("TwoBitAdapter",{twoBitLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.2bit",locationType:"UriLocation"}},chromSizesLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/default.chrom.sizes",locationType:"UriLocation"},description:"An optional chrom.sizes file can be supplied to speed up loading since parsing the twobit file can take time"}},{explicitlyTyped:!0}),le=function(e){return Object(h.ConfigurationSchema)("GCContentAdapter",{sequenceAdapter:e.pluggableConfigSchemaType("adapter")},{explicitlyTyped:!0})},se=function(e){return{configSchema:e.load(le),getAdapterClass:function(){return Promise.resolve().then((function(){return ye})).then((function(e){return e.default}))}}};var fe=function(e){z(r,e);var t=G(r);function r(){var e;return D(this,r),(e=t.apply(this,arguments)).supportsSVG=!0,e}return W(r,[{key:"getExpandedRegion",value:function(e){return L(L({},e),{},{start:Math.max(e.start-3,0),end:e.end+3})}}]),r}(u.a),de=function(e){z(r,e);var t=G(r);function r(){var e;return D(this,r),(e=t.apply(this,arguments)).name="SequencePlugin",e}return W(r,[{key:"install",value:function(e){e.addAdapterType((function(){return new a.a({name:"TwoBitAdapter",configSchema:ce,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return ge})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(p.getFileName)(t);return/\.2bit$/i.test(a)||"TwoBitAdapter"===n?{type:"TwoBitAdapter",twoBitLocation:t}:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"TwoBitAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new a.a({name:"ChromSizesAdapter",configSchema:Z,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return ve})).then((function(e){return e.default}))}})})),e.addAdapterType((function(){return new a.a({name:"IndexedFastaAdapter",configSchema:ie,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return we})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(p.getFileName)(t);return/\.(fa|fasta|fas|fna|mfa)$/i.test(a)||"IndexedFastaAdapter"===n?{type:"IndexedFastaAdapter",fastaLocation:t,faiLocation:r||Object(p.makeIndex)(t,".fai")}:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"IndexedFastaAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new a.a({name:"BgzipFastaAdapter",configSchema:K,adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null},getAdapterClass:function(){return Promise.resolve().then((function(){return Oe})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(p.getFileName)(t);return/\.(fa|fasta|fas|fna|mfa)\.b?gz$/i.test(a)||"BgzipFastaAdapter"===n?{type:"BgzipFastaAdapter",faiLocation:Object(p.makeIndex)(t,".fai"),gziLocation:Object(p.makeIndex)(t,".gzi")}:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"BgzipFastaAdapter"===t?"ReferenceSequenceTrack":e(t)}})),e.addAdapterType((function(){return new a.a(L({name:"GCContentAdapter",adapterMetadata:{category:null,hiddenFromGUI:!0,displayName:null,description:null}},e.load(se)))})),e.addTrackType((function(){var t=function(e){return Object(h.ConfigurationSchema)("ReferenceSequenceTrack",{adapter:e.pluggableConfigSchemaType("adapter"),displays:O.types.array(e.pluggableConfigSchemaType("display")),metadata:{type:"frozen",description:"anything to add about this track",defaultValue:{}}},{preProcessSnapshot:function(t){var r=JSON.parse(JSON.stringify(t)),n=new Set,a=r.displays,o=void 0===a?[]:a;"placeholderId"!==r.trackId&&(o.forEach((function(e){return e&&n.add(e.type)})),e.getTrackType(r.type).displayTypes.forEach((function(e){n.has(e.name)||o.push({displayId:"".concat(r.trackId,"-").concat(e.name),type:e.name})})));return L(L({},r),{},{displays:o})},explicitIdentifier:"trackId",explicitlyTyped:!0,actions:function(e){return{addDisplayConf:function(t){var r=t.type;if(!r)throw new Error("unknown display type ".concat(r));var n=e.displays.find((function(e){return e&&e.displayId===t.displayId}));if(n)return n;var a=e.displays.push(t);return e.displays[a-1]}}}})}(e);return new l.a({name:"ReferenceSequenceTrack",configSchema:t,stateModel:Object(o.createBaseTrackModel)(e,"ReferenceSequenceTrack",t)})})),e.addDisplayType((function(){var e=function(e){return O.types.compose("LinearReferenceSequenceDisplay",d.BaseLinearDisplay,O.types.model({type:O.types.literal("LinearReferenceSequenceDisplay"),configuration:Object(h.ConfigurationReference)(e),showForward:O.types.optional(O.types.boolean,!0),showReverse:O.types.optional(O.types.boolean,!0),showTranslation:O.types.optional(O.types.boolean,!0),height:180})).views((function(e){var t=e.renderProps;return{renderProps:function(){var r=e.showForward,n=e.showReverse,a=e.showTranslation;return L(L({},t()),{},{rpcDriverName:e.rpcDriverName,config:e.configuration.renderer,showForward:r,showReverse:n,showTranslation:a})},regionCannotBeRendered:function(){var t=Object(w.getContainingView)(e);if(t&&t.bpPerPx>=1)return"Zoom in to see sequence"},get rendererTypeName(){return e.configuration.renderer.type}}})).actions((function(e){return{toggleShowForward:function(){e.showForward=!e.showForward},toggleShowReverse:function(){e.showReverse=!e.showReverse},toggleShowTranslation:function(){e.showTranslation=!e.showTranslation}}})).views((function(e){return{trackMenuItems:function(){return[{label:"Show forward",type:"checkbox",checked:e.showForward,onClick:function(){e.toggleShowForward()}},{label:"Show reverse",type:"checkbox",checked:e.showReverse,onClick:function(){e.toggleShowReverse()}},{label:"Show translation",type:"checkbox",checked:e.showTranslation,onClick:function(){e.toggleShowTranslation()}}]}}}))}(ue);return{name:"LinearReferenceSequenceDisplay",configSchema:ue,stateModel:e,trackType:"ReferenceSequenceTrack",viewType:"LinearGenomeView",ReactComponent:d.BaseLinearDisplayComponent}})),e.addRendererType((function(){return new fe({name:"DivSequenceRenderer",ReactComponent:ae,configSchema:oe,pluginManager:e})}))}}]),r}(f.a);function pe(e,t){return e(t={exports:{}},t.exports),t.exports}var he=pe((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),me=function(e){z(a,e);var t,r,n=G(a);function a(){var e;return D(this,a),(e=n.apply(this,arguments)).windowSize=1e3,e.windowDelta=1e3,e.gcMode="content",e}return W(a,[{key:"configure",value:(r=I(he.mark((function e(){var t,r,n;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(h.readConfObject)(this.config,"sequenceAdapter"),e.next=3,null===(t=this.getSubAdapter)||void 0===t?void 0:t.call(this,r);case 3:if(n=e.sent){e.next=6;break}throw new Error("Error getting subadapter");case 6:return e.abrupt("return",n.dataAdapter);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNames",value:(t=I(he.mark((function e(){var t;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,e.abrupt("return",t.getRefNames());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e,t){var r=this;return this.windowSize=1e3,this.windowDelta=1e3,this.gcMode="content",Object(E.ObservableCreate)(function(){var n=I(he.mark((function n(a){var o,i,u,c,l,s,f,d,p,h,m,y,g,v,b,w,O,k;return he.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.configure();case 2:if(o=n.sent,i=1===r.windowSize?1:r.windowSize/2,u=1===r.windowSize,c=e.start,l=e.end,c=Math.max(0,c-i),!((l+=i)<0||c>l)){n.next=11;break}return a.complete(),n.abrupt("return");case 11:return s=o.getFeatures(L(L({},e),{},{start:c,end:l}),t),n.next=14,s.pipe(Object(C.a)()).toPromise();case 14:for(f=n.sent,d=J(f,1),p=d[0],h=p.get("seq"),m=i;m<h.length-i;m+=r.windowDelta){for(y=u?h[m]:h.slice(m-i,m+i),g=0,v=0,b=0,w=0;w<y.length;w++)"c"===y[w]||"C"===y[w]?g++:"g"!==y[w]&&"G"!==y[w]||v++,"N"!==y[w]&&b++;O=c,k=void 0,"content"===r.gcMode?k=(v+g)/(b||1):"skew"===r.gcMode&&(k=(v-g)/(v+g||1)),a.next(new j.a({uniqueId:"".concat(r.id,"_").concat(O+m),start:O+m,end:O+m+r.windowDelta,score:k}))}a.complete();case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),a}(k.BaseFeatureDataAdapter);me.capabilities=["hasLocalStats"];var ye={__proto__:null,default:me},ge={__proto__:null,default:function(e){z(o,e);var t,r,n,a=G(o);function o(e,t,r){var n;return D(this,o),(n=a.call(this,e,t,r)).chromSizesData=n.initChromSizes(),n.twobit=new P.a({filehandle:Object(S.openLocation)(Object(h.readConfObject)(e,"twoBitLocation"),n.pluginManager)}),n}return W(o,[{key:"initChromSizes",value:(n=I(he.mark((function e(){var t,r,n;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/path/to/default.chrom.sizes"===(t=Object(h.readConfObject)(this.config,"chromSizesLocation")).uri||""===t.uri){e.next=7;break}return r=Object(S.openLocation)(t,this.pluginManager),e.next=5,r.readFile("utf8");case 5:return n=e.sent,e.abrupt("return",Object.fromEntries(null==n?void 0:n.split("\n").filter((function(e){return!!e.trim()})).map((function(e){var t=J(e.split("\t"),2);return[t[0],+t[1]]}))));case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getRefNames",value:(r=I(he.mark((function e(){var t;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chromSizesData;case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",Object.keys(t));case 5:return e.abrupt("return",this.twobit.getSequenceNames());case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRegions",value:(t=I(he.mark((function e(){var t,r;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chromSizesData;case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",Object.keys(t).map((function(e){return{refName:e,start:0,end:t[e]}})));case 5:return e.next=7,this.twobit.getSequenceSizes();case 7:return r=e.sent,e.abrupt("return",Object.keys(r).map((function(e){return{refName:e,start:0,end:r[e]}})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=e.refName,n=e.start,a=e.end;return Object(E.ObservableCreate)(function(){var e=I(he.mark((function e(o){var i,u,c;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.twobit.getSequenceSize(r);case 2:return i=e.sent,u=void 0!==i?Math.min(i,a):a,e.next=6,t.twobit.getSequence(r,n,u);case 6:(c=e.sent)&&o.next(new j.a({id:"".concat(r," ").concat(n,"-").concat(u),data:{refName:r,start:n,end:u,seq:c}})),o.complete();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),o}(k.BaseFeatureDataAdapter)},ve={__proto__:null,default:function(e){z(a,e);var t,r,n=G(a);function a(e,t,r){var o;D(this,a),o=n.call(this,e,t,r);var i=Object(h.readConfObject)(e,"chromSizesLocation");if(!i)throw new Error("must provide chromSizesLocation");var u=Object(S.openLocation)(i,o.pluginManager);return o.source=u.toString(),o.refSeqs=o.init(u),o}return W(a,[{key:"init",value:(r=I(he.mark((function e(t){var r,n;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile("utf8");case 2:if(r=e.sent,n={},r.length){e.next=6;break}throw new Error("Could not read file ".concat(t.toString()));case 6:return r.split("\n").forEach((function(e){if(e.length){var t=J(e.split("\t"),2),r=t[0],a=t[1];n[r]=+a}})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"getRegions",value:(t=I(he.mark((function e(){var t;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refSeqs;case 2:return t=e.sent,e.abrupt("return",Object.keys(t).map((function(e){return{refName:e,start:0,end:t[e]}})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(){throw new Error("sequence not available")}},{key:"freeResources",value:function(){}}]),a}(k.BaseAdapter)},be=function(e){z(n,e);var t,r=G(n);function n(e,t,a){var o,i;D(this,n),(o=r.call(this,e,t,a)).seqCache=new R.a({cache:new N.a({maxSize:200}),fill:(i=I(he.mark((function e(t,r){var n,a,i;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.refName,a=t.start,i=t.end,e.abrupt("return",o.fasta.getSequence(n,a,i,L(L({},t),{},{signal:r})));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})});var u=Object(h.readConfObject)(e,"fastaLocation"),c=Object(h.readConfObject)(e,"faiLocation"),l={fasta:Object(S.openLocation)(u,o.pluginManager),fai:Object(S.openLocation)(c,o.pluginManager)};return o.fasta=new T.IndexedFasta(l),o}return W(n,[{key:"getRefNames",value:function(e){return this.fasta.getSequenceNames(e)}},{key:"getRegions",value:(t=I(he.mark((function e(t){var r;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fasta.getSequenceSizes(t);case 2:return r=e.sent,e.abrupt("return",Object.keys(r).map((function(e){return{refName:e,start:0,end:r[e]}})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e,t){var r=this,n=e.refName,a=e.start,o=e.end;return Object(E.ObservableCreate)(function(){var e=I(he.mark((function e(i){var u,c,l,s,f,d,p,h;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fasta.getSequenceSize(n,t);case 2:for(u=e.sent,c=void 0!==u?Math.min(u,o):o,l=[],128e3,f=o+(128e3-o%128e3),d=s=a-a%128e3;d<f;d+=128e3)p={refName:n,start:d,end:d+128e3},l.push(r.seqCache.get(JSON.stringify(p),p,null==t?void 0:t.signal));return e.next=11,Promise.all(l);case 11:(h=e.sent.join("").slice(a-s).slice(0,o-a))&&i.next(new j.a({id:"".concat(n," ").concat(a,"-").concat(c),data:{refName:n,start:a,end:c,seq:h}})),i.complete();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),n}(k.BaseFeatureDataAdapter),we={__proto__:null,default:be},Oe={__proto__:null,default:function(e){z(r,e);var t=G(r);function r(e,n,a){var o;D(this,r),o=t.call(this,e,n,a);var i=Object(h.readConfObject)(e,"fastaLocation"),u=Object(h.readConfObject)(e,"faiLocation"),c=Object(h.readConfObject)(e,"gziLocation");if(!i)throw new Error("must provide fastaLocation");if(!u)throw new Error("must provide faiLocation");if(!c)throw new Error("must provide gziLocation");var l={fasta:Object(S.openLocation)(i,o.pluginManager),fai:Object(S.openLocation)(u,o.pluginManager),gzi:Object(S.openLocation)(c,o.pluginManager)};return o.fasta=new T.BgzipIndexedFasta(l),o}return W(r)}(be)};t.default=de},1860:function(e,t,r){"use strict";r.r(t),r.d(t,"VcfFeature",(function(){return Le}));var n=r(1),a=r.n(n),o=r(46),i=r(179),u=r.n(i),c=r(333),l=r.n(c),s=r(210),f=r(252),d=r.n(f),p=r(208),h=r.n(p),m=r(160),y=r.n(m),g=r(171),v=r(1042),b=r(142),w=r(45),O=r(18),k=r(435),E=r.n(k),x=r(34),j=r(106),C=r(1056),S=r(0),P=r.n(S),T=r(209),M=r(180),R=r(253),A=r(423),N=r(596),_=r(140),L=r(704),F=r(709),I=r(697),D=r(1918),B=r(707),W=r(712),V=r(1054),z=r(706),q=r(699),H=r(698),U=r(731),G=r(1926),J=r(695),X=r(159),Y=r.n(X),$=r(229),K=r(433),Z=r(683),Q=r(82),ee=r.n(Q);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ne(o,n,a,i,u,"next",e)}function u(e){ne(o,n,a,i,u,"throw",e)}i(void 0)}))}}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&fe(e,t)}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pe(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var a=se(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return pe(this,r)}}function me(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=se(e)););return e}function ye(){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=me(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(e){var t=e.jbrequire,r=t("mobx-state-tree").types,n=t("@jbrowse/core/configuration"),a=n.ConfigurationSchema,o=n.ConfigurationReference,i=t("@jbrowse/core/util").getContainingView,u=t("@jbrowse/core/util/tracks").getParentRenderProps,c=a("ChordVariantDisplay",{renderer:r.optional(e.pluggableConfigSchemaType("renderer"),{type:"StructuralVariantChordRenderer"})},{baseConfiguration:v.baseChordDisplayConfig,explicitlyTyped:!0});return{stateModel:r.compose("ChordVariantDisplay",v.BaseChordDisplayModel,r.model({type:r.literal("ChordVariantDisplay"),configuration:o(c)})).views((function(e){return{get rendererTypeName(){return e.configuration.renderer.type},renderProps:function(){var t=i(e);return re(re({},u(e)),{},{rpcDriverName:e.rpcDriverName,displayModel:e,bezierRadius:t.radiusPx*e.bezierRadiusRatio,radius:t.radiusPx,blockDefinitions:this.blockDefinitions,config:e.configuration.renderer,onChordClick:e.onChordClick})}}})),configSchema:c}},ke=function(e){var t=e.lib,r=e.load,n=t["@jbrowse/core/pluggableElementTypes/DisplayType"],a=r(Oe),o=a.stateModel;return new n({name:"ChordVariantDisplay",configSchema:a.configSchema,stateModel:o,trackType:"VariantTrack",viewType:"CircularView",ReactComponent:Object(v.BaseChordDisplayComponentFactory)(e)})};function Ee(e,t){return e(t={exports:{}},t.exports),t.exports}var xe=Ee((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function je(e){return O.types.compose("LinearVariantDisplay",Object(g.linearBasicDisplayModelFactory)(e),O.types.model({type:O.types.literal("LinearVariantDisplay"),configuration:Object(o.ConfigurationReference)(e)})).actions((function(e){return{selectFeature:function(t){return ae(xe.mark((function r(){var n,a,i,u,c,l,s;return xe.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=Object(w.getSession)(e),!Object(w.isSessionModelWithWidgets)(n)){r.next=11;break}return a=n.rpcManager,i=Object(b.getRpcSessionId)(e),u=Object(w.getContainingTrack)(e),c=Object(o.getConf)(u,"adapter"),r.next=8,a.call(i,"CoreGetMetadata",{adapterConfig:c});case 8:l=r.sent,s=n.addWidget("VariantFeatureWidget","variantFeature",{featureData:t.toJSON(),view:Object(w.getContainingView)(e),descriptions:l}),n.showWidget(s);case 11:n.setSelection(t);case 12:case"end":return r.stop()}}),r)})))()}}}))}function Ce(e,t){var r=e.region.elided?0:e.region.start,n=e.region.elided?0:e.region.end;return(e.flipped?n-t:t-r)/e.bpPerRadian+e.startRadians}var Se=Object(x.observer)((function(e){var t,r,n,i,u=e.feature,c=e.blocksForRefs,l=e.radius,s=e.config,f=e.bezierRadius,d=e.selected,p=e.onClick,h=c[u.get("refName")];if(!h)return null;u.get("INFO")?r=ge(u.get("INFO").SVTYPE||[],1)[0]:u.get("mate")&&(r="mate");var m=null===(t=u.get("ALT"))||void 0===t?void 0:t[0],y=m&&Object(C.b)(m);if(y){var g=y.MatePosition.split(":");n=+g[1],i=c[g[0]]}else if("<TRA>"===m){var v,b,O,k,E=null===(v=u.get("INFO"))||void 0===v||null===(b=v.CHR2)||void 0===b?void 0:b[0],x=null===(O=u.get("INFO"))||void 0===O||null===(k=O.END)||void 0===k?void 0:k[0];n=parseInt(x,10),i=c[E]}else if("mate"===r){var j=u.get("mate"),S=j.refName;n=j.start,i=c[S]}if(i){var P=u.get("start"),T=Ce(h,P),M=Ce(i,n),R=Object(w.polarToCartesian)(l,T),A=Object(w.polarToCartesian)(l,M),N=Object(w.polarToCartesian)(f,(M+T)/2),_=d?Object(o.readConfObject)(s,"strokeColorSelected",{feature:u}):Object(o.readConfObject)(s,"strokeColor",{feature:u}),L=Object(o.readConfObject)(s,"strokeColorHover",{feature:u});return a.a.createElement("path",{"data-testid":"chord-".concat(u.id()),d:["M"].concat(ve(R),["Q"],ve(N),ve(A)).join(" "),style:{stroke:_},onClick:function(e){return p(u,h.region,i.region,e)},onMouseOver:function(e){d||(e.target.style.stroke=L,e.target.style.strokeWidth=3)},onMouseOut:function(e){d||(e.target.style.stroke=_,e.target.style.strokeWidth=1)}})}return null}));function Pe(e){var t,r=e.features,o=e.config,i=e.displayModel,u=e.blockDefinitions,c=e.radius,l=e.bezierRadius,s=e.displayModel.selectedFeatureId,f=e.onChordClick,d=Object(n.useMemo)((function(){var e={};return u.forEach((function(t){(t.region.elided?t.region.regions:[t.region]).forEach((function(r){e[r.refName]=t}))})),e}),[u]),p=[],h=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=be(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(r);try{for(h.s();!(t=h.n()).done;){var m=ge(t.value,2),y=m[0],g=m[1],v=String(s)===String(g.id());p.push(a.a.createElement(Se,{key:y,feature:g,config:o,displayModel:i,radius:c,bezierRadius:l,blocksForRefs:d,selected:v,onClick:f}))}}catch(e){h.e(e)}finally{h.f()}var b="chords-".concat(i.id);return a.a.createElement("g",{id:b,"data-testid":"structuralVariantChordRenderer"},a.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n          #".concat(b," > path {\n            cursor: crosshair;\n            fill: none;\n          }\n")}}),p)}Pe.propTypes={features:P.a.instanceOf(Map).isRequired,config:j.PropTypes.ConfigSchema.isRequired,displayModel:x.PropTypes.objectOrObservableObject,blockDefinitions:P.a.arrayOf(x.PropTypes.objectOrObservableObject).isRequired,radius:P.a.number.isRequired,bezierRadius:P.a.number.isRequired,selectedFeatureId:P.a.string,onChordClick:P.a.oneOfType([P.a.func,P.a.string])},Pe.defaultProps={displayModel:void 0,selectedFeatureId:"",onChordClick:void 0};var Te=Object(x.observer)(Pe),Me=function(e){var t=Object(o.ConfigurationSchema)("StructuralVariantChordRenderer",{strokeColor:{type:"color",description:"the line color of each arc",defaultValue:"rgba(255,133,0,0.32)",contextVariable:["feature"]},strokeColorSelected:{type:"color",description:"the line color of an arc that has been selected",defaultValue:"black",contextVariable:["feature"]},strokeColorHover:{type:"color",description:"the line color of an arc that is being hovered over with the mouse",defaultValue:"#555",contextVariable:["feature"]}},{explicitlyTyped:!0});return new E.a({name:"StructuralVariantChordRenderer",ReactComponent:Te,configSchema:t,pluginManager:e})},Re=Object(o.ConfigurationSchema)("VariantFeatureWidget",{});function Ae(e){return O.types.model("VariantFeatureWidget",{id:j.ElementId,type:O.types.literal("VariantFeatureWidget"),view:O.types.safeReference(e.pluggableMstType("view","stateModel")),featureData:O.types.frozen(),descriptions:O.types.frozen()}).actions((function(e){return{setFeatureData:function(t){e.featureData=t},clearFeatureData:function(){e.featureData=void 0}}}))}var Ne=Object(o.ConfigurationSchema)("VcfTabixAdapter",{vcfGzLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf.gz",locationType:"UriLocation"}},index:Object(o.ConfigurationSchema)("VcfIndex",{indexType:{model:O.types.enumeration("IndexType",["TBI","CSI"]),type:"stringEnum",defaultValue:"TBI"},location:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf.gz.tbi",locationType:"UriLocation"}}})},{explicitlyTyped:!0}),_e=Object(o.ConfigurationSchema)("VcfAdapter",{vcfLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.vcf",locationType:"UriLocation"}}},{explicitlyTyped:!0}),Le=function(){function e(t){oe(this,e),this.variant=t.variant,this.parser=t.parser,this.data=this.dataFromVariant(this.variant),this._id=t.id}return ue(e,[{key:"get",value:function(e){return"samples"===e?this.variant.SAMPLES:this.data[e]||this.variant[e]}},{key:"set",value:function(){}},{key:"parent",value:function(){}},{key:"children",value:function(){}},{key:"tags",value:function(){return[].concat(ve(Object.keys(this.data)),ve(Object.keys(this.variant)),["samples"])}},{key:"id",value:function(){return this._id}},{key:"dataFromVariant",value:function(e){var t=e.REF,r=e.ALT,n=e.POS,a=e.CHROM,o=e.INFO,i=e.ID,u=n-1,c=ge(this._getSOTermAndDescription(t,r),2),l=c[0],s=c[1],f=null==r?void 0:r.some((function(e){return"<TRA>"===e}));return{refName:a,start:u,end:(null==r?void 0:r.some((function(e){return-1!==e.indexOf("<")})))&&o.END&&!f?+o.END[0]:u+t.length,description:s,type:l,name:null==i?void 0:i.join(","),aliases:i&&i.length>1?e.ID.slice(1):void 0}}},{key:"_getSOTermAndDescription",value:function(e,t){var r=this;if(!t||t===[])return["remark","no alternative alleles"];var n=new Set,a=new Set;if(t.forEach((function(t){var o=ge(r._getSOAndDescFromAltDefs(e,t),2),i=o[0],u=o[1];if(!i){var c=ge(r._getSOAndDescByExamination(e,t),2);i=c[0],u=c[1]}i&&u&&(n.add(i),a.add(u))})),a.size>1){var o=new Set(ve(a).map((function(e){var t=e.split("->");return t[1]?t[0]:e}))),i=ve(o).map((function(e){var t=ve(a).map((function(t){var r=t.split("-> ");return r[1]&&r[0]===e?r[1]:""})).filter((function(e){return!!e}));return t.length?e+"-> "+t.join(","):ve(a).join(",")}));a=new Set(i)}return n.size?[ve(n).join(","),ve(a).join(",")]:[void 0,void 0]}},{key:"_getSOAndDescFromAltDefs",value:function(t,r){if("string"==typeof r&&!r.startsWith("<"))return[void 0,void 0];var n=e._altTypeToSO[r];if(!n&&this.parser.getMetadata("ALT",r)&&(n="sequence_variant"),n)return[n,r];var a=r.split(":");return a.length>1?this._getSOAndDescFromAltDefs(t,"<".concat(a.slice(0,a.length-1).join(":"),">")):[void 0,void 0]}},{key:"_getSOAndDescByExamination",value:function(e,t){return Object(C.b)(t)?["breakend",t]:1===e.length&&1===t.length?["SNV",this._makeDescriptionString("SNV",e,t)]:"<INS>"===t?["insertion",t]:"<DEL>"===t||"<INV>"===t?["deletion",t]:"<TRA>"===t?["translocation",t]:t.includes("<")?["sv",t]:e.length===t.length?e.split("").reverse().join("")===t?["inversion",this._makeDescriptionString("inversion",e,t)]:["substitution",this._makeDescriptionString("substitution",e,t)]:e.length<=t.length?["insertion",this._makeDescriptionString("insertion",e,t)]:e.length>t.length?["deletion",this._makeDescriptionString("deletion",e,t)]:["indel",this._makeDescriptionString("indel",e,t)]}},{key:"_makeDescriptionString",value:function(e,t,r){return"".concat(e," ").concat(t," -> ").concat(r)}},{key:"toJSON",value:function(){return re(re(re({uniqueId:this._id},this.variant),this.data),{},{samples:this.variant.SAMPLES})}}]),e}();Le._altTypeToSO={DEL:"deletion",INS:"insertion",DUP:"duplication",INV:"inversion",INVDUP:"inverted duplication",CNV:"copy_number_variation",TRA:"translocation","DUP:TANDEM":"tandem_duplication",NON_REF:"sequence_variant","*":"sequence_variant"};var Fe=function(e){le(r,e);var t=he(r);function r(){var e;return oe(this,r),(e=t.apply(this,arguments)).name="VariantsPlugin",e}return ue(r,[{key:"install",value:function(e){e.addAdapterType((function(){return new u.a({name:"VcfTabixAdapter",configSchema:Ne,getAdapterClass:function(){return Promise.resolve().then((function(){return Ie})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(b.getFileName)(t),o=r&&Object(b.getFileName)(r);return/\.vcf\.b?gz$/i.test(a)||"VcfTabixAdapter"===n?{type:"VcfTabixAdapter",vcfGzLocation:t,index:{location:r||Object(b.makeIndex)(t,".tbi"),indexType:Object(b.makeIndexType)(o,"CSI","TBI")}}:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"VcfTabixAdapter"===t?"VariantTrack":e(t)}})),e.addAdapterType((function(){return new u.a({name:"VcfAdapter",configSchema:_e,getAdapterClass:function(){return Promise.resolve().then((function(){return Ve})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(b.getFileName)(t);return/\.vcf$/i.test(a)||"VcfAdapter"===n?{type:"VcfAdapter",vcfLocation:t}:e(t,r,n)}})),e.addRendererType((function(){return e.jbrequire(Me)})),e.addTrackType((function(){var t=Object(o.ConfigurationSchema)("VariantTrack",{},{baseConfiguration:Object(s.createBaseTrackConfig)(e)});return new d.a({name:"VariantTrack",configSchema:t,stateModel:Object(s.createBaseTrackModel)(e,"VariantTrack",t)})})),e.addDisplayType((function(){return e.jbrequire(ke)})),e.addDisplayType((function(){var t=function(e){var t=Object(g.linearBasicDisplayConfigSchemaFactory)(e);return Object(o.ConfigurationSchema)("LinearVariantDisplay",{},{baseConfiguration:t,explicitlyTyped:!0})}(e);return new l.a({name:"LinearVariantDisplay",configSchema:t,stateModel:je(t),trackType:"VariantTrack",viewType:"LinearGenomeView",ReactComponent:g.BaseLinearDisplayComponent})})),e.addWidgetType((function(){return new h.a({name:"VariantFeatureWidget",heading:"Feature details",configSchema:Re,stateModel:Ae(e),ReactComponent:Object(n.lazy)((function(){return Promise.resolve().then((function(){return Ye}))}))})}))}}]),r}(y.a),Ie={__proto__:null,default:function(e){le(c,e);var t,r,n,a,i,u=he(c);function c(){return oe(this,c),u.apply(this,arguments)}return ue(c,[{key:"configure",value:(i=ae(xe.mark((function e(){var t,r,n,a,i,u,c=this;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.configured||(t=Object(o.readConfObject)(this.config,"vcfGzLocation"),r=Object(o.readConfObject)(this.config,["index","location"]),n=Object(o.readConfObject)(this.config,["index","indexType"]),a=Object(M.openLocation)(t,this.pluginManager),i="CSI"===n,u=new A.TabixIndexedFile({filehandle:a,csiFilehandle:i?Object(M.openLocation)(r,this.pluginManager):void 0,tbiFilehandle:i?void 0:Object(M.openLocation)(r,this.pluginManager),chunkCacheSize:50*Math.pow(2,20),chunkSizeLimit:1e9}),this.configured=u.getHeader().then((function(e){return{filehandle:a,vcf:u,parser:new C.a({header:e})}})).catch((function(e){throw c.configured=void 0,e}))),e.abrupt("return",this.configured);case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getRefNames",value:(a=ae(xe.mark((function e(){var t,r,n,a=arguments;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.configure();case 3:return r=e.sent,n=r.vcf,e.abrupt("return",n.getReferenceSequenceNames(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getHeader",value:(n=ae(xe.mark((function e(){var t,r;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,r=t.vcf,e.abrupt("return",r.getHeader());case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getMetadata",value:(r=ae(xe.mark((function e(){var t,r;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return t=e.sent,r=t.parser,e.abrupt("return",r.getMetadata());case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(R.ObservableCreate)(function(){var n=ae(xe.mark((function n(a){var o,i,u,c,l,s;return xe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.refName,i=e.start,u=e.end,n.next=3,t.configure();case 3:return c=n.sent,l=c.vcf,s=c.parser,n.next=8,l.getLines(o,i,u,re({lineCallback:function(e,r){a.next(new Le({variant:s.parseLine(e),parser:s,id:"".concat(t.id,"-vcf-").concat(r)}))}},r));case 8:a.complete();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),r.signal)}},{key:"getFeaturesInMultipleRegions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ye(se(c.prototype),"getFeaturesInMultipleRegions",this);return Object(R.ObservableCreate)(function(){var a=ae(xe.mark((function a(o){var i,u,c,l,s;return xe.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.bytesForRegions(e);case 2:return i=a.sent,a.next=5,t.configure();case 5:return u=a.sent,c=u.filehandle,a.next=9,c.stat();case 9:l=a.sent,(s=Math.round(i/l.size*100))>100&&(s=100),s>60&&console.warn("getFeaturesInMultipleRegions fetching ".concat(s,"% of VCF file, but whole-file streaming not yet implemented")),n.call(t,e,r).subscribe(o);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},{key:"bytesForRegions",value:(t=ae(xe.mark((function e(t){var r,n,a,o;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return r=e.sent,n=r.vcf,e.next=6,Promise.all(t.map((function(e){return n.index.blocksForRange(e.refName,e.start,e.end)})));case 6:return a=e.sent,o=[],a.forEach((function(e){e.forEach((function(e){var t=e.minv.blockPosition,r=e.maxv.blockPosition+64e3;o.find((function(e){return e.start<=r&&e.end>=t&&(e.start=Math.min(e.start,t),e.end=Math.max(e.end,r),!0)}))||o.push({start:t,end:r})}))})),e.abrupt("return",o.reduce((function(e,t){return e+t.end-t.start+1}),0));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"freeResources",value:function(){}}]),c}(T.BaseFeatureDataAdapter)},De=function(e){var t=e.split("\n"),r=[],n=[];return t.forEach((function(e){e.startsWith("#")?r.push(e):e&&n.push(e)})),{header:r.join("\n"),lines:n}};function Be(e){return 31===e[0]&&139===e[1]&&8===e[2]}var We=function(e){le(c,e);var t,r,n,a,i,u=he(c);function c(){return oe(this,c),u.apply(this,arguments)}return ue(c,[{key:"getHeader",value:(i=ae(xe.mark((function e(){var t,r;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return t=e.sent,r=t.header,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getMetadata",value:(a=ae(xe.mark((function e(){var t,r,n;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return t=e.sent,r=t.header,n=new C.a({header:r}),e.abrupt("return",n.getMetadata());case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setupP",value:(n=ae(xe.mark((function e(){var t,r,n,a,i,u,c;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.openLocation)(Object(o.readConfObject)(this.config,"vcfLocation"),this.pluginManager).readFile();case 2:if(!Be(t=e.sent)){e.next=9;break}return e.next=6,Object(_.unzip)(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=t;case 10:if(!((r=e.t0).length>536870888)){e.next=13;break}throw new Error("Data exceeds maximum string length (512MB)");case 13:return n=(new TextDecoder).decode(r),a=De(n),i=a.header,u=a.lines,c=u.map((function(e,t){var r,n=ge(e.split("\t"),8),a=n[0],o=n[1],i=n[3],u=+o-1;return{line:e,refName:a,start:u,end:+((null===(r=n[7].match(/END=(\d+)/))||void 0===r?void 0:r[1].trim())||u+i.length),id:t}})).reduce((function(e,t){var r=t.refName;return e[r]||(e[r]=new N.a),e[r].insert([t.start,t.end],t),e}),{}),e.abrupt("return",{header:i,intervalTree:c});case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setup",value:(r=ae(xe.mark((function e(){var t=this;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vcfFeatures||(this.vcfFeatures=this.setupP().catch((function(e){throw t.vcfFeatures=void 0,e}))),e.abrupt("return",this.vcfFeatures);case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getRefNames",value:(t=ae(xe.mark((function e(){var t,r;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.setup();case 3:return t=e.sent,r=t.intervalTree,e.abrupt("return",Object.keys(r));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(R.ObservableCreate)(function(){var r=ae(xe.mark((function r(n){var a,o,i,u,c,l,s,f;return xe.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e.start,i=e.end,u=e.refName,r.next=4,t.setup();case 4:c=r.sent,l=c.header,s=c.intervalTree,f=new C.a({header:l}),null===(a=s[u])||void 0===a||a.search([o,i]).forEach((function(e){return n.next(new Le({variant:f.parseLine(e.line),parser:f,id:"".concat(t.id,"-").concat(e.id)}))})),n.complete(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),n.error(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}(),r.signal)}},{key:"freeResources",value:function(){}}]),c}(T.BaseFeatureDataAdapter);We.capabilities=["getFeatures","getRefNames"];var Ve={__proto__:null,default:We},ze=Object(Z.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},block:{display:"block"}}}));function qe(e){var t=e.model,r=e.handleClose,o=e.feature,i=e.viewType,u=ze(),c=ge(Object(n.useState)(!0),2),l=c[0],s=c[1],f=ge(Object(n.useState)(!0),2),d=f[0],p=f[1];return a.a.createElement(L.a,{open:!0,onClose:r},a.a.createElement(F.a,null,"Breakpoint split view options",r?a.a.createElement(I.a,{className:u.closeButton,onClick:function(){r()}},a.a.createElement(ee.a,null)):null),a.a.createElement(D.a,null),a.a.createElement(B.a,null,a.a.createElement(W.a,{className:u.block,control:a.a.createElement(V.a,{checked:l,onChange:function(){return s((function(e){return!e}))}}),label:"Copy tracks into the new view"}),a.a.createElement(W.a,{className:u.block,control:a.a.createElement(V.a,{checked:d,onChange:function(){return p((function(e){return!e}))}}),label:"Mirror tracks vertically in vertically stacked view"})),a.a.createElement(z.a,null,a.a.createElement(q.a,{onClick:function(){var e=t.view,n=Object(w.getSession)(t),a=i.snapshotFromBreakendFeature(o,e);a.views[0].offsetPx-=e.width/2+100,a.views[1].offsetPx-=e.width/2+100,a.featureData=o;var u=Object(O.getSnapshot)(e.tracks);a.views[0].tracks=u,a.views[1].tracks=d?u.slice().reverse():u,n.addView("BreakpointSplitView",a),r()},variant:"contained",color:"primary",autoFocus:!0},"OK"),a.a.createElement(q.a,{onClick:function(){r()},color:"secondary",variant:"contained",autoFocus:!0},"Cancel")))}var He=Object(x.observer)(qe),Ue=["samples"];function Ge(e){var t=ge(Object(n.useState)({}),2),r=t[0],o=t[1],i=ge(Object(n.useState)(!1),2),u=i[0],c=i[1],l=e.feature.samples,s=void 0===l?{}:l,f=Object.entries(s);if(!f.length)return null;var d,p=["sample"].concat(ve(Object.keys(f[0][1]))).map((function(e){return{field:e}})),h=[],m=Object.keys(r);try{h=f.map((function(e){return re(re({},Object.fromEntries(Object.entries(e[1]).map((function(e){return[e[0],String(e[1])]})))),{},{sample:e[0],id:e[0]})})).filter((function(e){return!m.length||m.every((function(t){var n=e[t],a=r[t];return!a||n.match(new RegExp(a,"i"))}))}))}catch(e){d=e}return a.a.createElement(K.BaseCard,Object.assign({},e,{title:"Samples"}),d?a.a.createElement(H.a,{color:"error"},"".concat(d)):null,a.a.createElement(W.a,{control:a.a.createElement(V.a,{checked:u,onChange:function(){return c((function(e){return!e}))}}),label:"Show sample filters"}),u?a.a.createElement(a.a.Fragment,null,a.a.createElement(H.a,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),p.map((function(e){var t=e.field;return a.a.createElement(U.a,{key:"filter-".concat(t),placeholder:"Filter ".concat(t),value:r[t]||"",onChange:function(e){return o(re(re({},r),{},ce({},t,e.target.value)))}})}))):null,a.a.createElement("div",{style:{height:600,width:"100%",overflow:"auto"}},a.a.createElement($.DataGrid,{rows:h,columns:p,rowHeight:20,headerHeight:25,disableSelectionOnClick:!0,disableColumnMenu:!0})))}function Je(e){var t,r=e.model,o=e.locStrings,i=e.feature,u=Object(w.getSession)(r),c=Object(O.getEnv)(u).pluginManager,l=ge(Object(n.useState)(!1),2),s=l[0],f=l[1];try{t=c.getViewType("BreakpointSplitView")}catch(e){}var d=new Y.a(i);return a.a.createElement(K.BaseCard,Object.assign({},e,{title:"Breakends"}),a.a.createElement(H.a,null,"Link to linear view of breakend endpoints"),a.a.createElement("ul",null,o.map((function(e){return a.a.createElement("li",{key:"".concat(JSON.stringify(e))},a.a.createElement(G.a,{href:"#",onClick:function(t){t.preventDefault();var n,a=r.view;a?null===(n=a.navToLocString)||void 0===n||n.call(a,e):u.notify("No view associated with this feature detail panel anymore","warning")}},"LGV - ".concat(e)))}))),t?a.a.createElement("div",null,a.a.createElement(H.a,null,"Launch split views with breakend source and target"),a.a.createElement("ul",null,o.map((function(e){return a.a.createElement("li",{key:"".concat(JSON.stringify(e))},a.a.createElement(G.a,{href:"#",onClick:function(e){e.preventDefault(),f(!0)}},"".concat(i.refName,":").concat(i.start," // ").concat(e," (split view)")))}))),s?a.a.createElement(He,{model:r,feature:d,viewType:t,handleClose:function(){f(!1)}}):null):null)}function Xe(e){var t=e.model,r=t.featureData,n=t.descriptions,o=JSON.parse(JSON.stringify(r)),i=de(o,Ue);return a.a.createElement(J.a,{"data-testid":"variant-side-drawer"},a.a.createElement(K.FeatureDetails,Object.assign({feature:i,descriptions:re(re({},{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"}),n)},e)),a.a.createElement(D.a,null),"breakend"===o.type?a.a.createElement(Je,{feature:o,locStrings:o.ALT.map((function(e){var t;return(null===(t=Object(C.b)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===o.type?a.a.createElement(Je,{feature:o,model:t,locStrings:["".concat(o.INFO.CHR2[0],":").concat(o.INFO.END)]}):null,a.a.createElement(Ge,Object.assign({feature:o},e)))}var Ye={__proto__:null,default:Object(x.observer)(Xe)};t.default=Fe},1861:function(e,t,r){"use strict";r.r(t),r.d(t,"LinearWiggleDisplayReactComponent",(function(){return Ue})),r.d(t,"Tooltip",(function(){return ze})),r.d(t,"WiggleBaseRenderer",(function(){return Se})),r.d(t,"WiggleRendering",(function(){return Te})),r.d(t,"YSCALEBAR_LABEL_OFFSET",(function(){return Xe})),r.d(t,"getNiceDomain",(function(){return Ne})),r.d(t,"getOrigin",(function(){return Ae})),r.d(t,"getScale",(function(){return Re})),r.d(t,"linearWiggleDisplayModelFactory",(function(){return Ze}));var n=r(179),a=r.n(n),o=r(252),i=r.n(o),u=r(160),c=r.n(u),l=r(46),s=r(210),f=r(333),d=r.n(f),p=r(254),h=r.n(p),m=r(1024),y=r(34),g=r(1),v=r.n(g),b=r(158),w=r(45),O=r(1887),k=r(1966),E=r(1951),x=r(18),j=r(171),C=r(142),S=r(51),P=r(821),T=r(683),M=r(74),R=r(1916),A=r(704),N=r(709),_=r(697),L=r(707),F=r(699),I=r(1952),D=r(285),B=r.n(D),W=r(434),V=r(432),z=r.n(V),q=r(209),H=r(1038),U=r.n(H),G=r(731),J=r(698),X=r(82),Y=r.n(X),$=r(436),K=r(542),Z=r(180),Q=r(253),ee=r(159),te=r.n(ee),re=r(375),ne=r(99),ae=r(1032);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ue(o,n,a,i,u,"next",e)}function u(e){ue(o,n,a,i,u,"throw",e)}i(void 0)}))}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t,r){return t&&se(e.prototype,t),r&&se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&me(e,t)}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=he(e);if(t){var a=he(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ye(this,r)}}function ve(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}function be(){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=ve(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(e,t)||ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(e){if("string"==typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ke(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function je(e,t){return e(t={exports:{}},t.exports),t.exports}var Ce=je((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function d(){}function p(){}var h={};u(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,a)&&(h=y);var g=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var c=l(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),Se=function(e){pe(n,e);var t,r=ge(n);function n(){var e;return le(this,n),(e=r.apply(this,arguments)).supportsSVG=!0,e}return fe(n,[{key:"render",value:(t=ce(Ce.mark((function e(t){var r,a,o,i,u,c,l,s,f,d=this;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFeatures(t);case 2:return r=e.sent,a=t.height,o=t.regions,i=t.bpPerPx,u=we(o,1),c=u[0],l=(c.end-c.start)/i,e.next=8,Object(m.renderToAbstractCanvas)(l,a,t,(function(e){return d.draw(e,ie(ie({},t),{},{features:r}))}));case 8:return s=e.sent,e.next=11,be(he(n.prototype),"render",this).call(this,ie(ie(ie({},t),s),{},{features:r,height:a,width:l}));case 11:return f=e.sent,e.abrupt("return",ie(ie(ie({},f),s),{},{features:r,height:a,width:l}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(h.a);function Pe(e){var t=e.regions,r=e.features,n=e.bpPerPx,a=e.width,o=e.height,i=e.onMouseLeave,u=void 0===i?function(){}:i,c=e.onMouseMove,l=void 0===c?function(){}:c,s=e.onFeatureClick,f=void 0===s?function(){}:s,d=we(t,1)[0],p=Object(g.useRef)(null);function h(e){var t=0;p.current&&(t=p.current.getBoundingClientRect().left);var o,i,u=e-t,c=d.reversed?a-u:u,l=d.start+n*c,s=xe(r.values());try{for(s.s();!(i=s.n()).done;){var f=i.value;if(l<=f.get("end")&&l>=f.get("start")){o=f;break}}}catch(e){s.e(e)}finally{s.f()}return o}return v.a.createElement("div",{ref:p,"data-testid":"wiggle-rendering-test",onMouseMove:function(e){var t=h(e.clientX);l(e,t?t.id():void 0)},onClick:function(e){var t=h(e.clientX);f(e,t?t.id():void 0)},onMouseLeave:function(e){return u(e)},role:"presentation",className:"WiggleRendering",style:{overflow:"visible",position:"relative",height:o}},v.a.createElement(b.PrerenderedCanvas,Object.assign({},e)))}var Te=Object(y.observer)(Pe),Me=Object(l.ConfigurationSchema)("BigWigAdapter",{bigWigLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/my.bw",locationType:"UriLocation"}}},{explicitlyTyped:!0});function Re(e){var t,r=e.domain,n=void 0===r?[]:r,a=e.range,o=void 0===a?[]:a,i=e.scaleType,u=e.pivotValue,c=e.inverted,l=we(n,2),s=l[0],f=l[1];if(void 0===s||void 0===f)throw new Error("invalid domain");if("linear"===i)t=Object(O.a)();else if("log"===i)(t=Object(k.a)()).base(2);else{if("quantize"!==i)throw new Error("undefined scaleType");t=Object(E.a)()}t.domain(void 0!==u?[s,u,f]:[s,f]),t.nice();var d=we(o,2),p=d[0],h=d[1];if(void 0===p||void 0===h)throw new Error("invalid range");return t.range(c?o.slice().reverse():o),t}function Ae(e){return"log"===e?1:0}function Ne(e){var t=e.scaleType,r=e.domain,n=we(e.bounds,2),a=n[0],o=n[1],i=we(r,2),u=i[0],c=i[1];if("linear"===t&&(c<0&&(c=0),u>0&&(u=0)),"log"===t&&(0===u||u>1)&&(u=1),void 0===u||void 0===c)throw new Error("invalid domain");void 0!==a&&a!==Number.MIN_VALUE&&(u=a),void 0!==o&&o!==Number.MAX_VALUE&&(c=o);var l=function(e){if("linear"===e)return Object(O.a)();if("log"===e){var t=Object(k.a)();return t.base(2),t}if("quantize"===e)return Object(E.a)();throw new Error("undefined scaleType ".concat(e))}(t);return l.domain([u,c]),l.nice(),l.domain()}var _e={__proto__:null,getScale:Re,getOrigin:Ae,getNiceDomain:Ne},Le=Object(l.ConfigurationSchema)("WiggleRenderer",{color:{type:"color",description:"the color of track, overrides posColor and negColor",defaultValue:"#f0f"},posColor:{type:"color",description:"the color to use when the score is positive",defaultValue:"blue"},negColor:{type:"color",description:"the color to use when the score is negative",defaultValue:"red"},highlightColor:{type:"color",description:"the color of highlights over the wiggle track",defaultValue:"rgba(255,255,0,0.5)"},clipColor:{type:"color",description:"the color of the clipping marker",defaultValue:"red"},renderType:{type:"stringEnum",model:x.types.enumeration("Rendering type",["xyplot","density","line"]),description:"The type of rendering for wiggle data to use",defaultValue:"xyplot"},filled:{type:"boolean",description:"fill in histogram",defaultValue:!0},bicolorPivot:{type:"stringEnum",model:x.types.enumeration("Scale type",["numeric","mean","z_score","none"]),description:"type of bicolor pivot",defaultValue:"numeric"},bicolorPivotValue:{type:"number",defaultValue:0,description:"value to use for bicolor pivot"},summaryScoreMode:{type:"stringEnum",model:x.types.enumeration("Score type",["max","min","avg","whiskers"]),description:"choose whether to use max/min/average or whiskers which combines all three into the same rendering",defaultValue:"whiskers"},displayCrossHatches:{type:"boolean",description:"choose to draw cross hatches (sideways lines)",defaultValue:!1}},{explicitlyTyped:!0}),Fe=function(e){pe(r,e);var t=ge(r);function r(){return le(this,r),t.apply(this,arguments)}return fe(r,[{key:"draw",value:function(e,t){var r,n,a=t.features,o=t.regions,i=t.bpPerPx,u=t.scaleOpts,c=t.height,s=t.config,f=we(o,1)[0],d=Object(l.readConfObject)(s,"bicolorPivot"),p=Object(l.readConfObject)(s,"bicolorPivotValue"),h=Object(l.readConfObject)(s,"negColor"),m=Object(l.readConfObject)(s,"posColor");"#f0f"===Object(l.readConfObject)(s,"color")?(n=Re(ie(ie({},u),{},"none"!==d?{pivotValue:p,range:[h,"white",m]}:{range:["white",m]})),r=function(e){return n(e.get("score"))}):r=function(e){return Object(l.readConfObject)(s,"color",{feature:e})};var y,g=xe(a.values());try{for(g.s();!(y=g.n()).done;){var v=y.value,b=we(Object(w.featureSpanPx)(v,f,i),2),O=b[0],k=b[1]-O+.3;e.fillStyle=r(v),e.fillRect(O,0,k,c)}}catch(e){g.e(e)}finally{g.f()}}}]),r}(Se),Ie=Object(l.ConfigurationSchema)("DensityRenderer",{},{baseConfiguration:Le,explicitlyTyped:!0});function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return+(+e).toPrecision(6)}var Be=function(e){return e.toLocaleString("en-US")},We=Object(T.a)((function(e){return{tooltip:{position:"absolute",pointerEvents:"none",backgroundColor:Object(M.a)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat((t=1.4,Math.round(1e5*t)/1e5),"em"),maxWidth:300,wordWrap:"break-word"},hoverVertical:{background:"#333",border:"none",width:1,height:"100%",top:0,cursor:"default",position:"absolute",pointerEvents:"none"}};var t})),Ve=v.a.forwardRef((function(e,t){var r=e.feature,n=r.get("start"),a=r.get("end"),o=[r.get("refName"),n===a?Be(n):"".concat(Be(n),"..").concat(Be(a))].filter((function(e){return!!e})).join(":");return void 0!==r.get("summary")?v.a.createElement("div",{ref:t},o,v.a.createElement("br",null),"Max: ",De(r.get("maxScore")),v.a.createElement("br",null),"Avg: ",De(r.get("score")),v.a.createElement("br",null),"Min: ",De(r.get("minScore"))):v.a.createElement("div",{ref:t},o,v.a.createElement("br",null),"".concat(De(r.get("score"))))})),ze=Object(y.observer)((function(e){var t=e.model,r=e.height,n=e.clientMouseCoord,a=e.offsetMouseCoord,o=e.clientRect,i=e.TooltipContents,u=t.featureUnderMouse,c=we(Object(g.useState)(0),2),l=c[0],s=c[1],f=we(Object(g.useState)(null),2),d=f[0],p=f[1],h=We(),m=Object(g.useMemo)((function(){return{getBoundingClientRect:function(){var e=n[0]+l/2+20,t=(null==o?void 0:o.top)||0;return{top:t,left:e,bottom:t,right:e,width:0,height:0,x:e,y:t,toJSON:function(){}}}}}),[null==o?void 0:o.top,n,l]),y=Object(I.a)(m,d),b=y.styles,w=y.attributes;return u?v.a.createElement(v.a.Fragment,null,v.a.createElement(R.a,null,v.a.createElement("div",Object.assign({ref:p,className:h.tooltip,style:ie(ie({},b.popper),{},{zIndex:1e5})},w.popper),v.a.createElement(i,{ref:function(e){s((null==e?void 0:e.getBoundingClientRect().width)||0)},feature:u}))),v.a.createElement("div",{className:h.hoverVertical,style:{left:a[0],height:r-2*Xe}})):null})),qe=Object(y.observer)((function(e){return v.a.createElement(ze,Object.assign({TooltipContents:Ve},e))})),He=Object(y.observer)((function(e){var t=e.model,r=e.orientation,n=t.ticks;return v.a.createElement(P.Axis,Object.assign({},n,{format:function(e){return e},style:{orient:"left"===r?P.LEFT:P.RIGHT}}))})),Ue=Object(y.observer)((function(e){var t=e.model,r=t.ready,n=t.stats,a=t.height,o=t.needsScalebar;return v.a.createElement("div",null,v.a.createElement(j.BaseLinearDisplayComponent,Object.assign({},e)),r&&n&&o?v.a.createElement("svg",{style:{position:"absolute",top:0,left:300,pointerEvents:"none",height:a,width:50}},v.a.createElement(He,{model:t})):null)})),Ge=Object(g.lazy)((function(){return Promise.resolve().then((function(){return ut}))})),Je=Object(g.lazy)((function(){return Promise.resolve().then((function(){return lt}))})),Xe=5,Ye=new Map([["xyplot","XYPlotRenderer"],["density","DensityRenderer"],["line","LinePlotRenderer"]]);function $e(e,t){return Math.log(t)/Math.log(e)}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;return(e>=0?1:-1)*Math.pow(t,1+Math.floor($e(t,Math.abs(e))))}var Ze=function(e,t){return x.types.compose("LinearWiggleDisplay",j.BaseLinearDisplay,x.types.model({type:x.types.literal("LinearWiggleDisplay"),configuration:Object(l.ConfigurationReference)(t),selectedRendering:x.types.optional(x.types.string,""),resolution:x.types.optional(x.types.number,1),fill:x.types.maybe(x.types.boolean),color:x.types.maybe(x.types.string),summaryScoreMode:x.types.maybe(x.types.string),rendererTypeNameState:x.types.maybe(x.types.string),scale:x.types.maybe(x.types.string),autoscale:x.types.maybe(x.types.string),displayCrossHatches:x.types.maybe(x.types.boolean),constraints:x.types.optional(x.types.model({max:x.types.maybe(x.types.number),min:x.types.maybe(x.types.number)}),{})})).volatile((function(){return{ready:!1,message:void 0,stats:Object(S.observable)({scoreMin:0,scoreMax:50}),statsFetchInProgress:void 0}})).actions((function(e){return{updateStats:function(t){e.stats.scoreMin=t.scoreMin,e.stats.scoreMax=t.scoreMax,e.ready=!0},setColor:function(t){e.color=t},setLoading:function(t){var r=e.statsFetchInProgress;void 0===r||r.signal.aborted||r.abort(),e.statsFetchInProgress=t},selectFeature:function(t){var r=Object(w.getSession)(e);Object(w.isSelectionContainer)(r)&&r.setSelection(t)},setResolution:function(t){e.resolution=t},setFill:function(t){e.fill=t},toggleLogScale:function(){"log"!==e.scale?e.scale="log":e.scale="linear"},setScaleType:function(t){e.scale=t},setSummaryScoreMode:function(t){e.summaryScoreMode=t},setAutoscale:function(t){e.autoscale=t},setMaxScore:function(t){e.constraints.max=t},setRendererType:function(t){e.rendererTypeNameState=t},setMinScore:function(t){e.constraints.min=t},toggleCrossHatches:function(){e.displayCrossHatches=!e.displayCrossHatches},setCrossHatches:function(t){e.displayCrossHatches=t}}})).views((function(e){return{get TooltipComponent(){return qe},get adapterTypeName(){return e.adapterConfig.type},get rendererTypeName(){var t=e.rendererTypeNameState||Object(l.getConf)(e,"defaultRendering"),r=Ye.get(t);if(!r)throw new Error("unknown alignments view name ".concat(t));return r},get filters(){},get scaleType(){return e.scale||Object(l.getConf)(e,"scaleType")},get filled(){return void 0!==e.fill?e.fill:Object(l.readConfObject)(this.rendererConfig,"filled")},get maxScore(){var t=e.constraints.max;return void 0!==t?t:Object(l.getConf)(e,"maxScore")},get minScore(){var t=e.constraints.min;return void 0!==t?t:Object(l.getConf)(e,"minScore")},get rendererConfig(){var t=Object(l.getConf)(e,["renderers",this.rendererTypeName])||{};return e.rendererType.configSchema.create(ie(ie({},t),{},{filled:e.fill,scaleType:this.scaleType,displayCrossHatches:e.displayCrossHatches,summaryScoreMode:e.summaryScoreMode,color:e.color}),Object(x.getEnv)(e))}}})).views((function(e){var t=[0,0];return{get summaryScoreModeSetting(){return e.summaryScoreMode||Object(l.readConfObject)(e.rendererConfig,"summaryScoreMode")},get domain(){var r=e.stats,n=e.scaleType,a=e.minScore,o=e.maxScore,i=Ne({domain:[r.scoreMin,r.scoreMax],bounds:[a,o],scaleType:n}),u=Object(l.getConf)(e,"headroom")||0;return"log"===n&&i[1]===Number.MIN_VALUE?[0,Number.MIN_VALUE]:(o===Number.MAX_VALUE&&i[1]>1&&(i[1]=Ke(i[1]+u)),a===Number.MIN_VALUE&&i[0]<-1&&(i[0]=Ke(i[0]-u)),JSON.stringify(t)!==JSON.stringify(i)&&(t=i),t)},get needsScalebar(){return"XYPlotRenderer"===e.rendererTypeName||"LinePlotRenderer"===e.rendererTypeName},get scaleOpts(){return{domain:this.domain,stats:e.stats,autoscaleType:this.autoscaleType,scaleType:e.scaleType,inverted:Object(l.getConf)(e,"inverted")}},get canHaveFill(){return"XYPlotRenderer"===e.rendererTypeName},get autoscaleType(){return e.autoscale||Object(l.getConf)(e,"autoscale")},get displayCrossHatchesSetting(){return e.displayCrossHatches||Object(l.readConfObject)(e.rendererConfig,"displayCrossHatches")}}})).views((function(e){return{get ticks(){var t=e.scaleType,r=e.domain,n=e.height,a=Re({scaleType:t,domain:r,range:[n-Xe,Xe],inverted:Object(l.getConf)(e,"inverted")}),o=n<50?2:4;return Object(P.axisPropsFromTickScale)(a,o)}}})).views((function(t){var r=t.renderProps;return{renderProps:function(){return ie(ie({},r()),{},{notReady:!t.ready,rpcDriverName:t.rpcDriverName,displayModel:t,config:t.rendererConfig,scaleOpts:t.scaleOpts,resolution:t.resolution,height:t.height,ticks:t.ticks,displayCrossHatches:t.displayCrossHatches,filters:t.filters})},get adapterCapabilities(){return e.getAdapterType(t.adapterTypeName).adapterCapabilities},get hasResolution(){return this.adapterCapabilities.includes("hasResolution")},get hasGlobalStats(){return this.adapterCapabilities.includes("hasGlobalStats")}}})).views((function(e){var t=e.trackMenuItems;return{trackMenuItems:function(){return[].concat(Oe(t()),Oe(e.hasResolution?[{label:"Resolution",subMenu:[{label:"Finer resolution",onClick:function(){e.setResolution(5*e.resolution)}},{label:"Coarser resolution",onClick:function(){e.setResolution(e.resolution/5)}}]},{label:"Summary score mode",subMenu:["min","max","avg","whiskers"].map((function(t){return{label:t,onClick:function(){return e.setSummaryScoreMode(t)}}}))}]:[]),Oe(e.canHaveFill?[{label:e.filled?"Turn off histogram fill":"Turn on histogram fill",onClick:function(){e.setFill(!e.filled)}}]:[]),[{label:"log"===e.scaleType?"Set linear scale":"Set log scale",onClick:function(){e.toggleLogScale()}},{type:"checkbox",label:"Draw cross hatches",checked:e.displayCrossHatchesSetting,onClick:function(){e.toggleCrossHatches()}}],Oe(Object.keys(Object(l.getConf)(e,"renderers")||{}).length>1?[{label:"Renderer type",subMenu:Oe(Ye.keys()).map((function(t){return{label:t,onClick:function(){return e.setRendererType(t)}}}))}]:[]),[{label:"Autoscale type",subMenu:[["local","Local"]].concat(Oe(e.hasGlobalStats?[["global","Global"],["globalsd","Global  3"]]:[]),[["localsd","Local  3"]]).map((function(t){var r=we(t,2),n=r[0];return{label:r[1],onClick:function(){e.setAutoscale(n)}}}))},{label:"Set min/max score",onClick:function(){Object(w.getSession)(e).queueDialog((function(t){return[Ge,{model:e,handleClose:t}]}))}},{label:"Set color",onClick:function(){Object(w.getSession)(e).queueDialog((function(t){return[Je,{model:e,handleClose:t}]}))}}])}}})).actions((function(e){var t=e.reload,r=e.renderSvg;function n(e){return a.apply(this,arguments)}function a(){return(a=ce(Ce.mark((function t(r){var n,a,o,i,u,c,s,f,d,p,h,m,y,g,v,b,O,k;return Ce.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(w.getSession)(e),a=n.rpcManager,o=Object(l.getConf)(e,"numStdDev")||3,i=e.adapterConfig,u=e.autoscaleType,c=Object(C.getRpcSessionId)(e),s=ie({sessionId:c,adapterConfig:i,statusCallback:function(t){Object(x.isAlive)(e)&&e.setMessage(t)}},r),"global"!==u&&"globalsd"!==u){t.next=11;break}return t.next=8,a.call(c,"WiggleGetGlobalStats",s);case 8:return f=t.sent,d=f.scoreMin,p=f.scoreMean,h=f.scoreStdDev,t.abrupt("return","globalsd"===u?ie(ie({},f),{},{scoreMin:d>=0?0:p-o*h,scoreMax:p+o*h}):f);case 11:if("local"!==u&&"localsd"!==u){t.next=18;break}return m=Object(w.getContainingView)(e),y=m.dynamicBlocks,g=m.bpPerPx,t.next=15,a.call(c,"WiggleGetMultiRegionStats",ie(ie({},s),{},{regions:y.contentBlocks.map((function(e){var t=e.start,r=e.end;return ie(ie({},JSON.parse(JSON.stringify(e))),{},{start:Math.floor(t),end:Math.ceil(r)})})),bpPerPx:g}));case 15:return v=t.sent,b=v.scoreMin,O=v.scoreMean,k=v.scoreStdDev,t.abrupt("return","localsd"===u?ie(ie({},v),{},{scoreMin:b>=0?0:O-o*k,scoreMax:O+o*k}):v);case 18:if("zscale"!==u){t.next=20;break}return t.abrupt("return",a.call(c,"WiggleGetGlobalStats",s));case 20:throw new Error("invalid autoscaleType '".concat(u,"'"));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{reload:function(){return ce(Ce.mark((function r(){var a,o;return Ce.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setError(),a=new AbortController,r.prev=2,r.next=5,n({signal:a.signal,filters:e.filters});case 5:o=r.sent,Object(x.isAlive)(e)&&(e.updateStats(o),t()),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),e.setError(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},afterAttach:function(){Object(x.addDisposer)(e,Object(S.autorun)(ce(Ce.mark((function t(){var r,a,o;return Ce.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=new AbortController,a=Object(w.getContainingView)(e),e.setLoading(r),a.initialized){t.next=6;break}return t.abrupt("return");case 6:if(!(a.bpPerPx>e.maxViewBpPerPx)){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,n({signal:r.signal,filters:e.filters});case 10:o=t.sent,Object(x.isAlive)(e)&&e.updateStats(o),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),!Object(w.isAbortException)(t.t0)&&Object(x.isAlive)(e)&&(console.error(t.t0),e.setError(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),{delay:1e3}))},renderSvg:function(t){return ce(Ce.mark((function n(){var a,o,i,u;return Ce.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(S.when)((function(){return e.ready&&!!e.regionCannotBeRenderedText}));case 2:return a=e.needsScalebar,o=e.stats,i=Object(w.getContainingView)(e),u=i.offsetPx,n.t0=v.a,n.t1=v.a.Fragment,n.t2=v.a,n.t3={id:"snpcov"},n.next=10,r(t);case 10:return n.t4=n.sent,n.t5=n.t2.createElement.call(n.t2,"g",n.t3,n.t4),n.t6=a&&o?v.a.createElement("g",{transform:"translate(".concat(Math.max(-u,0),")")},v.a.createElement(He,{model:e,orientation:"left"})):null,n.abrupt("return",n.t0.createElement.call(n.t0,n.t1,null,n.t5,n.t6));case 14:case"end":return n.stop()}}),n)})))()}}}))},Qe=function(e){pe(r,e);var t=ge(r);function r(){return le(this,r),t.apply(this,arguments)}return fe(r,[{key:"draw",value:function(e,t){var r=t.features,n=t.bpPerPx,a=t.regions,o=t.scaleOpts,i=t.height,u=t.config,c=t.ticks.values,s=t.displayCrossHatches,f=we(a,1)[0],d=(f.end-f.start)/n,p=Xe,h=i-2*p,m=Object(l.readConfObject)(u,"bicolorPivotValue"),y=Object(l.readConfObject)(u,"negColor"),g=Object(l.readConfObject)(u,"posColor"),v=Object(l.readConfObject)(u,"filled"),b=Object(l.readConfObject)(u,"clipColor"),O=Object(l.readConfObject)(u,"highlightColor"),k=Object(l.readConfObject)(u,"summaryScoreMode"),E=Re(ie(ie({},o),{},{range:[0,h]})),x=Ae(o.scaleType),j=we(E.domain(),2),C=j[0],S=j[1],P=function(e){return h-(E(e)||0)+p},T=function(e){return P(x)-P(e)},M="#f0f"===Object(l.readConfObject)(u,"color")?function(e,t){return t<m?y:g}:function(e,t){return Object(l.readConfObject)(u,"color",{feature:e})};e.strokeStyle="grey",e.moveTo(0,P(0)),e.lineTo(d,P(0)),e.stroke();var R,A=C<m&&S>m,N=xe(r.values());try{for(N.s();!(R=N.n()).done;){var _=R.value,L=we(Object(w.featureSpanPx)(_,f,n),2),F=L[0],I=L[1],D=_.get("score"),W=_.get("maxScore"),V=_.get("minScore"),z=D<C,q=D>S,H=I-F+.4,U=_.get("summary");if("max"===k)D=U?W:D,e.fillStyle=M(_,D),e.fillRect(F,P(D),H,v?T(D):1);else if("min"===k)D=U?V:D,e.fillStyle=M(_,D),e.fillRect(F,P(D),H,v?T(D):1);else if("whiskers"===k){var G=M(_,D);U&&(e.fillStyle=A?M(_,W):B()(G).lighten(.6).toString(),e.fillRect(F,P(W),H,v?T(W)-T(D):1)),e.fillStyle=A&&U?B()(M(_,W)).mix(B()(M(_,V))):G,e.fillRect(F,P(D),H,v?T(D)-(U?T(V):0):1),U&&(e.fillStyle=A?M(_,V):B()(G).darken(.6).toString(),e.fillRect(F,P(V),H,v?T(V):1))}else e.fillStyle=M(_,D),e.fillRect(F,P(D),H,v?T(D):1);q?(e.fillStyle=b,e.fillRect(F,0,H,4)):z&&"log"!==o.scaleType&&(e.fillStyle=b,e.fillRect(F,i-4,H,4)),_.get("highlighted")&&(e.fillStyle=O,e.fillRect(F,0,H,h))}}catch(e){N.e(e)}finally{N.f()}s&&(e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.8)",c.forEach((function(t){e.beginPath(),e.moveTo(0,Math.round(P(t))),e.lineTo(d,Math.round(P(t))),e.stroke()})))}}]),r}(Se),et=Object(l.ConfigurationSchema)("XYPlotRenderer",{},{baseConfiguration:Le,explicitlyTyped:!0}),tt=function(e){pe(r,e);var t=ge(r);function r(){return le(this,r),t.apply(this,arguments)}return fe(r,[{key:"draw",value:function(e,t){var r,n=t.features,a=t.regions,o=t.bpPerPx,i=t.scaleOpts,u=t.height,c=t.ticks.values,s=t.displayCrossHatches,f=t.config,d=we(a,1)[0],p=(d.end-d.start)/o,h=Xe,m=u-2*h,y=Object(l.readConfObject)(f,"clipColor"),g=Object(l.readConfObject)(f,"highlightColor"),v=Re(ie(ie({},i),{},{range:[0,m]})),b=we(v.domain(),2),O=b[0],k=b[1],E=function(e){return m-v(e)+h},x="#f0f"===Object(l.readConfObject)(f,"color")?function(){return"grey"}:function(e){return Object(l.readConfObject)(f,"color",{feature:e})};e.strokeStyle="grey",e.moveTo(0,E(0)),e.lineTo(p,E(0)),e.stroke();var j,C=xe(n.values());try{for(C.s();!(j=C.n()).done;){var S=j.value,P=we(Object(w.featureSpanPx)(S,d,o),2),T=P[0],M=P[1],R=S.get("score"),A=R<O,N=R>k,_=M-T+.3,L=x(S);e.strokeStyle=L,e.beginPath(),d.reversed?(e.moveTo(M,E(void 0!==r?r:R)),e.lineTo(M,E(R)),e.lineTo(T,E(R))):(e.moveTo(T,E(void 0!==r?r:R)),e.lineTo(T,E(R)),e.lineTo(M,E(R))),e.stroke(),r=R,N?(e.fillStyle=y,e.fillRect(T,0,_,4)):A&&"log"!==i.scaleType&&(e.fillStyle=y,e.fillRect(T,m-4,_,m)),S.get("highlighted")&&(e.fillStyle=g,e.fillRect(T,0,_,m))}}catch(e){C.e(e)}finally{C.f()}s&&(e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.8)",c.forEach((function(t){e.beginPath(),e.moveTo(0,Math.round(E(t))),e.lineTo(p,Math.round(E(t))),e.stroke()})))}}]),r}(Se),rt=Object(l.ConfigurationSchema)("LinePlotRenderer",{},{baseConfiguration:Le,explicitlyTyped:!0}),nt=function(e){pe(a,e);var t,r,n=ge(a);function a(){var e;return le(this,a),(e=n.apply(this,arguments)).name="WiggleGetGlobalStats",e}return fe(a,[{key:"deserializeArguments",value:(r=ce(Ce.mark((function e(t,r){var n;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(he(a.prototype),"deserializeArguments",this).call(this,t,r);case 2:return n=e.sent,e.abrupt("return",ie(ie({},n),{},{filters:t.filters?new U.a({filters:t.filters}):void 0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=ce(Ce.mark((function e(t,r){var n,a,o,i,u;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,a=n.adapterConfig,o=n.sessionId,e.next=6,Object(W.getAdapter)(this.pluginManager,o,a);case 6:if(i=e.sent,!((u=i.dataAdapter)instanceof q.BaseFeatureDataAdapter)){e.next=12;break}if(!u.capabilities.includes("hasGlobalStats")){e.next=11;break}return e.abrupt("return",u.getGlobalStats(n));case 11:throw new Error("Data adapter does not support global stats");case 12:throw new Error("Data adapter not found");case 13:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),a}(z.a),at=function(e){pe(o,e);var t,r,n,a=ge(o);function o(){var e;return le(this,o),(e=a.apply(this,arguments)).name="WiggleGetMultiRegionStats",e}return fe(o,[{key:"deserializeArguments",value:(n=ce(Ce.mark((function e(t,r){var n;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(he(o.prototype),"deserializeArguments",this).call(this,t,r);case 2:return n=e.sent,e.abrupt("return",ie(ie({},n),{},{filters:t.filters?new U.a({filters:t.filters}):void 0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"serializeArguments",value:(r=ce(Ce.mark((function e(t,r){var n,a,i,u;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(n=this.pluginManager.rootModel)||void 0===n||null===(a=n.session)||void 0===a?void 0:a.assemblyManager){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,Object(w.renameRegionsIfNeeded)(i,ie(ie({},t),{},{filters:t.filters&&t.filters.toJSON().filters}));case 5:return u=e.sent,e.abrupt("return",be(he(o.prototype),"serializeArguments",this).call(this,u,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"execute",value:(t=ce(Ce.mark((function e(t,r){var n,a,o,i,u,c;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deserializeArguments(t,r);case 2:return n=e.sent,a=n.regions,o=n.adapterConfig,i=n.sessionId,e.next=6,Object(W.getAdapter)(this.pluginManager,i,o);case 6:if(u=e.sent,!((c=u.dataAdapter)instanceof q.BaseFeatureDataAdapter)){e.next=10;break}return e.abrupt("return",c.getMultiRegionStats(a,n));case 10:throw new Error("Data adapter not found");case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),o}(z.a),ot=function(e){pe(r,e);var t=ge(r);function r(){var e;return le(this,r),(e=t.apply(this,arguments)).name="WigglePlugin",e.exports={LinearWiggleDisplayReactComponent:Ue,XYPlotRendererReactComponent:Te,XYPlotRenderer:Qe,xyPlotRendererConfigSchema:et,utils:_e,WiggleBaseRenderer:Se,linearWiggleDisplayModelFactory:Ze},e}return fe(r,[{key:"install",value:function(e){e.addTrackType((function(){var t=Object(l.ConfigurationSchema)("QuantitativeTrack",{},{baseConfiguration:Object(s.createBaseTrackConfig)(e)});return new i.a({name:"QuantitativeTrack",configSchema:t,stateModel:Object(s.createBaseTrackModel)(e,"QuantitativeTrack",t)})})),e.addDisplayType((function(){var t=function(e){var t=e.getRendererType("XYPlotRenderer").configSchema,r=e.getRendererType("DensityRenderer").configSchema,n=e.getRendererType("LinePlotRenderer").configSchema;return Object(l.ConfigurationSchema)("LinearWiggleDisplay",{autoscale:{type:"stringEnum",defaultValue:"local",model:x.types.enumeration("Autoscale type",["global","local","globalsd","localsd","zscore"]),description:"global/local using their min/max values or w/ standard deviations (globalsd/localsd)"},minScore:{type:"number",defaultValue:Number.MIN_VALUE,description:"minimum value for the y-scale"},maxScore:{type:"number",description:"maximum value for the y-scale",defaultValue:Number.MAX_VALUE},numStdDev:{type:"number",description:"number of standard deviations to use for autoscale types globalsd or localsd",defaultValue:3},scaleType:{type:"stringEnum",model:x.types.enumeration("Scale type",["linear","log"]),description:"The type of scale to use",defaultValue:"linear"},inverted:{type:"boolean",description:"draw upside down",defaultValue:!1},defaultRendering:{type:"stringEnum",model:x.types.enumeration("Rendering",["density","xyplot","line"]),defaultValue:"xyplot"},renderers:Object(l.ConfigurationSchema)("RenderersConfiguration",{DensityRenderer:r,XYPlotRenderer:t,LinePlotRenderer:n})},{baseConfiguration:j.baseLinearDisplayConfigSchema,explicitlyTyped:!0})}(e);return new d.a({name:"LinearWiggleDisplay",configSchema:t,stateModel:Ze(e,t),trackType:"QuantitativeTrack",viewType:"LinearGenomeView",ReactComponent:Ue})})),e.addAdapterType((function(){return new a.a({name:"BigWigAdapter",configSchema:Me,adapterCapabilities:["hasResolution","hasLocalStats","hasGlobalStats"],getAdapterClass:function(){return Promise.resolve().then((function(){return ft})).then((function(e){return e.default}))}})})),e.addToExtensionPoint("Core-guessAdapterForLocation",(function(e){return function(t,r,n){var a=Object(C.getFileName)(t);return/\.(bw|bigwig)$/i.test(a)||"BigWigAdapter"===n?{type:"BigWigAdapter",bigWigLocation:t}:e(t,r,n)}})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(function(e){return function(t){return"BigWigAdapter"===t?"QuantitativeTrack":e(t)}})),e.addRendererType((function(){return new Fe({name:"DensityRenderer",ReactComponent:Te,configSchema:Ie,pluginManager:e})})),e.addRendererType((function(){return new tt({name:"LinePlotRenderer",ReactComponent:Te,configSchema:rt,pluginManager:e})})),e.addRendererType((function(){return new Qe({name:"XYPlotRenderer",ReactComponent:Te,configSchema:et,pluginManager:e})})),e.addRpcMethod((function(){return new nt(e)})),e.addRpcMethod((function(){return new at(e)}))}}]),r}(c.a),it=Object(T.a)((function(e){return{root:{},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));var ut={__proto__:null,default:function(e){var t=it(),r=e.model,n=e.handleClose,a=r.minScore,o=r.maxScore,i=r.scaleType,u=we(Object(g.useState)("".concat(a!==Number.MIN_VALUE?a:"")),2),c=u[0],l=u[1],s=we(Object(g.useState)("".concat(o!==Number.MAX_VALUE?o:"")),2),f=s[0],d=s[1],p=!(""!==c&&""!==f&&!Number.isNaN(+c)&&!Number.isNaN(+f))||+f>+c,h=!("log"===i&&""!==c&&!Number.isNaN(+c))||+c>0;return v.a.createElement(A.a,{open:!0,onClose:n},v.a.createElement(N.a,null,"Set min/max score for track",v.a.createElement(_.a,{className:t.closeButton,onClick:n},v.a.createElement(Y.a,null))),v.a.createElement(L.a,{style:{overflowX:"hidden"}},v.a.createElement("div",{className:t.root},v.a.createElement(J.a,null,"Enter min/max score: "),p?null:v.a.createElement(J.a,{color:"error"},"Max is greater than or equal to min"),h?null:v.a.createElement(J.a,{color:"error"},"Min score should be greater than 0 for log scale"),v.a.createElement(G.a,{value:c,onChange:function(e){l(e.target.value)},placeholder:"Enter min score"}),v.a.createElement(G.a,{value:f,onChange:function(e){d(e.target.value)},placeholder:"Enter max score"}),v.a.createElement(F.a,{variant:"contained",color:"primary",type:"submit",style:{marginLeft:20},disabled:!p,onClick:function(){r.setMinScore(""===c||Number.isNaN(+c)?void 0:+c),r.setMaxScore(""===f||Number.isNaN(+f)?void 0:+f),n()}},"Submit"))))}},ct=Object(T.a)((function(e){return{root:{},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));var lt={__proto__:null,default:function(e){var t=ct(),r=e.model,n=e.handleClose;return v.a.createElement(A.a,{open:!0,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},v.a.createElement(N.a,{id:"alert-dialog-title"},"Select a color",v.a.createElement(_.a,{"aria-label":"close",className:t.closeButton,onClick:n},v.a.createElement(Y.a,null))),v.a.createElement(L.a,{style:{overflowX:"hidden"}},v.a.createElement("div",{className:t.root},v.a.createElement($.b,{onChange:function(e){r.setColor(function(e){if(e instanceof Object){var t=e.r,r=e.g,n=e.b,a=e.a;return"rgb(".concat(t,",").concat(r,",").concat(n,",").concat(a,")")}return e}(e.rgb))}}),v.a.createElement("br",null),v.a.createElement("div",{style:{margin:20}},v.a.createElement(F.a,{onClick:function(){r.setColor(void 0)},color:"secondary",variant:"contained"},"Restore default from config"),v.a.createElement(F.a,{variant:"contained",color:"primary",type:"submit",onClick:function(){n()}},"Submit")))))}},st=function(e){pe(i,e);var t,r,n,a,o=ge(i);function i(e,t,r){var n;return le(this,i),(n=o.call(this,e,t,r)).bigwig=new K.BigWig({filehandle:Object(Z.openLocation)(Object(l.readConfObject)(e,"bigWigLocation"),n.pluginManager)}),n}return fe(i,[{key:"setup",value:(a=ce(Ce.mark((function e(t){var r,n,a;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t||{}).statusCallback,(n=void 0===r?function(){}:r)("Downloading bigwig header"),e.next=4,this.bigwig.getHeader(t);case 4:return a=e.sent,n(""),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getRefNames",value:(n=ce(Ce.mark((function e(t){var r;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:return r=e.sent,e.abrupt("return",Object.keys(r.refsByName));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"refIdToName",value:(r=ce(Ce.mark((function e(t){var r;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:return r=e.sent,e.abrupt("return",(r.refsByNumber[t]||{name:void 0}).name);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getGlobalStats",value:(t=ce(Ce.mark((function e(t){var r;return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:return r=e.sent,e.abrupt("return",Object(ae.rectifyStats)(r.totalSummary));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.refName,a=e.start,o=e.end,i=r.bpPerPx,u=void 0===i?0:i,c=r.signal,l=r.resolution,s=void 0===l?1:l,f=r.statusCallback,d=void 0===f?function(){}:f;return Object(Q.ObservableCreate)(function(){var e=ce(Ce.mark((function e(i){return Ce.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("Downloading bigwig data"),e.next=3,t.bigwig.getFeatureStream(n,a,o,ie(ie({},r),{},{basesPerSpan:u/s}));case 3:e.sent.pipe(Object(re.a)(),Object(ne.a)((function(e){return new te.a({id:"".concat(n,":").concat(e.start,"-").concat(e.end),data:ie(ie({},e),{},{refName:n})})}))).subscribe(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c)}},{key:"freeResources",value:function(){}}]),i}(q.BaseFeatureDataAdapter);st.capabilities=["hasResolution","hasLocalStats","hasGlobalStats"];var ft={__proto__:null,default:st};t.default=ot},1862:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.extend((function(){return function(e){return{views:{get snackbarMessages(){return e}},actions:{notify:function(e,t){var r=this;this.pushSnackbarMessage(e,t),"info"!==t&&"success"!==t||setTimeout((function(){r.removeSnackbarMessage(e)}),5e3)},pushSnackbarMessage:function(t,r){return e.push([t,r])},popSnackbarMessage:function(){return e.pop()},removeSnackbarMessage:function(t){var r=e.find((function(e){return e[0]===t}));r&&e.remove(r)}}}}(n.observable.array())}))};var n=r(51)},1863:function(e,t,r){"use strict";(function(e){var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PluginSourceConfigurationSchema=void 0,t.isCJSPluginDefinition=k,t.isESMPluginDefinition=O,t.isUMDPluginDefinition=w;var o=n(r(22)),i=n(r(21)),u=n(r(24)),c=n(r(15)),l=n(r(16)),s=n(r(13)),f=n(r(20)),d=n(r(1017)),p=n(r(1864)),h=r(46),m=n(r(1031)),y=r(45);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var b=(0,h.ConfigurationSchema)("PluginSource",{name:{type:"string",defaultValue:""},url:{type:"string",defaultValue:""}});function w(e){return(void 0!==e.umdUrl||void 0!==e.url)&&void 0!==e.name}function O(e){return void 0!==e.esmUrl}function k(e){return void 0!==e.cjsUrl}function E(){return"object"===("undefined"==typeof self?"undefined":(0,f.default)(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":(0,f.default)(e))&&e.global===e&&e||this}t.PluginSourceConfigurationSchema=b;var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,c.default)(this,e),(0,s.default)(this,"definitions",[]),this.definitions=JSON.parse(JSON.stringify(t))}var t,n,a,f,h;return(0,l.default)(e,[{key:"loadScript",value:function(e){var t=E();if(!function(e){return Boolean("WorkerGlobalScope"in e)}(t))return(0,d.default)(e);if(t&&t.importScripts)return new Promise((function(r,n){try{t.importScripts(e)}catch(t){return void n(t||new Error("failed to load ".concat(e)))}r()}));throw new Error("cannot figure out how to load external JS scripts in this environment")}},{key:"loadCJSPlugin",value:(h=(0,u.default)(o.default.mark((function e(t){var n,a,i,u,c,l,s,f,d,h,m,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=new URL(t.cjsUrl,E().location.href),e.next=8;break;case 4:throw e.prev=4,e.t0=e.catch(0),console.error(e.t0),new Error("Error parsing URL: ".concat(t.cjsUrl));case 8:if("http:"===n.protocol||"https:"===n.protocol){e.next=10;break}throw new Error('cannot load plugins using protocol "'.concat(n.protocol,'"'));case 10:return a=r(1868),i=r(1869),u=r(1870),c=r(1871),l=a.promises,e.next=17,l.realpath(u.tmpdir());case 17:return s=e.sent,e.next=20,l.mkdtemp(i.join(s,"jbrowse-plugin-"));case 20:return f=e.sent,d=void 0,e.prev=22,h=i.join(f,(0,p.default)(n.href)),m=i.relative(".",h),y=new Promise((function(e,t){var r=a.createWriteStream(h);c.get(n.href,(function(t){t.pipe(r),r.on("finish",(function(){e()}))})).on("error",(function(e){a.unlinkSync(h),t(e)}))})),e.next=28,y;case 28:d=require(m);case 29:return e.prev=29,l.rmdir(f,{recursive:!0}),e.finish(29);case 32:if(d){e.next=34;break}throw new Error("Could not load CJS plugin: ".concat(n));case 34:return e.abrupt("return",d);case 35:case"end":return e.stop()}}),e,null,[[0,4],[22,,29,32]])}))),function(e){return h.apply(this,arguments)})},{key:"loadESMPlugin",value:(f=(0,u.default)(o.default.mark((function e(t){var n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=new URL(t.esmUrl,E().location.href),e.next=8;break;case 4:throw e.prev=4,e.t0=e.catch(0),console.error(e.t0),new Error("Error parsing URL: ".concat(t.esmUrl));case 8:if("http:"===n.protocol||"https:"===n.protocol){e.next=10;break}throw new Error('cannot load plugins using protocol "'.concat(n.protocol,'"'));case 10:return e.next=12,Promise.resolve("".concat(n.href)).then((function(e){return v(r(1881)(e))}));case 12:if(a=e.sent){e.next=15;break}throw new Error("Could not load ESM plugin: ".concat(n));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[0,4]])}))),function(e){return f.apply(this,arguments)})},{key:"loadUMDPlugin",value:(a=(0,u.default)(o.default.mark((function e(t){var r,n,a,i,u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="url"in t?t.url:t.umdUrl,e.prev=1,n=new URL(r,E().location.href),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(1),console.error(e.t0),new Error("Error parsing URL: ".concat(r));case 9:if("http:"===n.protocol||"https:"===n.protocol){e.next=11;break}throw new Error('cannot load plugins using protocol "'.concat(n.protocol,'"'));case 11:return e.next=13,this.loadScript(n.href);case 13:if(a=t.name,i="JBrowsePlugin".concat(a),u=E(),c=u[i]){e.next=19;break}throw new Error("Failed to load UMD bundle for ".concat(a,", ").concat(u.constructor.name,".").concat(i," is undefined"));case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e,this,[[1,5]])}))),function(e){return a.apply(this,arguments)})},{key:"loadPlugin",value:(n=(0,u.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.isElectron||!k(t)){e.next=6;break}return e.next=3,this.loadCJSPlugin(t);case 3:r=e.sent,e.next=23;break;case 6:if(!O(t)){e.next=12;break}return e.next=9,this.loadESMPlugin(t);case 9:r=e.sent,e.next=23;break;case 12:if(!w(t)){e.next=18;break}return e.next=15,this.loadUMDPlugin(t);case 15:r=e.sent,e.next=23;break;case 18:if(y.isElectron||!k(t)){e.next=22;break}throw new Error("Only CommonJS plugin found, but not in a NodeJS environment: ".concat(JSON.stringify(t)));case 22:throw new Error("Could not determine plugin type: ".concat(JSON.stringify(t)));case 23:return e.abrupt("return",r.default);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"installGlobalReExports",value:function(e){e.JBrowseExports=Object.fromEntries(Object.entries(m.default).map((function(e){var t=(0,i.default)(e,2);return[t[0],t[1]]})))}},{key:"load",value:(t=(0,u.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(this.definitions.map(function(){var e=(0,u.default)(o.default.mark((function e(r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadPlugin(r);case 2:return e.t0=e.sent,e.t1=r,e.abrupt("return",{plugin:e.t0,definition:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=x}).call(this,r(49))},1864:function(e,t,r){"use strict";var n=r(1865),a=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,i=/^\.+$/,u=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function l(e,t){if("string"!=typeof e)throw new Error("Input must be string");var r=e.replace(a,t).replace(o,t).replace(i,t).replace(u,t).replace(c,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=l(e,r);return""===r?n:l(n,"")}},1865:function(e,t,r){"use strict";var n=r(1866),a=r(1867);e.exports=n.bind(null,a)},1866:function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function a(e){return e>=56320&&e<=57343}e.exports=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var o,i,u=t.length,c=0,l=0;l<u;l+=1){if(o=t.charCodeAt(l),i=t[l],n(o)&&a(t.charCodeAt(l+1))&&(i+=t[l+=1]),(c+=e(i))===r)return t.slice(0,l+1);if(c>r)return t.slice(0,l-i.length+1)}return t}},1867:function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function a(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,r=0,o=null,i=null,u=0;u<t;u++)a(o=e.charCodeAt(u))?null!=i&&n(i)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),i=o;return r}},1868:function(e,t){},1869:function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),o=n(r.split("/")),i=Math.min(a.length,o.length),u=i,c=0;c<i;c++)if(a[c]!==o[c]){u=c;break}var l=[];for(c=u;c<a.length;c++)l.push("..");return(l=l.concat(o.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!a){n=o;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var u=e.charCodeAt(i);if(47!==u)-1===n&&(a=!1,n=i+1),46===u?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){r=i+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(76))},1870:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},1871:function(e,t,r){(function(e){var n=r(1872),a=r(1044),o=r(1879),i=r(1880),u=r(955),c=t;c.request=function(t,r){t="string"==typeof t?u.parse(t):o(t);var a=-1===e.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||a,c=t.hostname||t.host,l=t.port,s=t.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),t.url=(c?i+"//"+c:"")+(l?":"+l:"")+s,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new n(t);return r&&f.on("response",r),f},c.get=function(e,t){var r=c.request(e,t);return r.end(),r},c.ClientRequest=n,c.IncomingMessage=a.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=i,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(49))},1872:function(e,t,r){(function(t,n,a){var o=r(1043),i=r(101),u=r(1044),c=r(1045),l=r(1878),s=u.IncomingMessage,f=u.readyStates;var d=e.exports=function(e){var r,n=this;c.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var a=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)a=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}(r,a),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};i(d,c.Writable),d.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===p.indexOf(r)&&(this._headers[r]={name:e,value:t})},d.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},d.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},d.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,i=e._headers,u=null;"GET"!==r.method&&"HEAD"!==r.method&&(u=o.arraybuffer?l(t.concat(e._body)):o.blobConstructor?new n.Blob(e._body.map((function(e){return l(e)})),{type:(i["content-type"]||{}).value||""}):t.concat(e._body).toString());var c=[];if(Object.keys(i).forEach((function(e){var t=i[e].name,r=i[e].value;Array.isArray(r)?r.forEach((function(e){c.push([t,e])})):c.push([t,r])})),"fetch"===e._mode){var s=null;if(o.abortController){var d=new AbortController;s=d.signal,e._fetchAbortController=d,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=n.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(e._opts.url,{method:e._opts.method,headers:c,body:u||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:s}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){n.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var p=e._xhr=new n.XMLHttpRequest;try{p.open(e._opts.method,e._opts.url,!0)}catch(t){return void a.nextTick((function(){e.emit("error",t)}))}"responseType"in p&&(p.responseType=e._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(p.timeout=r.requestTimeout,p.ontimeout=function(){e.emit("requestTimeout")}),c.forEach((function(e){p.setRequestHeader(e[0],e[1])})),e._response=null,p.onreadystatechange=function(){switch(p.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(p.onprogress=function(){e._onXHRProgress()}),p.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{p.send(u)}catch(t){return void a.nextTick((function(){e.emit("error",t)}))}}}},d.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var e=this;e._destroyed||(e._response=new s(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},d.prototype._write=function(e,t,r){this._body.push(e),r()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(this,e,t,r)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(38).Buffer,r(49),r(76))},1873:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},1874:function(e,t){},1875:function(e,t,r){"use strict";var n=r(239).Buffer,a=r(1876);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,a,o=n.allocUnsafe(e>>>0),i=this.head,u=0;i;)t=i.data,r=o,a=u,t.copy(r,a),u+=i.data.length,i=i.next;return o},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},1876:function(e,t){},1877:function(e,t,r){"use strict";e.exports=o;var n=r(1050),a=Object.create(r(135));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}a.inherits=r(101),a.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},1878:function(e,t,r){var n=r(38).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,a=0;a<r;a++)t[a]=e[a];return t.buffer}throw new Error("Argument must be a Buffer")}},1879:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)r.call(n,a)&&(e[a]=n[a])}return e};var r=Object.prototype.hasOwnProperty},1880:function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},1881:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=1881},1882:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.config,r=e.handleClose,n=m(),a=(0,c.useState)(),h=(0,u.default)(a,2),y=h[0],g=h[1],v=(0,c.useState)(),b=(0,u.default)(v,2),w=b[0],O=b[1],k=(0,d.getSession)(t),E=k.rpcManager,x=(0,f.readConfObject)(t);(0,c.useEffect)((function(){var e=new AbortController,r=e.signal,n=!1;return(0,i.default)(o.default.mark((function e(){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,f.readConfObject)(t,"adapter"),e.next=4,E.call(t.trackId,"CoreGetInfo",{adapterConfig:a,signal:r});case 4:i=e.sent,n||g(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n||(console.error(e.t0),O(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){e.abort(),n=!0}}),[t,E]);var j=(0,f.readConfObject)(t,"name");"ReferenceSequenceTrack"===(0,f.readConfObject)(t,"type")&&(j="Reference Sequence",k.assemblies.forEach((function(e){e.sequence===t.configuration&&(j="Reference Sequence (".concat((0,f.readConfObject)(e,"name"),")"))})));var C="string"==typeof y?{header:"<pre>".concat(y.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"</pre>")}:y||{};return c.default.createElement(l.Dialog,{open:!0,onClose:r},c.default.createElement(l.DialogTitle,null,j,c.default.createElement(l.IconButton,{className:n.closeButton,onClick:function(){return r()}},c.default.createElement(s.default,null))),c.default.createElement(l.DialogContent,null,c.default.createElement(p.BaseCard,{title:"Configuration"},c.default.createElement(p.Attributes,{attributes:x,omit:["displays","baseUri","refNames"]})),null!==y?c.default.createElement(p.BaseCard,{title:"File info"},w?c.default.createElement(l.Typography,{color:"error"},"".concat(w)):y?c.default.createElement(p.Attributes,{attributes:C}):"Loading file data..."):null))};var o=n(r(22)),i=n(r(24)),u=n(r(21)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),l=r(33),s=n(r(82)),f=r(46),d=r(45),p=r(433);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m=(0,l.makeStyles)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))},206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultValue=function(e){if(!(0,n.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue},t.getEnumerationValues=function(e){return o(e).map((function(e){return e.value}))},t.getPropertyType=function(e,t){return e.properties[t]},t.getSubType=a,t.getUnionSubTypes=o,t.resolveLateType=function(e){if(!(0,n.isUnionType)(e)&&!(0,n.isArrayType)(e)&&(0,n.isLateType)(e))return e.getSubType();return e};var n=r(18);function a(e){var t;if((0,n.isOptionalType)(e))t=e._subtype||e.type;else{if(!(0,n.isArrayType)(e)&&!(0,n.isMapType)(e)){if("function"==typeof e.getSubType)return e.getSubType();throw new TypeError("unsupported mst type")}t=e._subtype||e._subType||e.subType}if(!t)throw new Error("failed to get subtype");return t}function o(e){if(!(0,n.isUnionType)(e))throw new TypeError("not an MST union type");var t=e._types||e.types||a(e)._types||a(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}},207:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0});var a={isViewContainer:!0,isSessionModel:!0,isSessionModelWithConfigEditing:!0,isSessionWithAddTracks:!0,isSessionModelWithWidgets:!0,isSessionWithSessionPlugins:!0,isSelectionContainer:!0,isViewModel:!0,isTrackModel:!0,isDisplayModel:!0,isTrackViewModel:!0,isAppRootModel:!0,isAbstractMenuManager:!0,isUriLocation:!0,AuthNeededError:!0,RetryError:!0,isAuthNeededException:!0,isRetryException:!0};t.RetryError=t.AuthNeededError=void 0,t.isAbstractMenuManager=function(e){return"object"===(0,d.default)(e)&&null!==e&&"appendMenu"in e&&"appendToSubMenu"in e},t.isAppRootModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"isAssemblyEditing"in e&&"findAppropriateInternetAccount"in e},t.isAuthNeededException=function(e){return"AuthNeededError"===e.name||void 0!==e.location},t.isDisplayModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"configuration"in e&&e.configuration.displayId},t.isRetryException=function(e){return"RetryError"===e.name||void 0!==e.internetAccountId},t.isSelectionContainer=function(e){return"object"===(0,d.default)(e)&&null!==e&&"selection"in e&&"setSelection"in e},t.isSessionModel=y,t.isSessionModelWithConfigEditing=function(e){return y(e)&&"editConfiguration"in e},t.isSessionModelWithWidgets=function(e){return y(e)&&"widgets"in e},t.isSessionWithAddTracks=function(e){return y(e)&&"addTrackConf"in e},t.isSessionWithSessionPlugins=function(e){return y(e)&&"sessionPlugins"in e},t.isTrackModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"configuration"in e&&e.configuration.trackId},t.isTrackViewModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"showTrack"in e&&"hideTrack"in e},t.isUriLocation=function(e){return"object"===(0,d.default)(e)&&null!==e&&"locationType"in e&&"uri"in e},t.isViewContainer=function(e){return(0,p.isStateTreeNode)(e)&&"removeView"in e&&"addView"in e&&"views"in e},t.isViewModel=function(e){return"object"===(0,d.default)(e)&&null!==e&&"width"in e&&"setWidth"in e};var o=n(r(16)),i=n(r(15)),u=n(r(35)),c=n(r(27)),l=n(r(28)),s=n(r(26)),f=n(r(223)),d=n(r(20)),p=r(18),h=r(1805);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}function y(e){return"object"===(0,d.default)(e)&&null!==e&&"rpcManager"in e&&"configuration"in e}Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var g=function(e){(0,c.default)(r,e);var t=m(r);function r(e,n){var a;return(0,i.default)(this,r),(a=t.call(this,e)).name="AuthNeededError",Object.setPrototypeOf((0,u.default)(a),r.prototype),a}return(0,o.default)(r)}((0,f.default)(Error));t.AuthNeededError=g;var v=function(e){(0,c.default)(r,e);var t=m(r);function r(e,n){var a;return(0,i.default)(this,r),(a=t.call(this,e)).name="RetryError",a}return(0,o.default)(r)}((0,f.default)(Error));t.RetryError=v},208:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"heading",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"HeadingComponent",void 0),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"stateModel",void 0),n.heading=e.heading,n.HeadingComponent=e.HeadingComponent,n.configSchema=e.configSchema,n.stateModel=e.stateModel,n.ReactComponent=e.ReactComponent,!n.ReactComponent)throw new Error("no ReactComponent defined for widget ".concat(n.name));if(!n.stateModel)throw new Error("no stateModel defined for widget ".concat(n.name));return n}return(0,a.default)(r)}(n(r(143)).default);t.default=d},209:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureDataAdapter=t.BaseAdapter=void 0,t.isFeatureAdapter=function(e){return"getFeatures"in e},t.isRefNameAliasAdapter=function(e){return"getRefNameAliases"in e},t.isRegionsAdapter=function(e){return"getRegions"in e},t.isSequenceAdapter=function(e){return"getRegions"in e&&"getFeatures"in e},t.isTextSearchAdapter=function(e){return"searchIndex"in e};var a=n(r(22)),o=n(r(41)),i=n(r(24)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(16)),f=n(r(15)),d=n(r(13)),p=r(181),h=r(58),m=r(18),y=r(253),g=r(45),v=r(597),b=r(1032),w=n(r(1033));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var k=(0,s.default)((function e(t=(0,v.ConfigurationSchema)("empty",{}).create(),r,n){if((0,f.default)(this,e),(0,d.default)(this,"id",void 0),"undefined"==typeof jest){var a=(0,m.isStateTreeNode)(t)?(0,m.getSnapshot)(t):t;this.id="".concat((0,w.default)(a))}else this.id="test"}));t.BaseAdapter=k,(0,d.default)(k,"capabilities",[]);var E=function(e){(0,u.default)(m,e);var t,r,n,c,l,d=O(m);function m(){return(0,f.default)(this,m),d.apply(this,arguments)}return(0,s.default)(m,[{key:"getHeader",value:(l=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"getMetadata",value:(c=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"getFeaturesInRegion",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,y.ObservableCreate)(function(){var n=(0,i.default)(a.default.mark((function n(o){var i;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.hasDataForRefName(e.refName,r);case 2:i=n.sent,(0,g.checkAbortSignal)(r.signal),i?t.getFeatures(e,r).pipe((0,h.takeUntil)((0,g.observeAbortSignal)(r.signal))).subscribe(o):o.complete();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"getFeaturesInMultipleRegions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.merge.apply(void 0,(0,o.default)(e.map((function(e){return(0,y.ObservableCreate)(function(){var n=(0,i.default)(a.default.mark((function n(o){var i;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.hasDataForRefName(e.refName,r);case 2:i=n.sent,(0,g.checkAbortSignal)(r.signal),i?t.getFeatures(e,r).subscribe(o):o.complete();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}))));return r.signal?n.pipe((0,h.takeUntil)((0,g.observeAbortSignal)(r.signal))):n}},{key:"hasDataForRefName",value:(n=(0,i.default)(a.default.mark((function e(t){var r,n,o=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.getRefNames(r);case 3:return n=e.sent,e.abrupt("return",n.includes(t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRegionStats",value:(r=(0,i.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getFeatures(t,r),e.abrupt("return",(0,b.scoresToStats)(t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getMultiRegionStats",value:(t=(0,i.default)(a.default.mark((function e(){var t,r,n,o,i,u,c,l,s,f=this,d=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:[],r=d.length>1?d[1]:void 0,t.length){e.next=4;break}return e.abrupt("return",(0,b.blankStats)());case 4:return e.next=6,Promise.all(t.map((function(e){return f.getRegionStats(e,r)})));case 6:return n=e.sent,o=n.map((function(e){return e.scoreMax})).reduce((function(e,t){return Math.max(e,t)})),i=n.map((function(e){return e.scoreMin})).reduce((function(e,t){return Math.min(e,t)})),u=n.map((function(e){return e.scoreSum})).reduce((function(e,t){return e+t}),0),c=n.map((function(e){return e.scoreSumSquares})).reduce((function(e,t){return e+t}),0),l=n.map((function(e){return e.featureCount})).reduce((function(e,t){return e+t}),0),s=n.map((function(e){return e.basesCovered})).reduce((function(e,t){return e+t}),0),e.abrupt("return",(0,b.rectifyStats)({scoreMin:i,scoreMax:o,featureCount:l,basesCovered:s,scoreSumSquares:c,scoreSum:u}));case 14:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),m}(k);t.BaseFeatureDataAdapter=E},210:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseConnectionModelFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"BaseDisplay",{enumerable:!0,get:function(){return u.BaseDisplay}}),Object.defineProperty(t,"BaseInternetAccountConfig",{enumerable:!0,get:function(){return l.BaseInternetAccountConfig}}),Object.defineProperty(t,"BaseViewModel",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"InternetAccount",{enumerable:!0,get:function(){return c.InternetAccount}}),Object.defineProperty(t,"baseConnectionConfig",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"createBaseTrackConfig",{enumerable:!0,get:function(){return f.createBaseTrackConfig}}),Object.defineProperty(t,"createBaseTrackModel",{enumerable:!0,get:function(){return s.createBaseTrackModel}});var a=n(r(1831)),o=n(r(1832)),i=n(r(1833)),u=r(1834),c=r(1835),l=r(1837),s=r(1838),f=r(1839)},252:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13)),f=n(r(143)),d=r(206);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,a.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"displayTypes",[]),n.stateModel=e.stateModel,n.configSchema=e.configSchema,!n.stateModel)throw new Error("no stateModel defined for track ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for track ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var o=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(o," is not explicitlyTyped"))}return n}return(0,o.default)(r,[{key:"addDisplayType",value:function(e){this.displayTypes.push(e)}}]),r}(f.default);t.default=h},253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableCreate=function(e,t){return n.Observable.create((function(t){try{var r=e(t);r&&r.catch&&r.catch((function(e){return t.error(e)}))}catch(e){t.error(e)}})).pipe((0,a.takeUntil)((0,o.observeAbortSignal)(t)))};var n=r(181),a=r(58),o=r(45)},254:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NewFeatureRendererType=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(13)),u=n(r(15)),c=n(r(16)),l=n(r(93)),s=n(r(27)),f=n(r(28)),d=n(r(26)),p=r(58),h=r(45),m=n(r(159)),y=r(434),g=n(r(334));function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var O=function(e){(0,s.default)(i,e);var t,r,n=w(i);function i(){return(0,u.default)(this,i),n.apply(this,arguments)}return(0,c.default)(i,[{key:"serializeArgsInClient",value:function(e){var t=e.displayModel,r=e.regions,n=b(b({},e),{},{displayModel:t&&{id:t.id,selectedFeatureId:t.selectedFeatureId},regions:JSON.parse(JSON.stringify(r))});return(0,l.default)((0,d.default)(i.prototype),"serializeArgsInClient",this).call(this,n)}},{key:"deserializeResultsInClient",value:function(e,t){var r=new Map;e.features.forEach((function(e){var t=m.default.fromJSON(e);r.set(String(t.id()),t)}));var n=(0,l.default)((0,d.default)(i.prototype),"deserializeResultsInClient",this).call(this,b(b({},e),{},{features:r}),t);return b(b({},n),{},{blockKey:t.blockKey,features:r})}},{key:"serializeResultsInWorker",value:function(e,t){return b(b({},(0,l.default)((0,d.default)(i.prototype),"serializeResultsInWorker",this).call(this,e,t)),{},{features:(0,h.iterMap)(e.features.values(),(function(e){return e.toJSON()}))})}},{key:"getExpandedRegion",value:function(e,t){return e}},{key:"getFeatures",value:(r=(0,o.default)(a.default.mark((function e(t){var r,n,o,i,u,c,l,s,f,d,m=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signal,n=t.regions,o=t.sessionId,i=t.adapterConfig,e.next=3,(0,y.getAdapter)(this.pluginManager,o,i);case 3:if(u=e.sent,c=u.dataAdapter,l=new Map,n&&0!==n.length){e.next=8;break}return e.abrupt("return",l);case 8:return s=n.map((function(e){var t=b({},e);return t.start&&(t.start=Math.floor(t.start)),t.end&&(t.end=Math.ceil(t.end)),t})),f=s[0],d=1===s.length?c.getFeatures(this.getExpandedRegion(f,t),t):c.getFeaturesInMultipleRegions(s,t),e.next=13,d.pipe((0,p.tap)((function(){return(0,h.checkAbortSignal)(r)})),(0,p.filter)((function(e){return m.featurePassesFilters(t,e)})),(0,p.tap)((function(e){var t=e.id();if(!t)throw new Error('invalid feature id "'.concat(t,'"'));l.set(t,e)})),(0,p.ignoreElements)()).toPromise();case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"featurePassesFilters",value:function(e,t){return!e.filters||e.filters.passes(t,e)}},{key:"render",value:(t=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.features,e.t0){e.next=5;break}return e.next=4,this.getFeatures(t);case 4:e.t0=e.sent;case 5:return r=e.t0,e.next=8,(0,l.default)((0,d.default)(i.prototype),"render",this).call(this,b(b({},t),{},{features:r}));case 8:return n=e.sent,e.abrupt("return",b(b({},n),{},{features:r}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(g.default);t.default=O;var k=function(e){(0,s.default)(r,e);var t=w(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r)}(g.default);t.NewFeatureRendererType=k},255:function(e,t,r){"use strict";var n=r(172),a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var o=Object.create(r(135));o.inherits=r(101);var i=r(1046),u=r(1049);o.inherits(f,i);for(var c=a(u.prototype),l=0;l<c.length;l++){var s=c[l];f.prototype[s]||(f.prototype[s]=u.prototype[s])}function f(e){if(!(this instanceof f))return new f(e);i.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},332:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(15)),u=n(r(16)),c=n(r(35)),l=n(r(27)),s=n(r(28)),f=n(r(26)),d=n(r(13)),p=n(r(1)),h=r(206);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var y=function(e){(0,l.default)(n,e);var t,r=m(n);function n(e){var t;if((0,i.default)(this,n),t=r.call(this,e),(0,d.default)((0,c.default)(t),"ReactComponent",void 0),(0,d.default)((0,c.default)(t),"supportsSVG",!1),(0,d.default)((0,c.default)(t),"configSchema",void 0),(0,d.default)((0,c.default)(t),"pluginManager",void 0),t.ReactComponent=e.ReactComponent,t.configSchema=e.configSchema,t.pluginManager=e.pluginManager,!t.ReactComponent)throw new Error("no ReactComponent defined for renderer ".concat(t.name));if(!(0,h.getDefaultValue)(t.configSchema).type)throw new Error("".concat(t.name," config schema ").concat(t.configSchema.name," is not explicitlyTyped"));if(!t.pluginManager)throw new Error("no plugin manager defined for renderer ".concat(t.name));return t}return(0,u.default)(n,[{key:"render",value:(t=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{reactElement:p.default.createElement(this.ReactComponent,t,null)});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"freeResources",value:function(){return 0}}]),n}(n(r(143)).default);t.default=y},333:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13)),f=n(r(143)),d=r(206);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"trackType",void 0),(0,s.default)((0,i.default)(n),"viewType",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,n.ReactComponent=e.ReactComponent,n.trackType=e.trackType,n.viewType=e.viewType,!n.stateModel)throw new Error("no stateModel defined for display ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema provided for display ".concat(n.name));if(!n.ReactComponent)throw new Error("no ReactComponent provided for display ".concat(n.name));if(!n.trackType)throw new Error("no trackType provided for display ".concat(n.name));if(!n.viewType)throw new Error("no viewType provided for display ".concat(n.name));if(!(0,d.getDefaultValue)(n.configSchema).type){var a=n.configSchema?n.configSchema.name:"UNKNOWN";throw new Error("".concat(a," is not explicitlyTyped"))}return n}return(0,a.default)(r)}(f.default);t.default=h},334:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(24)),i=n(r(59)),u=n(r(66)),c=n(r(13)),l=n(r(15)),s=n(r(16)),f=n(r(27)),d=n(r(28)),p=n(r(26)),h=n(r(1)),m=r(23),y=r(1828),g=r(18),v=r(45),b=n(r(332)),w=n(r(1038)),O=r(158),k=n(r(1039)),E=["html"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var S=function(e){(0,f.default)(d,e);var t,r,n,c=C(d);function d(){return(0,l.default)(this,d),c.apply(this,arguments)}return(0,s.default)(d,[{key:"serializeArgsInClient",value:function(e){return j(j({},e),{},{config:(0,g.isStateTreeNode)(e.config)?(0,g.getSnapshot)(e.config):e.config,filters:e.filters&&e.filters.toJSON().filters})}},{key:"deserializeResultsInClient",value:function(e,t){e.html;var r=(0,u.default)(e,E);return t.exportSVG?j(j({},e),{},{html:this.supportsSVG?e.html:'<text y="12" fill="black">SVG export not supported for this track</text>'}):j(j({},r),{},{reactElement:h.default.createElement(k.default,(0,i.default)({},t,e,{RenderingComponent:this.ReactComponent}))})}},{key:"deserializeArgsInWorker",value:function(e){var t=j({},e),r=this.configSchema.create(e.config||{},{pluginManager:this.pluginManager});return t.config=r,t.filters=new w.default({filters:e.filters}),t}},{key:"serializeResultsInWorker",value:function(e,t){var r=(0,y.renderToString)(h.default.createElement(m.ThemeProvider,{theme:(0,O.createJBrowseTheme)(t.theme)},e.reactElement));return delete e.reactElement,j(j({},e),{},{html:r})}},{key:"renderInClient",value:(n=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.call(r.sessionId,"CoreRender",r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"renderInWorker",value:(r=(0,o.default)(a.default.mark((function e(t){var r,n,o,i,u,c,l=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signal,n=t.statusCallback,o=void 0===n?function(){}:n,(0,v.checkAbortSignal)(r),i=this.deserializeArgsInWorker(t),(0,v.checkAbortSignal)(r),e.next=6,(0,v.updateStatus)("Rendering plot",o,(function(){return l.render(i)}));case 6:return u=e.sent,(0,v.checkAbortSignal)(r),e.next=10,(0,v.updateStatus)("Serializing results",o,(function(){return l.serializeResultsInWorker(u,i)}));case 10:return c=e.sent,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"freeResourcesInClient",value:(t=(0,o.default)(a.default.mark((function e(t,r){var n,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.serializeArgsInClient(r),o=this.freeResources(),e.next=4,t.call(r.sessionId,"CoreFreeResources",n);case 4:return i=e.sent,e.abrupt("return",o+i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),d}(b.default);t.default=S},430:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(59)),i=n(r(66)),u=n(r(13)),c=n(r(21)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),s=r(33),f=n(r(362)),d=n(r(740)),p=n(r(741)),h=n(r(742)),m=n(r(363)),y=r(45),g=["open","onClose","menuItems","onMenuItemClick"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=(0,s.makeStyles)({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",padding:2,marginRight:-12,display:"inline-flex"}});function k(e){var t,r,n,a=O(),o=e.type;if("checked"in e&&(t=e.checked,r=e.disabled),"subMenu"===o)n=l.default.createElement(f.default,{color:"action"});else if("checkbox"===o)if(t){var i=r?"inherit":"secondary";n=l.default.createElement(d.default,{color:i})}else n=l.default.createElement(p.default,{color:"action"});else if("radio"===o)if(t){var u=r?"inherit":"secondary";n=l.default.createElement(h.default,{color:u})}else n=l.default.createElement(m.default,{color:"action"});return l.default.createElement("div",{className:a.menuItemEndDecoration},n)}var E=l.default.forwardRef((function(e,t){var r=(0,l.useState)(),n=(0,c.default)(r,2),a=n[0],o=n[1],i=(0,l.useState)(),u=(0,c.default)(i,2),f=u[0],d=u[1],p=(0,l.useState)(!1),h=(0,c.default)(p,2),m=h[0],g=h[1],v=(0,l.useState)(),b=(0,c.default)(v,2),x=b[0],j=b[1],C=(0,l.useState)(),S=(0,c.default)(C,2),P=S[0],T=S[1],M=(0,l.useRef)(),R=O(),A=e.menuItems,N=e.onMenuItemClick,_=e.open,L=e.onClose,F=e.anchorEl,I=e.top,D=void 0!==I&&I;(0,l.useEffect)((function(){_||(o(void 0),d(void 0))}),[_]),(0,l.useEffect)((function(){var e,t=_&&Boolean(a);return t&&!m?e=setTimeout((function(){g(!0)}),300):!t&&m&&(e=setTimeout((function(){g(!1)}),300)),function(){clearTimeout(e)}}),[m,_,a]),(0,l.useEffect)((function(){if(F){var e=F.getBoundingClientRect();P&&e.top===P.top&&e.left+e.width===P.left||T({top:e.top,left:e.left+e.width})}else P||T({})}),[P,F]);var B=A.some((function(e){return"subMenu"in e||"checkbox"===e.type||"radio"===e.type})),W=A.some((function(e){return"icon"in e&&e.icon})),V={};B&&(V.paddingRight=48);var z=l.default.createElement(l.default.Fragment,null,l.default.createElement(s.MenuList,{autoFocusItem:_&&!m},A.sort((function(e,t){return(t.priority||0)-(e.priority||0)})).map((function(e,t){if("divider"===e.type)return l.default.createElement(s.Divider,{key:"divider-".concat(t),component:"li"});if("subHeader"===e.type)return l.default.createElement(s.ListSubheader,{key:"subHeader-".concat(e.label,"-").concat(t)},e.label);var r=null,n=null;if(e.icon){var a=e.icon;r=l.default.createElement(s.ListItemIcon,null,l.default.createElement(a,null))}"subMenu"in e?n=l.default.createElement(k,{type:"subMenu"}):"checkbox"!==e.type&&"radio"!==e.type||(n=l.default.createElement(k,{type:e.type,checked:e.checked,disabled:e.disabled}));var i,u="onClick"in e?(i=e.onClick,function(e){N(e,i)}):void 0;return l.default.createElement(s.MenuItem,{key:e.label,style:V,selected:t===x,onClick:u,onMouseMove:function(r){r.currentTarget!==document.activeElement&&(r.currentTarget.focus(),j(t)),"subMenu"in e?f!==t&&(o(r.currentTarget),d(t)):(o(void 0),d(void 0))},onKeyDown:function(r){if("ArrowLeft"===r.key||"Escape"===r.key)L&&L(r,"escapeKeyDown");else if("ArrowUp"===r.key)j(function(e,t){return(0,y.findLastIndex)(e.slice(0,t),(function(e){return"divider"!==e.type&&"subHeader"!==e.type&&!e.disabled}))}(A,t));else if("ArrowDown"===r.key){var n=function(e,t){var r=e.slice(t+1).findIndex((function(e){return"divider"!==e.type&&"subHeader"!==e.type&&!e.disabled}));return-1===r?r:t+1+r}(A,t);j(n)}else"subMenu"in e&&("ArrowRight"!==r.key&&"Enter"!==r.key||(o(r.currentTarget),d(t),g(!0)))},disabled:Boolean(e.disabled)},r,l.default.createElement(s.ListItemText,{primary:e.label,secondary:e.subLabel,inset:W&&!e.icon}),n)}))),A.map((function(e,t){var r=null;return"subMenu"in e&&(r=l.default.createElement(E,{key:e.label,anchorEl:a,open:m&&f===t,onClose:function(){g(!1),o(void 0)},onMenuItemClick:N,menuItems:e.subMenu})),r})));return D?z:l.default.createElement(s.Grow,{in:_,style:{transformOrigin:"0 0 0"},ref:t},l.default.createElement(s.Paper,{elevation:8,ref:M,className:R.paper,style:w({},P)},z))}));var x=function(e){var t=e.open,r=e.onClose,n=e.menuItems,a=e.onMenuItemClick,u=(0,i.default)(e,g);return l.default.createElement(s.Popover,(0,o.default)({transitionDuration:0,open:t,onClose:r,BackdropProps:{invisible:!0}},u),l.default.createElement(E,{open:t,onClose:r,menuItems:n,onMenuItemClick:a,top:!0}))};t.default=x},431:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15)),o=n(r(16)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,a.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"ReactComponent",void 0),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"displayTypes",[]),n.ReactComponent=e.ReactComponent,n.stateModel=e.stateModel,!n.ReactComponent)throw new Error("no ReactComponent defined for view ".concat(n.name));if(!n.stateModel)throw new Error("no stateModel defined for view ".concat(n.name));return n}return(0,o.default)(r,[{key:"addDisplayType",value:function(e){this.displayTypes.push(e)}}]),r}(n(r(143)).default);t.default=d},432:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(21)),i=n(r(20)),u=n(r(24)),c=n(r(15)),l=n(r(16)),s=n(r(35)),f=n(r(27)),d=n(r(28)),p=n(r(26)),h=n(r(13)),m=n(r(143)),y=r(142),g=r(207),v=r(1028);function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var x=function(e){(0,f.default)(O,e);var t,r,n,d,p,m,w=E(O);function O(e){var t;return(0,c.default)(this,O),t=w.call(this,{name:""}),(0,h.default)((0,s.default)(t),"name","UNKNOWN"),t}return(0,l.default)(O,[{key:"serializeArguments",value:(m=(0,u.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,y.getBlobMap)(),e.next=3,this.augmentLocationObjects(t);case 3:return e.abrupt("return",k(k({},t),{},{blobMap:n}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"serializeNewAuthArguments",value:(p=(0,u.default)(a.default.mark((function e(t){var r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.pluginManager.rootModel,(0,g.isAppRootModel)(r)&&!t.internetAccountPreAuthorization){e.next=3;break}return e.abrupt("return",t);case 3:if(!(n=null==r?void 0:r.findAppropriateInternetAccount(t))){e.next=9;break}return e.next=7,n.getPreAuthorizationInformation(t);case 7:o=e.sent,t.internetAccountPreAuthorization=o;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deserializeArguments",value:(d=(0,u.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.blobMap&&(0,y.setBlobMap)(t.blobMap),!(n=t.signal)||!(0,v.isRemoteAbortSignal)(n)){e.next=4;break}return e.abrupt("return",k(k({},t),{},{signal:(0,v.deserializeAbortSignal)(n)}));case 4:return e.abrupt("return",k(k({},t),{},{signal:void 0}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)})},{key:"serializeReturn",value:(n=(0,u.default)(a.default.mark((function e(t,r,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"deserializeReturn",value:(r=(0,u.default)(a.default.mark((function e(t,r,n){var o,i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:o=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),!(0,g.isAuthNeededException)(e.t0)){e.next=11;break}throw c=null===(i=this.pluginManager)||void 0===i||null===(u=i.rootModel)||void 0===u?void 0:u.createEphemeralInternetAccount("HTTPBasicInternetAccount-".concat(new URL(e.t0.location.uri).origin),{},e.t0.location),new g.RetryError("Retrying with created internet account",c.internetAccountId);case 11:throw e.t0;case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"augmentLocationObjects",value:(t=(0,u.default)(a.default.mark((function e(t){var r,n,u,c,l,s,f,d,p,h,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,g.isUriLocation)(t)){e.next=3;break}return e.next=3,this.serializeNewAuthArguments(t);case 3:if(!Array.isArray(t)){e.next=21;break}r=b(t),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=13;break}return u=n.value,e.next=11,this.augmentLocationObjects(u);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:if("object"!==(0,i.default)(t)||null===t){e.next=51;break}c=0,l=Object.entries(t);case 23:if(!(c<l.length)){e.next=51;break}if(s=(0,o.default)(l[c],2),f=s[0],d=s[1],!Array.isArray(d)){e.next=45;break}p=b(t[f]),e.prev=27,p.s();case 29:if((h=p.n()).done){e.next=35;break}return m=h.value,e.next=33,this.augmentLocationObjects(m);case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(27),p.e(e.t1);case 40:return e.prev=40,p.f(),e.finish(40);case 43:e.next=48;break;case 45:if("object"!==(0,i.default)(d)||null===d){e.next=48;break}return e.next=48,this.augmentLocationObjects(t[f]);case 48:c++,e.next=23;break;case 51:case"end":return e.stop()}}),e,this,[[5,15,18,21],[27,37,40,43]])}))),function(e){return t.apply(this,arguments)})}]),O}(m.default);t.default=x},433:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAttributes=t.Attributes=void 0,t.BaseCard=R,t.useStyles=t.default=t.SimpleValue=t.FieldName=t.FeatureDetails=t.BasicValue=t.BaseCoreDetails=void 0;var o=n(r(66)),i=n(r(59)),u=n(r(13)),c=n(r(41)),l=n(r(21)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),f=r(787),d=r(33),p=n(r(385)),h=r(23),m=r(229),y=r(34),g=n(r(12)),v=n(r(788)),b=r(46),w=r(45),O=n(r(1027)),k=n(r(1821)),E=r(1034),x=["id"];function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=["length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"],T=["name","start","end","strand","refName","description","type"],M=(0,h.makeStyles)((function(e){return{expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:"#FFFFFF"},field:{display:"flex",flexWrap:"wrap"},fieldDescription:{"&:hover":{background:"yellow"}},fieldName:{wordBreak:"break-all",minWidth:"90px",borderBottom:"1px solid #0003",background:e.palette.grey[200],marginRight:e.spacing(1),padding:e.spacing(.5)},fieldValue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),overflow:"auto"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),background:e.palette.grey[100],border:"1px solid ".concat(e.palette.grey[300]),boxSizing:"border-box",overflow:"auto"}}}));function R(e){var t=e.children,r=e.title,n=e.defaultExpanded,a=void 0===n||n,o=M(),i=(0,s.useState)(a),u=(0,l.default)(i,2),c=u[0],f=u[1];return s.default.createElement(d.Accordion,{expanded:c,onChange:function(){return f((function(e){return!e}))},TransitionProps:{unmountOnExit:!0}},s.default.createElement(d.AccordionSummary,{expandIcon:s.default.createElement(p.default,{className:o.expandIcon})},s.default.createElement(d.Typography,{variant:"button"}," ",r)),s.default.createElement(d.AccordionDetails,{className:o.expansionPanelDetails},t))}t.useStyles=M;var A=function(e){var t=e.description,r=e.name,n=e.prefix,a=void 0===n?[]:n,o=e.width,i=M(),u=[].concat((0,c.default)(a),[r]).join(".");return t?s.default.createElement(d.Tooltip,{title:t,placement:"left"},s.default.createElement("div",{className:(0,g.default)(i.fieldDescription,i.fieldName)},u)):s.default.createElement("div",{className:i.fieldName,style:{width:o}},u)};t.FieldName=A;var N=function(e){var t=e.value,r=M();return s.default.createElement("div",{className:r.fieldValue},s.default.isValidElement(t)?t:s.default.createElement(O.default,{html:(0,v.default)(t)?JSON.stringify(t):String(t)}))};t.BasicValue=N;var _=function(e){var t=e.name,r=e.value,n=e.description,a=e.prefix,o=e.width,i=M();return null!=r?s.default.createElement("div",{className:i.field},s.default.createElement(A,{prefix:a,description:n,name:t,width:o}),s.default.createElement(N,{value:r})):null};t.SimpleValue=_;var L=function(e){var t=e.name,r=e.value,n=e.description,a=e.prefix,o=void 0===a?[]:a,i=M();return s.default.createElement(s.default.Fragment,null,1===r.length?(0,v.default)(r[0])?s.default.createElement(D,{attributes:r[0],prefix:[].concat((0,c.default)(o),[t])}):s.default.createElement("div",{className:i.field},s.default.createElement(A,{prefix:o,description:n,name:t}),s.default.createElement(N,{value:r[0]})):r.every((function(e){return(0,v.default)(e)}))?r.map((function(e,r){return s.default.createElement(D,{key:JSON.stringify(e)+"-"+r,attributes:e,prefix:[].concat((0,c.default)(o),[t+"-"+r])})})):s.default.createElement("div",{className:i.field},s.default.createElement(A,{prefix:o,description:n,name:t}),r.map((function(e,t){return s.default.createElement("div",{key:JSON.stringify(e)+"-"+t,className:i.fieldSubvalue},s.default.createElement(N,{value:e}))}))))};function F(e){var t=e.feature,r=t,n=r.refName,a=r.start,o=r.end,i=r.strand,u={"-1":"-",0:"",1:"+"},c=u[i]?"(".concat(u[i],")"):"",f=(a+1).toLocaleString("en-US"),d=o.toLocaleString("en-US"),p=n?"".concat(n,":"):"",h=S(S({},t),{},{length:(o-a).toLocaleString("en-US"),position:"".concat(p).concat(f,"..").concat(d," ").concat(c)});return s.default.createElement(s.default.Fragment,null,["Position","Description","Name","Length","Type"].map((function(e){return[e,h[e.toLowerCase()]]})).filter((function(e){var t=(0,l.default)(e,2)[1];return null!=t})).map((function(e){var t=(0,l.default)(e,2),r=t[0],n=t[1];return s.default.createElement(_,{key:r,name:r,value:n})})))}t.BaseCoreDetails=function(e){return s.default.createElement(R,(0,i.default)({},e,{title:"Primary data"}),s.default.createElement(F,e))};var I=function(e){var t=e.value,r=e.prefix,n=e.name,a=Object.keys(t[0]).sort(),i=new Set(a);if(t.forEach((function(e){return Object.keys(e).forEach((function(e){return i.add(e)}))})),i.size<a.length+5){var u,f=Object.entries(t).map((function(e){var t=(0,l.default)(e,2),r=t[0],n=t[1];return S({id:r,identifier:n.id},(0,o.default)(n,x))}));i.has("id")?(i.delete("id"),u=["identifier"].concat((0,c.default)(i))):u=(0,c.default)(i);var d=u.map((function(e){return{field:e,width:Math.max.apply(Math,(0,c.default)(f.map((function(t){var r=String(t[e]);return Math.min(Math.max((0,w.measureText)(r,14)+50,80),1e3)}))))}}));return s.default.createElement(s.default.Fragment,null,s.default.createElement(A,{prefix:r,name:n}),s.default.createElement("div",{style:{height:20*Math.min(f.length,100)+50+(f.length<100?0:50),width:"100%"}},s.default.createElement(m.DataGrid,{disableSelectionOnClick:!0,rowHeight:20,headerHeight:25,rows:f,rowsPerPageOptions:[],hideFooterRowCount:!0,hideFooterSelectedRowCount:!0,columns:d,hideFooter:f.length<100})))}return null};var D=function e(t){var r=t.attributes,n=t.omit,a=void 0===n?[]:n,o=t.descriptions,i=t.formatter,u=void 0===i?function(e){return e}:i,f=t.prefix,d=void 0===f?[]:f,p=[].concat((0,c.default)(a),P),h=function(e,t){var r=[];return e.forEach((function(e,n){var a=[].concat((0,c.default)(t),[e[0]]).join(".");r.push((0,w.measureText)(a,12))})),Math.ceil(Math.max.apply(Math,r))+10}(Object.entries(r).filter((function(e){var t=(0,l.default)(e,2),r=t[0];return void 0!==t[1]&&!p.includes(r)})),d),m=h<=170?h:170;return s.default.createElement(s.default.Fragment,null,Object.entries(r).filter((function(e){var t=(0,l.default)(e,2),r=t[0];return void 0!==t[1]&&!p.includes(r)})).map((function(t){var r=(0,l.default)(t,2),n=r[0],a=r[1];if(Array.isArray(a)&&a.length>2&&a.every((function(e){return(0,v.default)(e)})))return s.default.createElement(I,{key:n,prefix:d,name:n,value:a});var i=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){r&&(r=r[e])})),"string"==typeof r?r:"string"==typeof(null===(t=r)||void 0===t?void 0:t.Description)?r.Description:void 0}([].concat((0,c.default)(d),[n]),o);return Array.isArray(a)?s.default.createElement(L,{key:n,name:n,value:a,description:i,prefix:d}):(0,v.default)(a)?s.default.createElement(e,{omit:p,key:n,attributes:a,descriptions:o,prefix:[].concat((0,c.default)(d),[n])}):s.default.createElement(_,{key:n,name:n,value:u(a,n),description:i,prefix:d,width:m})})))};t.Attributes=D;t.BaseAttributes=function(e){var t=e.feature;return s.default.createElement(R,(0,i.default)({},e,{title:"Attributes"}),s.default.createElement(D,(0,i.default)({},e,{attributes:t})))};var B=function e(t){var r=t.omit,n=void 0===r?[]:r,a=t.model,o=t.feature,u=t.depth,l=void 0===u?0:u,p=o.name,h=void 0===p?"":p,m=o.id,y=void 0===m?"":m,g=o.type,v=void 0===g?"":g,O=o.subfeatures,x=(0,w.getSession)(a),j=(0,b.getConf)(x,["featureDetails","sequenceTypes"])||["mRNA","transcript"];return s.default.createElement(R,{title:[(0,E.ellipses)(h||y),v].filter((function(e){return!!e})).join(" - ")},s.default.createElement(d.Typography,null,"Core details"),s.default.createElement(F,t),s.default.createElement(d.Divider,null),s.default.createElement(d.Typography,null,"Attributes"),s.default.createElement(D,(0,i.default)({attributes:o},t,{omit:[].concat((0,c.default)(n),T)})),j.includes(o.type)?s.default.createElement(f.ErrorBoundary,{FallbackComponent:function(e){var t=e.error;return s.default.createElement(d.Typography,{color:"error"},"Failed to fetch sequence for feature: ","".concat(t))}},s.default.createElement(k.default,t)):null,null!=O&&O.length?s.default.createElement(R,{title:"Subfeatures",defaultExpanded:!j.includes(o.type)},O.map((function(t){return s.default.createElement(e,{key:JSON.stringify(t),feature:t,model:a,depth:l+1})}))):null)};t.FeatureDetails=B;var W=(0,y.observer)((function(e){var t=e.model,r=t.featureData;if(!r)return null;var n,a=JSON.parse(JSON.stringify(r));return n=a,0===Object.keys(n).length?null:s.default.createElement(B,{model:t,feature:a})}));t.default=W},434:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.clearAdapterCache=function(){l={}},t.freeAdapterResources=function(e){var t=0,r=Object.keys(e);if(1===r.length&&"sessionId"===r[0]){var n=e.sessionId;Object.entries(l).forEach((function(e){var r=(0,o.default)(e,2),a=r[0],i=r[1];i.sessionIds.delete(n),0===i.sessionIds.size&&(t+=1,delete l[a])}))}else Object.values(l).forEach((function(t){t.dataAdapter.freeResources?(e.regions||(e.region?[e.region]:[])).forEach((function(e){void 0!==e.refName&&t.dataAdapter.freeResources(e)})):console.warn(t.dataAdapter,"does not implement freeResources")}));return t},t.getAdapter=s;var a=n(r(22)),o=n(r(21)),i=n(r(24)),u=n(r(1033));function c(e){return"".concat((0,u.default)(e))}var l={};function s(e,t,r){return f.apply(this,arguments)}function f(){return(f=(0,i.default)(a.default.mark((function e(t,r,n){var o,i,u,f,d,p,h,m,y,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c(n),l[o]){e.next=21;break}if(i=(n||{}).type){e.next=5;break}throw new Error("could not determine adapter type from adapter config snapshot");case 5:if(u=t.getAdapterType(i)){e.next=8;break}throw new Error("unknown data adapter type ".concat(i));case 8:if(f=u.configSchema.create(n,{pluginManager:t}),d=s.bind(null,t,r),p=u.AdapterClass,h=u.getAdapterClass,e.t0=p,e.t0){e.next=16;break}return e.next=15,h();case 15:e.t0=e.sent;case 16:if(m=e.t0){e.next=19;break}throw new Error("Failed to get adapter");case 19:y=new m(f,d,t),l[o]={dataAdapter:y,sessionIds:new Set([r])};case 21:return(g=l[o]).sessionIds.add(r),e.abrupt("return",g);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},435:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(27)),u=n(r(28)),c=n(r(26));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var s=function(e){(0,i.default)(r,e);var t=l(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r)}(n(r(254)).default);t.default=s},45:function(e,t,r){"use strict";(function(e){var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0});var o={inDevelopment:!0,inProduction:!0,useDebounce:!0,useDebouncedCallback:!0,findParentThat:!0,springAnimate:!0,findParentThatIs:!0,getSession:!0,getContainingView:!0,getContainingTrack:!0,getContainingDisplay:!0,assembleLocString:!0,parseLocStringOneBased:!0,parseLocString:!0,compareLocs:!0,compareLocStrings:!0,clamp:!0,bpToPx:!0,radToDeg:!0,degToRad:!0,polarToCartesian:!0,cartesianToPolar:!0,featureSpanPx:!0,bpSpanPx:!0,objectFromEntries:!0,iterMap:!0,mergeConfigs:!0,findLastIndex:!0,makeAbortableReaction:!0,renameRegionIfNeeded:!0,renameRegionsIfNeeded:!0,minmax:!0,stringify:!0,isElectron:!0,revcom:!0,complement:!0,blobToDataURL:!0,rIC:!0,measureText:!0,defaultStarts:!0,defaultStops:!0,defaultCodonTable:!0,generateCodonTable:!0,updateStatus:!0,hashCode:!0,objectHash:!0,SimpleFeature:!0,isFeature:!0};Object.defineProperty(t,"SimpleFeature",{enumerable:!0,get:function(){return g.default}}),t.assembleLocString=function(e){var t,r,n=e.assemblyName,a=e.refName,o=e.start,i=e.end,u=n?"{".concat(n,"}"):"";t=void 0!==o?":".concat((o+1).toLocaleString("en-US")):void 0!==i?":1":"";r=void 0!==i?void 0!==o&&o+1===i?"":"..".concat(i.toLocaleString("en-US")):void 0!==o?"..":"";return"".concat(u).concat(a).concat(t).concat(r)},t.blobToDataURL=function(e){var t=new FileReader;return new Promise((function(r,n){t.onload=function(e){e.target?r(e.target.result):n(new Error("unknown result reading blob from canvas"))},t.readAsDataURL(e)}))},t.bpSpanPx=B,t.bpToPx=F,t.cartesianToPolar=function(e,t){var r=Math.sqrt(e*e+t*t),n=Math.atan(t/e);return[r,n]},t.clamp=function(e,t,r){if(e<t)return t;if(e>r)return r;return e},t.compareLocStrings=function(e,t,r){var n=N(e,r),a=N(t,r);return _(n,a)},t.compareLocs=_,t.defaultStops=t.defaultStarts=t.defaultCodonTable=t.complement=void 0,t.degToRad=function(e){return e*D%(2*Math.PI)},t.featureSpanPx=function(e,t,r){return B(e.get("start"),e.get("end"),t,r)},t.findLastIndex=function(e,t){var r=e.length;for(;r--;)if(t(e[r],r,e))return r;return-1},t.findParentThat=M,t.findParentThatIs=R,t.generateCodonTable=function(e){var t={};return Object.keys(e).forEach((function(r){for(var n=e[r],a=[],o=0;o<3;o++){var i=r.charAt(o);a[o]=[],a[o][0]=i.toUpperCase(),a[o][1]=i.toLowerCase()}for(var u=0;u<2;u++)for(var c=a[0][u],l=0;l<2;l++)for(var s=a[1][l],f=0;f<2;f++){var d=a[2][f];t[c+s+d]=n}})),t},t.getContainingDisplay=function(e){try{return R(e,v.isDisplayModel)}catch(e){throw new Error("no containing display found")}},t.getContainingTrack=function(e){try{return R(e,v.isTrackModel)}catch(e){throw new Error("no containing track found")}},t.getContainingView=function(e){try{return R(e,v.isViewModel)}catch(e){throw new Error("no containing view found")}},t.getSession=function(e){try{return R(e,v.isSessionModel)}catch(e){throw new Error("no session model found!")}},t.hashCode=Y,t.isElectron=t.inProduction=t.inDevelopment=void 0,Object.defineProperty(t,"isFeature",{enumerable:!0,get:function(){return g.isFeature}}),t.iterMap=function(e,t,r){var n,a=r?new Array(r):[],o=0,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;a[o]=t(u),o+=1}}catch(e){i.e(e)}finally{i.f()}return a},t.makeAbortableReaction=function(e,t,r,n,a,o,u){var l;function s(t){(0,b.isAbortException)(t)||((0,d.isAlive)(e)?u(t):console.error(t))}var f=(0,p.reaction)((function(){try{return t(e)}catch(e){return void s(e)}}),function(){var t=(0,c.default)(i.default.mark((function t(n,u){var c,f;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l&&!l.signal.aborted&&l.abort(),(0,d.isAlive)(e)){t.next=3;break}return t.abrupt("return");case 3:return l=new AbortController,a(c=l),t.prev=6,t.next=9,r(n,c.signal,e,u);case 9:f=t.sent,(0,b.checkAbortSignal)(c.signal),(0,d.isAlive)(e)&&o(f),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),c&&!c.signal.aborted&&c.abort(),s(t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,r){return t.apply(this,arguments)}}(),n);(0,d.addDisposer)(e,f),(0,d.addDisposer)(e,(function(){l&&!l.signal.aborted&&l.abort()}))},t.measureText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],n=.5279276315789471;return String(e).split("").map((function(e){return e.charCodeAt(0)<r.length?r[e.charCodeAt(0)]:n})).reduce((function(e,t){return t+e}),0)*t},t.mergeConfigs=function(e,t){var r=(0,y.default)(e,t);t.defaultSession?r.defaultSession=t.defaultSession:e.defaultSession&&(r.defaultSession=e.defaultSession);return r},t.minmax=function(e,t){return[Math.min(e,t),Math.max(e,t)]},t.objectFromEntries=void 0,t.objectHash=function(e){return"".concat(Y(JSON.stringify(e)))},t.parseLocString=N,t.parseLocStringOneBased=A,t.polarToCartesian=function(e,t){return[e*Math.cos(t),e*Math.sin(t)]},t.rIC=void 0,t.radToDeg=function(e){return e*I%360},t.renameRegionIfNeeded=V,t.renameRegionsIfNeeded=function(e,t){return z.apply(this,arguments)},t.revcom=function(e){return G(e).split("").reverse().join("")},t.springAnimate=function(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:170,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:26,c=1;o||(o=Math.abs(t-e)/1e3);function l(e){var s=Date.now(),f=e.lastPosition,d=e.lastTime||s,p=e.lastVelocity||0;s>d+64&&(d=s);for(var h=Math.floor(s-d),m=0;m<h;++m){f+=1*(p+=1*((-i*(f-t)+-u*p)/c)/1e3)/1e3}var y=Math.abs(p)<=o,g=0===i||Math.abs(t-f)<=o;y&&g?(r(t),a()):(r(f),n=requestAnimationFrame((function(){return l({lastPosition:f,lastTime:s,lastVelocity:p})})))}return[function(){return l({lastPosition:e})},function(){return cancelAnimationFrame(n)}]},t.stringify=function(e){var t=e.refName,r=e.coord,n=e.oob;return"".concat(t,":").concat(r.toLocaleString("en-US")).concat(n?" (out of bounds)":"")},t.updateStatus=function(e,t,r){return X.apply(this,arguments)},t.useDebounce=function(e,t){var r=(0,m.useState)(e),n=(0,s.default)(r,2),a=n[0],o=n[1];return(0,m.useEffect)((function(){var r=setTimeout((function(){o(e)}),t);return function(){clearTimeout(r)}}),[e,t]),a},t.useDebouncedCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=(0,m.useRef)(),n=(0,m.useRef)();function a(){n.current&&clearTimeout(n.current)}return(0,m.useEffect)((function(){return a}),[]),function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];r.current=i,a(),n.current=setTimeout((function(){r.current&&e.apply(void 0,(0,l.default)(r.current))}),t)}};var i=n(r(22)),u=n(r(13)),c=n(r(24)),l=n(r(41)),s=n(r(21)),f=n(r(20)),d=r(18),p=r(51),h=n(r(491)),m=r(1),y=n(r(357)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(159)),v=r(207);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var b=r(1022);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var w=r(1806);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var O=r(1023);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var k=r(599);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var E=r(1024);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))})),Object.fromEntries||h.default.shim();var P="object"===(void 0===e?"undefined":(0,f.default)(e))&&e.env&&!1;t.inDevelopment=P;var T=!P;function M(e,t){if(!(0,d.hasParent)(e))throw new Error("node does not have parent");for(var r=(0,d.getParent)(e);r&&(0,d.isAlive)(r);){if(t(r))return r;if(!(0,d.hasParent)(r))break;r=(0,d.getParent)(r)}throw new Error("no matching node found")}function R(e,t){return M(e,t)}function A(e,t){if(!e)throw new Error("no location string provided, could not parse");var r=(e=e.replace(/\s/,"")).match(/(\{(.+)\})?(.+)/);if(!r)throw new Error('invalid location string: "'.concat(e,'"'));var n=(0,s.default)(r,4),a=n[2],o=n[3];if(!a&&o.startsWith("{}"))throw new Error('no assembly name was provided in location "'.concat(o,'"'));var i=o.lastIndexOf(":");if(-1===i){if(t(o,a))return{assemblyName:a,refName:o};throw new Error('Unknown reference sequence "'.concat(o,'"'))}var u=o.slice(0,i),c=o.slice(i+1);if(t(u,a)&&t(o,a))throw new Error('ambiguous location string: "'.concat(e,'"'));if(t(u,a)){if(!c)return{assemblyName:a,refName:u};var l=c.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/),f=c.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/);if(l){var d=(0,s.default)(l,6),p=d[1],h=d[5];if(void 0!==p&&void 0!==h)return{assemblyName:a,refName:u,start:+p.replace(/,/g,""),end:+h.replace(/,/g,"")}}else{if(!f)throw new Error('could not parse range "'.concat(c,'" on location "').concat(e,'"'));var m=(0,s.default)(f,5),y=m[1],g=m[4];if(void 0!==y)return g?{assemblyName:a,refName:u,start:+y.replace(/,/g,"")}:{assemblyName:a,refName:u,start:+y.replace(/,/g,""),end:+y.replace(/,/g,"")}}}else if(t(o,a))return{assemblyName:a,refName:o};throw new Error('unknown reference sequence name in location "'.concat(e,'"'))}function N(e,t){var r=A(e,t);return"number"==typeof r.start&&(r.start-=1),r}function _(e,t){var r=e.assemblyName||t.assemblyName?(e.assemblyName||"").localeCompare(t.assemblyName||""):0;if(r)return r;var n=e.refName||t.refName?(e.refName||"").localeCompare(t.refName||""):0;if(n)return n;if(void 0!==e.start&&void 0!==t.start){var a=e.start-t.start;if(a)return a}if(void 0!==e.end&&void 0!==t.end){var o=e.end-t.end;if(o)return o}return 0}function L(e){return Math.round(10*e)/10}function F(e,t,r){return t.reversed?L((t.end-e)/r):L((e-t.start)/r)}t.inProduction=T;var I=180/Math.PI,D=Math.PI/180;function B(e,t,r,n){var a=F(e,r,n),o=F(t,r,n);return r.reversed?[o,a]:[a,o]}var W=Object.fromEntries.bind(Object);function V(e,t){if((0,d.isStateTreeNode)(t)&&!(0,d.isAlive)(t))return t;if(t&&e&&e[t.refName]){var r=e[(t=(0,d.isStateTreeNode)(t)?C({},(0,d.getSnapshot)(t)):C({},t)).refName];if(r)return C(C({},t),{},{refName:r,originalRefName:t.refName})}return t}function z(){return(z=(0,c.default)(i.default.mark((function e(t,r){var n,a,o,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.regions,a=void 0===n?[]:n,o=r.adapterConfig,r.sessionId){e.next=3;break}throw new Error("sessionId is required");case 3:return u=a.map((function(e){return e.assemblyName})),e.t0=Object,e.next=7,Promise.all(u.map(function(){var e=(0,c.default)(i.default.mark((function e(n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.getRefNameMapForAdapter(o,n,r);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.t1=e.sent,l=e.t0.fromEntries.call(e.t0,e.t1),e.abrupt("return",C(C({},r),{},{regions:a.map((function(e){return V(l[e.assemblyName],e)}))}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.objectFromEntries=W;var q=/electron/i.test("undefined"!=typeof navigator?navigator.userAgent:"");t.isElectron=q;var H,U,G=(H=/[ACGT]/gi,U={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"},function(e){return e.replace(H,(function(e){return U[e]||""}))});t.complement=G;var J="undefined"==typeof jest?"undefined"!=typeof window&&window.requestIdleCallback?window.requestIdleCallback:function(e){return setTimeout((function(){return e()}),1)}:function(e){return e()};t.rIC=J;t.defaultStarts=["ATG"];t.defaultStops=["TAA","TAG","TGA"];function X(){return(X=(0,c.default)(i.default.mark((function e(t,r,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(t),e.next=3,n();case 3:return a=e.sent,r(""),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t}t.defaultCodonTable={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"}}).call(this,r(76))},46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ConfigurationSchema:!0,ConfigurationReference:!0};Object.defineProperty(t,"ConfigurationReference",{enumerable:!0,get:function(){return a.ConfigurationReference}}),Object.defineProperty(t,"ConfigurationSchema",{enumerable:!0,get:function(){return a.ConfigurationSchema}});var a=r(597),o=r(1019);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},597:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationReference=function(e){return u.types.union(u.types.reference(e),e)},t.ConfigurationSchema=function(e,t,r){var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("first arg must be string name of the model that this config schema goes with");var n=t,a=r;r.baseConfiguration&&r.baseConfiguration.jbrowseSchemaDefinition&&(n=d(d({},r.baseConfiguration.jbrowseSchemaDefinition),n),delete(a=d(d({},r.baseConfiguration.jbrowseSchemaOptions||{}),r)).baseConfiguration);return{schemaDefinition:n,options:a}}(e,t,r),f=n.schemaDefinition,h=n.options,m=function(e,t,r){var n,f={};r.explicitlyTyped&&(f.type=u.types.optional(u.types.literal(e),e));if(r.explicitIdentifier&&r.implicitIdentifier)throw new Error("Cannot have both explicit and implicit identifiers in ".concat(e));r.explicitIdentifier?"string"==typeof r.explicitIdentifier?(f[r.explicitIdentifier]=u.types.identifier,n=r.explicitIdentifier):(f.id=u.types.identifier,n="id"):r.implicitIdentifier&&("string"==typeof r.implicitIdentifier?(f[r.implicitIdentifier]=c.ElementId,n=r.implicitIdentifier):(f.id=c.ElementId,n="id"));var h={isJBrowseConfigurationSchema:!0,jbrowseSchema:{modelName:e,definition:t,options:r}};Object.entries(t).forEach((function(t){var r=(0,a.default)(t,2),n=r[0],o=r[1];if((0,u.isType)(o)&&(0,u.isLateType)(o)||(0,s.isConfigurationSchemaType)(o))f[n]=o;else if("string"==typeof o||"number"==typeof o)h[n]=o;else{if("object"!==(0,i.default)(o))throw new Error('invalid configuration schema definition, "'.concat(n,'" must be either a valid configuration slot definition, a constant, or a nested configuration schema'));if(!o.type)throw new Error("no type set for config slot ".concat(e,".").concat(n));try{f[n]=(0,l.default)(n,o)}catch(t){throw new Error("invalid config slot definition for ".concat(e,".").concat(n,": ").concat(t))}}}));var m=u.types.model("".concat(e,"ConfigurationSchema"),f).actions((function(e){return{setSubschema:function(t,r){if(!(0,s.isConfigurationSchemaType)(f[t]))throw new Error("".concat(t," is not a subschema, cannot replace"));var n=(0,u.isStateTreeNode)(r)?r:f[t].create(r);return e[t]=n,n}}}));Object.keys(h).length&&(m=m.volatile((function(){return h})));r.actions&&(m=m.actions(r.actions));r.views&&(m=m.views(r.views));r.extend&&(m=m.extend(r.extend));var y=n?(0,o.default)({},n,"placeholderId"):{},g=r.explicitlyTyped?d({type:e},y):y,v=(0,u.getSnapshot)(m.create(g));m=m.postProcessSnapshot((function(e){for(var t,r={},n=!0,o=0,u=Object.entries(e);o<u.length;o++){var c=(0,a.default)(u[o],2),l=c[0],s=c[1];n&&("object"===(0,i.default)(v[l])&&"object"===(0,i.default)(s)?JSON.stringify(v[l])!==JSON.stringify(s)&&(n=!1):v[l]!==s&&(n=!1)),void 0!==s&&void 0===h[l]&&(t=s,"object"!==(0,i.default)(t)||Array.isArray(t)||null===t||0!==Object.keys(t).length)&&!p(s)&&(r[l]=s)}return n?{}:r})),r.preProcessSnapshot&&(m=m.preProcessSnapshot(r.preProcessSnapshot));return u.types.optional(m,g)}(e,f,h);return m.isJBrowseConfigurationSchema=!0,m.jbrowseSchemaDefinition=f,m.jbrowseSchemaOptions=h,m};var a=n(r(21)),o=n(r(13)),i=n(r(20)),u=r(18),c=r(106),l=n(r(1799)),s=r(1019);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){return Array.isArray(e)&&0===e.length}},598:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.stringToJexlExpression=function(e,t){var r="nosig|".concat(e);if(!o[r]){if(!e.startsWith("jexl:"))throw new Error("string does not appear to be in jexl format");var n=e.split("jexl:")[1],i=t?t.compile("".concat(n)):(0,a.default)().compile("".concat(n));o[r]=i}return o[r]};var a=n(r(1018)),o={}},599:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.createImageBitmap=t.createCanvas=t.PonyfillOffscreenContext=t.PonyfillOffscreenCanvas=t.ImageBitmapType=void 0;var a,o,i,u=n(r(22)),c=n(r(20)),l=n(r(24)),s=n(r(41)),f=n(r(59)),d=n(r(21)),p=n(r(15)),h=n(r(16)),m=n(r(1)),y=n(r(766)),g=n(r(285)),v=n(r(380));t.createCanvas=a,t.createImageBitmap=o,t.ImageBitmapType=i;var b="function"==typeof OffscreenCanvas,w=v.default,O=function(){function e(t,r){(0,p.default)(this,e),this.width=t,this.height=r,this.commands=[],this.currentFont="12px Courier New, monospace"}return(0,h.default)(e,[{key:"strokeStyle",set:function(e){e!==this.currentStrokeStyle&&(this.commands.push({type:"strokeStyle",style:e}),this.currentStrokeStyle=e)}},{key:"fillStyle",set:function(e){e!==this.currentFillStyle&&(this.commands.push({type:"fillStyle",style:e}),this.currentFillStyle=e)}},{key:"font",set:function(e){this.currentFont=e,this.commands.push({type:"font",style:e})}},{key:"arc",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"arc",args:t})}},{key:"arcTo",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"arcTo",args:t})}},{key:"beginPath",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"beginPath",args:t})}},{key:"clearRect",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"clearRect",args:t})}},{key:"clip",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"clip",args:t})}},{key:"closePath",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"closePath",args:t})}},{key:"createLinearGradient",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"createLinearGradient",args:t})}},{key:"createPattern",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"createPattern",args:t})}},{key:"createRadialGradient",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"createRadialGradient",args:t})}},{key:"drawFocusIfNeeded",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"drawFocusIfNeeded",args:t})}},{key:"drawImage",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"drawImage",args:t})}},{key:"ellipse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"ellipse",args:t})}},{key:"fill",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"fill",args:t})}},{key:"fillRect",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],o=t[2],i=t[3];if(!(n>this.width||n+o<0)){var u=Math.max(n,0),c=u+o>this.width?this.width-u:o;this.commands.push({type:"fillRect",args:[u,a,c,i]})}}},{key:"fillText",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"fillText",args:t})}},{key:"lineTo",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"lineTo",args:t})}},{key:"measureText",value:function(e){var t=+this.currentFont.match(/\d+/)[0];return{width:t/2*e.length,height:t}}},{key:"moveTo",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"moveTo",args:t})}},{key:"quadraticCurveTo",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"quadraticCurveTo",args:t})}},{key:"rect",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"rect",args:t})}},{key:"restore",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"restore",args:t})}},{key:"rotate",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"rotate",args:t})}},{key:"save",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"save",args:t})}},{key:"setLineDash",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"setLineDash",args:t})}},{key:"setTransform",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"setTransform",args:t})}},{key:"scale",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"scale",args:t})}},{key:"stroke",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"stroke",args:t})}},{key:"strokeRect",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"strokeRect",args:t})}},{key:"strokeText",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"strokeText",args:t})}},{key:"transform",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"transform",args:t})}},{key:"translate",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.commands.push({type:"translate",args:t})}}]),e}();function k(e){var t=(0,g.default)(e);return{hex:t.hex(),opacity:t.alpha()}}t.PonyfillOffscreenContext=O;var E=function(){function e(t,r){(0,p.default)(this,e),this.width=t,this.height=r}return(0,h.default)(e,[{key:"getContext",value:function(e){if("2d"!==e)throw new Error("unknown type ".concat(e));return this.context=new O(this.width,this.height),this.context}},{key:"getSerializedSvg",value:function(){var e,t,r,n,a=[],o=[];return this.context.commands.forEach((function(i,u){if("font"===i.type&&i.style){var c=function(e){var t,r=null,n=null,a="normal",o="normal",i="normal",u="normal",c=e.split(/\s+/);e:for(;t=c.shift();)switch(t){case"normal":break;case"italic":case"oblique":a=t;break;case"small-caps":i=t;break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":o=t;break;default:if(!n){var l=t.split("/");n=l[0],l.length>1&&(u=l[1]);break}r=t,c.length&&(r+=" ".concat(c.join(" ")));break e}return{fontStyle:a,fontVariant:i,fontWeight:o,fontSize:n,lineHeight:u,fontFamily:r}}(i.style),l=c.fontStyle,p=c.fontFamily,h=c.fontSize;n={fontStyle:l,fontFamily:p,fontSize:h}}if("fillStyle"===i.type&&i.style&&(e=i.style),"strokeStyle"===i.type&&i.style&&(t=i.style),"fillRect"===i.type){var g=(0,d.default)(i.args,4),v=g[0],b=g[1],w=g[2],O=g[3],E=k(e),x=E.hex,j=E.opacity,C=Math.min(b,b+O),S=Math.abs(O);o.push(m.default.createElement("rect",{key:u,fill:x,fillOpacity:1!==j?j:void 0,x:v.toFixed(3),y:C.toFixed(3),width:w.toFixed(3),height:S.toFixed(3)}))}if("fillText"===i.type){var P=(0,d.default)(i.args,3),T=P[0],M=P[1],R=P[2],A=k(e),N=A.hex,_=A.opacity;o.push(m.default.createElement("text",(0,f.default)({key:u,fill:N,fillOpacity:1!==_?_:void 0,x:M.toFixed(3),y:R.toFixed(3)},n),T))}if("beginPath"===i.type&&(a=[]),"moveTo"===i.type&&a.push(i.args),"lineTo"===i.type&&a.push(i.args),i.type,"fill"===i.type){for(var L,F=(L=(0,y.default)()).moveTo.apply(L,(0,s.default)(a[0])),I=1;I<a.length;I++){var D;F=(D=F).lineTo.apply(D,(0,s.default)(a[I]))}F.end();var B=k(e),W=B.hex,V=B.opacity;o.push(m.default.createElement("path",{key:u,fill:W,d:F,fillOpacity:1!==V?V:void 0}))}if("stroke"===i.type){for(var z,q=(z=(0,y.default)()).moveTo.apply(z,(0,s.default)(a[0])),H=1;H<a.length;H++){var U;q=(U=q).lineTo.apply(U,(0,s.default)(a[H]))}q.end();var G=k(t),J=G.hex,X=G.opacity;o.push(m.default.createElement("path",{key:u,fill:"none",stroke:J,fillOpacity:1!==X?X:void 0,d:q}))}"rotate"===i.type&&(r=180*i.args[0]/Math.PI)})),r?m.default.createElement("g",{transform:"rotate(".concat(r,")")},[].concat(o)):m.default.createElement(m.default.Fragment,null,[].concat(o))}}]),e}();if(t.PonyfillOffscreenCanvas=E,b)t.createCanvas=a=function(e,t){return new OffscreenCanvas(e,t)},t.createImageBitmap=o=window.createImageBitmap||self.createImageBitmap,t.ImageBitmapType=i=window.ImageBitmap||self.ImageBitmap;else if(w){var x=r(769),j=x.createCanvas,C=x.Image;t.createCanvas=a=j,t.createImageBitmap=o=function(){var e=(0,l.default)(u.default.mark((function e(t){var r,n,a=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length<=1||!(a.length-1)){e.next=2;break}throw new Error("only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill");case 2:return r=t.toDataURL(),n=new C,e.abrupt("return",new Promise((function(e,t){n.onload=function(){return e(n)},n.onerror=t,n.src=r})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.ImageBitmapType=i=C}else t.createCanvas=a=function(e,t){return new E(e,t)},t.createImageBitmap=o=function(e){return e.context},t.ImageBitmapType=i=(0,c.default)("StringArray")},600:function(e,t,r){"use strict";var n=r(9),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(59)),i=n(r(13)),u=n(r(21)),c=n(r(66)),l=n(r(132)),s=n(r(54)),f=r(23),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(1)),p=["value","setValue","variant"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=(0,f.makeStyles)((function(e){return{input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderRadius:e.shape.borderRadius,borderWidth:2}}})),v=d.default.forwardRef((function(e,t){var r=e.value,n=e.setValue,a=e.variant,i=(0,c.default)(e,p),h=(0,d.useState)(),m=(0,u.default)(h,2),v=m[0],b=m[1],w=(0,d.useState)(0),O=(0,u.default)(w,2),k=O[0],E=O[1],x=(0,d.useState)(null),j=(0,u.default)(x,2),C=j[0],S=j[1],P=(0,d.useState)(null),T=(0,u.default)(P,2),M=T[0],R=T[1],A=(0,d.useState)(!1),N=(0,u.default)(A,2),_=N[0],L=N[1];(0,d.useEffect)((function(){_&&(M&&M.blur(),L(!1))}),[_,M]);var F=g(e),I=(0,f.useTheme)(),D=C&&C.clientWidth;D&&D!==k&&E(D);return d.default.createElement("div",(0,o.default)({},i,{ref:t}),d.default.createElement("div",{style:{position:"relative"}},d.default.createElement(s.default,{ref:function(e){S(e)},component:"span",variant:a,className:F.typography},void 0===v?r:v)),d.default.createElement(l.default,{inputRef:function(e){R(e)},className:F.inputBase,inputProps:{style:y({width:k},a&&"inherit"!==a&&"srOnly"!==a?I.typography[a]:{})},classes:{input:F.input,root:F.inputRoot,focused:F.inputFocused},value:void 0===v?r:v,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key?M&&M.blur():"Escape"===e.key&&(b(void 0),L(!0))},onBlur:function(){v&&v!==r&&n(v),b(void 0)}}))}));t.default=v},601:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(22)),o=n(r(21)),i=n(r(15)),u=n(r(16));function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,i.default)(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return(0,u.default)(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size+=1,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&(this._size-=1),this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:a.default.mark((function e(){var t,r,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,o.default)(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:a.default.mark((function e(){var t,r,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,o.default)(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:a.default.mark((function e(){var t,r,n,i,u,l,s,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=c(this.oldCache),e.prev=18,i.s();case 20:if((u=i.n()).done){e.next=28;break}if(l=u.value,s=(0,o.default)(l,1),f=s[0],this.cache.has(f)){e.next=26;break}return e.next=26,l;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),i.e(e.t1);case 33:return e.prev=33,i.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=c(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||(t+=1)}}catch(e){r.e(e)}finally{r.f()}return this._size+t}}]),t}(Symbol.iterator);t.default=s},602:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16)),o=n(r(15)),i=n(r(35)),u=n(r(27)),c=n(r(28)),l=n(r(26)),s=n(r(13));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var d=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n;if((0,o.default)(this,r),n=t.call(this,e),(0,s.default)((0,i.default)(n),"stateModel",void 0),(0,s.default)((0,i.default)(n),"configSchema",void 0),(0,s.default)((0,i.default)(n),"displayName",void 0),(0,s.default)((0,i.default)(n),"description",void 0),(0,s.default)((0,i.default)(n),"url",void 0),(0,s.default)((0,i.default)(n),"configEditorComponent",void 0),n.stateModel=e.stateModel,n.configSchema=e.configSchema,n.displayName=e.displayName,n.description=e.description,n.url=e.url,n.configEditorComponent=e.configEditorComponent,!n.stateModel)throw new Error("no stateModel defined for connection ".concat(n.name));if(!n.configSchema)throw new Error("no configSchema defined for connection ".concat(n.name));return n}return(0,a.default)(r)}(n(r(143)).default);t.default=d},603:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(21)),o=n(r(15)),i=n(r(16)),u=n(r(13));function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),(0,u.default)(this,"subLayouts",new Map),(0,u.default)(this,"subLayoutConstructorArgs",{}),this.subLayouts=new Map,this.subLayoutConstructorArgs=r}return(0,i.default)(e,[{key:"getSublayout",value:function(e){var t=this.subLayouts.get(e);return void 0===t?(t=new this.SubLayoutClass(this.subLayoutConstructorArgs),this.subLayouts.set(e,t),t):t}},{key:"addRect",value:function(e,t,r,n,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return this.getSublayout(e).addRect(t,r,n,a,o)}},{key:"discardRange",value:function(e,t,r){var n=this.subLayouts.get(e);return n&&n.discardRange(t,r)}},{key:"toJSON",value:function(){var e,t={},r=c(this.subLayouts.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,a.default)(e.value,2),o=n[0],i=n[1];t[o]=i.toJSON()}}catch(e){r.e(e)}finally{r.f()}return t}}]),e}();t.default=s},604:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(21)),o=n(r(15)),i=n(r(16)),u=n(r(13)),c=r(45),l=n(r(519)),s=function(){function e(t){var r=t.rectangles,n=t.totalHeight,i=t.maxHeightReached;(0,o.default)(this,e),(0,u.default)(this,"rectangles",void 0),(0,u.default)(this,"totalHeight",void 0),(0,u.default)(this,"maxHeightReached",void 0),(0,u.default)(this,"rbush",void 0),this.rectangles=new Map(Object.entries(r)),this.totalHeight=n,this.maxHeightReached=i,this.rbush=new l.default;for(var c=0,s=Object.entries(r);c<s.length;c++){var f=(0,a.default)(s[c],2),d=f[0],p=f[1];this.rbush.insert({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3],name:d})}}return(0,i.default)(e,[{key:"addRect",value:function(e){var t=this.rectangles.get(e);if(!t)throw new Error("id ".concat(e," not found in precomputed feature layout"));return t[1]}},{key:"getRectangles",value:function(){return this.rectangles}},{key:"getTotalHeight",value:function(){return this.totalHeight}},{key:"collides",value:function(e,t){throw new Error("Method not implemented.")}},{key:"getByCoord",value:function(e,t){var r={minX:e,minY:t,maxX:e+1,maxY:t+1};return this.rbush.collides(r)?this.rbush.search(r)[0].name:void 0}},{key:"getByID",value:function(e){return this.rectangles.get(e)}},{key:"addRectToBitmap",value:function(e,t){throw new Error("Method not implemented.")}},{key:"discardRange",value:function(e,t){throw new Error("Method not implemented.")}},{key:"serializeRegion",value:function(e){throw new Error("Method not implemented.")}},{key:"toJSON",value:function(){return{rectangles:(0,c.objectFromEntries)(this.rectangles),totalHeight:this.totalHeight,maxHeightReached:!1}}}]),e}();t.default=s},605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contrastingTextColor=function(e){return o(e)>.5?"black":"white"},t.emphasize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,r=(0,a.namedColorToHex)(e);return(0,n.emphasize)(r||e,t)},Object.defineProperty(t,"isNamedColor",{enumerable:!0,get:function(){return a.isNamedColor}}),t.makeContrasting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=(0,a.namedColorToHex)(e)||e,u=(0,a.namedColorToHex)(t)||t,c=o(u),l=(0,n.getContrastRatio)(i,u),s=i,f=.05;for(;l<r;)i=c>.5?(0,n.darken)(s,f):(0,n.lighten)(s,f),f+=.05,l=(0,n.getContrastRatio)(i,u);return i},Object.defineProperty(t,"namedColorToHex",{enumerable:!0,get:function(){return a.namedColorToHex}});var n=r(356),a=r(1840);function o(e){var t=(0,a.namedColorToHex)(e);return(0,n.getLuminance)(t||e)}},8:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(1),a=r.n(n),o=r(1797),i=r(4);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,r,n,i=f(u);function u(){return c(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"render",value:function(){var e=this.props,t=e.id,r=e.assembly,n=e.tracks,i=e.defaultSession,u=e.aggregateTextSearchAdapters,c=e.configuration;console.log("conf",c),console.log("txt",u);var l=Object(o.createViewState)({assembly:r,tracks:n,defaultSession:i});return console.log("state",l),a.a.createElement("div",{id:t},a.a.createElement(o.JBrowseCircularGenomeView,{viewState:l}))}}])&&l(t.prototype,r),n&&l(t,n),u}(n.Component);h.defaultProps=i.b,h.propTypes=i.c}}]);
//# sourceMappingURL=async-CircularGenomeView.js.map
//# sourceMappingURL=async-CircularGenomeView.js.map