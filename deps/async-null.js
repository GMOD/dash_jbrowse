/*! For license information please see async-null.js.LICENSE.txt */
(window.webpackJsonpdash_jbrowse=window.webpackJsonpdash_jbrowse||[]).push([[0],{1162:function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},1163:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(848),a=n(604),i=n.n(a),s=n(606),o=n.n(s),l=n(56),c=n(1172),u=n(1176),h=n(1180),d=n.n(h),f=n(1185),p=n(861),g=n(352),m=n(1198);class b{constructor(e){if(this.file=Object(p.a)(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:!1!==e.checkSequenceMD5,cacheSize:void 0!==e.cacheSize?e.cacheSize:2e4},this.featureCache=new o.a({maxSize:this.options.cacheSize}),function(){let e=new Uint32Array([287454020]),t=new Uint8Array(e.buffer);return 68===t[0]?0:17===t[0]?1:2}()>0)throw new Error("Detected big-endian machine, may be unable to run")}toString(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}read(e,t,n,r){return this.file.read(e,t,n,r)}stat(){return this.file.stat()}async getDefinition(){const t=e.allocUnsafe(u.a.maxLength);await this.file.read(t,0,u.a.maxLength,0);const n=u.a.parser.parse(t).result;if(2!==n.majorVersion&&3!==n.majorVersion)throw new l.e(`CRAM version ${n.majorVersion} not supported`);return n}async getSamHeader(){const e=await this.getContainerById(0);if(!e)throw new l.c("file contains no containers");const{content:t}=await e.getFirstBlock(),n=t.readInt32LE(0),r=t.toString("utf8",4,4+n);return this.header=r,Object(m.a)(r)}async getHeaderText(){return await this.getSamHeader(),this.header}async getSectionParsers(){const{majorVersion:e}=await this.getDefinition();return Object(u.b)(e)}async getContainerById(e){const t=await this.getSectionParsers();let n=t.cramFileDefinition.maxLength;const{size:r}=await this.file.stat(),{cramContainerHeader1:a}=t;let i;for(let t=0;t<=e;t+=1){if(n+a.maxLength+8>=r)return;i=this.getContainerAtPosition(n);const s=await i.getHeader();if(!s)throw new l.c(`container ${e} not found in file`);if(0===t){n=s._endPosition;for(let e=0;e<s.numBlocks;e+=1){n=(await this.readBlock(n))._endPosition}}else n+=s._size+s.length}return i}async checkCrc32(t,n,r,a){const s=e.allocUnsafe(n);await this.file.read(s,0,n,t);const o=i.a.unsigned(s);if(o!==r)throw new l.c(`crc mismatch in ${a}: recorded CRC32 = ${r}, but calculated CRC32 = ${o}`)}async containerCount(){const e=await this.getSectionParsers(),{size:t}=await this.file.stat(),{cramContainerHeader1:n}=e;let r=0,a=e.cramFileDefinition.maxLength;for(;a+n.maxLength+8<t;){const e=await this.getContainerAtPosition(a).getHeader();if(!e)break;if(0===r){a=e._endPosition;for(let t=0;t<e.numBlocks;t+=1){a=(await this.readBlock(a))._endPosition}}else a+=e._size+e.length;r+=1}return r}getContainerAtPosition(e){return new f.a(this,e)}async readBlockHeader(t){const n=await this.getSectionParsers(),{cramBlockHeader:r}=n,{size:a}=await this.file.stat();if(t+r.maxLength>=a)return;const i=e.allocUnsafe(r.maxLength);return await this.file.read(i,0,r.maxLength,t),Object(g.b)(i,r.parser,0,t)}async _parseSection(t,n,r=t.maxLength,a){let i;if(a)i=a;else{const{size:t}=await this.file.stat();if(n+r>=t)return;i=e.allocUnsafe(r),await this.file.read(i,0,r,n)}const s=Object(g.b)(i,t.parser,0,n);if(s._size!==r)throw new l.c(`section read error: requested size ${r} does not equal parsed size ${s._size}`);return s}_uncompress(t,n,a){if("gzip"===t){Object(r.a)(n).copy(a)}else if("bzip2"===t){var i=bzip2.array(n),s=bzip2.header(i),o=0;do{var u=bzip2.decompress(i,s);-1!=u&&(e.from(u).copy(a,o),o+=u.length,s-=u.length)}while(-1!=u)}else if("rans"===t)Object(c.a)(n,a);else if("rans4x16"===t)d.a.r4x16_uncompress(n,a);else if("arith"===t)d.a.arith_uncompress(n,a);else if("fqzcomp"===t)d.a.fqzcomp_uncompress(n,a);else{if("tok3"!==t)throw new l.e(`${t} decompression not yet implemented`);d.a.tok3_uncompress(n,a)}}async readBlock(t){const{majorVersion:n}=await this.getDefinition(),r=await this.getSectionParsers(),a=await this.readBlockHeader(t),i=a._endPosition;a.contentPosition=a._endPosition;const s=e.allocUnsafe(a.uncompressedSize);if("raw"!==a.compressionMethod){const t=e.allocUnsafe(a.compressedSize);await this.read(t,0,a.compressedSize,i),this._uncompress(a.compressionMethod,t,s)}else await this.read(s,0,a.uncompressedSize,i);if(a.content=s,n>=3){const e=await this._parseSection(r.cramBlockCrc32,i+a.compressedSize);a.crc32=e.crc32,this.validateChecksums&&await this.checkCrc32(t,a._size+a.compressedSize,a.crc32,"block data"),a._endPosition=e._endPosition,a._size=a.compressedSize+r.cramBlockCrc32.maxLength}else a._endPosition=i+a.compressedSize,a._size=a.compressedSize;return a}}"getDefinition getSectionParsers getSamHeader".split(" ").forEach((e=>Object(g.e)(b,e)))}).call(this,n(35).Buffer)},1164:function(e,t,n){"use strict";var r=n(1165),a=n(121),i=n(852),s=n(605),o=n(853),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(s[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(s[n]);this._dict_set=!0}}function u(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}c.prototype.push=function(e,t){var n,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=r.deflate(o,s))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(i.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),o.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=c,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},1165:function(e,t,n){"use strict";var r,a=n(121),i=n(1166),s=n(850),o=n(851),l=n(605),c=-2,u=258,h=262,d=103,f=113,p=666;function g(e,t){return e.msg=l[t],t}function m(e){return(e<<1)-(e>4?9:0)}function b(e){for(var t=e.length;--t>=0;)e[t]=0}function v(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function y(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,v(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function _(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function E(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,a.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=s(e.adler,t,i,n):2===e.state.wrap&&(e.adler=o(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function k(e,t){var n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,c=e.window,d=e.w_mask,f=e.prev,p=e.strstart+u,g=c[i+s-1],m=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+s]===m&&c[n+s-1]===g&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<p);if(r=u-(p-i),i=p-u,r>s){if(e.match_start=t,s=r,r>=o)break;g=c[i+s-1],m=c[i+s]}}}while((t=f[t&d])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead}function S(e){var t,n,r,i,s,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-h)){a.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=o?r-o:0}while(--n);t=n=o;do{r=e.prev[--t],e.prev[t]=r>=o?r-o:0}while(--n);i+=o}if(0===e.strm.avail_in)break;if(n=E(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function C(e,t){for(var n,r;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-h&&(e.match_length=k(e,n)),e.match_length>=3)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var n,r,a;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-h&&(e.match_length=k(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function O(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),b(this.dyn_ltree),b(this.dyn_dtree),b(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),b(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),b(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):g(e,c)}function B(e){var t,n=A(e);return 0===n&&((t=e.state).window_size=2*t.w_size,b(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function R(e,t,n,r,i,s){if(!e)return c;var o=1;if(-1===t&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||s<0||s>4)return g(e,c);8===r&&(r=9);var l=new N;return e.state=l,l.strm=e,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,B(e)}r=[new O(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(y(e,!1),e.strm.avail_out),1)})),new O(4,4,8,4,C),new O(4,5,16,8,C),new O(4,6,32,32,C),new O(4,4,16,16,x),new O(8,16,32,32,x),new O(8,16,128,128,x),new O(8,32,128,256,x),new O(32,128,258,1024,x),new O(32,258,258,4096,x)],t.deflateInit=function(e,t){return R(e,t,8,15,8,0)},t.deflateInit2=R,t.deflateReset=B,t.deflateResetKeep=A,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var n,a,s,l;if(!e||!e.state||t>5||t<0)return e?g(e,c):c;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===p&&4!==t)return g(e,0===e.avail_out?-5:c);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,w(a,31),w(a,139),w(a,8),a.gzhead?(w(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),w(a,255&a.gzhead.time),w(a,a.gzhead.time>>8&255),w(a,a.gzhead.time>>16&255),w(a,a.gzhead.time>>24&255),w(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),w(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(w(a,255&a.gzhead.extra.length),w(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=o(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(w(a,0),w(a,0),w(a,0),w(a,0),w(a,0),w(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),w(a,3),a.status=f);else{var h=8+(a.w_bits-8<<4)<<8;h|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=32),h+=31-h%31,a.status=f,_(a,h),0!==a.strstart&&(_(a,e.adler>>>16),_(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),v(e),s=a.pending,a.pending!==a.pending_buf_size));)w(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),v(e),s=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,w(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),v(e),s=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,w(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===l&&(a.status=d)}else a.status=d;if(a.status===d&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&v(e),a.pending+2<=a.pending_buf_size&&(w(a,255&e.adler),w(a,e.adler>>8&255),e.adler=0,a.status=f)):a.status=f),0!==a.pending){if(v(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(n)&&4!==t)return g(e,-5);if(a.status===p&&0!==e.avail_in)return g(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&a.status!==p){var E=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var n,r,a,s,o=e.window;;){if(e.lookahead<=u){if(S(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=o[a=e.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){s=e.strstart+u;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<s);e.match_length=u-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(a,t):r[a.level].func(a,t);if(3!==E&&4!==E||(a.status=p),1===E||3===E)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===E&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(b(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),v(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(w(a,255&e.adler),w(a,e.adler>>8&255),w(a,e.adler>>16&255),w(a,e.adler>>24&255),w(a,255&e.total_in),w(a,e.total_in>>8&255),w(a,e.total_in>>16&255),w(a,e.total_in>>24&255)):(_(a,e.adler>>>16),_(a,65535&e.adler)),v(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==d&&t!==f&&t!==p?g(e,c):(e.state=null,t===f?g(e,-3):0):c},t.deflateSetDictionary=function(e,t){var n,r,i,o,l,u,h,d,f=t.length;if(!e||!e.state)return c;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return c;for(1===o&&(e.adler=s(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(b(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new a.Buf8(n.w_size),a.arraySet(d,t,f-n.w_size,n.w_size,0),t=d,f=n.w_size),l=e.avail_in,u=e.next_in,h=e.input,e.avail_in=f,e.next_in=0,e.input=t,S(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=h,e.avail_in=l,n.wrap=o,0},t.deflateInfo="pako deflate (from Nodeca project)"},1166:function(e,t,n){"use strict";var r=n(121);function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=256,s=286,o=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);a(f);var p=new Array(60);a(p);var g=new Array(512);a(g);var m=new Array(256);a(m);var b=new Array(29);a(b);var v,y,w,_=new Array(o);function E(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?g[e]:g[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function O(e,t,n){x(e,n[2*t],n[2*t+1])}function N(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function A(e,t,n){var r,a,i=new Array(16),s=0;for(r=1;r<=l;r++)i[r]=s=s+n[r-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=N(i[o]++,o))}}function B(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function R(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function j(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&I(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!I(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function M(e,t,n){var r,a,s,o,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===r?O(e,a,t):(O(e,(s=m[a])+i+1,t),0!==(o=c[s])&&x(e,a-=b[s],o),O(e,s=S(--r),n),0!==(o=u[s])&&x(e,r-=_[s],o))}while(l<e.last_lit);O(e,256,t)}function T(e,t){var n,r,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)j(e,i,n);a=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],j(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,j(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,s,o,c=t.dyn_tree,u=t.max_code,h=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=c[2*c[2*(r=e.heap[n])+1]+1]+1)>g&&(i=g,m++),c[2*r+1]=i,r>u||(e.bl_count[i]++,s=0,r>=p&&(s=f[r-p]),o=c[2*r],e.opt_len+=o*(i+s),d&&(e.static_len+=o*(h[2*r+1]+s)));if(0!==m){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,m-=2}while(m>0);for(i=g;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(c[2*a+1]!==i&&(e.opt_len+=(i-c[2*a+1])*c[2*a],c[2*a+1]=i),r--)}}(e,t),A(i,u,e.bl_count)}function L(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))}function P(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<c)do{O(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==i&&(O(e,a,e.bl_tree),o--),O(e,16,e.bl_tree),x(e,o-3,2)):o<=10?(O(e,17,e.bl_tree),x(e,o-3,3)):(O(e,18,e.bl_tree),x(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}}a(_);var z=!1;function F(e,t,n,a){x(e,0+(a?1:0),3),function(e,t,n,a){R(e),a&&(C(e,n),C(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){z||(!function(){var e,t,n,r,a,i=new Array(16);for(n=0,r=0;r<28;r++)for(b[r]=n,e=0;e<1<<c[r];e++)m[n++]=r;for(m[n-1]=r,a=0,r=0;r<16;r++)for(_[r]=a,e=0;e<1<<u[r];e++)g[a++]=r;for(a>>=7;r<o;r++)for(_[r]=a<<7,e=0;e<1<<u[r]-7;e++)g[256+a++]=r;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,i[8]++;for(;e<=255;)f[2*e+1]=9,e++,i[9]++;for(;e<=279;)f[2*e+1]=7,e++,i[7]++;for(;e<=287;)f[2*e+1]=8,e++,i[8]++;for(A(f,287,i),e=0;e<o;e++)p[2*e+1]=5,p[2*e]=N(e,5);v=new E(f,c,257,s,l),y=new E(p,u,0,o,l),w=new E(new Array(0),h,0,19,7)}(),z=!0),e.l_desc=new k(e.dyn_ltree,v),e.d_desc=new k(e.dyn_dtree,y),e.bl_desc=new k(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,B(e)},t._tr_stored_block=F,t._tr_flush_block=function(e,t,n,r){var a,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),T(e,e.l_desc),T(e,e.d_desc),o=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),T(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?F(e,t,n,r):4===e.strategy||s===a?(x(e,2+(r?1:0),3),M(e,f,p)):(x(e,4+(r?1:0),3),function(e,t,n,r){var a;for(x(e,t-257,5),x(e,n-1,5),x(e,r-4,4),a=0;a<r;a++)x(e,e.bl_tree[2*d[a]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),M(e,e.dyn_ltree,e.dyn_dtree)),B(e),r&&R(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(m[n]+i+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){x(e,2,3),O(e,256,f),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},1167:function(e,t,n){"use strict";var r=n(1168),a=n(121),i=n(852),s=n(854),o=n(605),l=n(853),c=n(1171),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(o[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw new Error(o[n])}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}h.prototype.push=function(e,t){var n,o,l,c,h,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(f),d.next_out=0,d.avail_out=f),(n=r.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(d.output,d.next_out),c=d.next_out-l,h=i.buf2string(d.output,l),d.next_out=c,d.avail_out=f-c,c&&a.arraySet(d.output,d.output,l,c,0),this.onData(h)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=h,t.inflate=d,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.ungzip=d},1168:function(e,t,n){"use strict";var r=n(121),a=n(850),i=n(851),s=n(1169),o=n(1170),l=-2,c=12,u=30;function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):l}function g(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,p(e))):l}function m(e,t){var n,r;return e?(r=new d,e.state=r,r.window=null,0!==(n=g(e,t))&&(e.state=null),n):l}var b,v,y=!0;function w(e){if(y){var t;for(b=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,v,0,e.work,{bits:5}),y=!1}e.lencode=b,e.lenbits=9,e.distcode=v,e.distbits=5}function _(e,t,n,a){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),a>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>a&&(i=a),r.arraySet(s.window,t,n-a,i,s.wnext),(a-=i)?(r.arraySet(s.window,t,n-a,a,0),s.wnext=a,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}t.inflateReset=p,t.inflateReset2=g,t.inflateResetKeep=f,t.inflateInit=function(e){return m(e,15)},t.inflateInit2=m,t.inflate=function(e,t){var n,d,f,p,g,m,b,v,y,E,k,S,C,x,O,N,A,B,R,I,j,M,T,L,P=0,z=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===c&&(n.mode=13),g=e.next_out,f=e.output,b=e.avail_out,p=e.next_in,d=e.input,m=e.avail_in,v=n.hold,y=n.bits,E=m,k=b,M=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(2&n.wrap&&35615===v){n.check=0,z[0]=255&v,z[1]=v>>>8&255,n.check=i(n.check,z,2,0),v=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=u;break}if(y-=4,j=8+(15&(v>>>=4)),0===n.wbits)n.wbits=j;else if(j>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<j,e.adler=n.check=1,n.mode=512&v?10:c,v=0,y=0;break;case 2:for(;y<16;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=i(n.check,z,2,0)),v=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.head&&(n.head.time=v),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,z[2]=v>>>16&255,z[3]=v>>>24&255,n.check=i(n.check,z,4,0)),v=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=i(n.check,z,2,0)),v=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=i(n.check,z,2,0)),v=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((S=n.length)>m&&(S=m),S&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,d,p,S,j)),512&n.flags&&(n.check=i(n.check,d,S,p)),m-=S,p+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break e;S=0;do{j=d[p+S++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j))}while(j&&S<m);if(512&n.flags&&(n.check=i(n.check,d,S,p)),m-=S,p+=S,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break e;S=0;do{j=d[p+S++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j))}while(j&&S<m);if(512&n.flags&&(n.check=i(n.check,d,S,p)),m-=S,p+=S,j)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}v=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=c;break;case 10:for(;y<32;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}e.adler=n.check=h(v),v=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=g,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=y,2;e.adler=n.check=1,n.mode=c;case c:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}switch(n.last=1&v,y-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(w(n),n.mode=20,6===t){v>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}v>>>=2,y-=2;break;case 14:for(v>>>=7&y,y-=7&y;y<32;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&v,v=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(S>m&&(S=m),S>b&&(S=b),0===S)break e;r.arraySet(f,d,p,S,g),m-=S,p+=S,b-=S,g+=S,n.length-=S;break}n.mode=c;break;case 17:for(;y<14;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(n.nlen=257+(31&v),v>>>=5,y-=5,n.ndist=1+(31&v),v>>>=5,y-=5,n.ncode=4+(15&v),v>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.lens[F[n.have++]]=7&v,v>>>=3,y-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},M=o(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,M){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=(P=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,A=65535&P,!((O=P>>>24)<=y);){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(A<16)v>>>=O,y-=O,n.lens[n.have++]=A;else{if(16===A){for(L=O+2;y<L;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(v>>>=O,y-=O,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}j=n.lens[n.have-1],S=3+(3&v),v>>>=2,y-=2}else if(17===A){for(L=O+3;y<L;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}y-=O,j=0,S=3+(7&(v>>>=O)),v>>>=3,y-=3}else{for(L=O+7;y<L;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}y-=O,j=0,S=11+(127&(v>>>=O)),v>>>=7,y-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;S--;)n.lens[n.have++]=j}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,T={bits:n.lenbits},M=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,M){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},M=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,M){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(m>=6&&b>=258){e.next_out=g,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=y,s(e,k),g=e.next_out,f=e.output,b=e.avail_out,p=e.next_in,d=e.input,m=e.avail_in,v=n.hold,y=n.bits,n.mode===c&&(n.back=-1);break}for(n.back=0;N=(P=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,A=65535&P,!((O=P>>>24)<=y);){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(N&&0==(240&N)){for(B=O,R=N,I=A;N=(P=n.lencode[I+((v&(1<<B+R)-1)>>B)])>>>16&255,A=65535&P,!(B+(O=P>>>24)<=y);){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}v>>>=B,y-=B,n.back+=B}if(v>>>=O,y-=O,n.back+=O,n.length=A,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=c;break}if(64&N){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for(L=n.extra;y<L;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=(P=n.distcode[v&(1<<n.distbits)-1])>>>16&255,A=65535&P,!((O=P>>>24)<=y);){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(0==(240&N)){for(B=O,R=N,I=A;N=(P=n.distcode[I+((v&(1<<B+R)-1)>>B)])>>>16&255,A=65535&P,!(B+(O=P>>>24)<=y);){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}v>>>=B,y-=B,n.back+=B}if(v>>>=O,y-=O,n.back+=O,64&N){e.msg="invalid distance code",n.mode=u;break}n.offset=A,n.extra=15&N,n.mode=24;case 24:if(n.extra){for(L=n.extra;y<L;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===b)break e;if(S=k-b,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}S>n.wnext?(S-=n.wnext,C=n.wsize-S):C=n.wnext-S,S>n.length&&(S=n.length),x=n.window}else x=f,C=g-n.offset,S=n.length;S>b&&(S=b),b-=S,n.length-=S;do{f[g++]=x[C++]}while(--S);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;f[g++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===m)break e;m--,v|=d[p++]<<y,y+=8}if(k-=b,e.total_out+=k,n.total+=k,k&&(e.adler=n.check=n.flags?i(n.check,f,k,g-k):a(n.check,f,k,g-k)),k=b,(n.flags?v:h(v))!==n.check){e.msg="incorrect data check",n.mode=u;break}v=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===m)break e;m--,v+=d[p++]<<y,y+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}v=0,y=0}n.mode=29;case 29:M=1;break e;case u:M=-3;break e;case 31:return-4;default:return l}return e.next_out=g,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=y,(n.wsize||k!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&_(e,e.output,e.next_out,k-e.avail_out)?(n.mode=31,-4):(E-=e.avail_in,k-=e.avail_out,e.total_in+=E,e.total_out+=k,n.total+=k,n.wrap&&k&&(e.adler=n.check=n.flags?i(n.check,f,k,e.next_out-k):a(n.check,f,k,e.next_out-k)),e.data_type=n.bits+(n.last?64:0)+(n.mode===c?128:0)+(20===n.mode||15===n.mode?256:0),(0===E&&0===k||4===t)&&0===M&&(M=-5),M)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&a(1,t,r,0)!==n.check?-3:_(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},1169:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,s,o,l,c,u,h,d,f,p,g,m,b,v,y,w,_,E,k,S,C,x;n=e.state,r=e.next_in,C=e.input,a=r+(e.avail_in-5),i=e.next_out,x=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=C[r++]<<p,p+=8,f+=C[r++]<<p,p+=8),y=g[f&b];t:for(;;){if(f>>>=w=y>>>24,p-=w,0===(w=y>>>16&255))x[i++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(f&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&y,(w&=15)&&(p<w&&(f+=C[r++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=C[r++]<<p,p+=8,f+=C[r++]<<p,p+=8),y=m[f&v];n:for(;;){if(f>>>=w=y>>>24,p-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=m[(65535&y)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&y,p<(w&=15)&&(f+=C[r++]<<p,(p+=8)<w&&(f+=C[r++]<<p,p+=8)),(E+=f&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=w,p-=w,E>(w=i-s)){if((w=E-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=0,S=d,0===h){if(k+=c-w,w<_){_-=w;do{x[i++]=d[k++]}while(--w);k=i-E,S=x}}else if(h<w){if(k+=c+h-w,(w-=h)<_){_-=w;do{x[i++]=d[k++]}while(--w);if(k=0,h<_){_-=w=h;do{x[i++]=d[k++]}while(--w);k=i-E,S=x}}}else if(k+=h-w,w<_){_-=w;do{x[i++]=d[k++]}while(--w);k=i-E,S=x}for(;_>2;)x[i++]=S[k++],x[i++]=S[k++],x[i++]=S[k++],_-=3;_&&(x[i++]=S[k++],_>1&&(x[i++]=S[k++]))}else{k=i-E;do{x[i++]=x[k++],x[i++]=x[k++],x[i++]=x[k++],_-=3}while(_>2);_&&(x[i++]=x[k++],_>1&&(x[i++]=x[k++]))}break}}break}}while(r<a&&i<o);r-=_=p>>3,f&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<o?o-i+257:257-(i-o),n.hold=f,n.bits=p}},1170:function(e,t,n){"use strict";var r=n(121),a=15,i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,u,h,d,f){var p,g,m,b,v,y,w,_,E,k=f.bits,S=0,C=0,x=0,O=0,N=0,A=0,B=0,R=0,I=0,j=0,M=null,T=0,L=new r.Buf16(16),P=new r.Buf16(16),z=null,F=0;for(S=0;S<=a;S++)L[S]=0;for(C=0;C<c;C++)L[t[n+C]]++;for(N=k,O=a;O>=1&&0===L[O];O--);if(N>O&&(N=O),0===O)return u[h++]=20971520,u[h++]=20971520,f.bits=1,0;for(x=1;x<O&&0===L[x];x++);for(N<x&&(N=x),R=1,S=1;S<=a;S++)if(R<<=1,(R-=L[S])<0)return-1;if(R>0&&(0===e||1!==O))return-1;for(P[1]=0,S=1;S<a;S++)P[S+1]=P[S]+L[S];for(C=0;C<c;C++)0!==t[n+C]&&(d[P[t[n+C]]++]=C);if(0===e?(M=z=d,y=19):1===e?(M=i,T-=257,z=s,F-=257,y=256):(M=o,z=l,y=-1),j=0,C=0,S=x,v=h,A=N,B=0,m=-1,b=(I=1<<N)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){w=S-B,d[C]<y?(_=0,E=d[C]):d[C]>y?(_=z[F+d[C]],E=M[T+d[C]]):(_=96,E=0),p=1<<S-B,x=g=1<<A;do{u[v+(j>>B)+(g-=p)]=w<<24|_<<16|E|0}while(0!==g);for(p=1<<S-1;j&p;)p>>=1;if(0!==p?(j&=p-1,j+=p):j=0,C++,0==--L[S]){if(S===O)break;S=t[n+d[C]]}if(S>N&&(j&b)!==m){for(0===B&&(B=N),v+=x,R=1<<(A=S-B);A+B<O&&!((R-=L[A+B])<=0);)A++,R<<=1;if(I+=1<<A,1===e&&I>852||2===e&&I>592)return 1;u[m=j&b]=N<<24|A<<16|v-h|0}}return 0!==j&&(u[v+j]=S-B<<24|64<<16|0),f.bits=N,0}},1171:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},1172:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(56),a=n(474),i=n(1173),s=n(1174),o=n(1175);class l{constructor(e,t=0){this._buffer=e,this._position=t,this.length=e.length}get(){const e=this._buffer[this._position];return this._position+=1,e}getByte(){return this.get()}getByteAt(e){return this._buffer[e]}position(){return this._position}put(e){return this._buffer[this._position]=e,this._position+=1,e}putAt(e,t){return this._buffer[e]=t,t}setPosition(e){return this._position=e,e}getInt(){const e=this._buffer.readInt32LE(this._position);return this._position+=4,e}remaining(){return this._buffer.length-this._position}}function c(t,n,c=0){if(0===t.length)return n.fill(0),n;const u=new l(t,c),h=u.get();if(0!==h&&1!==h)throw new r.c(`Invalid rANS order ${h}`);if(u.getInt()!==u.remaining()-4)throw new r.c("Incorrect input length.");const d=u.getInt(),f=new l(n||e.allocUnsafe(d));if(f.length<d)throw new r.c(`Output buffer too small to fit ${d} bytes.`);switch(h){case 0:return function(e,t){const n=new a.a.AriDecoder,r=new Array(256);for(let e=0;e<r.length;e+=1)r[e]=new a.a.Symbol;return Object(i.a)(e,n,r),Object(s.a)(e,n,r,t),t}(u,f);case 1:return function(e,t){const n=new Array(256);for(let e=0;e<n.length;e+=1)n[e]=new a.a.AriDecoder;const r=new Array(256);for(let e=0;e<r.length;e+=1){r[e]=new Array(256);for(let t=0;t<r[e].length;t+=1)r[e][t]=new a.a.Symbol}return Object(i.b)(e,n,r),Object(o.a)(e,t,n,r),t}(u,f);default:throw new r.c(`Invalid rANS order: ${h}`)}}}).call(this,n(35).Buffer)},1173:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(56),a=n(475),i=n(474);function s(e){if(!e)throw new r.c("assertion failed")}function o(e,t,n){let r=0,o=0,l=255&e.get();do{null==t.fc[l]&&(t.fc[l]=new i.a.FC),t.fc[l].F=255&e.get(),t.fc[l].F>=128&&(t.fc[l].F&=-129,t.fc[l].F=(127&t.fc[l].F)<<8|255&e.get()),t.fc[l].C=o,i.a.symbolInit(n[l],t.fc[l].C,t.fc[l].F),t.R||(t.R=new Array(a.c)),t.R.fill(l,o,o+t.fc[l].F),o+=t.fc[l].F,0===r&&l+1===(255&e.getByteAt(e.position()))?(l=255&e.get(),r=255&e.get()):0!==r?(r-=1,l+=1):l=255&e.get()}while(0!==l);s(o<a.c)}function l(e,t,n){let r=0,o=255&e.get();do{let l=0,c=0,u=255&e.get();null==t[o]&&(t[o]=new i.a.AriDecoder);do{null==t[o].fc[u]&&(t[o].fc[u]=new i.a.FC),t[o].fc[u].F=255&e.get(),t[o].fc[u].F>=128&&(t[o].fc[u].F&=-129,t[o].fc[u].F=(127&t[o].fc[u].F)<<8|255&e.get()),t[o].fc[u].C=c,0===t[o].fc[u].F&&(t[o].fc[u].F=a.c),null==n[o][u]&&(n[o][u]=new i.a.RansDecSymbol),i.a.symbolInit(n[o][u],t[o].fc[u].C,t[o].fc[u].F),null==t[o].R&&(t[o].R=new Array(a.c)),t[o].R.fill(u,c,c+t[o].fc[u].F),c+=t[o].fc[u].F,s(c<=a.c),0===l&&u+1===(255&e.getByteAt(e.position()))?(u=255&e.get(),l=255&e.get()):0!==l?(l-=1,u+=1):u=255&e.get()}while(0!==u);0===r&&o+1===(255&e.getByteAt(e.position()))?(o=255&e.get(),r=255&e.get()):0!==r?(r-=1,o+=1):o=255&e.get()}while(0!==o)}},1174:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(56),a=n(475),i=n(474);function s(e,t,n,s){let o=e.getInt(),l=e.getInt(),c=e.getInt(),u=e.getInt();const h=s.remaining(),d=-4&h;for(let r=0;r<d;r+=4){const h=t.R[i.a.get(o,a.b)],d=t.R[i.a.get(l,a.b)],f=t.R[i.a.get(c,a.b)],p=t.R[i.a.get(u,a.b)];s.putAt(r,h),s.putAt(r+1,d),s.putAt(r+2,f),s.putAt(r+3,p),o=i.a.advanceSymbolStep(o,n[255&h],a.b),l=i.a.advanceSymbolStep(l,n[255&d],a.b),c=i.a.advanceSymbolStep(c,n[255&f],a.b),u=i.a.advanceSymbolStep(u,n[255&p],a.b),o=i.a.renormalize(o,e),l=i.a.renormalize(l,e),c=i.a.renormalize(c,e),u=i.a.renormalize(u,e)}let f;switch(s.setPosition(d),3&h){case 0:break;case 1:f=t.R[i.a.get(o,a.b)],i.a.advanceSymbol(o,e,n[255&f],a.b),s.put(f);break;case 2:f=t.R[i.a.get(o,a.b)],i.a.advanceSymbol(o,e,n[255&f],a.b),s.put(f),f=t.R[i.a.get(l,a.b)],i.a.advanceSymbol(l,e,n[255&f],a.b),s.put(f);break;case 3:f=t.R[i.a.get(o,a.b)],i.a.advanceSymbol(o,e,n[255&f],a.b),s.put(f),f=t.R[i.a.get(l,a.b)],i.a.advanceSymbol(l,e,n[255&f],a.b),s.put(f),f=t.R[i.a.get(c,a.b)],i.a.advanceSymbol(c,e,n[255&f],a.b),s.put(f);break;default:throw new r.c("invalid output size encountered during rANS decoding")}s.setPosition(0)}},1175:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(475),a=n(474);function i(e,t,n,i){const s=t.remaining();let o=e.getInt(),l=e.getInt(),c=e.getInt(),u=e.getInt();const h=s>>2;let d=0,f=h,p=2*h,g=3*h,m=0,b=0,v=0,y=0;for(;d<h;d+=1,f+=1,p+=1,g+=1){const s=255&n[m].R[a.a.get(o,r.b)],h=255&n[b].R[a.a.get(l,r.b)],w=255&n[v].R[a.a.get(c,r.b)],_=255&n[y].R[a.a.get(u,r.b)];t.putAt(d,s),t.putAt(f,h),t.putAt(p,w),t.putAt(g,_),o=a.a.advanceSymbolStep(o,i[m][s],r.b),l=a.a.advanceSymbolStep(l,i[b][h],r.b),c=a.a.advanceSymbolStep(c,i[v][w],r.b),u=a.a.advanceSymbolStep(u,i[y][_],r.b),o=a.a.renormalize(o,e),l=a.a.renormalize(l,e),c=a.a.renormalize(c,e),u=a.a.renormalize(u,e),m=s,b=h,v=w,y=_}for(;g<s;g+=1){const s=255&n[y].R[a.a.get(u,r.b)];t.putAt(g,s),u=a.a.advanceSymbol(u,e,i[y][s],r.b),y=s}}},1176:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p}));var r=n(855);const a=(new r.Parser).itf8(),i={parser:(new r.Parser).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},s={parser:(new r.Parser).uint8("compressionMethod",{formatter:e=>{const t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error(`compression method number ${e} not implemented`);return t}}).uint8("contentType",{formatter:e=>{const t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error(`invalid block content type id ${e}`);return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},o={parser:(new r.Parser).uint32("crc32"),maxLength:4},l=(new r.Parser).itf8("size").buffer("ents",{length:"size",formatter:e=>{function t(t,n){const r=e.toString("utf8",t,n),a=[];for(let e=0;e<r.length;e+=3)a.push(r.substr(e,3));return a}var n,r=[],a=0;for(n=0;n<e.length;n+=1)e[n]||(r.push(t(a,n)),a=n+1);return n>a&&r.push(t(a,n)),r}}),c=(new r.Parser).uint8(null,{formatter:e=>!!e}),u=(new r.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new r.Parser).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:c,UI:c,PI:c,RN:c,AP:c,RR:c,SM:(new r.Parser).array(null,{type:"uint8",length:5}),TD:(new r.Parser).nest(null,{type:l,formatter:e=>e.ents})}})});function h(e){const t={};for(let n=0;n<e.ents.length;n+=1){const{key:r,value:a}=e.ents[n];t[r]&&console.warn(`duplicate key ${r} in map`),t[r]=a}return t}const d={cramFileDefinition:i,cramBlockHeader:s,cramBlockCrc32:o},f={cramUnmappedSliceHeader(e){let t=0,n=(new r.Parser).itf8("numRecords");t+=5,e>=3?(n=n.ltf8("recordCounter"),t+=9):2===e&&(n=n.itf8("recordCounter"),t+=5),n=n.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}),t+=10,e>=2&&(n=n.array("md5",{type:"uint8",length:16}),t+=16);return{parser:n,maxLength:e=>t+5*e}},cramMappedSliceHeader(e){let t=(new r.Parser).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),n=20;e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}).itf8("refBaseBlockId"),n+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),n+=16);return{parser:t,maxLength:e=>n+5*e}},cramEncoding:e=>({parser:(new r.Parser).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new r.Parser,1:(new r.Parser).itf8("blockContentId"),2:(new r.Parser).itf8("offset").itf8("M"),3:r.Parser.start().itf8("numCodes").array("symbols",{length:"numCodes",type:a}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:a}),4:r.Parser.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new r.Parser).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new r.Parser).itf8("offset").itf8("length"),7:(new r.Parser).itf8("offset").itf8("K"),8:(new r.Parser).itf8("offset").itf8("log2m"),9:(new r.Parser).itf8("offset")}})}),cramDataSeriesEncodingMap(e){return(new r.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new r.Parser).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap(e){return(new r.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new r.Parser).itf8("key",{formatter:e=>String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader(e){let t=new r.Parser;return t=t.nest("preservation",{type:u,formatter:h}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:h}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:h}),{parser:t}},cramContainerHeader1(e){let t=(new r.Parser).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),n=24;return e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),e>1&&(t=t.ltf8("numBases"),n+=9),t=t.itf8("numBlocks").itf8("numLandmarks"),n+=10,{parser:t,maxLength:n}},cramContainerHeader2(e){let t=(new r.Parser).itf8("numLandmarks").array("landmarks",{type:(new r.Parser).itf8(),length:"numLandmarks"}),n=0;return e>=3&&(t=t.uint32("crc32"),n=4),{parser:t,maxLength:e=>5+5*e+n}}};function p(e){const t=Object.assign({},d);return Object.keys(f).forEach((n=>{t[n]=f[n](e)})),t}},1177:function(e,t){e.exports.runInThisContext=function(e){return new Function("code","return eval(code);").call(globalThis,e)}},1178:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};a.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},a.prototype.generateOption=function(e){switch(r(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"(".concat(e,").call(").concat(this.generateVariable(),", vars)");default:return}},a.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=a.interpolate.apply(this,e);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error(".concat(t,"), vars); });")):this.pushCode("throw new Error(".concat(t,");"))},a.prototype.generateTmpVariable=function(){return"$tmp".concat(this.tmpVariableCount++)},a.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+="".concat(a.interpolate.apply(this,e),"\n")},a.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},a.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},a.prototype.pushScope=function(e){this.scopes.push([e])},a.prototype.popScope=function(){this.scopes.pop()},a.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},a.prototype.markResolved=function(e){this.references[e].resolved=!0},a.prototype.markRequested=function(e){e.forEach(function(e){this.references[e].requested=!0}.bind(this))},a.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},a.interpolate=function(e){var t=/{\d+}/g,n=e.match(t),r=Array.prototype.slice.call(arguments,1);return n&&n.forEach((function(t){var n=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,r[n].toString())})),e},t.Context=a},1179:function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);r.ZERO=b;var v=o(0,!0);r.UZERO=v;var y=o(1);r.ONE=y;var w=o(1,!0);r.UONE=w;var _=o(-1);r.NEG_ONE=_;var E=c(-1,2147483647,!1);r.MAX_VALUE=E;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,v=0,y=0;return v+=(y+=s*f)>>>16,g+=(v+=i*f)>>>16,v&=65535,g+=(v+=s*h)>>>16,p+=(g+=r*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=t*f+r*h+i*u+s*o,c((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(t),f=h.mul(e);f.isNegative()||f.gt(r);)f=(h=l(t-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1180:function(e,t,n){"use strict";(function(t){var r=n(1181),a=n(856),i=n(857),s=n(1183),o=n(1184);e.exports={r4x8_uncompress:function(e,t){r.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){a.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){i.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var n=new Array;s.decode(e,n).copy(t,0,0)},tok3_uncompress:function(e,n){var r=o.decode(e,0,"\0");t.from(r,"binary").copy(n,0,0)}}}).call(this,n(35).Buffer)},1181:function(e,t,n){(function(t){const r=n(351);function a(e){return 4095&e}function i(e,t){for(var n=0;t>=e[n+1];)n++;return n}function s(e){for(var t=new Array(4096),n=0,r=0;r<4096;r++){for(;r>=e[n+1];)n++;t[r]=n}return t}function o(e,t,n){return n*(e>>12)+(4095&e)-t}function l(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function c(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function u(e,t,n,r,a){return e=function(e,t,n,r){for(var a=(1<<23>>r<<8)*n;e>=a;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,r,a),e=(Math.floor(e/r)<<a)+e%r+n}function h(e,t,n){for(var r=0;r<256;r++)t[r]=0;var a=e.ReadByte(),i=a,s=0;do{var o=e.ReadITF8();t[a]=o,s>0?(s--,a++):(a=e.ReadByte())==i+1&&(s=e.ReadByte()),i=a}while(0!=a);n[0]=0;for(r=0;r<=255;r++)n[r+1]=n[r]+t[r]}function d(e){for(var t=0,n=0;n<256;n++)t+=e[n];const r=4096;var a=r/t;do{var i=0,s=0,o=0;t=0;for(n=0;n<256;n++)0!=e[n]&&(i<e[n]&&(i=e[n],s=n),e[n]=Math.floor(e[n]*a),0==e[n]&&(e[n]=1),t+=e[n]);t<r?e[s]+=r-t:t-r<e[s]/2&&e[s]>2?e[s]-=t-r:t!=r&&(a*=.99,o=1)}while(o)}function f(e,t){for(var n=0,r=0;r<256;r++)if(t[r]){if(n>0)n--;else if(e.WriteByte(r),r>0&&t[r-1]>0){for(n=r+1;n<256&&t[n];n++);n-=r+1,e.WriteByte(n)}e.WriteITF8(t[r])}e.WriteByte(0)}e.exports={decode:function(e){var n=new r(e),c=n.ReadByte(),u=(n.ReadUint32(),n.ReadUint32());return 0==c?function(e,n){var r=new Array(256),i=new Array(256);h(e,r,i);for(var c=s(i),u=new Array(4),d=0;d<4;d++)u[d]=e.ReadUint32();var f=new t.allocUnsafe(n);for(d=0;d<n;d++){var p=d%4,g=c[a(u[p])];f[d]=g,u[p]=o(u[p],i[g],r[g]),u[p]=l(e,u[p])}return f}(n,u):function(e,n){var r=new Array(256),c=new Array(256);!function(e,t,n){for(var r=0;r<256;r++){t[r]=new Array(256),n[r]=new Array(256);for(var a=0;a<256;a++)t[r][a]=0}var i=e.ReadByte(),s=i,o=0;do{h(e,t[i],n[i]),o>0?(o--,i++):(i=e.ReadByte())==s+1&&(o=e.ReadByte()),s=i}while(0!=i)}(e,r,c);for(var u=new Array(256),d=0;d<256;d++)u[d]=s(c[d]);for(var f=new Array(4),p=new Array(4),g=0;g<4;g++)f[g]=e.ReadUint32(),p[g]=0;var m=new t.allocUnsafe(n),b=Math.floor(n/4);for(d=0;d<b;d++)for(g=0;g<4;g++){var v=a(f[g]),y=u[p[g]][v];m[d+g*b]=y,f[g]=o(f[g],c[p[g]][y],r[p[g]][y]),f[g]=l(e,f[g]),p[g]=y}d*=4;for(;d<n;){v=a(f[3]),y=i(c[p[3]],v);m[d++]=y,f[3]=o(f[3],c[p[3]][y],r[p[3]][y]),f[3]=l(e,f[3]),p[3]=y}return m}(n,u)},encode:function(e,n){return 0==n?function(e){const n=e.length;var a=new r("",0,780);a.WriteByte(0),a.WriteUint32(0),a.WriteUint32(0);var i=new Array(256);(function(e,t){for(var n=0;n<256;n++)t[n]=0;for(n=0;n<e.length;n++)t[e[n]]++})(e,i),d(i),f(a,i);var s=new Array(256);s[0]=0;for(var o=1;o<256;o++)s[o]=s[o-1]+i[o-1];var l=new Array(4);for(o=0;o<4;o++)l[o]=1<<23;var h=Math.floor(1.05*n+100),p=new r("",h,h);for(o=n-1;o>=0;o--)l[o%4]=u(l[o%4],p,s[e[o]],i[e[o]],12);for(o=3;o>=0;o--)c(l[o],p);var g=a.pos;return a.buf.writeInt32LE(g-9+(p.length-p.pos),1),a.buf.writeInt32LE(n,5),t.concat([a.buf.slice(0,a.pos),p.buf.slice(p.pos,p.length)],a.pos+p.length-p.pos)}(e):function(e){const n=e.length;var a=new r("",0,198156);a.WriteByte(1),a.WriteUint32(0),a.WriteUint32(0);for(var i=new Array(256),s=new Array(256),o=new Array(256),l=0;l<256;l++)s[l]=new Array(256),o[l]=new Array(256);(function(e,t,n){for(var r=0;r<256;r++){n[r]=0;for(var a=0;a<256;a++)t[r][a]=0}var i=0;for(r=0;r<e.length;r++)n[e[r]]++,t[i][e[r]]++,i=e[r];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,n[0]+=3})(e,s,i),function(e,t){for(var n=0;n<256;n++)t[n]&&d(e[n])}(s,i),function(e,t,n){for(var r=0,a=0;a<256;a++)if(n[a]){if(r>0)r--;else if(e.WriteByte(a),a>0&&n[a-1]>0){for(r=a+1;r<256&&n[r];r++);r-=a+1,e.WriteByte(r)}f(e,t[a])}e.WriteByte(0)}(a,s,i);for(l=0;l<256;l++)if(i[l]){o[l][0]=0;for(var h=1;h<256;h++)o[l][h]=o[l][h-1]+s[l][h-1]}var p=new Array(4),g=new Array(4);for(h=0;h<4;h++)p[h]=1<<23,g[h]=0;var m=new r("",n,n),b=Math.floor(n/4),v=new Array(4),y=new Array(4);for(h=0;h<4;h++)v[h]=(h+1)*b-2,y[h]=e[v[h]+1];y[3]=e[n-1];for(l=n-2;l>4*b-2;l--)p[3]=u(p[3],m,o[e[l]][y[3]],s[e[l]][y[3]],12),y[3]=e[l];for(;v[0]>=0;)for(h=3;h>=0;h--){var w=e[v[h]];p[h]=u(p[h],m,o[w][y[h]],s[w][y[h]],12),y[h]=w,v[h]--}for(h=3;h>=0;h--)p[h]=u(p[h],m,o[0][y[h]],s[0][y[h]],12);for(l=3;l>=0;l--)c(p[l],m);var _=a.pos;return a.buf.writeInt32LE(_-9+(m.length-m.pos),1),a.buf.writeInt32LE(n,5),t.concat([a.buf.slice(0,a.pos),m.buf.slice(m.pos,m.length)],a.pos+m.length-m.pos)}(e)}}}).call(this,n(35).Buffer)},1182:function(e,t){var n={array:function(e){var t=0,n=0,r=[0,1,3,7,15,31,63,127,255];return function(a){for(var i=0;a>0;){var s=8-t;a>=s?(i<<=s,i|=r[s]&e[n++],t=0,a-=s):(i<<=a,i|=(e[n]&r[a]<<8-a-t)>>8-a-t,t+=a,a=0)}return i}},simple:function(e){var t,r,a=n.header(e),i=[],s=0;do{-1!=(r=n.decompress(e,a))&&(i.push(r),s+=r.byteLength)}while(-1!=r);t=new Uint8Array(s),s=0;for(var o=0;o<i.length;++o)r=i[o],t.set(r,s),s+=r.byteLength;return t},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,n){for(var r=9e5,a="",i=0;i<6;i++)a+=e(8).toString(16);if("177245385090"==a)return-1;if("314159265359"!=a)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var s=e(24);if(s>r)throw"Initial position larger than buffer size";var o=e(16),l=new Uint8Array(256),c=0;for(i=0;i<16;i++)if(o&1<<15-i){var u=e(16);for(g=0;g<16;g++)u&1<<15-g&&(l[c++]=16*i+g)}var h=e(3);if(h<2||h>6)throw"another error";var d=e(15);if(0==d)throw"meh";var f=[];for(i=0;i<h;i++)f[i]=i;var p=new Uint8Array(32768);for(i=0;i<d;i++){for(var g=0;e(1);g++)if(g>=h)throw"whoops another error";var m=f[g];f.splice(g,1),f.splice(0,0,m),p[i]=m}var b=c+2,v=[];for(g=0;g<h;g++){var y,w,_,E=new Uint8Array(258),k=new Uint8Array(21);o=e(5);for(i=0;i<b;i++){for(;;){if(o<1||o>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?o--:o++}E[i]=o}y=w=E[0];for(i=1;i<b;i++)E[i]>w?w=E[i]:E[i]<y&&(y=E[i]);(_=v[g]={}).permute=new Uint32Array(258),_.limit=new Uint32Array(21),_.base=new Uint32Array(21),_.minLen=y,_.maxLen=w;var S=_.base.subarray(1),C=_.limit.subarray(1),x=0;for(i=y;i<=w;i++)for(o=0;o<b;o++)E[o]==i&&(_.permute[x++]=o);for(i=y;i<=w;i++)k[i]=C[i]=0;for(i=0;i<b;i++)k[E[i]]++;for(x=o=0,i=y;i<w;i++)x+=k[i],C[i]=x-1,x<<=1,S[i+1]=x-(o+=k[i]);C[w]=x+k[w]-1,S[y]=0}var O,N,A,B=new Uint32Array(256);for(i=0;i<256;i++)f[i]=i;O=N=b=A=0;for(var R=new Uint32Array(r);;){if(!b--){if(b=49,A>=d)throw"meow i'm a kitty, that's an error";S=(_=v[p[A++]]).base.subarray(1),C=_.limit.subarray(1)}for(g=e(i=_.minLen);;){if(i>_.maxLen)throw"rawr i'm a dinosaur";if(g<=C[i])break;i++,g=g<<1|e(1)}if((g-=S[i])<0||g>=258)throw"moo i'm a cow";var I=_.permute[g];if(0!=I&&1!=I){if(O){if(O=0,N+o>=r)throw"Boom.";for(B[m=l[f[0]]]+=o;o--;)R[N++]=m}if(I>c)break;if(N>=r)throw"I can't think of anything. Error";m=f[i=I-1],f.splice(i,1),f.splice(0,0,m),B[m=l[m]]++,R[N++]=m}else O||(O=1,o=0),o+=0==I?O:2*O,O<<=1}if(s<0||s>=N)throw"I'm a monkey and I'm throwing something at someone, namely you";for(g=0,i=0;i<256;i++)u=g+B[i],B[i]=g,g=u;for(i=0;i<N;i++)R[B[m=255&R[i]]]|=i<<8,B[m]++;var j=0,M=0,T=0;N&&(M=255&(j=R[s]),j>>=8,T=-1);var L,P,z,F=new Uint8Array(r),q=0;for(n||(n=1/0);N;){for(N--,P=M,M=255&(j=R[j]),j>>=8,3==T++?(L=M,z=P,M=-1):(L=1,z=M);L--;)if(F[q++]=z,!--n)return F;M!=P&&(T=0)}return F.subarray(0,q)}};e.exports=n},1183:function(e,t,n){(function(t,r){const a=n(351),i=n(859),s=n(858);function o(e,t,n){for(var r=0,a=0,i=-1,s=new Array(1024);a<n;){var o=e.ReadByte();if(s[r++]=o,a+=o,o==i){var l=e.ReadByte();for(a+=o*l;l--;)s[r++]=o}i=o}var c=0;for(r=0,a=0;a<n;){var u=0;do{var h=s[r++];u+=h}while(255==h);for(;u--;)t[a++]=c;c++}}function l(e,t,n){var r=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[n],r+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(r+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(r+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=n?1:0,t.prevq=n),e.do_sel&&(r+=t.s<<e.sloc),t.p--,65535&r}function c(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=2&t.pflags,t.fixed_len=4&t.pflags,t.do_sel=8&t.pflags,t.do_qmap=16&t.pflags,t.do_pos=32&t.pflags,t.do_delta=64&t.pflags,t.do_qtab=128&t.pflags,t.max_sym=e.ReadByte();var n=e.ReadByte();if(t.qbits=n>>4,t.qshift=15&n,n=e.ReadByte(),t.qloc=n>>4,t.sloc=15&n,n=e.ReadByte(),t.ploc=n>>4,t.dloc=15&n,t.qmap=new Array(256),16&t.pflags)for(var r=0;r<t.max_sym;r++)t.qmap[r]=e.ReadByte();else for(r=0;r<256;r++)t.qmap[r]=r;if(t.qtab=new Array(1024),t.qbits>0&&128&t.pflags)o(e,t.qtab,256);else for(r=0;r<256;r++)t.qtab[r]=r;return t.ptab=new Array(1024),32&t.pflags&&o(e,t.ptab,1024),t.dtab=new Array(256),64&t.pflags&&o(e,t.dtab,256),t}function u(e,t,n,r,a,i){n.max_sel>0?a.s=r.sel.ModelDecode(e,t):a.s=0,a.x=n.stab[a.s];var s=n.params[a.x];if(s.fixed_len>=0){var o=r.len[0].ModelDecode(e,t);o|=r.len[1].ModelDecode(e,t)<<8,o|=r.len[2].ModelDecode(e,t)<<16,o|=r.len[3].ModelDecode(e,t)<<24,s.fixed_len>0&&(s.fixed_len=-o)}else o=-s.fixed_len;a.len=o,n.do_rev&&(i[a.rec]=r.rev.ModelDecode(e,t)),a.is_dup=0,2&s.pflags&&r.dup.ModelDecode(e,t)&&(a.is_dup=1),a.p=o,a.delta=0,a.qctx=0,a.prevq=0,a.rec++}function h(e,n){var r=e.ReadUint7(),a=function(e){var t={max_sym:0};if(5==e.ReadByte()){var n=e.ReadByte(),r=1&n?e.ReadByte():1,a=n.nparam>1?n.nparam-1:0,i=new Array(256);if(2&n)a=e.ReadByte(),o(e,i,256);else{for(var s=0;s<r;s++)i[s]=s;for(;s<256;s++)i[s]=r-1}t.do_rev=4&n,t.stab=i,t.max_sel=a,t.params=new Array(t.nparam);for(var l=0;l<r;l++)t.params[l]=c(e),t.max_sym<t.params[l].max_sym&&(t.max_sym=t.params[l].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(a){var h=a.params,d=new Array(n.length),f=function(e){var t={};t.qual=new Array(65536);for(var n=0;n<65536;n++)t.qual[n]=new i(e.max_sym+1);for(t.len=new Array(4),n=0;n<4;n++)t.len[n]=new i(256);return t.rev=new i(2),t.dup=new i(2),e.max_sel>0&&(t.sel=new i(e.max_sel+1)),t}(a),p=new s(e);p.RangeStartDecode(e);for(var g=new t.allocUnsafe(r),m={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},b=0;b<r;){if(0==m.p){if(u(e,p,a,f,m,d),m.is_dup>0&&f.dup.ModelDecode(e,p)){for(var v=0;v<len;v++)g[b+v]=g[b+v-m.len];b+=m.len,m.p=0;continue}n.push(m.len);var y=(h=a.params[m.x]).context}var w=f.qual[y].ModelDecode(e,p);g[b++]=h.qmap[w],y=l(h,m,w)}return a.do_rev&&function(e,t,n,r){var a=0,i=0;for(;i<t;){if(n[a])for(var s=0,o=r[a]-1;s<o;){var l=e[i+s];e[i+s]=e[i+o],e[i+o]=l,s++,o--}i+=r[a++]}}(g,r,d,n),g}}function d(e,t,n){for(var r=0,a=0,i=new Array(2*n),s=0;r<n;){for(var o=r;r<n&&t[r]==a;)r++;var l=r-o;do{var c=Math.min(255,l);i[s++]=c,l-=c}while(255==c);a++}var u=-1,h=new Array(2*n),d=0;for(r=0;r<s;){var f=i[r++];if(h[d++]=f,f==u){for(o=r;r<s&&i[r]==u&&r-o<255;)r++;h[d++]=r-o}else u=f}e.WriteData(h,d)}e.exports={decode:function(e,t){return h(new a(e),t)},encode:function(e,t,n){for(var o=new Array(2),l=new Array(2),c=new Array(2),u=new Array(2),h=new Array(256),f=0;f<2;f++)o[f]=new Array(256),l[f]=new Array(256),c[f]=new Array(1024),u[f]=new Array(256);(g=new a("",0,1.1*e.length+100)).WriteUint7(e.length);var p=function(e,t,n,r){for(var a=n[0],i=0;i<n.length&&n[i]==a;i++);var s=i==n.length?1:0,o=0,l=0;for(i=0;i<256;i++)r[0][i]=0;var c=0,u=0;for(i=0;i<e.length;i++)0==u&&(u=t[c<t.length-1?c++:c]),r[0][e[i]]++,u--;for(i=0;i<256;i++)r[0][i]&&(l<i&&(l=i),o++);var h=5,d=0;return o<=16&&(d=1,h=o<=2?1:o<=4?2:o<=8?3:4),[{qbits:8+(h>4),qshift:h,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:h>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:l,nsym:o,do_qmap:d,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:h<=4?1:0,do_qtab:0,qbits:8+(h>4)-(0==s),sbits:1,sloc:15-(h<=4),do_stab:1,do_sel:1}]}(e,t,n,o),g=function(e,t,n,r,a,i,s){for(var o=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],l=0;l<t.length;l++)s[l]=l;for(;l<256;l++)s[l]=t.length-1;e.WriteByte(5);var c=(t.length>1?1:0)|(t[0].do_stab?2:0);if(e.WriteByte(c),1&c&&e.WriteByte(t.length),2&c){var u=1<<t[0].sbits;u>0&&u--,e.WriteByte(u),d(e,s,256)}for(var h=0;h<t.length;h++){if(e.WriteUint16(t[h].context),e.WriteByte((t[h].do_qtab?128:0)|(t[h].do_delta?64:0)|(t[h].do_pos?32:0)|(t[h].do_qmap?16:0)|(t[h].do_sel?8:0)|(t[h].fixed_len?4:0)|(t[h].do_dedup?2:0)),t[h].do_qmap?e.WriteByte(t[h].nsym):e.WriteByte(t[h].max_sym),e.WriteByte(t[h].qbits<<4|t[h].qshift),e.WriteByte(t[h].qloc<<4|t[h].sloc),e.WriteByte(t[h].ploc<<4|t[h].dloc),t[h].do_qmap){t[h].max_sym=t[h].nsym;var f=0;for(l=0;l<256;l++)n[h][l]&&(e.WriteByte(l),n[h][l]=f++);for(;f<t[h].nsym;f++)e.WriteByte(0)}else for(l=0;l<256;l++)n[h][l]=l;if(t[h].qbits>0){for(l=0;l<256;l++)r[h][l]=l;t[h].do_qtab&&d(e,r[h],256)}if(t[h].pbits>0){for(l=0;l<1024;l++)a[h][l]=Math.min((1<<t[h].pbits)-1,l>>t[h].pshift);d(e,a[h],1024)}if(t[h].dbits>0){for(l=0;l<256;l++)o[l]>(1<<t[h].dbits)-1&&(o[l]=(1<<t[h].dbits)-1);for(l=0;l<256;l++)i[h][l]=o[Math.min(o.length-1,l>>t[h].dshift)];d(e,i[h],256)}}return e}(g,p,o,l,c,u,h);return function(e,t,n,a,o,l,c,u,h,d){var f=1<<o[0].sbits;f>0&&f--;for(var p=t.length,g=0,m=0;m<o.length;m++)g<o[m].max_sym&&(g=o[m].max_sym);for(var b=new Array(65536),v=0;v<65536;v++)b[v]=new i(g+1);var y=new Array(4);for(v=0;v<4;v++)y[v]=new i(256);new i(2),new i(2);for(var w=new i(f+1),_=new s(t),E=(m=0,v=0,0);v<p;){if(0==m){var k=a[E];o[0].sbits>0&&w.ModelEncode(e,_,k);var S=d[k],C=n[Math.min(n.length-1,E++)];o[S].fixed_len?o[S].fixed_len>0&&(y[0].ModelEncode(e,_,255&C),y[1].ModelEncode(e,_,C>>8&255),y[2].ModelEncode(e,_,C>>16&255),y[3].ModelEncode(e,_,C>>24&255),o[S].fixed_len=-1):(y[0].ModelEncode(e,_,255&C),y[1].ModelEncode(e,_,C>>8&255),y[2].ModelEncode(e,_,C>>16&255),y[3].ModelEncode(e,_,C>>24&255)),o[S].do_dedup&&r.exit(1),m=C;var x=0,O=o[S].context,N=0,A=0}var B=t[v++],R=l[S][B];b[O].ModelEncode(e,_,R),N=(N<<o[S].qshift)+c[S][R],O=o[S].context,O+=(N&(1<<o[S].qbits)-1)<<o[S].qloc,o[S].pbits>0&&(O+=u[S][Math.min(m,1023)]<<o[S].ploc),o[S].dbits>0&&(O+=h[S][Math.min(x,255)]<<o[S].dloc,x+=A!=R?1:0,A=R),o[S].do_sel&&(O+=k<<o[S].sloc),O&=65535,m--}return _.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(g,e,t,n,p,o,l,c,u,h)}}}).call(this,n(35).Buffer,n(114))},1184:function(e,t,n){(function(t){const r=n(351),a=n(856);var i=new(n(857));function s(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function o(e,t,n,r){var a=e[0][0].ReadByte(),i=r-e[0][a].ReadUint32();if(5==a)return t[r]=t[i],n[r]=n[i],t[r];var o=1;t[r]="",n[r]=new Array(256);do{switch(a=e[o][0].ReadByte()){case 2:n[r][o]=e[o][2].ReadChar();break;case 1:n[r][o]=e[o][1].ReadString();break;case 7:n[r][o]=e[o][7].ReadUint32();break;case 3:var l=e[o][3].ReadUint32(),c=e[o][4].ReadByte();n[r][o]=s(l,c);break;case 8:n[r][o]=(n[i][o]>>0)+e[o][8].ReadByte();break;case 9:l=(n[i][o]>>0)+e[o][9].ReadByte(),c=n[i][o].length;n[r][o]=s(l,c);break;case 10:n[r][o]=n[i][o];break;default:n[r][o]=""}t[r]+=n[r][o++]}while(12!=a);return t[r]}function l(e,t,n,r,a,i){for(var s=0;s<r.length;s++)if(!(n>0&&5==t[s][0].type)&&t[s][n])switch(e[0].WriteByte(t[s][n].type),t[s][n].type){case 6:e[6].WriteUint32(t[s][n].val);break;case 5:e[5].WriteUint32(t[s][n].val);break;case 1:e[1].WriteString(t[s][n].val);break;case 2:e[2].WriteChar(t[s][n].val);break;case 7:e[7].WriteUint32(t[s][n].val);break;case 3:e[3].WriteUint32(t[s][n].val),e[4].WriteByte(t[s][n].val.length);break;case 8:case 9:e[t[s][n].type].WriteByte(t[s][n].val)}}function c(e,t,n,r){for(var a=0;a<=12;a++)if(!(e[a].pos<=0)){r.WriteByte(a+(0==a?128:0)),e[a]=e[a].buf.slice(0,e[a].pos);var i=u(e[a],n);r.WriteUint7(i.length),r.WriteData(i,i.length)}}function u(e,t){var n,r=1<<30,s=[0,1,64,65,128,129,201];for(var o in s){var l=s[o];if(!(1&l&&e.length<100)&&!(8&l&&e.length%4!=0)){try{var c=t?i.encode(e,l):a.encode(e,l)}catch(e){c=0}c&&r>c.length&&(r=c.length,n=c)}}return n}function h(e,t,n,r,a){var i=0,s=a-1;e[a]=new Array(256),t[r]?e[a][0]={type:5,val:a-t[r]}:e[a][0]={type:6,val:0==a?0:1},t[r]=a;for(var o=r.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),l=0;l<o.length;l++){var c=l+1,u=1,h=o[l];if(o[l].match(/^0+[0-9]*$/g)?u=3:o[l].match(/^[0-9]+$/g)?u=7:1==o[l].length&&(u=2),s>=0&&e[s][c])if(e[s][c].str==o[l])u=10,h="";else if(7==e[s][c].type||8==e[s][c].type){var d=h-e[s][c].str;n[c]++,d>=0&&d<256&&n[c]>a/2&&(u=8,h=d)}else if((3==e[s][c].type||9==e[s][c].type)&&e[s][c].str.length==h.length){d=h-e[s][c].str;n[c]++,d>=0&&d<256&&n[c]>a/2&&(u=9,h=d)}e[a][c]={str:o[l],val:h,type:u},i<e[a][c].val.length+3&&(i=e[a][c].val.length+3)}return e[a][++c]={type:12},[c+1,i]}e.exports={encode:function(e,t){var n=e.toString();"\n"==n[n.length-1]&&(n=n.substring(0,n.length-1));var a=n.split("\n"),i=new r("",0,2*n.length+1e4);i.WriteUint32(n.length),i.WriteUint32(a.length),i.WriteByte(t);for(var s=new Array(a.length),o={},u=new Array(256).fill(0),d=0,f=0,p=0;p<a.length;p++){var[g,m]=h(s,o,u,a[p],p);d<g&&(d=g),f<m&&(f=m)}for(var b=0;b<d;b++){for(var v=new Array(13),y=0;y<=12;y++)v[y]=new r("",0,a.length*f);l(v,s,b,a,d,f),c(v,b,t,i)}return i.buf.slice(0,i.pos)},decode:function(e,n,s){(e=new r(e)).ReadUint32();var l=e.ReadUint32(),c=e.ReadByte(),u=function(e,n,s,o){for(var l=-1,c=new Array(256);!e.EOF();){var u=e.ReadByte(),h=128&u,d=64&u,f=63&u;if(h&&(c[++l]=new Array(13)),0!=f&&h){var p=new Array(o-1).fill(10);c[l][0]=new r(t.from([f].concat(p)))}if(d){var g=e.ReadByte(),m=e.ReadByte();c[l][f]=new r(c[g][m].buf)}else{var b=e.ReadUint7(),v=e.ReadData(b);c[l][f]=s?i.decode(v):a.decode(v),c[l][f]=new r(c[l][f])}}return c}(e,0,c,l),h=new Array(l),d=new Array(l),f="";void 0===s&&(s="\n");for(var p=0;p<l;p++)f+=o(u,h,d,p)+s;return f}}}).call(this,n(35).Buffer)},1185:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(56),a=n(352),i=n(1255),s=n(1253);class o{constructor(e,t){this.file=e,this.filePosition=t}getHeader(){return this._readContainerHeader(this.filePosition)}async getCompressionHeaderBlock(){if(!(await this.getHeader()).numRecords)return null;const e=await this.file.getSectionParsers(),t=await this.getFirstBlock();if("COMPRESSION_HEADER"!==t.contentType)throw new r.c(`invalid content type ${t.contentType} in what is supposed to be the compression header block`);const n=Object(a.b)(t.content,e.cramCompressionHeader.parser,0,t.contentPosition);return t.content=n,t}async getFirstBlock(){const e=await this.getHeader();return this.file.readBlock(e._endPosition)}async getCompressionScheme(){const e=await this.getCompressionHeaderBlock();if(e)return new s.a(e.content)}getSlice(e,t){return new i.a(this,e,t)}async _readContainerHeader(t){const n=await this.file.getSectionParsers(),{cramContainerHeader1:r,cramContainerHeader2:i}=n,{size:s}=await this.file.stat();if(t>=s)return;const o=e.allocUnsafe(r.maxLength);await this.file.read(o,0,r.maxLength,t);const l=Object(a.b)(o,r.parser),c=Object(a.a)(l.numLandmarks);if(t+l.length>=s)return void console.warn(`${this.file}: container header at ${t} indicates that the container has length ${l.length}, which extends beyond the length of the file. Skipping this container.`);const u=e.allocUnsafe(i.maxLength(l.numLandmarks));await this.file.read(u,0,i.maxLength(l.numLandmarks),t+l._size-c);const h=Object(a.b)(u,i.parser);this.file.validateChecksums&&void 0!==h.crc32&&await this.file.checkCrc32(t,l._size+h._size-c-4,h.crc32,`container header beginning at position ${t}`);return Object.assign(l,h,{_size:l._size+h._size-c,_endPosition:l._size+h._size-c+t})}}"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((e=>Object(a.e)(o,e)))}).call(this,n(35).Buffer)},1186:function(e,t,n){var r,a,i,s,o;r=n(1187),a=n(860).utf8,i=n(1188),s=n(860).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):a.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,h=-1732584194,d=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var p=o._ff,g=o._gg,m=o._hh,b=o._ii;for(f=0;f<n.length;f+=16){var v=c,y=u,w=h,_=d;c=p(c,u,h,d,n[f+0],7,-680876936),d=p(d,c,u,h,n[f+1],12,-389564586),h=p(h,d,c,u,n[f+2],17,606105819),u=p(u,h,d,c,n[f+3],22,-1044525330),c=p(c,u,h,d,n[f+4],7,-176418897),d=p(d,c,u,h,n[f+5],12,1200080426),h=p(h,d,c,u,n[f+6],17,-1473231341),u=p(u,h,d,c,n[f+7],22,-45705983),c=p(c,u,h,d,n[f+8],7,1770035416),d=p(d,c,u,h,n[f+9],12,-1958414417),h=p(h,d,c,u,n[f+10],17,-42063),u=p(u,h,d,c,n[f+11],22,-1990404162),c=p(c,u,h,d,n[f+12],7,1804603682),d=p(d,c,u,h,n[f+13],12,-40341101),h=p(h,d,c,u,n[f+14],17,-1502002290),c=g(c,u=p(u,h,d,c,n[f+15],22,1236535329),h,d,n[f+1],5,-165796510),d=g(d,c,u,h,n[f+6],9,-1069501632),h=g(h,d,c,u,n[f+11],14,643717713),u=g(u,h,d,c,n[f+0],20,-373897302),c=g(c,u,h,d,n[f+5],5,-701558691),d=g(d,c,u,h,n[f+10],9,38016083),h=g(h,d,c,u,n[f+15],14,-660478335),u=g(u,h,d,c,n[f+4],20,-405537848),c=g(c,u,h,d,n[f+9],5,568446438),d=g(d,c,u,h,n[f+14],9,-1019803690),h=g(h,d,c,u,n[f+3],14,-187363961),u=g(u,h,d,c,n[f+8],20,1163531501),c=g(c,u,h,d,n[f+13],5,-1444681467),d=g(d,c,u,h,n[f+2],9,-51403784),h=g(h,d,c,u,n[f+7],14,1735328473),c=m(c,u=g(u,h,d,c,n[f+12],20,-1926607734),h,d,n[f+5],4,-378558),d=m(d,c,u,h,n[f+8],11,-2022574463),h=m(h,d,c,u,n[f+11],16,1839030562),u=m(u,h,d,c,n[f+14],23,-35309556),c=m(c,u,h,d,n[f+1],4,-1530992060),d=m(d,c,u,h,n[f+4],11,1272893353),h=m(h,d,c,u,n[f+7],16,-155497632),u=m(u,h,d,c,n[f+10],23,-1094730640),c=m(c,u,h,d,n[f+13],4,681279174),d=m(d,c,u,h,n[f+0],11,-358537222),h=m(h,d,c,u,n[f+3],16,-722521979),u=m(u,h,d,c,n[f+6],23,76029189),c=m(c,u,h,d,n[f+9],4,-640364487),d=m(d,c,u,h,n[f+12],11,-421815835),h=m(h,d,c,u,n[f+15],16,530742520),c=b(c,u=m(u,h,d,c,n[f+2],23,-995338651),h,d,n[f+0],6,-198630844),d=b(d,c,u,h,n[f+7],10,1126891415),h=b(h,d,c,u,n[f+14],15,-1416354905),u=b(u,h,d,c,n[f+5],21,-57434055),c=b(c,u,h,d,n[f+12],6,1700485571),d=b(d,c,u,h,n[f+3],10,-1894986606),h=b(h,d,c,u,n[f+10],15,-1051523),u=b(u,h,d,c,n[f+1],21,-2054922799),c=b(c,u,h,d,n[f+8],6,1873313359),d=b(d,c,u,h,n[f+15],10,-30611744),h=b(h,d,c,u,n[f+6],15,-1560198380),u=b(u,h,d,c,n[f+13],21,1309151649),c=b(c,u,h,d,n[f+4],6,-145523070),d=b(d,c,u,h,n[f+11],10,-1120210379),h=b(h,d,c,u,n[f+2],15,718787259),u=b(u,h,d,c,n[f+9],21,-343485551),c=c+v>>>0,u=u+y>>>0,h=h+w>>>0,d=d+_>>>0}return r.endian([c,u,h,d])})._ff=function(e,t,n,r,a,i,s){var o=e+(t&n|~t&r)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._gg=function(e,t,n,r,a,i,s){var o=e+(t&r|n&~r)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._hh=function(e,t,n,r,a,i,s){var o=e+(t^n^r)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._ii=function(e,t,n,r,a,i,s){var o=e+(n^(t|~r))+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(o(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},1187:function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?t.push(n.charAt(a>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|n.indexOf(e.charAt(r))>>>6-2*a);return t}},e.exports=r},1188:function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},1189:function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);r.ZERO=b;var v=o(0,!0);r.UZERO=v;var y=o(1);r.ONE=y;var w=o(1,!0);r.UONE=w;var _=o(-1);r.NEG_ONE=_;var E=c(-1,2147483647,!1);r.MAX_VALUE=E;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,v=0,y=0;return v+=(y+=s*f)>>>16,g+=(v+=i*f)>>>16,v&=65535,g+=(v+=s*h)>>>16,p+=(g+=r*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=t*f+r*h+i*u+s*o,c((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(t),f=h.mul(e);f.isNegative()||f.gt(r);)f=(h=l(t-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1190:function(e,t,n){(function(e,r){var a;!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var o,l=2147483647,c=36,u=/^xn--/,h=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function m(e){throw new RangeError(f[e])}function b(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function v(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+b((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function w(e){return b(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=c)e=p(e/35);return p(r+36*e/(e+38))}function k(e){var t,n,r,a,i,s,o,u,h,d,f,g=[],b=e.length,v=0,y=128,_=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),g.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<b;){for(i=v,s=1,o=c;a>=b&&m("invalid-input"),((u=(f=e.charCodeAt(a++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||u>p((l-v)/s))&&m("overflow"),v+=u*s,!(u<(h=o<=_?1:o>=_+26?26:o-_));o+=c)s>p(l/(d=c-h))&&m("overflow"),s*=d;_=E(v-i,t=g.length+1,0==i),p(v/t)>l-y&&m("overflow"),y+=p(v/t),v%=t,g.splice(v++,0,y)}return w(g)}function S(e){var t,n,r,a,i,s,o,u,h,d,f,b,v,w,k,S=[];for(b=(e=y(e)).length,t=128,n=0,i=72,s=0;s<b;++s)(f=e[s])<128&&S.push(g(f));for(r=a=S.length,a&&S.push("-");r<b;){for(o=l,s=0;s<b;++s)(f=e[s])>=t&&f<o&&(o=f);for(o-t>p((l-n)/(v=r+1))&&m("overflow"),n+=(o-t)*v,t=o,s=0;s<b;++s)if((f=e[s])<t&&++n>l&&m("overflow"),f==t){for(u=n,h=c;!(u<(d=h<=i?1:h>=i+26?26:h-i));h+=c)k=u-d,w=c-d,S.push(g(_(d+k%w,0))),u=p(k/w);S.push(g(_(u,0))),i=E(n,v,r==a),n=0,++r}++n,++t}return S.join("")}o={version:"1.4.1",ucs2:{decode:y,encode:w},decode:k,encode:S,toASCII:function(e){return v(e,(function(e){return h.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return v(e,(function(e){return u.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return o}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(1191)(e),n(71))},1191:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},1192:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},1193:function(e,t,n){"use strict";t.decode=t.parse=n(1194),t.encode=t.stringify=n(1195)},1194:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,f,p,g=e[u].replace(o,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(s,f)?a(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},1195:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var o=encodeURIComponent(r(s))+n;return a(e[s])?i(e[s],(function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[s]))})).join(t):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},1196:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=f(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=p(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,r,a=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},b.call(y.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,n){return new Promise((function(r,i){var s=new y(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function l(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;r(new _(a,n))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),s.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",l),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",l)}),o.send(void 0===s._bodyInit?null:s._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=d,e.Request=y,e.Response=_),t.Headers=d,t.Request=y,t.Response=_,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var a=r;(t=a.fetch).default=a.fetch,t.fetch=a.fetch,t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response,e.exports=t},1197:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(606),a=n.n(r);class i{constructor({fetch:e,size:t=1e7,chunkSize:n=32768}){if(!e)throw new Error("fetch function required");this.fetch=e,this.chunkSize=n,this.lruCache=new a.a({maxSize:Math.floor(t/n)})}async get(e,t,n,r){if(e.length<t+n)throw new Error("output buffer not big enough for request");const a=Math.floor(r/this.chunkSize),i=Math.floor((r+n)/this.chunkSize),s=new Array(i-a+1);for(let e=a;e<=i;e+=1)s[e-a]=this._getChunk(e).then((t=>({data:t,chunkNumber:e})));const o=await Promise.all(s),l=r-o[0].chunkNumber*this.chunkSize;o.forEach((({data:s,chunkNumber:o})=>{const c=o*this.chunkSize;let u=0,h=this.chunkSize,d=t+(o-a)*this.chunkSize-l;o===a&&(d=t,u=l),o===i&&(h=r+n-c),s.copy(e,d,u,h)}))}_getChunk(e){const t=this.lruCache.get(e);if(t)return t;const n=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,n),n}}},1198:function(e,t,n){"use strict";function r(e){const t=e.split(/\r?\n/),n=[];return t.forEach((e=>{const[t,...r]=e.split(/\t/),a=r.map((e=>{const[t,n]=e.split(":",2);return{tag:t,value:n}}));t&&n.push({tag:t.substr(1),data:a})})),n}n.d(t,"a",(function(){return r}))},1199:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(1200),a=n.n(r),i=n(92);class s{constructor({filehandle:e,path:t}){if(e)this.filehandle=e;else{if(!t)throw new TypeError("either filehandle or path must be defined");this.filehandle=new i.LocalFile(t)}}_readLongWithOverflow(e,t=0,n=!0){const r=a.a.fromBytesLE(e.slice(t,t+8),n);if(r.greaterThan(Number.MAX_SAFE_INTEGER)||r.lessThan(Number.MIN_SAFE_INTEGER))throw new TypeError("integer overflow");return r.toNumber()}_getIndex(){return this.index||(this.index=this._readIndex()),this.index}async _readIndex(){let t=e.allocUnsafe(8);await this.filehandle.read(t,0,8,0);const n=this._readLongWithOverflow(t,0,!0);if(!n)return[[0,0]];const r=new Array(n+1);r[0]=[0,0];const a=16*n;if(a>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");t=e.allocUnsafe(a),await this.filehandle.read(t,0,a,8);for(let e=0;e<n;e+=1){const n=this._readLongWithOverflow(t,16*e),a=this._readLongWithOverflow(t,16*e+8);r[e+1]=[n,a]}return r}async getLastBlock(){const e=await this._getIndex();if(e.length)return e[e.length-1]}async getRelevantBlocksForRead(e,t){const n=t+e;if(0===e)return[];const r=await this._getIndex(),a=[],i=(e,n)=>{const r=e[1],a=n?n[1]:1/0;return r<=t&&a>t?0:r<t?-1:1};let s=0,o=r.length-1,l=Math.floor(r.length/2),c=i(r[l],r[l+1]);for(;0!==c;)c>0?o=l-1:c<0&&(s=l+1),l=Math.ceil((o-s)/2)+s,c=i(r[l],r[l+1]);a.push(r[l]);let u=l+1;for(;u<r.length&&(a.push(r[u]),!(r[u][1]>=n));u+=1);return a[a.length-1][1]<n&&a.push([]),a}}}).call(this,n(35).Buffer)},1200:function(e,t,n){var r,a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function a(e){var t=Math.clz32(e&-e);return e?31-t:t}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=l,n.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("number"==typeof t?(n=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:b;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);n.ZERO=b;var v=o(0,!0);n.UZERO=v;var y=o(1);n.ONE=y;var w=o(1,!0);n.UONE=w;var _=o(-1);n.NEG_ONE=_;var E=c(-1,2147483647,!1);n.MAX_VALUE=E;var k=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=a+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return this;if(r(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,y=0,w=0;return y+=(w+=s*f)>>>16,g+=(y+=i*f)>>>16,y&=65535,g+=(y+=s*h)>>>16,p+=(g+=a*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=n*f+a*h+i*u+s*o,c((y&=65535)<<16|(w&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(n),f=h.mul(e);f.isNegative()||f.gt(a);)f=(h=l(n-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?a(this.low):a(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),c(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),c(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var x=n;return e.default=x,"default"in e?e.default:e}({});void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)},1201:function(e,t,n){"use strict";class r{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}e.exports=r},1202:function(e,t){!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=f(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=p(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,r,a=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},b.call(y.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,n){return new Promise((function(r,i){var s=new y(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function l(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;r(new _(a,n))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),s.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",l),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",l)}),o.send(void 0===s._bodyInit?null:s._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=d,e.Request=y,e.Response=_),t.Headers=d,t.Request=y,t.Response=_,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:this)},1203:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t){this.ranges=2===arguments.length?[{min:e,max:t}]:0 in e?Object.assign({},e):[e]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(e){for(let t=0;t<this.ranges.length;t+=1){const n=this.ranges[t];if(n.min<=e&&n.max>=e)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map((e=>new r(e.min,e.max)))}toString(){return this.ranges.map((e=>`[${e.min}-${e.max}]`)).join(",")}union(e){const t=this.getRanges().concat(e.getRanges()).sort(this.rangeOrder),n=[];let a=t[0];for(let e=1;e<t.length;e+=1){const i=t[e];i.min()>a.max()+1?(n.push(a),a=i):i.max()>a.max()&&(a=new r(a.min(),i.max()))}return n.push(a),1===n.length?n[0]:new r(n)}intersection(e){let t=this,n=e;const a=this.ranges(),i=n.ranges(),s=a.length,o=i.length;let l=0,c=0;const u=[];for(;l<s&&c<o;){t=a[l],n=i[c];const e=Math.max(t.min(),n.min()),s=Math.min(t.max(),n.max());s>=e&&u.push(new r(e,s)),t.max()>n.max()?c+=1:l+=1}if(0===u.length)throw new Error("found range of length 0");return 1===u.length?u[0]:new r(u)}coverage(){let e=0;const t=this.ranges();for(let n=0;n<t.length;n+=1){const r=t[n];e+=r.max()-r.min()+1}return e}rangeOrder(e,t){let n=e,r=t;return arguments.length<2&&(r=n,n=this),n.min()<r.min()?-1:n.min()>r.min()?1:n.max()<r.max()?-1:r.max()>n.max()?1:0}}},1204:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));class r extends Error{constructor(e){super(e),this.code="ERR_ABORTED"}}function a(e){e.sort(((e,t)=>Number(e.offset)-Number(t.offset)));const t=[];let n,r;for(let a=0;a<e.length;a+=1)n&&r&&Number(e[a].offset)-r<=2e3?(n.length=BigInt(Number(n.length)+Number(e[a].length)-r+Number(e[a].offset)),n.blocks.push(e[a])):t.push(n={blocks:[e[a]],length:e[a].length,offset:e[a].offset}),r=Number(n.offset)+Number(n.length);return t}function i(e){if(e&&e.aborted){if("undefined"!=typeof DOMException)throw new DOMException("aborted","AbortError");{const e=new r("aborted");throw e.code="ERR_ABORTED",e}}}},1205:function(e,t,n){"use strict";var r=n(1206),a=n(1209),i=[].slice,s=["keyword","gray","hex"],o={};Object.keys(a).forEach((function(e){o[i.call(a[e].labels).sort().join("")]=e}));var l={};function c(e,t){if(!(this instanceof c))return new c(e,t);if(t&&t in s&&(t=null),t&&!(t in a))throw new Error("Unknown model: "+t);var n,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof c)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var h=r.get(e);if(null===h)throw new Error("Unable to parse color from string: "+e);this.model=h.model,u=a[this.model].channels,this.color=h.value.slice(0,u),this.valpha="number"==typeof h.value[u]?h.value[u]:1}else if(e.length){this.model=t||"rgb",u=a[this.model].channels;var d=i.call(e,0,u);this.color=f(d,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var p=Object.keys(e);"alpha"in e&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var g=p.sort().join("");if(!(g in o))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=o[g];var m=a[this.model].labels,b=[];for(n=0;n<m.length;n++)b.push(e[m[n]]);this.color=f(b)}if(l[this.model])for(u=a[this.model].channels,n=0;n<u;n++){var v=l[this.model][n];v&&(this.color[n]=v(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(l[e]||(l[e]=[]))[t]=n})),e=e[0],function(r){var a;return arguments.length?(n&&(r=n(r)),(a=this[e]()).color[t]=r,a):(a=this[e]().color[t],n&&(a=n(a)),a)}}function h(e){return function(t){return Math.max(0,Math.min(e,t))}}function d(e){return Array.isArray(e)?e:[e]}function f(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=a[this.model].channels,n=a[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new c(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,h(255)),green:u("rgb",1,h(255)),blue:u("rgb",2,h(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,h(100)),lightness:u("hsl",2,h(100)),saturationv:u("hsv",1,h(100)),value:u("hsv",2,h(100)),chroma:u("hcg",1,h(100)),gray:u("hcg",2,h(100)),white:u("hwb",1,h(100)),wblack:u("hwb",2,h(100)),cyan:u("cmyk",0,h(100)),magenta:u("cmyk",1,h(100)),yellow:u("cmyk",2,h(100)),black:u("cmyk",3,h(100)),x:u("xyz",0,h(100)),y:u("xyz",1,h(100)),z:u("xyz",2,h(100)),l:u("lab",0,h(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new c(e):a[this.model].keyword(this.color)},hex:function(e){return arguments.length?new c(e):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return c.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),a=void 0===t?.5:t,i=2*a-1,s=n.alpha()-r.alpha(),o=((i*s==-1?i:(i+s)/(1+i*s))+1)/2,l=1-o;return c.rgb(o*n.red()+l*r.red(),o*n.green()+l*r.green(),o*n.blue()+l*r.blue(),n.alpha()*a+r.alpha()*(1-a))}},Object.keys(a).forEach((function(e){if(-1===s.indexOf(e)){var t=a[e].channels;c.prototype[e]=function(){if(this.model===e)return new c(this);if(arguments.length)return new c(arguments,e);var n="number"==typeof arguments[t]?t:this.valpha;return new c(d(a[this.model][e].raw(this.color)).concat(n),e)},c[e]=function(n){return"number"==typeof n&&(n=f(i.call(arguments),t)),new c(n,e)}}})),e.exports=c},1206:function(e,t,n){var r=n(875),a=n(1207),i=Object.hasOwnProperty,s=Object.create(null);for(var o in r)i.call(r,o)&&(s[r[o]]=o);var l=e.exports={to:{},get:{}};function c(e,t,n){return Math.min(Math.max(t,e),n)}function u(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,a,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(a=t[2],t=t[1],n=0;n<3;n++){var o=2*n;s[n]=parseInt(t.slice(o,o+2),16)}a&&(s[3]=parseInt(a,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(a=(t=t[1])[3],n=0;n<3;n++)s[n]=parseInt(t[n]+t[n],16);a&&(s[3]=parseInt(a+a,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(t[n+1],0);t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:i.call(r,t[1])?((s=r[t[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}for(n=0;n<3;n++)s[n]=c(s[n],0,255);return s[3]=c(s[3],0,1),s},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=a(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=a(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=a(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},l.to.hsl=function(){var e=a(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=a(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return s[e.slice(0,3)]}},1207:function(e,t,n){"use strict";var r=n(1208),a=Array.prototype.concat,i=Array.prototype.slice,s=e.exports=function(e){for(var t=[],n=0,s=e.length;n<s;n++){var o=e[n];r(o)?t=a.call(t,i.call(o)):t.push(o)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},1208:function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},1209:function(e,t,n){var r=n(876),a=n(1210),i={};Object.keys(r).forEach((function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:r[e].channels}),Object.defineProperty(i[e],"labels",{value:r[e].labels});var t=a(e);Object.keys(t).forEach((function(n){var r=t[n];i[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,a=0;a<r;a++)n[a]=Math.round(n[a]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=i},121:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)a(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],s.set(i,a),a+=i.length;return s}},s={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(r)},1210:function(e,t,n){var r=n(876);function a(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,a=0;a<n;a++)e[t[a]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var a=n.pop(),i=Object.keys(r[a]),s=i.length,o=0;o<s;o++){var l=i[o],c=t[l];-1===c.distance&&(c.distance=t[a].distance+1,c.parent=a,n.unshift(l))}return t}function i(e,t){return function(n){return t(e(n))}}function s(e,t){for(var n=[t[e].parent,e],a=r[t[e].parent][e],s=t[e].parent;t[s].parent;)n.unshift(t[s].parent),a=i(r[t[s].parent][s],a),s=t[s].parent;return a.conversion=n,a}e.exports=function(e){for(var t=a(e),n={},r=Object.keys(t),i=r.length,o=0;o<i;o++){var l=r[o];null!==t[l].parent&&(n[l]=s(l,t))}return n}},1211:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(691),c=n(688),u=n(687),h=n(673),d=n(22),f=n(37),p=n.n(f);const g=Object(d.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));function m({handleClose:e}){const{classes:t}=g();return a.a.createElement(i.a,{open:!0,maxWidth:"xl",onClose:e},a.a.createElement(s.a,null,"Using the search box",e?a.a.createElement(o.a,{className:t.closeButton,onClick:()=>e()},a.a.createElement(p.a,null)):null),a.a.createElement(l.a,null),a.a.createElement(c.a,null,a.a.createElement("h3",null,"Searching"),a.a.createElement("ul",null,a.a.createElement("li",null,"Jump to a feature or reference sequence by typing its name in the location box and pressing Enter."),a.a.createElement("li",null,"Jump to a specific region by typing the region into the location box as: ",a.a.createElement("code",null,"ref:start..end")," or ",a.a.createElement("code",null,"ref:start-end"),". Commas are allowed in the start and end coordinates. A space-separated list of locstrings can be used to open up multiple chromosomes at a time")),a.a.createElement("h3",null,"Example Searches"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"BRCA")," - searches for the feature named BRCA"),a.a.createElement("li",null,a.a.createElement("code",null,"chr4")," - jumps to chromosome 4"),a.a.createElement("li",null,a.a.createElement("code",null,"chr4:79,500,000..80,000,000")," - jumps the region on chromosome 4 between 79.5Mb and 80Mb."),a.a.createElement("li",null,a.a.createElement("code",null,"chr1:1-100 chr2:1-100")," - create a split view of chr1:1-100 and chr2:1-100"),a.a.createElement("li",null,a.a.createElement("code",null,"chr1 chr2 chr3")," - open up multiple chromosomes at once"),a.a.createElement("li",null,a.a.createElement("code",null,"chr1:1-100[rev] chr2:1-100")," - open up the first region in the horizontally flipped orientation"),a.a.createElement("li",null,a.a.createElement("code",null,"chr1 100 200")," - use whitespace separated refname, start, end"))),a.a.createElement(l.a,null),a.a.createElement(u.a,null,a.a.createElement(h.a,{onClick:()=>e(),color:"primary"},"Close")))}},1212:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.setNonce=t.RgbaStringColorPicker=t.RgbaColorPicker=t.RgbStringColorPicker=t.RgbColorPicker=t.HsvaStringColorPicker=t.HsvaColorPicker=t.HsvStringColorPicker=t.HsvColorPicker=t.HslaStringColorPicker=t.HslaColorPicker=t.HslStringColorPicker=t.HslColorPicker=t.HexColorPicker=t.HexColorInput=void 0;const s=i(n(1));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}function c(e){const t=(0,s.useRef)(e),n=(0,s.useRef)((e=>{t.current&&t.current(e)}));return t.current=e,n.current}const u=(e,t=0,n=1)=>e>n?n:e<t?t:e,h=e=>"touches"in e,d=e=>e&&e.ownerDocument.defaultView||self,f=(e,t,n)=>{const r=e.getBoundingClientRect(),a=h(t)?((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]})(t.touches,n):t;return{left:u((a.pageX-(r.left+d(e).pageXOffset))/r.width),top:u((a.pageY-(r.top+d(e).pageYOffset))/r.height)}},p=e=>{!h(e)&&e.preventDefault()},g=s.default.memo((e=>{let{onMove:t,onKey:n}=e,r=l(e,["onMove","onKey"]);const a=(0,s.useRef)(null),i=c(t),u=c(n),g=(0,s.useRef)(null),m=(0,s.useRef)(!1),[b,v,y]=(0,s.useMemo)((()=>{const e=e=>{p(e),(h(e)?e.touches.length>0:e.buttons>0)&&a.current?i(f(a.current,e,g.current)):n(!1)},t=()=>n(!1);function n(n){const r=m.current,i=d(a.current),s=n?i.addEventListener:i.removeEventListener;s(r?"touchmove":"mousemove",e),s(r?"touchend":"mouseup",t)}return[({nativeEvent:e})=>{const t=a.current;if(t&&(p(e),!((e,t)=>t&&!h(e))(e,m.current)&&t)){if(h(e)){m.current=!0;const t=e.changedTouches||[];t.length&&(g.current=t[0].identifier)}t.focus(),i(f(t,e,g.current)),n(!0)}},e=>{const t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),u({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[u,i]);return(0,s.useEffect)((()=>y),[y]),s.default.createElement("div",o({},r,{onTouchStart:b,onMouseDown:b,className:"react-colorful__interactive",ref:a,onKeyDown:v,tabIndex:0,role:"slider"}))})),m=e=>e.filter(Boolean).join(" "),b=({className:e,color:t,left:n,top:r=.5})=>{const a=m(["react-colorful__pointer",e]);return s.default.createElement("div",{className:a,style:{top:100*r+"%",left:100*n+"%"}},s.default.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},v=(e,t=0,n=Math.pow(10,t))=>Math.round(n*e)/n,y={grad:.9,turn:360,rad:360/(2*Math.PI)},w=e=>("#"===e[0]&&(e=e.substr(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1}),_=(e,t="deg")=>Number(e)*(y[t]||1),E=e=>{const t=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?S({h:_(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},k=E,S=({h:e,s:t,l:n,a:r})=>({h:e,s:(t*=(n<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:r}),C=({h:e,s:t,v:n,a:r})=>{const a=(200-t)*n/100;return{h:v(e),s:v(a>0&&a<200?t*n/100/(a<=100?a:200-a)*100:0),l:v(a/2),a:v(r,2)}},x=e=>{const{h:t,s:n,l:r}=C(e);return`hsl(${t}, ${n}%, ${r}%)`},O=e=>{const{h:t,s:n,l:r,a:a}=C(e);return`hsla(${t}, ${n}%, ${r}%, ${a})`},N=({h:e,s:t,v:n,a:r})=>{e=e/360*6,t/=100,n/=100;const a=Math.floor(e),i=n*(1-t),s=n*(1-(e-a)*t),o=n*(1-(1-e+a)*t),l=a%6;return{r:v(255*[n,s,i,i,o,n][l]),g:v(255*[o,n,n,s,i,i][l]),b:v(255*[i,i,o,n,n,s][l]),a:v(r,2)}},A=e=>{const t=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?T({h:_(t[1],t[2]),s:Number(t[3]),v:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},B=A,R=e=>{const t=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?M({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}},I=R,j=e=>{const t=e.toString(16);return t.length<2?"0"+t:t},M=({r:e,g:t,b:n,a:r})=>{const a=Math.max(e,t,n),i=a-Math.min(e,t,n),s=i?a===e?(t-n)/i:a===t?2+(n-e)/i:4+(e-t)/i:0;return{h:v(60*(s<0?s+6:s)),s:v(a?i/a*100:0),v:v(a/255*100),a:r}},T=e=>({h:v(e.h),s:v(e.s),v:v(e.v),a:v(e.a,2)}),L=s.default.memo((({className:e,hue:t,onChange:n})=>{const r=m(["react-colorful__hue",e]);return s.default.createElement("div",{className:r},s.default.createElement(g,{onMove:e=>{n({h:360*e.left})},onKey:e=>{n({h:u(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":v(t)},s.default.createElement(b,{className:"react-colorful__hue-pointer",left:t/360,color:x({h:t,s:100,v:100,a:1})})))})),P=s.default.memo((({hsva:e,onChange:t})=>{const n={backgroundColor:x({h:e.h,s:100,v:100,a:1})};return s.default.createElement("div",{className:"react-colorful__saturation",style:n},s.default.createElement(g,{onMove:e=>{t({s:100*e.left,v:100-100*e.top})},onKey:n=>{t({s:u(e.s+100*n.left,0,100),v:u(e.v-100*n.top,0,100)})},"aria-label":"Color","aria-valuetext":`Saturation ${v(e.s)}%, Brightness ${v(e.v)}%`},s.default.createElement(b,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:x(e)})))})),z=(e,t)=>{if(e===t)return!0;for(const n in e)if(e[n]!==t[n])return!1;return!0},F=(e,t)=>e.replace(/\s/g,"")===t.replace(/\s/g,"");function q(e,t,n){const r=c(n),[a,i]=(0,s.useState)((()=>e.toHsva(t))),o=(0,s.useRef)({color:t,hsva:a});(0,s.useEffect)((()=>{if(!e.equal(t,o.current.color)){const n=e.toHsva(t);o.current={hsva:n,color:t},i(n)}}),[t,e]),(0,s.useEffect)((()=>{let t;z(a,o.current.hsva)||e.equal(t=e.fromHsva(a),o.current.color)||(o.current={hsva:a,color:t},r(t))}),[a,e,r]);const l=(0,s.useCallback)((e=>{i((t=>Object.assign({},t,e)))}),[]);return[a,l]}const $="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;let D;const U=new Map,H=e=>{$((()=>{const t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!U.has(t)){const e=t.createElement("style");e.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',U.set(t,e);const r=D||n.nc;r&&e.setAttribute("nonce",r),t.head.appendChild(e)}}),[])},W=e=>{let{className:t,colorModel:n,color:r=n.defaultColor,onChange:a}=e,i=l(e,["className","colorModel","color","onChange"]);const c=(0,s.useRef)(null);H(c);const[u,h]=q(n,r,a),d=m(["react-colorful",t]);return s.default.createElement("div",o({},i,{ref:c,className:d}),s.default.createElement(P,{hsva:u,onChange:h}),s.default.createElement(L,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},V={defaultColor:"000",toHsva:e=>M(w(e)),fromHsva:e=>(({r:e,g:t,b:n})=>"#"+j(e)+j(t)+j(n))(N(e)),equal:(e,t)=>e.toLowerCase()===t.toLowerCase()||z(w(e),w(t))},Z=({className:e,hsva:t,onChange:n})=>{const r={backgroundImage:`linear-gradient(90deg, ${O(Object.assign({},t,{a:0}))}, ${O(Object.assign({},t,{a:1}))})`},a=m(["react-colorful__alpha",e]);return s.default.createElement("div",{className:a},s.default.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),s.default.createElement(g,{onMove:e=>{n({a:e.left})},onKey:e=>{n({a:u(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":`${v(100*t.a)}%`},s.default.createElement(b,{className:"react-colorful__alpha-pointer",left:t.a,color:O(t)})))},G=e=>{let{className:t,colorModel:n,color:r=n.defaultColor,onChange:a}=e,i=l(e,["className","colorModel","color","onChange"]);const c=(0,s.useRef)(null);H(c);const[u,h]=q(n,r,a),d=m(["react-colorful",t]);return s.default.createElement("div",o({},i,{ref:c,className:d}),s.default.createElement(P,{hsva:u,onChange:h}),s.default.createElement(L,{hue:u.h,onChange:h}),s.default.createElement(Z,{hsva:u,onChange:h,className:"react-colorful__last-control"}))},X={defaultColor:{h:0,s:0,l:0,a:1},toHsva:S,fromHsva:C,equal:z},K={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:E,fromHsva:O,equal:F},Y={defaultColor:{h:0,s:0,l:0},toHsva:({h:e,s:t,l:n})=>S({h:e,s:t,l:n,a:1}),fromHsva:e=>(({h:e,s:t,l:n})=>({h:e,s:t,l:n}))(C(e)),equal:z},J={defaultColor:"hsl(0, 0%, 0%)",toHsva:k,fromHsva:x,equal:F},Q={defaultColor:{h:0,s:0,v:0,a:1},toHsva:e=>e,fromHsva:T,equal:z},ee={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:A,fromHsva:e=>{const{h:t,s:n,v:r,a:a}=T(e);return`hsva(${t}, ${n}%, ${r}%, ${a})`},equal:F},te={defaultColor:{h:0,s:0,v:0},toHsva:({h:e,s:t,v:n})=>({h:e,s:t,v:n,a:1}),fromHsva:e=>{const{h:t,s:n,v:r}=T(e);return{h:t,s:n,v:r}},equal:z},ne={defaultColor:"hsv(0, 0%, 0%)",toHsva:B,fromHsva:e=>{const{h:t,s:n,v:r}=T(e);return`hsv(${t}, ${n}%, ${r}%)`},equal:F},re={defaultColor:{r:0,g:0,b:0,a:1},toHsva:M,fromHsva:N,equal:z},ae={defaultColor:"rgba(0, 0, 0, 1)",toHsva:R,fromHsva:e=>{const{r:t,g:n,b:r,a:a}=N(e);return`rgba(${t}, ${n}, ${r}, ${a})`},equal:F},ie={defaultColor:{r:0,g:0,b:0},toHsva:({r:e,g:t,b:n})=>M({r:e,g:t,b:n,a:1}),fromHsva:e=>(({r:e,g:t,b:n})=>({r:e,g:t,b:n}))(N(e)),equal:z},se={defaultColor:"rgb(0, 0, 0)",toHsva:I,fromHsva:e=>{const{r:t,g:n,b:r}=N(e);return`rgb(${t}, ${n}, ${r})`},equal:F},oe=/^#?([0-9A-F]{3,8})$/i,le=e=>{const{color:t="",onChange:n,onBlur:r,escape:a,validate:i,format:u,process:h}=e,d=l(e,["color","onChange","onBlur","escape","validate","format","process"]),[f,p]=(0,s.useState)((()=>a(t))),g=c(n),m=c(r),b=(0,s.useCallback)((e=>{const t=a(e.target.value);p(t),i(t)&&g(h?h(t):t)}),[a,h,i,g]),v=(0,s.useCallback)((e=>{i(e.target.value)||p(a(t)),m(e)}),[t,a,i,m]);return(0,s.useEffect)((()=>{p(a(t))}),[t,a]),s.default.createElement("input",o({},d,{value:u?u(f):f,spellCheck:"false",onChange:b,onBlur:v}))},ce=e=>"#"+e;t.setNonce=e=>{D=e},t.HexColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:V})),t.HslaColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:X})),t.HslaStringColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:K})),t.HslColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:Y})),t.HslStringColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:J})),t.HsvaColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:Q})),t.HsvaStringColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:ee})),t.HsvColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:te})),t.HsvStringColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:ne})),t.RgbaColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:re})),t.RgbaStringColorPicker=e=>s.default.createElement(G,o({},e,{colorModel:ae})),t.RgbColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:ie})),t.RgbStringColorPicker=e=>s.default.createElement(W,o({},e,{colorModel:se})),t.HexColorInput=e=>{const{prefixed:t,alpha:n}=e,r=l(e,["prefixed","alpha"]),a=(0,s.useCallback)((e=>e.replace(/([^0-9A-F]+)/gi,"").substr(0,n?8:6)),[n]),i=(0,s.useCallback)((e=>((e,t)=>{const n=oe.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r})(e,n)),[n]);return s.default.createElement(le,o({},r,{escape:a,format:t?ce:void 0,process:ce,validate:i}))}},1213:function(e,t,n){"use strict";var r=n(1214),a=r.default,i=r.DraggableCore;e.exports=a,e.exports.default=a,e.exports.DraggableCore=i},1214:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return h.default}}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(1)),i=p(n(0)),s=p(n(6)),o=p(n(14)),l=n(612),c=n(878),u=n(477),h=p(n(1216)),d=p(n(879)),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,i=S(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),N(x(t=i.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,c.createDraggableData)(x(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),N(x(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,c.createDraggableData)(x(t),n),a={x:r.x,y:r.y};if(t.props.bounds){var i=a.x,s=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var o=w((0,c.getBoundPosition)(x(t),a.x,a.y),2),l=o[0],u=o[1];a.x=l,a.y=u,a.slackX=t.state.slackX+(i-a.x),a.slackY=t.state.slackY+(s-a.y),r.x=a.x,r.y=a.y,r.deltaX=a.x-t.state.x,r.deltaY=a.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(a)})),N(x(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(x(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var a=t.props.position,i=a.x,s=a.y;r.x=i,r.y=s}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:y({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=u,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:y({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:s.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),r=t.defaultPosition,i=t.defaultClassName,s=t.defaultClassNameDragging,u=t.defaultClassNameDragged,d=t.position,p=t.positionOffset,g=(t.scale,b(t,f)),v={},w=null,_=!Boolean(d)||this.state.dragging,E=d||r,k={x:(0,c.canDragX)(this)&&_?this.state.x:E.x,y:(0,c.canDragY)(this)&&_?this.state.y:E.y};this.state.isElementSVG?w=(0,l.createSVGTransform)(k,p):v=(0,l.createCSSTransform)(k,p);var S=(0,o.default)(n.props.className||"",i,(N(e={},s,this.state.dragging),N(e,u,this.state.dragged),e));return a.createElement(h.default,m({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),a.cloneElement(a.Children.only(n),{className:S,style:y(y({},n.props.style),v),transform:w}))}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);t.default=A,N(A,"displayName","Draggable"),N(A,"propTypes",y(y({},h.default.propTypes),{},{axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),N(A,"defaultProps",y(y({},h.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},1215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=a;var r=["Moz","Webkit","O","ms"];function a(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var a=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!a)return"";if(n in a)return"";for(var s=0;s<r.length;s++)if(i(n,r[s])in a)return r[s];return""}function i(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var s=a();t.default=s},1216:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(1)),i=h(n(0)),s=h(n(6)),o=n(612),l=n(878),c=n(477),u=h(n(879));function h(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={start:"touchstart",move:"touchmove",stop:"touchend"},S={start:"mousedown",move:"mousemove",stop:"mouseup"},C=S,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(c,e);var t,n,r,i=v(c);function c(){var e;g(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(w(e=i.call.apply(i,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),E(w(e),"mounted",!1),E(w(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,o.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,o.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var a=(0,o.getTouchIdentifier)(t);e.setState({touchIdentifier:a});var i=(0,l.getControlPosition)(t,a,w(e));if(null!=i){var s=i.x,c=i.y,h=(0,l.createCoreData)(w(e),s,c);(0,u.default)("DraggableCore: handleDragStart: %j",h),(0,u.default)("calling",e.props.onStart),!1!==e.props.onStart(t,h)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:s,lastY:c}),(0,o.addEvent)(r,C.move,e.handleDrag),(0,o.addEvent)(r,C.stop,e.handleDragStop))}}})),E(w(e),"handleDrag",(function(t){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,w(e));if(null!=n){var r=n.x,a=n.y;if(Array.isArray(e.props.grid)){var i=r-e.state.lastX,s=a-e.state.lastY,o=f((0,l.snapToGrid)(e.props.grid,i,s),2);if(i=o[0],s=o[1],!i&&!s)return;r=e.state.lastX+i,a=e.state.lastY+s}var c=(0,l.createCoreData)(w(e),r,a);if((0,u.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:r,lastY:a});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(h)}}})),E(w(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,w(e));if(null!=n){var r=n.x,a=n.y;if(Array.isArray(e.props.grid)){var i=r-e.state.lastX||0,s=a-e.state.lastY||0,c=f((0,l.snapToGrid)(e.props.grid,i,s),2);i=c[0],s=c[1],r=e.state.lastX+i,a=e.state.lastY+s}var h=(0,l.createCoreData)(w(e),r,a);if(!1===e.props.onStop(t,h)||!1===e.mounted)return!1;var d=e.findDOMNode();d&&e.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(d.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",h),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),d&&((0,u.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(d.ownerDocument,C.move,e.handleDrag),(0,o.removeEvent)(d.ownerDocument,C.stop,e.handleDragStop))}}})),E(w(e),"onMouseDown",(function(t){return C=S,e.handleDragStart(t)})),E(w(e),"onMouseUp",(function(t){return C=S,e.handleDragStop(t)})),E(w(e),"onTouchStart",(function(t){return C=k,e.handleDragStart(t)})),E(w(e),"onTouchEnd",(function(t){return C=k,e.handleDragStop(t)})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,o.addEvent)(e,k.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,o.removeEvent)(t,S.move,this.handleDrag),(0,o.removeEvent)(t,k.move,this.handleDrag),(0,o.removeEvent)(t,S.stop,this.handleDragStop),(0,o.removeEvent)(t,k.stop,this.handleDragStop),(0,o.removeEvent)(e,k.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:s.default.findDOMNode(this)}},{key:"render",value:function(){return a.cloneElement(a.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);t.default=x,E(x,"displayName","DraggableCore"),E(x,"propTypes",{allowAnyClick:i.default.bool,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),E(x,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1217:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");t.default=s},1218:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)([(0,i.jsx)("path",{d:"M6 17.59 7.41 19 12 14.42 16.59 19 18 17.59l-6-6z"},"0"),(0,i.jsx)("path",{d:"m6 11 1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},"1")],"KeyboardDoubleArrowUp");t.default=s},1219:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)([(0,i.jsx)("path",{d:"M18 6.41 16.59 5 12 9.58 7.41 5 6 6.41l6 6z"},"0"),(0,i.jsx)("path",{d:"m18 13-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},"1")],"KeyboardDoubleArrowDown");t.default=s},1220:function(e,t,n){e.exports=function(){var e=[],t=[],n={},r={},a={};function i(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function s(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function o(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,n){return t[n]||""}))}function l(e,t){return e.replace(t[0],(function(n,r){var a=o(t[1],arguments);return s(""===n?e[r-1]:n,a)}))}function c(e,t,r){if(!e.length||n.hasOwnProperty(e))return t;for(var a=r.length;a--;){var i=r[a];if(i[0].test(t))return l(t,i)}return t}function u(e,t,n){return function(r){var a=r.toLowerCase();return t.hasOwnProperty(a)?s(r,a):e.hasOwnProperty(a)?s(r,e[a]):c(a,r,n)}}function h(e,t,n,r){return function(r){var a=r.toLowerCase();return!!t.hasOwnProperty(a)||!e.hasOwnProperty(a)&&c(a,a,n)===a}}function d(e,t,n){return(n?t+" ":"")+(1===t?d.singular(e):d.plural(e))}return d.plural=u(a,r,e),d.isPlural=h(a,r,e),d.singular=u(r,a,t),d.isSingular=h(r,a,t),d.addPluralRule=function(t,n){e.push([i(t),n])},d.addSingularRule=function(e,n){t.push([i(e),n])},d.addUncountableRule=function(e){"string"!=typeof e?(d.addPluralRule(e,"$0"),d.addSingularRule(e,"$0")):n[e.toLowerCase()]=!0},d.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),a[e]=t,r[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return d.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return d.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return d.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(d.addUncountableRule),d}()},1221:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.default=s},1222:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=s},1223:function(e,t,n){"use strict";(function(e){var r=n(1),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=void 0;c="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var u=null,h=null,d=c.clearTimeout,f=c.setTimeout,p=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame,g=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame;function m(e){var t=void 0,n=void 0,r=void 0,a=void 0,i=void 0,s=void 0,o=void 0,l="undefined"!=typeof document&&document.attachEvent;if(!l){s=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},i=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},o=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=h((function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}};var d=!1,f="";r="animationstart";var p="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(d=!0),!1===d)for(var b=0;b<p.length;b++)if(void 0!==m.style[p[b]+"AnimationName"]){f="-"+p[b].toLowerCase()+"-",r=g[b],d=!0;break}t="@"+f+"keyframes "+(n="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",a=f+"animation: 1ms "+n+"; "}return{addResizeListener:function(i,u){if(l)i.attachEvent("onresize",u);else{if(!i.__resizeTriggers__){var h=i.ownerDocument,d=c.getComputedStyle(i);d&&"static"===d.position&&(i.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){var r=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=n.head||n.getElementsByTagName("head")[0],s=n.createElement("style");s.id="detectElementResize",s.type="text/css",null!=e&&s.setAttribute("nonce",e),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(n.createTextNode(r)),i.appendChild(s)}}(h),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=h.createElement("div")).className="resize-triggers";var f=h.createElement("div");f.className="expand-trigger",f.appendChild(h.createElement("div"));var p=h.createElement("div");p.className="contract-trigger",i.__resizeTriggers__.appendChild(f),i.__resizeTriggers__.appendChild(p),i.appendChild(i.__resizeTriggers__),s(i),i.addEventListener("scroll",o,!0),r&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&s(i)},i.__resizeTriggers__.addEventListener(r,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(u)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",o,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(r,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}null==p||null==g?(u=d,h=function(e){return f(e,20)}):(u=function(e){var t=l(e,2),n=t[0],r=t[1];p(n),d(r)},h=function(e){var t=g((function(){d(n),e()})),n=f((function(){p(t),e()}),20);return[t,n]});var b=function(e){function t(){var e,n,r;a(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,a=e.onResize;if(r._parentNode){var i=r._parentNode.offsetHeight||0,s=r._parentNode.offsetWidth||0,o=window.getComputedStyle(r._parentNode)||{},l=parseInt(o.paddingLeft,10)||0,c=parseInt(o.paddingRight,10)||0,u=parseInt(o.paddingTop,10)||0,h=parseInt(o.paddingBottom,10)||0,d=i-u-h,f=s-l-c;(!t&&r.state.height!==d||!n&&r.state.width!==f)&&(r.setState({height:i-u-h,width:s-l-c}),a({height:i,width:s}))}},r._setRef=function(e){r._autoSizer=e},o(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=m(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.disableHeight,i=e.disableWidth,o=e.style,l=this.state,c=l.height,u=l.width,h={overflow:"visible"},d={},f=!1;return a||(0===c&&(f=!0),h.height=0,d.height=c),i||(0===u&&(f=!0),h.width=0,d.width=u),Object(r.createElement)("div",{className:n,ref:this._setRef,style:s({},h,o)},!f&&t(d))}}]),t}(r.PureComponent);b.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=b}).call(this,n(71))},1224:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},1225:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");t.default=s},1226:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.default=s},1227:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");t.default=s},1228:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.default=s},1229:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=s},1230:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");t.default=s},1231:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(620));class i extends a.default{constructor(e){if(super(e,{checkIndent:!1}),"track"!==this.nameKey)throw new Error(`trackDb has "${this.nameKey}" instead of "track" as the first line in each track`);this.forEach(((e,t)=>{var n;const r=Array.from(e.keys()),a=[];if(["track","shortLabel"].forEach((e=>{r.includes(e)||a.push(e)})),a.length>0)throw new Error(`Track ${t} is missing required key(s): ${a.join(", ")}`);const i=["superTrack","compositeTrack","container","view"];if(!r.some((e=>i.includes(e)))){if(!r.includes("bigDataUrl"))throw new Error(`Track ${t} is missing required key "bigDataUrl"`);if(!r.includes("type")){const e=this.settings(t);if(!Array.from(e.keys()).includes("type"))throw new Error(`Neither track ${t} nor any of its parent tracks have the required key "type"`)}}let s="",o=t;do{o=null===(n=this.get(o))||void 0===n?void 0:n.get("parent"),o&&([o]=o.split(" "),s+="    ")}while(o);const l=this.get(t);l&&(l.indent=s,this.set(t,l))}))}settings(e){var t;if(!this.has(e))throw new Error(`Track ${e} does not exist`);const n=[e];let r=e;do{r=null===(t=this.get(r))||void 0===t?void 0:t.get("parent"),r&&n.push(r)}while(r);const a=new Map;return n.reverse(),n.forEach((e=>{var t;null===(t=this.get(e))||void 0===t||t.forEach(((e,t)=>{a.set(t,e)}))})),a}}t.default=i},1232:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(621));class i extends a.default{constructor(e){if(super(e),"hub"!==this.nameKey)throw new Error('Hub file must begin with a line like "hub <hub_name>"');const t=["hub","shortLabel","longLabel","genomesFile","email","descriptionUrl"],n=[];if(this.forEach(((e,r)=>{t.includes(r)||n.push(r)})),n.length>0)throw new Error(`Hub file has invalid entr${1===n.length?"y":"ies"}: ${n.join(", ")}`);const r=[];if(t.forEach((e=>{"descriptionUrl"===e||this.get(e)||r.push(e)})),r.length>0)throw new Error(`Hub file is missing required entr${1===r.length?"y":"ies"}: ${r.join(", ")}`)}}t.default=i},1233:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(620));class i extends a.default{constructor(e){if(super(e),"genome"!==this.nameKey)throw new Error('Genomes file must begin with a line like "genome <genome_name>"');const t=["genome","trackDb"];this.forEach(((e,n)=>{const r=[];if(t.forEach((t=>{e.get(t)||r.push(t)})),r.length>0)throw new Error(`Genomes file entry ${n} is missing required entr${1===r.length?"y":"ies"}: ${r.join(", ")}`)}))}}t.default=i},1234:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g}));var r=n(1235),a=n(626),i=n(1247),s=n(627);function o(t){e&&e.nextTick?e.nextTick(t):t()}function l(e){const t={encoding:"utf8",parseFeatures:!0,parseDirectives:!1,parseSequences:!0,parseComments:!1,bufferSize:1e3,...e};return e.parseAll&&(t.parseFeatures=!0,t.parseDirectives=!0,t.parseComments=!0,t.parseSequences=!0),t}class c extends r.Transform{constructor(e={}){super({objectMode:!0}),this.textBuffer="";const t=l(e);this.encoding=e.encoding||"utf8",this.decoder=new a.StringDecoder;const n=this.push.bind(this);this.parser=new i.a({featureCallback:t.parseFeatures?n:void 0,directiveCallback:t.parseDirectives?n:void 0,commentCallback:t.parseComments?n:void 0,sequenceCallback:t.parseSequences?n:void 0,errorCallback:e=>this.emit("error",e),bufferSize:t.bufferSize})}_addLine(e){e&&this.parser.addLine(e)}_nextText(e){const t=(this.textBuffer+e).split(/\r?\n/);this.textBuffer=t.pop()||"",t.forEach((e=>this._addLine(e)))}_transform(e,t,n){this._nextText(this.decoder.write(e)),o(n)}_flush(e){this.decoder.end&&this._nextText(this.decoder.end()),null!=this.textBuffer&&this._addLine(this.textBuffer),this.parser.finish(),o(e)}}function u(e={}){return new c(e)}function h(e,t={}){if(!e)return[];const n=l(t),r=[],a=r.push.bind(r),s=new i.a({featureCallback:n.parseFeatures?a:void 0,directiveCallback:n.parseDirectives?a:void 0,commentCallback:n.parseComments?a:void 0,sequenceCallback:n.parseSequences?a:void 0,bufferSize:1/0,errorCallback:e=>{throw e}});return e.split(/\r?\n/).forEach(s.addLine.bind(s)),s.finish(),r}function d(e){const t=[],n=[];e.forEach((e=>{"sequence"in e?n.push(e):t.push(e)}));let r=t.map(s.formatItem).join("");return n.length&&(r+="##FASTA\n",r+=n.map(s.formatSequence).join("")),r}class f extends r.Transform{constructor(e={}){super(Object.assign(e,{objectMode:!0})),this.linesSinceLastSyncMark=0,this.haveWeEmittedData=!1,this.fastaMode=!1,this.minLinesBetweenSyncMarks=e.minSyncLines||100,this.insertVersionDirective=e.insertVersionDirective||!1}_transform(e,t,n){let r;if(!this.haveWeEmittedData&&this.insertVersionDirective){const t=Array.isArray(e)?e[0]:e;"directive"in t&&"gff-version"!==t.directive&&this.push("##gff-version 3\n")}if("sequence"in e&&!this.fastaMode&&(this.push("##FASTA\n"),this.fastaMode=!0),r=Array.isArray(e)?e.map(s.formatItem).join(""):Object(s.formatItem)(e),this.push(r),this.linesSinceLastSyncMark>=this.minLinesBetweenSyncMarks)this.push("###\n"),this.linesSinceLastSyncMark=0;else{let e=0;for(let t=0;t<r.length;t+=1)"\n"===r[t]&&(e+=1);this.linesSinceLastSyncMark+=e}this.haveWeEmittedData=!0,o(n)}}function p(e={}){return new f(e)}function g(e,t,n={}){const r={insertVersionDirective:!0,...n};return new Promise(((n,a)=>{e.pipe(new f(r)).on("end",(()=>n(null))).on("error",a).pipe(t)}))}}).call(this,n(114))},1235:function(e,t,n){e.exports=a;var r=n(622).EventEmitter;function a(){r.call(this)}n(192)(a,r),a.Readable=n(623),a.Writable=n(1243),a.Duplex=n(1244),a.Transform=n(1245),a.PassThrough=n(1246),a.Stream=a,a.prototype.pipe=function(e,t){var n=this;function a(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",a),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",l));var s=!1;function o(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",a),e.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",c),e.on("error",c),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},1236:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},1237:function(e,t){},1238:function(e,t,n){"use strict";var r=n(624).Buffer,a=n(1239);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,a,i=r.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=i,a=o,t.copy(n,a),o+=s.data.length,s=s.next;return i},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},1239:function(e,t){},1240:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(71))},1241:function(e,t,n){var r=n(35),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),s.prototype=Object.create(a.prototype),i(a,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},1242:function(e,t,n){"use strict";e.exports=i;var r=n(893),a=Object.create(n(354));function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}a.inherits=n(192),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},1243:function(e,t,n){e.exports=n(625)},1244:function(e,t,n){e.exports=n(146)},1245:function(e,t,n){e.exports=n(623).Transform},1246:function(e,t,n){e.exports=n(623).PassThrough},1247:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(627);const a="child_features",i="derived_features";class s{constructor(e){this.seqCallback=e,this.currentSequence=void 0}addLine(e){const t=/^>\s*(\S+)\s*(.*)/.exec(e);t?(this._flush(),this.currentSequence={id:t[1],sequence:""},t[2]&&(this.currentSequence.description=t[2].trim())):this.currentSequence&&/\S/.test(e)&&(this.currentSequence.sequence+=e.replace(/\s/g,""))}_flush(){this.currentSequence&&this.seqCallback(this.currentSequence)}finish(){this._flush()}}class o{constructor(e){this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};const t=()=>{};this.featureCallback=e.featureCallback||t,this.endCallback=e.endCallback||t,this.commentCallback=e.commentCallback||t,this.errorCallback=e.errorCallback||t,this.directiveCallback=e.directiveCallback||t,this.sequenceCallback=e.sequenceCallback||t,this.bufferSize=void 0===e.bufferSize?1e3:e.bufferSize}addLine(e){if(this.fastaParser)return void this.fastaParser.addLine(e);if(this.eof)return;if(this.lineNumber+=1,/^\s*[^#\s>]/.test(e))return void this._bufferLine(e);const t=/^\s*(#+)(.*)/.exec(e);if(t){const[,n]=t;let[,,a]=t;if(3===n.length)this._emitAllUnderConstructionFeatures();else if(2===n.length){const t=r.parseDirective(e);t&&("FASTA"===t.directive?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new s(this.sequenceCallback)):this._emitItem(t))}else a=a.replace(/\s*/,""),this._emitItem({comment:a})}else if(/^\s*$/.test(e));else{if(!/^\s*>/.test(e)){const t=e.replace(/\r?\n?$/g,"");throw new Error(`GFF3 parse error.  Cannot parse '${t}'.`)}this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new s(this.sequenceCallback),this.fastaParser.addLine(e)}}finish(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){const t=e=>{if(e&&Array.isArray(e)&&e[0].attributes&&e[0].attributes.ID&&e[0].attributes.ID[0]){e[0].attributes.ID.forEach((e=>{delete this._underConstructionById[e],delete this._completedReferences[e]})),e.forEach((e=>{e.child_features&&e.child_features.forEach((e=>t(e))),e.derived_features&&e.derived_features.forEach((e=>t(e)))}))}};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){const e=this._underConstructionTopLevel.shift();e&&(this._emitItem(e),t(e))}}_emitAllUnderConstructionFeatures(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${JSON.stringify(this._underConstructionOrphans)}`)}_bufferLine(e){var t,n,a;const i={...r.parseFeature(e),child_features:[],derived_features:[]},s=(null===(t=i.attributes)||void 0===t?void 0:t.ID)||[],o=(null===(n=i.attributes)||void 0===n?void 0:n.Parent)||[],l=(null===(a=i.attributes)||void 0===a?void 0:a.Derives_from)||[];if(!s.length&&!o.length&&!l.length)return void this._emitItem([i]);let c;s.forEach((e=>{const t=this._underConstructionById[e];t?(t[t.length-1].type!==i.type&&this._parseError(`multi-line feature "${e}" has inconsistent types: "${i.type}", "${t[t.length-1].type}"`),t.push(i),c=t):(c=[i],this._enforceBufferSizeLimit(1),o.length||l.length||this._underConstructionTopLevel.push(c),this._underConstructionById[e]=c,this._resolveReferencesTo(c,e))})),this._resolveReferencesFrom(c||[i],{Parent:o,Derives_from:l},s)}_resolveReferencesTo(e,t){const n=this._underConstructionOrphans[t];n&&(e.forEach((e=>{e.child_features.push(...n.Parent)})),e.forEach((e=>{e.derived_features.push(...n.Derives_from)})),delete this._underConstructionOrphans[t])}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,t,n){function r(e,t,n){let r=e[t];r||(r={},e[t]=r);const a=r[n]||!1;return r[n]=!0,a}t.Parent.forEach((t=>{const i=this._underConstructionById[t];if(i){const s=a;n.filter((e=>r(this._completedReferences,e,`Parent,${t}`))).length||i.forEach((t=>{t[s].push(e)}))}else{let n=this._underConstructionOrphans[t];n||(n={Parent:[],Derives_from:[]},this._underConstructionOrphans[t]=n),n.Parent.push(e)}})),t.Derives_from.forEach((t=>{const a=this._underConstructionById[t];if(a){const s=i;n.filter((e=>r(this._completedReferences,e,`Derives_from,${t}`))).length||a.forEach((t=>{t[s].push(e)}))}else{let n=this._underConstructionOrphans[t];n||(n={Parent:[],Derives_from:[]},this._underConstructionOrphans[t]=n),n.Derives_from.push(e)}}))}}},1248:function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);r.ZERO=b;var v=o(0,!0);r.UZERO=v;var y=o(1);r.ONE=y;var w=o(1,!0);r.UONE=w;var _=o(-1);r.NEG_ONE=_;var E=c(-1,2147483647,!1);r.MAX_VALUE=E;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,v=0,y=0;return v+=(y+=s*f)>>>16,g+=(v+=i*f)>>>16,v&=65535,g+=(v+=s*h)>>>16,p+=(g+=r*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=t*f+r*h+i*u+s*o,c((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(t),f=h.mul(e);f.isNegative()||f.gt(r);)f=(h=l(t-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1249:function(e,t,n){"use strict";n.r(t);var r=n(926),a=n(42),i=n(51),s=n(53),o=n(17),l=n(88),c=n.n(l),u=n(546),h=n.n(u);t.default=class extends a.BaseSequenceAdapter{constructor(e,t,n){super(e,t,n),this.seqCache=new c.a({cache:new h.a({maxSize:200}),fill:async(e,t)=>{const{refName:n,start:r,end:a,fasta:i}=e;return i.getSequence(n,r,a,{...e,signal:t})}})}async getRefNames(e){const{fasta:t}=await this.setup();return t.getSequenceNames(e)}async getRegions(e){const{fasta:t}=await this.setup(),n=await t.getSequenceSizes(e);return Object.keys(n).map((e=>({refName:e,start:0,end:n[e]})))}async setupPre(){const e=this.getConf("fastaLocation"),t=this.getConf("faiLocation");return{fasta:new r.b({fasta:Object(i.openLocation)(e,this.pluginManager),fai:Object(i.openLocation)(t,this.pluginManager)})}}async getHeader(){const e=this.getConf("metadataLocation");return""===e.uri||"/path/to/fa.metadata.yaml"===e.uri?null:Object(i.openLocation)(e).readFile("utf8")}async setup(){return this.setupP||(this.setupP=this.setupPre().catch((e=>{throw this.setupP=void 0,e}))),this.setupP}getFeatures(e,t){const{refName:n,start:r,end:a}=e;return Object(s.ObservableCreate)((async e=>{const{fasta:i}=await this.setup(),s=await i.getSequenceSize(n,t),l=void 0!==s?Math.min(s,a):a,c=[],u=128e3,h=r-r%u,d=a+(u-a%u);for(let e=h;e<d;e+=u){const r={refName:n,start:e,end:e+u};c.push(this.seqCache.get(JSON.stringify(r),{...r,fasta:i},null==t?void 0:t.signal))}const f=(await Promise.all(c)).join("").slice(r-h).slice(0,a-r);f&&e.next(new o.SimpleFeature({id:`${n} ${r}-${l}`,data:{refName:n,start:r,end:l,seq:f}})),e.complete()}))}freeResources(){}}},1250:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");t.default=s},1251:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRight");t.default=s},1252:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");t.default=s},1253:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(56);const a={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0};class i{constructor(e={},t){if(this.parameters=e,this.dataType=t,!t)throw new TypeError("must provide a data type to codec constructor");if(!a[t])throw new TypeError(`invalid data type ${t}`)}_getBits(e,t,n){let a=0;if(t.bytePosition+(7-t.bitPosition+n)/8>e.length)throw new r.b("read error during decoding. the file seems to be truncated.");for(let r=n;r;r-=1)a<<=1,a|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return a}}var s=n(352);class o extends i{constructor(e={},t,n){if(super(e,t),this.instantiateCodec=n,"byteArray"!==t)throw new TypeError(`byteArrayLength does not support data type ${t}`)}decode(e,t,n,r){const a=this._getLengthCodec().decode(e,t,n,r),i=this._getDataCodec(),s=new Uint8Array(a);for(let o=0;o<a;o+=1)s[o]=i.decode(e,t,n,r);return s}_getLengthCodec(){const e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}_getDataCodec(){const e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}"_getLengthCodec _getDataCodec".split(" ").forEach((e=>Object(s.e)(o,e)));const l={1:class extends i{constructor(e={},t){if(super(e,t),"int"===this.dataType)this._decodeData=this._decodeInt;else{if("byte"!==this.dataType)throw new r.e(`${this.dataType} decoding not yet implemented by EXTERNAL codec`);this._decodeData=this._decodeByte}}decode(e,t,n,a){const{blockContentId:i}=this.parameters,s=n[i];if(!s)throw new r.c(`no block found with content ID ${i}`);const o=a.externalBlocks.getCursor(i);return this._decodeData(s,o)}_decodeInt(e,t){const[n,r]=Object(s.c)(e.content,t.bytePosition);return t.bytePosition+=r,n}_decodeByte(e,t){if(t.bytePosition>=e.content.length)throw new r.b("attempted to read beyond end of block. this file seems truncated.");return e.content[t.bytePosition++]}},3:class extends i{constructor(e={},t){if(super(e,t),!["byte","int"].includes(this.dataType))throw new TypeError(`${this.dataType} decoding not yet implemented by HUFFMAN_INT codec`);this.buildCodeBook(),this.buildCodes(),this.buildCaches(),0===this.sortedCodes[0].bitLength&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let e=new Array(this.parameters.numCodes);for(let t=0;t<this.parameters.numCodes;t+=1)e[t]={symbol:this.parameters.symbols[t],bitLength:this.parameters.bitLengths[t]};e=e.sort(((e,t)=>e.bitLength-t.bitLength||e.symbol-t.symbol)),this.codeBook={},e.forEach((e=>{this.codeBook[e.bitLength]||(this.codeBook[e.bitLength]=[]),this.codeBook[e.bitLength].push(e.symbol)}))}buildCodes(){this.codes={};let e=0,t=-1;Object.entries(this.codeBook).forEach((([n,a])=>{n=parseInt(n,10),a.forEach((a=>{const i={bitLength:n,value:a};t+=1;const s=n-e;if(t<<=s,i.bitCode=t,e+=s,function(e){let t=e-(e>>1)&1431655765;return t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}(t)>n)throw new r.c("Symbol out of range");this.codes[a]=i}))}))}buildCaches(){this.sortedCodes=Object.values(this.codes).sort(((e,t)=>e.bitLength-t.bitLength||e.bitCode-t.bitCode)),this.sortedByValue=Object.values(this.codes).sort(((e,t)=>e.value-t.value)),this.sortedValuesByBitCode=this.sortedCodes.map((e=>e.value)),this.sortedBitCodes=this.sortedCodes.map((e=>e.bitCode)),this.sortedBitLengthsByBitCode=this.sortedCodes.map((e=>e.bitLength));const e=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(e+1).fill(-1);for(let e=0;e<this.sortedBitCodes.length;e+=1)this.bitCodeToValue[this.sortedCodes[e].bitCode]=e}decode(e,t,n,r){return this._decode(e,t,r.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(e,t,n){const a=t.content;let i=0,s=0;for(let e=0;e<this.sortedCodes.length;e+=1){const t=this.sortedCodes[e].bitLength;s<<=t-i,s|=this._getBits(a,n,t-i),i=t;{const n=this.bitCodeToValue[s];if(n>-1&&this.sortedBitLengthsByBitCode[n]===t)return this.sortedValuesByBitCode[n];for(let n=e;this.sortedCodes[n+1].bitLength===t&&n<this.sortedCodes.length;n+=1)e+=1}}throw new r.c("Huffman symbol not found.")}},4:o,5:class extends i{constructor(e={},t){if(super(e,t),"byteArray"!==t)throw new TypeError(`byteArrayStop codec does not support data type ${t}`);this._decode=this._decodeByteArray}decode(e,t,n,a){const{blockContentId:i}=this.parameters,s=n[i];if(!s)throw new r.c(`no block found with content ID ${i}`);const o=a.externalBlocks.getCursor(i);return this._decode(s,o)}_decodeByteArray(e,t){const n=e.content,{stopByte:a}=this.parameters,i=t.bytePosition;let s=t.bytePosition;for(;n[s]!==a&&s<n.length;){if(s===n.length)throw new r.b("byteArrayStop reading beyond length of data buffer?");s+=1}return t.bytePosition=s+1,n.slice(i,s)}},6:class extends i{constructor(e={},t){if(super(e,t),"int"!==this.dataType)throw new r.e(`${this.dataType} decoding not yet implemented by BETA codec`)}decode(e,t,n,r){return this._getBits(t.content,r.coreBlock,this.parameters.length)-this.parameters.offset}},7:class extends i{constructor(e={},t){if(super(e,t),"int"!==this.dataType)throw new r.e(`${this.dataType} decoding not yet implemented by SUBEXP codec`)}decode(e,t,n,r){let a,i,s=0;for(;this._getBits(t.content,r.coreBlock,1);)s+=1;return 0===s?(a=this.parameters.K,i=this._getBits(t.content,r.coreBlock,a)):(a=s+this.parameters.K-1,i=1<<a|this._getBits(t.content,r.coreBlock,a)),i-this.parameters.offset}},9:class extends i{constructor(e={},t){if(super(e,t),"int"!==this.dataType)throw new r.e(`${this.dataType} decoding not yet implemented by GAMMA codec`)}decode(e,t,n,r){let a=1;for(;0===this._getBits(t.content,r.coreBlock,1);)a+=1;return(this._getBits(t.content,r.coreBlock,a-1)|1<<a-1)-this.parameters.offset}}};function c(e,t){const n=(a="ignore"===t?0:e.codecId,l[a]);var a;if(!n)throw new r.e(`no codec implemented for codec ID ${e.codecId}`);return new n(e.parameters,t,c)}const u={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};class h{constructor(e){Object.assign(this,e),this.readNamesIncluded=e.preservation.RN,this.APdelta=e.preservation.AP,this.referenceRequired=!!e.preservation.RR,this.tagIdsDictionary=e.preservation.TD,this.substitutionMatrix=function(e){const t=new Array(5);for(let e=0;e<5;e+=1)t[e]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(e.preservation.SM),this.dataSeriesCodecCache=new Map,this.tagCodecCache={}}getCodecForTag(e){if(!this.tagCodecCache[e]){const t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=c(t,"byteArray"))}return this.tagCodecCache[e]}getTagNames(e){return this.tagIdsDictionary[e]}getCodecForDataSeries(e){let t=this.dataSeriesCodecCache.get(e);if(void 0===t){const n=this.dataSeriesEncoding[e];if(n){const a=u[e];if(!a)throw new r.c(`data series name ${e} not defined in file compression header`);t=c(n,a),this.dataSeriesCodecCache.set(e,t)}}return t}toJSON(){const e={};return Object.keys(this).forEach((t=>{/Cache$/.test(t)||(e[t]=this[t])})),e}}},1255:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(56),a=n(352);var i={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183},s=n(1189),o=n.n(s);const l={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};class c{constructor(){this.tags={}}isPaired(){return!!(this.flags&i.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&i.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&i.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&i.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&i.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&i.BAM_FMREVERSE)}isRead1(){return!!(this.flags&i.BAM_FREAD1)}isRead2(){return!!(this.flags&i.BAM_FREAD2)}isSecondary(){return!!(this.flags&i.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&i.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&i.BAM_FDUP)}isSupplementary(){return!!(this.flags&i.BAM_FSUPPLEMENTARY)}isDetached(){return!!(this.cramFlags&i.CRAM_FLAG_DETACHED)}hasMateDownStream(){return!!(this.cramFlags&i.CRAM_FLAG_MATE_DOWNSTREAM)}isPreservingQualityScores(){return!!(this.cramFlags&i.CRAM_FLAG_PRESERVE_QUAL_SCORES)}isUnknownBases(){return!!(this.cramFlags&i.CRAM_FLAG_NO_SEQ)}getReadBases(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if(!e.lengthOnRef&&!e.readLength)return;if(e.isUnknownBases())return;const n=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(n,e.lengthOnRef).toUpperCase();let r="",a=n,i=0;for(;r.length<e.readLength;)if(i<e.readFeatures.length){const n=e.readFeatures[i];if("Q"===n.code||"q"===n.code)i+=1;else if(n.pos===r.length+1)if(i+=1,"b"===n.code){const e=n.data.split(","),t=String.fromCharCode(...e);r+=t,a+=t.length}else"B"===n.code?(r+=n.data[0],a+=1):"X"===n.code?(r+=n.sub,a+=1):"I"===n.code?r+=n.data:"D"===n.code?a+=n.data:"i"===n.code?r+=n.data:"N"===n.code?a+=n.data:"S"===n.code?r+=n.data:"P"===n.code||n.code;else if(i<e.readFeatures.length){const n=t.seq.substr(a,e.readFeatures[i].pos-r.length-1);r+=n,a+=n.length}}else{const n=t.seq.substr(a,e.readLength-r.length);r+=n,a+=n.length}return r.toUpperCase()}(this,this._refRegion)),this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let n=" ",r=" ";this.isRead1()?(n="1",r="2"):this.isRead2()&&(n="2",r="1");const a=[];let i=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&i>0&&(i=-i),i>0?(a[0]=e,a[1]=n,a[2]=t,a[3]=r):(a[2]=e,a[3]=n,a[0]=t,a[1]=r),a.join("")}return null}addReferenceSequence(e,t){this.readFeatures&&this.readFeatures.forEach((n=>{"X"===n.code&&function(e,t,n,r){if(!t)return;const a=r.refPos-t.start,i=t.seq.charAt(a);i&&(r.ref=i);let s=l[i];void 0===s&&(s=4);const o=n.substitutionMatrix[s][r.data];o&&(r.sub=o)}(0,e,t,n)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}toJSON(){const e={};return Object.keys(this).forEach((t=>{"_"!==t.charAt(0)&&(e[t]=this[t])})),e.readBases=this.getReadBases(),e}}function u(e){let t="";for(let n=0;n<e.length&&0!==e[n];n++)t+=String.fromCharCode(e[n]);return t}function h(e,t){if("Z"===e)return u(t);if("A"===e)return String.fromCharCode(t[0]);if("I"===e)return o.a.fromBytesLE(t).toNumber();if("i"===e)return new Int32Array(t.buffer)[0];if("s"===e)return new Int16Array(t.buffer)[0];if("S"===e)return new Uint16Array(t.buffer)[0];if("c"===e)return new Int8Array(t.buffer)[0];if("C"===e)return t[0];if("f"===e)return new Float32Array(t.buffer)[0];if("H"===e)return Number.parseInt(u(t).replace(/^0x/,""),16);if("B"===e)return function(e){const t=String.fromCharCode(e[0]),n=Int32Array.from(e.slice(1))[0],r=new Array(n);if(e=e.slice(5),"c"===t){const t=new Int8Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else if("C"===t){const t=new Uint8Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else if("s"===t){const t=new Int16Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else if("S"===t){const t=new Uint16Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else if("i"===t){const t=new Int32Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else if("I"===t){const t=new Uint32Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}else{if("f"!==t)throw new Error("unknown type: "+t);{const t=new Float32Array(e.buffer);for(let e=0;e<n;e+=1)r[e]=t[e]}}return r}(t);throw new r.c(`Unrecognized tag type ${e}`)}function d(e,t,n,a,s,o,l,d,f){const p=new c;if(p.flags=t("BF"),p.cramFlags=t("CF"),d>1&&-2===a.content.refSeqId?p.sequenceId=t("RI"):p.sequenceId=a.content.refSeqId,p.readLength=t("RL"),p.alignmentStart=t("AP"),n.APdelta&&(p.alignmentStart+=l.lastAlignmentStart),l.lastAlignmentStart=p.alignmentStart,p.readGroupId=t("RG"),n.readNamesIncluded&&(p.readName=u(t("RN"))),p.isDetached()){const e={};e.flags=t("MF"),n.readNamesIncluded||(e.readName=u(t("RN")),p.readName=e.readName),e.sequenceId=t("NS"),e.alignmentStart=t("NP"),(e.flags||e.sequenceId>-1)&&(p.mate=e),p.templateSize=t("TS"),e.flags&i.CRAM_M_UNMAP&&(p.flags|=i.BAM_FMUNMAP),e.flags&i.CRAM_M_REVERSE&&(p.flags|=i.BAM_FMREVERSE)}else p.hasMateDownStream()&&(p.mateRecordNumber=t("NF")+f+1);const g=t("TL");if(g<0)throw new r.c("invalid TL index");const m=n.getTagNames(g),b=m.length;for(let t=0;t<b;t+=1){const a=m[t],i=a.substr(0,2),c=a.substr(2,1),u=n.getCodecForTag(a);if(!u)throw new r.c(`no codec defined for auxiliary tag ${a}`);const d=u.decode(e,s,o,l);p.tags[i]=h(c,d)}if(p.isSegmentUnmapped())if(p.isUnknownBases())p.readBases=null,p.qualityScores=null;else{const e=new Array(p.readLength);for(let n=0;n<e.length;n+=1)e[n]=t("BA");if(p.readBases=String.fromCharCode(...e),p.isPreservingQualityScores()){for(let n=0;n<e.length;n+=1)e[n]=t("QS");p.qualityScores=e}}else{const e=t("FN");e&&(p.readFeatures=function(e,t,n,a,i){let s=0,o=e.alignmentStart-1;const l=new Array(t);function c([e,t]){const r=n(t);return"character"===e?String.fromCharCode(r):"string"===e?r.toString("utf8"):"numArray"===e?r.toArray():r}for(let e=0;e<t;e+=1){const t=String.fromCharCode(n("FC")),a=n("FP"),u={code:t},h={B:["character","BA"],S:["string",i>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[t];if(!h)throw new r.c(`invalid read feature code "${t}"`);u.data=c(h);const d={B:["number","QS"]}[t];d&&(u.data=[u.data,c(d)]),s+=a,u.pos=s,o+=a,u.refPos=o,"D"===t||"N"===t?o+=u.data:"I"===t||"S"===t?o-=u.data.length:"i"===t&&(o-=1),l[e]=u}return l}(p,e,t,0,d));let n=p.readLength;if(p.readFeatures&&p.readFeatures.forEach((({code:e,data:t})=>{"D"===e||"N"===e?n+=t:"I"===e||"S"===e?n-=t.length:"i"===e&&(n-=1)})),Number.isNaN(n)&&(console.warn(`${p.readName||`${p.sequenceId}:${p.alignmentStart}`} record has invalid read features`),n=p.readLength),p.lengthOnRef=n,p.mappingQuality=t("MQ"),p.isPreservingQualityScores()){const e=new Array(p.readLength);for(let n=0;n<e.length;n+=1)e[n]=t("QS");p.qualityScores=e}}return p}function f(e,t,n,a){if(!a)throw new r.c("could not resolve intra-slice mate pairs, file seems truncated or malformed");const s=!!(a.mate||void 0!==a.mateRecordNumber&&a.mateRecordNumber!==t);n.readName||(n.readName=String(n.uniqueId),a.readName=n.readName),n.mate={sequenceId:a.sequenceId,alignmentStart:a.alignmentStart,uniqueId:a.uniqueId},a.readName&&(n.mate.readName=a.readName),a.mate||void 0!==a.mateRecordNumber||(a.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(a.mate.readName=n.readName)),n.flags|=i.BAM_FPAIRED,a.flags&i.BAM_FUNMAP&&(n.flags|=i.BAM_FMUNMAP),n.flags&i.BAM_FUNMAP&&(a.flags|=i.BAM_FMUNMAP),a.flags&i.BAM_FREVERSE&&(n.flags|=i.BAM_FMREVERSE),n.flags&i.BAM_FREVERSE&&(a.flags|=i.BAM_FMREVERSE),void 0===n.templateLength&&(s?function(e,t,n){const a=function t(n){const a=[n];if(n.mateRecordNumber>=0){const i=e[n.mateRecordNumber];if(!i)throw new r.c("intra-slice mate record not found, this file seems malformed");a.push(...t(i))}return a}(n),i=a.map((e=>e.alignmentStart)),s=a.map((e=>e.alignmentStart+e.readLength-1)),o=Math.max(...s)-Math.min(...i)+1;o>=0&&a.forEach((e=>{if(void 0!==e.templateLength)throw new r.c("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=o}))}(e,0,n):function(e,t){const n=Math.min(e.alignmentStart,t.alignmentStart),r=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-n+1;e.templateLength=r,t.templateLength=r}(n,a)),delete n.mateRecordNumber}class p{constructor(e,t){this.container=e,this.file=e.file,this.containerPosition=t}async getHeader(){const e=await this.file.getSectionParsers(),t=await this.container.getHeader(),n=await this.file.readBlock(t._endPosition+this.containerPosition);if("MAPPED_SLICE_HEADER"===n.contentType)n.content=Object(a.b)(n.content,e.cramMappedSliceHeader.parser,0,t._endPosition);else{if("UNMAPPED_SLICE_HEADER"!==n.contentType)throw new r.c(`error reading slice header block, invalid content type ${n._contentType}`);n.content=Object(a.b)(n.content,e.cramUnmappedSliceHeader.parser,0,t._endPosition)}return n}async getBlocks(){const e=await this.getHeader();let t=e._endPosition;const n=new Array(e.content.numBlocks);for(let e=0;e<n.length;e+=1)n[e]=await this.file.readBlock(t),t=n[e]._endPosition;return n}async getCoreDataBlock(){return(await this.getBlocks())[0]}async _getBlocksContentIdIndex(){const e=await this.getBlocks(),t={};return e.forEach((e=>{"EXTERNAL_DATA"===e.contentType&&(t[e.contentId]=e)})),t}async getBlockByContentId(e){return(await this._getBlocksContentIdIndex())[e]}async getReferenceRegion(){const e=(await this.getHeader()).content;if(e.refSeqId<0)return;const t=await this.container.getCompressionScheme();if(e.refBaseBlockId>=0){const t=this.getBlockByContentId(e.refBaseBlockId);if(!t)throw new r.c("embedded reference specified, but reference block does not exist");if(e.span>t.uncompressedSize)throw new r.c("Embedded reference is too small");return{seq:t.data.toString("utf8"),start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}if(t.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const t=await this.file.fetchReferenceSequenceCallback(e.refSeqId,e.refSeqStart,e.refSeqStart+e.refSeqSpan-1);if(t.length!==e.refSeqSpan)throw new r.a("seqFetch callback returned a reference sequence of the wrong length");return{seq:t,start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}}getAllRecords(){return this.getRecords((()=>!0))}async _fetchRecords(){const{majorVersion:e}=await this.file.getDefinition(),t=await this.container.getCompressionScheme(),n=await this.getHeader(),i=await this._getBlocksContentIdIndex();if(e>1&&this.file.options.checkSequenceMD5&&n.content.refSeqId>=0&&"0000000000000000"!==n.content.md5.join("")){const e=await this.getReferenceRegion();if(e){const{seq:t,start:i,end:s}=e,o=Object(a.d)(t),l=n.content.md5.map((e=>(e<16?"0":"")+e.toString(16))).join("");if(o!==l)throw new r.c(`MD5 checksum reference mismatch for ref ${n.content.refSeqId} pos ${i}..${s}. recorded MD5: ${l}, calculated MD5: ${o}`)}}const s=await this.getCoreDataBlock(),o={lastAlignmentStart:n.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor(e){let t=this.map.get(e);return void 0===t&&(t={bitPosition:7,bytePosition:0},this.map.set(e,t)),t}}},l=e=>{const n=t.getCodecForDataSeries(e);if(!n)throw new r.c(`no codec defined for ${e} data series`);return n.decode(this,s,i,o)};let c=new Array(n.content.numRecords);for(let a=0;a<c.length;a+=1)try{c[a]=d(this,l,t,n,s,i,o,e,a),c[a].uniqueId=n.contentPosition+n.content.recordCounter+a+1}catch(e){if(e instanceof r.b){console.warn("read attempted beyond end of buffer, file seems truncated."),c=c.filter((e=>!!e));break}throw e}for(let e=0;e<c.length;e+=1){const{mateRecordNumber:t}=c[e];t>=0&&f(c,e,c[e],c[t])}return c}async getRecords(e){const t=this.container.filePosition+this.containerPosition;let n=this.file.featureCache.get(t);n||(n=this._fetchRecords(),this.file.featureCache.set(t,n));const r=(await n).filter(e);if(r.length&&this.file.fetchReferenceSequenceCallback){const e=await this.getHeader();if(e.content.refSeqId>=0||-2===e.content.refSeqId){const t=e.content.refSeqId>=0?e.content.refSeqId:void 0,n=await this.container.getCompressionScheme(),a={};for(let e=0;e<r.length;e+=1){const n=void 0!==t?t:r[e].sequenceId;let i=a[n];i||(i={id:n,start:r[e].alignmentStart,end:-1/0},a[n]=i);const s=r[e].alignmentStart+(r[e].lengthOnRef||r[e].readLength)-1;s>i.end&&(i.end=s),r[e].alignmentStart<i.start&&(i.start=r[e].alignmentStart)}await Promise.all(Object.values(a).map((async e=>{-1!==e.id&&e.start<=e.end&&(e.seq=await this.file.fetchReferenceSequenceCallback(e.id,e.start,e.end))})));for(let e=0;e<r.length;e+=1){const i=a[void 0!==t?t:r[e].sequenceId];i&&i.seq&&r[e].addReferenceSequence(i,n)}}}return r}}"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((e=>Object(a.e)(p,e)))},1257:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n(864),a=n(42),i=n(17),s=n(51),o=n(53),l=n(812),c=n(13),u=n(143);class h{constructor(e,t,n){this.record=e,this.adapter=t,this.ref=n}_get_name(){return this.record.get("name")}_get_type(){return"match"}_get_score(){return this.record.get("mq")}_get_flags(){return this.record.flags}_get_strand(){return this.record.isReverseComplemented()?-1:1}_get_pair_orientation(){return this.record.isPaired()?this.record.getPairOrientation():void 0}_get_next_seq_id(){return this.record._next_refid()}_get_seq_id(){return this.record._refID}_get_next_refName(){return this.adapter.refIdToName(this.record._next_refid())}_get_next_segment_position(){const{record:e,adapter:t}=this;return e.isPaired()?`${t.refIdToName(e._next_refid())}:${e._next_pos()+1}`:void 0}_get_seq(){return this.record.getReadBases()}qualRaw(){return this.record.qualRaw()}set(){}tags(){const e=Object.getOwnPropertyNames(h.prototype);return[...new Set(e.filter((e=>e.startsWith("_get_")&&"_get_mismatches"!==e&&"_get_tags"!==e&&"_get_next_seq_id"!==e&&"_get_seq_id"!==e)).map((e=>e.replace("_get_",""))).concat(this.record._tags()))]}id(){return`${this.adapter.id}-${this.record.id()}`}get(e){const t=`_get_${e}`;return this[t]?this[t]():this.record.get(e)}_get_refName(){return this.adapter.refIdToName(this.record.seq_id())}parent(){}children(){}pairedFeature(){return!1}toJSON(){return{...Object.fromEntries(this.tags().map((e=>[e,this.get(e)])).filter((e=>void 0!==e[1]))),uniqueId:this.id()}}_get_mismatches(){return Object(u.a)(this.get("CIGAR"),this.get("MD"),this.get("seq"),this.ref,this.qualRaw())}_get_clipPos(){const e=this.get("CIGAR")||"";return-1===this.get("strand")?+(e.match(/(\d+)[SH]$/)||[])[1]||0:+(e.match(/^(\d+)([SH])/)||[])[1]||0}}class d extends a.BaseFeatureDataAdapter{async configure(){if(!this.configured){const e=Object(c.readConfObject)(this.config,"bamLocation"),t=Object(c.readConfObject)(this.config,["index","location"]),n=Object(c.readConfObject)(this.config,["index","indexType"]),a=new r.a({bamFilehandle:Object(s.openLocation)(e,this.pluginManager),csiFilehandle:"CSI"===n?Object(s.openLocation)(t,this.pluginManager):void 0,baiFilehandle:"CSI"!==n?Object(s.openLocation)(t,this.pluginManager):void 0,chunkSizeLimit:1/0,fetchSizeLimit:1/0,yieldThreadTime:1/0}),i=Object(c.readConfObject)(this.config,"sequenceAdapter");i&&this.getSubAdapter?this.configured=this.getSubAdapter(i).then((({dataAdapter:e})=>({bam:a,sequenceAdapter:e}))):this.configured=Promise.resolve({bam:a})}return this.configured}async getHeader(e){const{bam:t}=await this.configure();return t.getHeaderText(e)}async setupPre(e){const{statusCallback:t=(()=>{})}=e||{},{bam:n}=await this.configure();return this.samHeader=await Object(i.updateStatus)("Downloading index",t,(async()=>{const t=await n.getHeader(e),r=[],a={};return t.filter((e=>"SQ"===e.tag)).forEach(((e,t)=>{e.data.forEach((e=>{if("SN"===e.tag){const n=e.value;a[n]=t,r[t]=n}}))})),{idToName:r,nameToId:a}})),this.samHeader}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRefNames(e){const{idToName:t}=await this.setup(e);return t}async seqFetch(e,t,n){const{sequenceAdapter:r}=await this.configure();if(!r)return;if(!e)return;const a=r.getFeatures({refName:e,start:t,end:n,assemblyName:""}),i=await a.pipe(Object(l.a)()).toPromise();let s="";if(i.sort(((e,t)=>e.get("start")-t.get("start"))).forEach((e=>{const r=e.get("start"),a=e.get("end"),i=Math.max(t-r,0),o=Math.min(n-r,a-r)-i,l=e.get("seq")||e.get("residues");s+=l.substr(i,o)})),s.length!==n-t)throw new Error(`sequence fetch failed: fetching ${e}:${(t-1).toLocaleString()}-${n.toLocaleString()} returned ${s.length.toLocaleString()} bases, but should have returned ${(n-t).toLocaleString()}`);return s}getFeatures(e,t){const{refName:n,start:r,end:a,originalRefName:i}=e,{signal:s,filterBy:l,statusCallback:c=(()=>{})}=t||{};return Object(o.ObservableCreate)((async e=>{const{bam:s}=await this.configure();await this.setup(t),c("Downloading alignments");const o=await s.getRecordsForRange(n,r,a,t),{flagInclude:u=0,flagExclude:d=0,tagFilter:f,readName:p}=l||{};for(const t of o){let r;t.get("MD")||(r=await this.seqFetch(i||n,t.get("start"),t.get("end")));const a=t.flags;if(!((a&u)!==u||a&d)){if(f){const e=t.get(f.tag);if(!("*"===e?void 0!==e:e===f.value))continue}p&&t.get("name")!==p||e.next(new h(t,this,r))}}c(""),e.complete()}),s)}async estimateRegionsStats(e,t){const{bam:n}=await this.configure();if("?"!==n.index.filehandle){return{bytes:await Object(i.bytesForRegions)(e,n),fetchSizeLimit:Object(c.readConfObject)(this.config,"fetchSizeLimit")}}return super.estimateRegionsStats(e,t)}freeResources(){}refIdToName(e){var t;return null===(t=this.samHeader)||void 0===t?void 0:t.idToName[e]}}},1258:function(e,t,n){"use strict";n.d(t,"a",(function(){return cn}));function r(e){let t=e.length;for(;--t>=0;)e[t]=0}const a=256,i=286,s=30,o=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);r(d);const f=new Array(60);r(f);const p=new Array(512);r(p);const g=new Array(256);r(g);const m=new Array(29);r(m);const b=new Array(s);function v(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}let y,w,_;function E(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(b);const k=e=>e<256?p[e]:p[256+(e>>>7)],S=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},C=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},x=(e,t,n)=>{C(e,n[2*t],n[2*t+1])},O=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},N=(e,t,n)=>{const r=new Array(16);let a,i,s=0;for(a=1;a<=o;a++)r[a]=s=s+n[a-1]<<1;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=O(r[t]++,t))}},A=e=>{let t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},B=e=>{e.bi_valid>8?S(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},R=(e,t,n,r)=>{const a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},I=(e,t,n)=>{const r=e.heap[n];let a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&R(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!R(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},j=(e,t,n)=>{let r,i,s,o,u=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?x(e,i,t):(s=g[i],x(e,s+a+1,t),o=l[s],0!==o&&(i-=m[s],C(e,i,o)),r--,s=k(r),x(e,s,n),o=c[s],0!==o&&(r-=b[s],C(e,r,o)))}while(u<e.last_lit);x(e,256,t)},M=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,l,c,u=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,a&&(e.static_len-=r[2*c+1]);for(t.max_code=u,s=e.heap_len>>1;s>=1;s--)I(e,n,s);c=i;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],I(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,n[2*c]=n[2*s]+n[2*l],e.depth[c]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,n[2*s+1]=n[2*l+1]=c,e.heap[1]=c++,I(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,h,d,f,p,g,m=0;for(f=0;f<=o;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)h=e.heap[u],f=n[2*n[2*h+1]+1]+1,f>c&&(f=c,m++),n[2*h+1]=f,h>r||(e.bl_count[f]++,p=0,h>=l&&(p=s[h-l]),g=n[2*h],e.opt_len+=g*(f+p),i&&(e.static_len+=g*(a[2*h+1]+p)));if(0!==m){do{for(f=c-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(f=c;0!==f;f--)for(h=e.bl_count[f];0!==h;)d=e.heap[--u],d>r||(n[2*d+1]!==f&&(e.opt_len+=(f-n[2*d+1])*n[2*d],n[2*d+1]=f),h--)}})(e,t),N(n,u,e.bl_count)},T=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))},L=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<c)do{x(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==i&&(x(e,a,e.bl_tree),o--),x(e,16,e.bl_tree),C(e,o-3,2)):o<=10?(x(e,17,e.bl_tree),C(e,o-3,3)):(x(e,18,e.bl_tree),C(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}};let P=!1;const z=(e,t,n,r)=>{C(e,0+(r?1:0),3),((e,t,n,r)=>{B(e),r&&(S(e,n),S(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n,!0)};var F=(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),M(e,e.l_desc),M(e,e.d_desc),o=(e=>{let t;for(T(e,e.dyn_ltree,e.l_desc.max_code),T(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?z(e,t,n,r):4===e.strategy||s===i?(C(e,2+(r?1:0),3),j(e,d,f)):(C(e,4+(r?1:0),3),((e,t,n,r)=>{let a;for(C(e,t-257,5),C(e,n-1,5),C(e,r-4,4),a=0;a<r;a++)C(e,e.bl_tree[2*h[a]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),j(e,e.dyn_ltree,e.dyn_dtree)),A(e),r&&B(e)},q={_tr_init:e=>{P||((()=>{let e,t,n,r,a;const h=new Array(16);for(n=0,r=0;r<28;r++)for(m[r]=n,e=0;e<1<<l[r];e++)g[n++]=r;for(g[n-1]=r,a=0,r=0;r<16;r++)for(b[r]=a,e=0;e<1<<c[r];e++)p[a++]=r;for(a>>=7;r<s;r++)for(b[r]=a<<7,e=0;e<1<<c[r]-7;e++)p[256+a++]=r;for(t=0;t<=o;t++)h[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,h[8]++;for(;e<=255;)d[2*e+1]=9,e++,h[9]++;for(;e<=279;)d[2*e+1]=7,e++,h[7]++;for(;e<=287;)d[2*e+1]=8,e++,h[8]++;for(N(d,287,h),e=0;e<s;e++)f[2*e+1]=5,f[2*e]=O(e,5);y=new v(d,l,257,i,o),w=new v(f,c,0,s,o),_=new v(new Array(0),u,0,19,7)})(),P=!0),e.l_desc=new E(e.dyn_ltree,y),e.d_desc=new E(e.dyn_dtree,w),e.bl_desc=new E(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,A(e)},_tr_stored_block:z,_tr_flush_block:F,_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+a+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{C(e,2,3),x(e,256,d),(e=>{16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var $=(e,t,n,r)=>{let a=65535&e|0,i=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{a=a+t[r++]|0,i=i+a|0}while(--s);a%=65521,i%=65521}return a|i<<16|0};const D=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var U=(e,t,n,r)=>{const a=D,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^a[255&(e^t[n])];return-1^e},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:V,_tr_stored_block:Z,_tr_flush_block:G,_tr_tally:X,_tr_align:K}=q,{Z_NO_FLUSH:Y,Z_PARTIAL_FLUSH:J,Z_FULL_FLUSH:Q,Z_FINISH:ee,Z_BLOCK:te,Z_OK:ne,Z_STREAM_END:re,Z_STREAM_ERROR:ae,Z_DATA_ERROR:ie,Z_BUF_ERROR:se,Z_DEFAULT_COMPRESSION:oe,Z_FILTERED:le,Z_HUFFMAN_ONLY:ce,Z_RLE:ue,Z_FIXED:he,Z_DEFAULT_STRATEGY:de,Z_UNKNOWN:fe,Z_DEFLATED:pe}=W,ge=258,me=262,be=103,ve=113,ye=666,we=(e,t)=>(e.msg=H[t],t),_e=e=>(e<<1)-(e>4?9:0),Ee=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let ke=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Se=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Ce=(e,t)=>{G(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Se(e.strm)},xe=(e,t)=>{e.pending_buf[e.pending++]=t},Oe=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ne=(e,t,n,r)=>{let a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=$(e.adler,t,a,n):2===e.state.wrap&&(e.adler=U(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ae=(e,t)=>{let n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-me?e.strstart-(e.w_size-me):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+ge;let f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+s]===p&&c[n+s-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<d);if(r=ge-(d-i),i=d-ge,r>s){if(e.match_start=t,s=r,r>=o)break;f=c[i+s-1],p=c[i+s]}}}while((t=h[t&u])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead},Be=e=>{const t=e.w_size;let n,r,a,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-me)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{a=e.head[--n],e.head[n]=a>=t?a-t:0}while(--r);r=t,n=r;do{a=e.prev[--n],e.prev[n]=a>=t?a-t:0}while(--r);i+=t}if(0===e.strm.avail_in)break;if(r=Ne(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=ke(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=ke(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<me&&0!==e.strm.avail_in)},Re=(e,t)=>{let n,r;for(;;){if(e.lookahead<me){if(Be(e),e.lookahead<me&&t===Y)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-me&&(e.match_length=Ae(e,n)),e.match_length>=3)if(r=X(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ke(e,e.ins_h,e.window[e.strstart+1]);else r=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ce(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Ce(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ce(e,!1),0===e.strm.avail_out)?1:2},Ie=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<me){if(Be(e),e.lookahead<me&&t===Y)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-me&&(e.match_length=Ae(e,n),e.match_length<=5&&(e.strategy===le||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=X(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Ce(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=X(e,0,e.window[e.strstart-1]),r&&Ce(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=X(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Ce(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ce(e,!1),0===e.strm.avail_out)?1:2};function je(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}const Me=[new je(0,0,0,0,((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Be(e),0===e.lookahead&&t===Y)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Ce(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-me&&(Ce(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ce(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Ce(e,!1),e.strm.avail_out),1)})),new je(4,4,8,4,Re),new je(4,5,16,8,Re),new je(4,6,32,32,Re),new je(4,4,16,16,Ie),new je(8,16,32,32,Ie),new je(8,16,128,128,Ie),new je(8,32,128,256,Ie),new je(32,128,258,1024,Ie),new je(32,258,258,4096,Ie)];function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ee(this.dyn_ltree),Ee(this.dyn_dtree),Ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Le=e=>{if(!e||!e.state)return we(e,ae);e.total_in=e.total_out=0,e.data_type=fe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:ve,e.adler=2===t.wrap?0:1,t.last_flush=Y,V(t),ne},Pe=e=>{const t=Le(e);var n;return t===ne&&((n=e.state).window_size=2*n.w_size,Ee(n.head),n.max_lazy_match=Me[n.level].max_lazy,n.good_match=Me[n.level].good_length,n.nice_match=Me[n.level].nice_length,n.max_chain_length=Me[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},ze=(e,t,n,r,a,i)=>{if(!e)return ae;let s=1;if(t===oe&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||n!==pe||r<8||r>15||t<0||t>9||i<0||i>he)return we(e,ae);8===r&&(r=9);const o=new Te;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=i,o.method=n,Pe(e)};var Fe={deflateInit:(e,t)=>ze(e,t,pe,15,8,de),deflateInit2:ze,deflateReset:Pe,deflateResetKeep:Le,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?ae:(e.state.gzhead=t,ne):ae,deflate:(e,t)=>{let n,r;if(!e||!e.state||t>te||t<0)return e?we(e,ae):ae;const a=e.state;if(!e.output||!e.input&&0!==e.avail_in||a.status===ye&&t!==ee)return we(e,0===e.avail_out?se:ae);a.strm=e;const i=a.last_flush;if(a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,xe(a,31),xe(a,139),xe(a,8),a.gzhead?(xe(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),xe(a,255&a.gzhead.time),xe(a,a.gzhead.time>>8&255),xe(a,a.gzhead.time>>16&255),xe(a,a.gzhead.time>>24&255),xe(a,9===a.level?2:a.strategy>=ce||a.level<2?4:0),xe(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(xe(a,255&a.gzhead.extra.length),xe(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=U(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(xe(a,0),xe(a,0),xe(a,0),xe(a,0),xe(a,0),xe(a,9===a.level?2:a.strategy>=ce||a.level<2?4:0),xe(a,3),a.status=ve);else{let t=pe+(a.w_bits-8<<4)<<8,n=-1;n=a.strategy>=ce||a.level<2?0:a.level<6?1:6===a.level?2:3,t|=n<<6,0!==a.strstart&&(t|=32),t+=31-t%31,a.status=ve,Oe(a,t),0!==a.strstart&&(Oe(a,e.adler>>>16),Oe(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(n=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),Se(e),n=a.pending,a.pending!==a.pending_buf_size));)xe(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),Se(e),n=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,xe(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),0===r&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),Se(e),n=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,xe(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>n&&(e.adler=U(e.adler,a.pending_buf,a.pending-n,n)),0===r&&(a.status=be)}else a.status=be;if(a.status===be&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&Se(e),a.pending+2<=a.pending_buf_size&&(xe(a,255&e.adler),xe(a,e.adler>>8&255),e.adler=0,a.status=ve)):a.status=ve),0!==a.pending){if(Se(e),0===e.avail_out)return a.last_flush=-1,ne}else if(0===e.avail_in&&_e(t)<=_e(i)&&t!==ee)return we(e,se);if(a.status===ye&&0!==e.avail_in)return we(e,se);if(0!==e.avail_in||0!==a.lookahead||t!==Y&&a.status!==ye){let n=a.strategy===ce?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Be(e),0===e.lookahead)){if(t===Y)return 1;break}if(e.match_length=0,n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ce(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ce(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ce(e,!1),0===e.strm.avail_out)?1:2})(a,t):a.strategy===ue?((e,t)=>{let n,r,a,i;const s=e.window;for(;;){if(e.lookahead<=ge){if(Be(e),e.lookahead<=ge&&t===Y)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,r=s[a],r===s[++a]&&r===s[++a]&&r===s[++a])){i=e.strstart+ge;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i);e.match_length=ge-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=X(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ce(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ce(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ce(e,!1),0===e.strm.avail_out)?1:2})(a,t):Me[a.level].func(a,t);if(3!==n&&4!==n||(a.status=ye),1===n||3===n)return 0===e.avail_out&&(a.last_flush=-1),ne;if(2===n&&(t===J?K(a):t!==te&&(Z(a,0,0,!1),t===Q&&(Ee(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Se(e),0===e.avail_out))return a.last_flush=-1,ne}return t!==ee?ne:a.wrap<=0?re:(2===a.wrap?(xe(a,255&e.adler),xe(a,e.adler>>8&255),xe(a,e.adler>>16&255),xe(a,e.adler>>24&255),xe(a,255&e.total_in),xe(a,e.total_in>>8&255),xe(a,e.total_in>>16&255),xe(a,e.total_in>>24&255)):(Oe(a,e.adler>>>16),Oe(a,65535&e.adler)),Se(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?ne:re)},deflateEnd:e=>{if(!e||!e.state)return ae;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==be&&t!==ve&&t!==ye?we(e,ae):(e.state=null,t===ve?we(e,ie):ne)},deflateSetDictionary:(e,t)=>{let n=t.length;if(!e||!e.state)return ae;const r=e.state,a=r.wrap;if(2===a||1===a&&42!==r.status||r.lookahead)return ae;if(1===a&&(e.adler=$(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(Ee(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Be(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=ke(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Be(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,r.wrap=a,ne},deflateInfo:"pako deflate (from Nodeca project)"};const qe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var $e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)qe(n,t)&&(e[t]=n[t])}}return e},De=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n};let Ue=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ue=!1}const He=new Uint8Array(256);for(let e=0;e<256;e++)He[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;He[254]=He[254]=1;var We=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,a,i,s=e.length,o=0;for(a=0;a<s;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},Ve=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,a;const i=new Array(2*n);for(a=0,r=0;r<n;){let t=e[r++];if(t<128){i[a++]=t;continue}let s=He[t];if(s>4)i[a++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?i[a++]=65533:t<65536?i[a++]=t:(t-=65536,i[a++]=55296|t>>10&1023,i[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ue)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,a)},Ze=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+He[e[n]]>t?n:t};var Ge=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xe=Object.prototype.toString,{Z_NO_FLUSH:Ke,Z_SYNC_FLUSH:Ye,Z_FULL_FLUSH:Je,Z_FINISH:Qe,Z_OK:et,Z_STREAM_END:tt,Z_DEFAULT_COMPRESSION:nt,Z_DEFAULT_STRATEGY:rt,Z_DEFLATED:at}=W;function it(e){this.options=$e({level:nt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:rt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ge,this.strm.avail_out=0;let n=Fe.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==et)throw new Error(H[n]);if(t.header&&Fe.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?We(t.dictionary):"[object ArrayBuffer]"===Xe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Fe.deflateSetDictionary(this.strm,e),n!==et)throw new Error(H[n]);this._dict_set=!0}}function st(e,t){const n=new it(t);if(n.push(e,!0),n.err)throw n.msg||H[n.err];return n.result}it.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Qe:Ke,"string"==typeof e?n.input=We(e):"[object ArrayBuffer]"===Xe.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===Ye||i===Je)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=Fe.deflate(n,i),a===tt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Fe.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===et;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},it.prototype.onData=function(e){this.chunks.push(e)},it.prototype.onEnd=function(e){e===et&&(this.result=De(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ot={Deflate:it,deflate:st,deflateRaw:function(e,t){return(t=t||{}).raw=!0,st(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,st(e,t)},constants:W};var lt=function(e,t){let n,r,a,i,s,o,l,c,u,h,d,f,p,g,m,b,v,y,w,_,E,k,S,C;const x=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),a=e.next_out,C=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=x.dmax,l=x.wsize,c=x.whave,u=x.wnext,h=x.window,d=x.hold,f=x.bits,p=x.lencode,g=x.distcode,m=(1<<x.lenbits)-1,b=(1<<x.distbits)-1;e:do{f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),v=p[d&m];t:for(;;){if(y=v>>>24,d>>>=y,f-=y,y=v>>>16&255,0===y)C[a++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=p[(65535&v)+(d&(1<<y)-1)];continue t}if(32&y){x.mode=12;break e}e.msg="invalid literal/length code",x.mode=30;break e}w=65535&v,y&=15,y&&(f<y&&(d+=S[n++]<<f,f+=8),w+=d&(1<<y)-1,d>>>=y,f-=y),f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),v=g[d&b];n:for(;;){if(y=v>>>24,d>>>=y,f-=y,y=v>>>16&255,!(16&y)){if(0==(64&y)){v=g[(65535&v)+(d&(1<<y)-1)];continue n}e.msg="invalid distance code",x.mode=30;break e}if(_=65535&v,y&=15,f<y&&(d+=S[n++]<<f,f+=8,f<y&&(d+=S[n++]<<f,f+=8)),_+=d&(1<<y)-1,_>o){e.msg="invalid distance too far back",x.mode=30;break e}if(d>>>=y,f-=y,y=a-i,_>y){if(y=_-y,y>c&&x.sane){e.msg="invalid distance too far back",x.mode=30;break e}if(E=0,k=h,0===u){if(E+=l-y,y<w){w-=y;do{C[a++]=h[E++]}while(--y);E=a-_,k=C}}else if(u<y){if(E+=l+u-y,y-=u,y<w){w-=y;do{C[a++]=h[E++]}while(--y);if(E=0,u<w){y=u,w-=y;do{C[a++]=h[E++]}while(--y);E=a-_,k=C}}}else if(E+=u-y,y<w){w-=y;do{C[a++]=h[E++]}while(--y);E=a-_,k=C}for(;w>2;)C[a++]=k[E++],C[a++]=k[E++],C[a++]=k[E++],w-=3;w&&(C[a++]=k[E++],w>1&&(C[a++]=k[E++]))}else{E=a-_;do{C[a++]=C[E++],C[a++]=C[E++],C[a++]=C[E++],w-=3}while(w>2);w&&(C[a++]=C[E++],w>1&&(C[a++]=C[E++]))}break}}break}}while(n<r&&a<s);w=f>>3,n-=w,f-=w<<3,d&=(1<<f)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<s?s-a+257:257-(a-s),x.hold=d,x.bits=f};const ct=15,ut=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ft=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var pt=(e,t,n,r,a,i,s,o)=>{const l=o.bits;let c,u,h,d,f,p,g=0,m=0,b=0,v=0,y=0,w=0,_=0,E=0,k=0,S=0,C=null,x=0;const O=new Uint16Array(16),N=new Uint16Array(16);let A,B,R,I=null,j=0;for(g=0;g<=ct;g++)O[g]=0;for(m=0;m<r;m++)O[t[n+m]]++;for(y=l,v=ct;v>=1&&0===O[v];v--);if(y>v&&(y=v),0===v)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(b=1;b<v&&0===O[b];b++);for(y<b&&(y=b),E=1,g=1;g<=ct;g++)if(E<<=1,E-=O[g],E<0)return-1;if(E>0&&(0===e||1!==v))return-1;for(N[1]=0,g=1;g<ct;g++)N[g+1]=N[g]+O[g];for(m=0;m<r;m++)0!==t[n+m]&&(s[N[t[n+m]]++]=m);if(0===e?(C=I=s,p=19):1===e?(C=ut,x-=257,I=ht,j-=257,p=256):(C=dt,I=ft,p=-1),S=0,m=0,g=b,f=i,w=y,_=0,h=-1,k=1<<y,d=k-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){A=g-_,s[m]<p?(B=0,R=s[m]):s[m]>p?(B=I[j+s[m]],R=C[x+s[m]]):(B=96,R=0),c=1<<g-_,u=1<<w,b=u;do{u-=c,a[f+(S>>_)+u]=A<<24|B<<16|R|0}while(0!==u);for(c=1<<g-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,m++,0==--O[g]){if(g===v)break;g=t[n+s[m]]}if(g>y&&(S&d)!==h){for(0===_&&(_=y),f+=b,w=g-_,E=1<<w;w+_<v&&(E-=O[w+_],!(E<=0));)w++,E<<=1;if(k+=1<<w,1===e&&k>852||2===e&&k>592)return 1;h=S&d,a[h]=y<<24|w<<16|f-i|0}}return 0!==S&&(a[f+S]=g-_<<24|64<<16|0),o.bits=y,0};const{Z_FINISH:gt,Z_BLOCK:mt,Z_TREES:bt,Z_OK:vt,Z_STREAM_END:yt,Z_NEED_DICT:wt,Z_STREAM_ERROR:_t,Z_DATA_ERROR:Et,Z_MEM_ERROR:kt,Z_BUF_ERROR:St,Z_DEFLATED:Ct}=W,xt=12,Ot=30,Nt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function At(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bt=e=>{if(!e||!e.state)return _t;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vt},Rt=e=>{if(!e||!e.state)return _t;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Bt(e)},It=(e,t)=>{let n;if(!e||!e.state)return _t;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?_t:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Rt(e))},jt=(e,t)=>{if(!e)return _t;const n=new At;e.state=n,n.window=null;const r=It(e,t);return r!==vt&&(e.state=null),r};let Mt,Tt,Lt=!0;const Pt=e=>{if(Lt){Mt=new Int32Array(512),Tt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(pt(1,e.lens,0,288,Mt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;pt(2,e.lens,0,32,Tt,0,e.work,{bits:5}),Lt=!1}e.lencode=Mt,e.lenbits=9,e.distcode=Tt,e.distbits=5},zt=(e,t,n,r)=>{let a;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var Ft={inflateReset:Rt,inflateReset2:It,inflateResetKeep:Bt,inflateInit:e=>jt(e,15),inflateInit2:jt,inflate:(e,t)=>{let n,r,a,i,s,o,l,c,u,h,d,f,p,g,m,b,v,y,w,_,E,k,S=0;const C=new Uint8Array(4);let x,O;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return _t;n=e.state,n.mode===xt&&(n.mode=13),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,h=o,d=l,k=vt;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=U(n.check,C,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Ot;break}if((15&c)!==Ct){e.msg="unknown compression method",n.mode=Ot;break}if(c>>>=4,u-=4,E=8+(15&c),0===n.wbits)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=Ot;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&c?10:xt,c=0,u=0;break;case 2:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Ct){e.msg="unknown compression method",n.mode=Ot;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Ot;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=U(n.check,C,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=U(n.check,C,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=U(n.check,C,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=U(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),E)),512&n.flags&&(n.check=U(n.check,r,f,i)),o-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;f=0;do{E=r[i+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<o);if(512&n.flags&&(n.check=U(n.check,r,f,i)),o-=f,i+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;f=0;do{E=r[i+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<o);if(512&n.flags&&(n.check=U(n.check,r,f,i)),o-=f,i+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Ot;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=xt;break;case 10:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}e.adler=n.check=Nt(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,wt;e.adler=n.check=1,n.mode=xt;case xt:if(t===mt||t===bt)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=14;break;case 1:if(Pt(n),n.mode=20,t===bt){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=Ot}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ot;break}if(n.length=65535&c,c=0,u=0,n.mode=15,t===bt)break e;case 15:n.mode=16;case 16:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;a.set(r.subarray(i,i+f),s),o-=f,i+=f,l-=f,s+=f,n.length-=f;break}n.mode=xt;break;case 17:for(;u<14;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ot;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.lens[N[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},k=pt(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid code lengths set",n.mode=Ot;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],m=S>>>24,b=S>>>16&255,v=65535&S,!(m<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(v<16)c>>>=m,u-=m,n.lens[n.have++]=v;else{if(16===v){for(O=m+2;u<O;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=Ot;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===v){for(O=m+3;u<O;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=m,u-=m,E=0,f=3+(7&c),c>>>=3,u-=3}else{for(O=m+7;u<O;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=m,u-=m,E=0,f=11+(127&c),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ot;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===Ot)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Ot;break}if(n.lenbits=9,x={bits:n.lenbits},k=pt(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid literal/lengths set",n.mode=Ot;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},k=pt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,k){e.msg="invalid distances set",n.mode=Ot;break}if(n.mode=20,t===bt)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,lt(e,d),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,n.mode===xt&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],m=S>>>24,b=S>>>16&255,v=65535&S,!(m<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(b&&0==(240&b)){for(y=m,w=b,_=v;S=n.lencode[_+((c&(1<<y+w)-1)>>y)],m=S>>>24,b=S>>>16&255,v=65535&S,!(y+m<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=m,u-=m,n.back+=m,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=xt;break}if(64&b){e.msg="invalid literal/length code",n.mode=Ot;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(O=n.extra;u<O;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=n.distcode[c&(1<<n.distbits)-1],m=S>>>24,b=S>>>16&255,v=65535&S,!(m<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(0==(240&b)){for(y=m,w=b,_=v;S=n.distcode[_+((c&(1<<y+w)-1)>>y)],m=S>>>24,b=S>>>16&255,v=65535&S,!(y+m<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=m,u-=m,n.back+=m,64&b){e.msg="invalid distance code",n.mode=Ot;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(O=n.extra;u<O;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ot;break}n.mode=25;case 25:if(0===l)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ot;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=a,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{a[s++]=g[p++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;a[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===o)break e;o--,c|=r[i++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,d&&(e.adler=n.check=n.flags?U(n.check,a,d,s-d):$(n.check,a,d,s-d)),d=l,(n.flags?c:Nt(c))!==n.check){e.msg="incorrect data check",n.mode=Ot;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Ot;break}c=0,u=0}n.mode=29;case 29:k=yt;break e;case Ot:k=Et;break e;case 31:return kt;default:return _t}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<Ot&&(n.mode<27||t!==gt))&&zt(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,n.wrap&&d&&(e.adler=n.check=n.flags?U(n.check,a,d,e.next_out-d):$(n.check,a,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===xt?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===d||t===gt)&&k===vt&&(k=St),k},inflateEnd:e=>{if(!e||!e.state)return _t;let t=e.state;return t.window&&(t.window=null),e.state=null,vt},inflateGetHeader:(e,t)=>{if(!e||!e.state)return _t;const n=e.state;return 0==(2&n.wrap)?_t:(n.head=t,t.done=!1,vt)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,a,i;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?_t:11===r.mode&&(a=1,a=$(a,t,n,0),a!==r.check)?Et:(i=zt(e,t,n,n),i?(r.mode=31,kt):(r.havedict=1,vt))):_t},inflateInfo:"pako inflate (from Nodeca project)"};var qt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const $t=Object.prototype.toString,{Z_NO_FLUSH:Dt,Z_FINISH:Ut,Z_OK:Ht,Z_STREAM_END:Wt,Z_NEED_DICT:Vt,Z_STREAM_ERROR:Zt,Z_DATA_ERROR:Gt,Z_MEM_ERROR:Xt}=W;function Kt(e){this.options=$e({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ge,this.strm.avail_out=0;let n=Ft.inflateInit2(this.strm,t.windowBits);if(n!==Ht)throw new Error(H[n]);if(this.header=new qt,Ft.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=We(t.dictionary):"[object ArrayBuffer]"===$t.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ft.inflateSetDictionary(this.strm,t.dictionary),n!==Ht)))throw new Error(H[n])}function Yt(e,t){const n=new Kt(t);if(n.push(e),n.err)throw n.msg||H[n.err];return n.result}Kt.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Ut:Dt,"[object ArrayBuffer]"===$t.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Ft.inflate(n,s),i===Vt&&a&&(i=Ft.inflateSetDictionary(n,a),i===Ht?i=Ft.inflate(n,s):i===Gt&&(i=Vt));n.avail_in>0&&i===Wt&&n.state.wrap>0&&0!==e[n.next_in];)Ft.inflateReset(n),i=Ft.inflate(n,s);switch(i){case Zt:case Gt:case Vt:case Xt:return this.onEnd(i),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||i===Wt))if("string"===this.options.to){let e=Ze(n.output,n.next_out),t=n.next_out-e,a=Ve(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==Ht||0!==o){if(i===Wt)return i=Ft.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Kt.prototype.onData=function(e){this.chunks.push(e)},Kt.prototype.onEnd=function(e){e===Ht&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=De(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Jt={Inflate:Kt,inflate:Yt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Yt(e,t)},ungzip:Yt,constants:W};const{Deflate:Qt,deflate:en,deflateRaw:tn,gzip:nn}=ot,{Inflate:rn,inflate:an,inflateRaw:sn,ungzip:on}=Jt;var ln=sn;function cn(e){return ln(e.subarray(2))}},1310:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),i=n(843),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(918),d=n(37),f=n.n(d),p=n(22);const g=Object(p.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},content:{minWidth:800}})));function m({open:e,onClose:t}){const{classes:n}=g();return a.a.createElement(s.a,{open:e,onClose:t,maxWidth:"xl"},a.a.createElement(o.a,null,"JBrowse v",i.a,a.a.createElement(l.a,{className:n.closeButton,onClick:()=>t(),size:"large"},a.a.createElement(f.a,null))),a.a.createElement(c.a,{className:n.content},a.a.createElement(u.a,null,"JBrowse is a GMOD project  2019-2021, The Evolutionary Software Foundation"),a.a.createElement(u.a,null,"Here are some resources and documentation. Please report the version number above when asking questions. Thanks!"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/discussions",target:"_blank",rel:"noopener noreferrer"},"Question & answer forum")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},"Report a bug")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://jbrowse.org/jb2/docs/user_guide",target:"_blank",rel:"noopener noreferrer"},"User guide")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://jbrowse.org/jb2/docs/",target:"_blank",rel:"noopener noreferrer"},"Documentation")))))}},1311:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n(864),a=n(13),i=n(1257);class s extends i.default{async configure(){if(!this.configured){const e=Object(a.readConfObject)(this.config,"htsgetBase"),t=Object(a.readConfObject)(this.config,"htsgetTrackId"),n=new r.b({baseUrl:e,trackId:t}),i=Object(a.readConfObject)(this.config,"sequenceAdapter");i&&this.getSubAdapter&&(this.configured=this.getSubAdapter(i).then((({dataAdapter:e})=>({bam:n,sequenceAdapter:e})))),this.configured=Promise.resolve({bam:n})}return this.configured}}},1312:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(906),a=n(42),i=n(51),s=n(17),o=n(53),l=n(813);class c extends a.BaseFeatureDataAdapter{async setupPre(e){const{statusCallback:t=(()=>{})}=e||{},n=new r.b({filehandle:Object(i.openLocation)(this.getConf("bigWigLocation"),this.pluginManager)}),a=await Object(s.updateStatus)("Downloading bigwig header",t,(()=>n.getHeader(e)));return{bigwig:n,header:a}}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRefNames(e){const{header:{refsByName:t}}=await this.setup(e);return Object.keys(t)}async refIdToName(e){var t;const{header:{refsByNumber:n}}=await this.setup();return null===(t=n[e])||void 0===t?void 0:t.name}async getGlobalStats(e){const{header:{totalSummary:t}}=await this.setup(e);return Object(l.rectifyStats)(t)}getFeatures(e,t={}){const{refName:n,start:r,end:a}=e,{bpPerPx:i=0,signal:s,resolution:l=1,statusCallback:c=(()=>{})}=t;return Object(o.ObservableCreate)((async s=>{c("Downloading bigwig data");const o=this.getConf("source"),{bigwig:u}=await this.setup(t),h=await u.getFeatures(n,r,a,{...t,basesPerSpan:i/l});for(let t=0;t<h.length;t++){const r=h[t];o&&(r.source=o);const a=`${o}:${e.refName}:${r.start}-${r.end}`;r.refName=n,r.uniqueId=a,s.next({get:e=>r[e],id:()=>a,toJSON:()=>r})}s.complete()}),s)}async estimateRegionsStats(e){return{featureDensity:0}}freeResources(){}}c.capabilities=["hasResolution","hasLocalStats","hasGlobalStats"]},1313:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(42),a=n(53),i=n(17),s=n(538),o=n(76);function l(e){const t=e.slice(e.lastIndexOf("/")+1);return t.slice(0,t.lastIndexOf("."))}class c extends r.BaseFeatureDataAdapter{async getAdapters(){const e=this.getSubAdapter;if(!e)throw new Error("no getSubAdapter available");let t=this.getConf("subadapters");if(!(null==t?void 0:t.length)){t=this.getConf("bigWigs").map((e=>({type:"BigWigAdapter",source:l(e),bigWigLocation:{uri:e}})))}return Promise.all(t.map((async t=>{const n=(await e(t)).dataAdapter;return{source:t.name||n.id,...t,dataAdapter:n}})))}async getRefNames(e){const t=await this.getAdapters(),n=await Promise.all(t.map((t=>t.dataAdapter.getRefNames(e))));return[...new Set(n.flat())]}async getGlobalStats(e){const t=await this.getAdapters(),n=(await Promise.all(t.map((t=>{var n,r;return null===(r=(n=t.dataAdapter).getGlobalStats)||void 0===r?void 0:r.call(n,e)})))).filter((e=>!!e));return{scoreMin:Math.min(...n.map((e=>e.scoreMin))),scoreMax:Math.max(...n.map((e=>e.scoreMax)))}}getFeatures(e,t={}){return Object(a.ObservableCreate)((async n=>{const r=await this.getAdapters();Object(s.a)(...r.map((n=>n.dataAdapter.getFeatures(e,t).pipe(Object(o.a)((e=>e.get("source")?e:new i.SimpleFeature({...e.toJSON(),uniqueId:n.source+"-"+e.id(),source:n.source}))))))).subscribe(n)}),t.signal)}async estimateRegionsStats(e){return{featureDensity:0}}async getSources(){return(await this.getAdapters()).map((({dataAdapter:e,source:t,name:n,...r})=>({name:t,__name:n,...r})))}freeResources(){}}c.capabilities=["hasResolution","hasLocalStats","hasGlobalStats"]},1314:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(691),c=n(688),u=n(663),h=n(746),d=n(696),f=n(695),p=n(903),g=n(687),m=n(673),b=n(21),v=n(22),y=n(20),w=n(17),_=n(37),E=n.n(_);const k=Object(v.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},dialogContent:{width:"40em"}})));t.default=Object(y.observer)((function({model:e,handleClose:t}){const{classes:n}=k(),[v,y]=Object(r.useState)(""),[_,S]=Object(r.useState)(!0),[C,x]=Object(r.useState)(!0),[O,N]=Object(r.useState)(!0);let A;try{new RegExp(v)}catch(e){A=e}return a.a.createElement(i.a,{maxWidth:"xl",open:!0,onClose:t},a.a.createElement(s.a,null,"Sequence search",t?a.a.createElement(o.a,{className:n.closeButton,onClick:()=>t(),size:"large"},a.a.createElement(E.a,null)):null),a.a.createElement(l.a,null),a.a.createElement(c.a,{className:n.dialogContent},a.a.createElement(u.a,null,"Supply a sequence to search for. A track will be created with the resulting matches once submitted. You can also supply regex style expressions e.g. AACT(C|T)."),a.a.createElement(h.a,{value:v,onChange:e=>y(e.target.value),helperText:"Sequence search pattern"}),a.a.createElement(d.a,null,a.a.createElement(f.a,{control:a.a.createElement(p.a,{checked:_,onChange:e=>S(e.target.checked)}),label:"Search forward strand"}),a.a.createElement(f.a,{control:a.a.createElement(p.a,{checked:C,onChange:e=>x(e.target.checked)}),label:"Search reverse strand"}),a.a.createElement(f.a,{control:a.a.createElement(p.a,{checked:O,onChange:e=>N(e.target.checked)}),label:"Case insensitive"})),A?a.a.createElement(u.a,{color:"error"},`${A}`):null),a.a.createElement(g.a,null,a.a.createElement(m.a,{onClick:()=>{var n;if(v){const t="sequence_search_"+ +Date.now(),r=Object(w.getSession)(e),{assemblyManager:a}=r,i=e.assemblyNames[0];r.addTrackConf({trackId:t,name:`Sequence search ${v}`,assemblyNames:[i],type:"FeatureTrack",adapter:{type:"SequenceSearchAdapter",search:v,searchForward:_,searchReverse:C,caseInsensitive:O,sequenceAdapter:Object(b.getSnapshot)(null===(n=a.get(i))||void 0===n?void 0:n.configuration.sequence.adapter)}}),e.toggleTrack(t)}t()},variant:"contained",color:"primary"},"Submit"),a.a.createElement(m.a,{onClick:()=>t(),variant:"contained",color:"secondary"},"Close")))}))},1315:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(746),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g);const b=Object(p.makeStyles)()((e=>({root:{width:500},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},field:{margin:e.spacing(2)}})));t.default=Object(i.observer)((function({model:e,handleClose:t}){const{classes:n}=b(),{maxHeight:i=""}=e,[p,g]=Object(r.useState)(`${i}`);return a.a.createElement(s.a,{open:!0,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(o.a,{id:"alert-dialog-title"},"Filter options",a.a.createElement(l.a,{"aria-label":"close",className:n.closeButton,onClick:t,size:"large"},a.a.createElement(m.a,null))),a.a.createElement(c.a,{className:n.root},a.a.createElement(u.a,null,'Set max height for the track. For example, you can increase this if the layout says "Max height reached"'),a.a.createElement(h.a,{value:p,onChange:e=>g(e.target.value),placeholder:"Enter max score"}),a.a.createElement(d.a,null,a.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,onClick:()=>{e.setMaxHeight(""===p||Number.isNaN(+p)?void 0:+p),t()}},"Submit"),a.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:()=>t()},"Cancel"))))}))},1316:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(688),c=n(663),u=n(746),h=n(673),d=n(22),f=n(37),p=n.n(f);const g=Object(d.makeStyles)()((e=>({root:{},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));function m(e){const{classes:t}=g(),{model:n,handleClose:d}=e,{minScore:f,maxScore:m,scaleType:b}=n,[v,y]=Object(r.useState)(`${f!==Number.MIN_VALUE?f:""}`),[w,_]=Object(r.useState)(`${m!==Number.MAX_VALUE?m:""}`),E=!(""!==v&&""!==w&&!Number.isNaN(+v)&&!Number.isNaN(+w))||+w>+v,k=!("log"===b&&""!==v&&!Number.isNaN(+v))||+v>0;return a.a.createElement(i.a,{open:!0,onClose:d},a.a.createElement(s.a,null,"Set min/max score for track",a.a.createElement(o.a,{className:t.closeButton,onClick:d},a.a.createElement(p.a,null))),a.a.createElement(l.a,{style:{overflowX:"hidden"}},a.a.createElement("div",{className:t.root},a.a.createElement(c.a,null,"Enter min/max score: "),E?null:a.a.createElement(c.a,{color:"error"},"Max is greater than or equal to min"),k?null:a.a.createElement(c.a,{color:"error"},"Min score should be greater than 0 for log scale"),a.a.createElement(u.a,{value:v,onChange:e=>{y(e.target.value)},placeholder:"Enter min score"}),a.a.createElement(u.a,{value:w,onChange:e=>{_(e.target.value)},placeholder:"Enter max score"}),a.a.createElement(h.a,{variant:"contained",color:"primary",type:"submit",style:{marginLeft:20},disabled:!E,onClick:()=>{n.setMinScore(""===v||Number.isNaN(+v)?void 0:+v),n.setMaxScore(""===w||Number.isNaN(+w)?void 0:+w),d()}},"Submit"))))}},1317:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(695),h=n(904),d=n(663),f=n(687),p=n(673),g=n(22),m=n(37),b=n.n(m),v=n(877);const y=Object(g.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));t.default=Object(i.observer)((function({model:e,handleClose:t}){const{classes:n}=y(),[i,g]=Object(r.useState)(!1);return a.a.createElement(s.a,{open:!0,onClose:t},a.a.createElement(o.a,null,"Select either an overall color, or the positive/negative colors. Note that density renderers only work properly with positive/negative colors",a.a.createElement(l.a,{"aria-label":"close",className:n.closeButton,onClick:t},a.a.createElement(b.a,null))),a.a.createElement(c.a,null,a.a.createElement(u.a,{checked:!i,onClick:()=>g(!1),control:a.a.createElement(h.a,null),label:"Overall color"}),a.a.createElement(u.a,{checked:i,onClick:()=>g(!0),control:a.a.createElement(h.a,null),label:"Positive/negative color"}),i?a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,null,"Positive color"),a.a.createElement(v.ColorPicker,{color:e.posColor||"black",onChange:t=>{e.setPosColor(t),e.setColor(void 0)}}),a.a.createElement(d.a,null,"Negative color"),a.a.createElement(v.ColorPicker,{color:e.negColor||"black",onChange:t=>{e.setNegColor(t),e.setColor(void 0)}})):a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,null,"Overall color"),a.a.createElement(v.ColorPicker,{color:e.color||"black",onChange:t=>e.setColor(t)}))),a.a.createElement(f.a,null,a.a.createElement(p.a,{onClick:()=>{e.setPosColor(void 0),e.setNegColor(void 0),e.setColor(void 0)},color:"secondary",variant:"contained"},"Restore default"),a.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit",onClick:()=>t()},"Submit")))}))},1318:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(688),c=n(663),u=n(746),h=n(673),d=n(22),f=n(37),p=n.n(f);const g=Object(d.makeStyles)()((e=>({root:{},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));function m(e){const{classes:t}=g(),{model:n,handleClose:d}=e,{minScore:f,maxScore:m,scaleType:b}=n,[v,y]=Object(r.useState)(`${f!==Number.MIN_VALUE?f:""}`),[w,_]=Object(r.useState)(`${m!==Number.MAX_VALUE?m:""}`),E=!(""!==v&&""!==w&&!Number.isNaN(+v)&&!Number.isNaN(+w))||+w>+v,k=!("log"===b&&""!==v&&!Number.isNaN(+v))||+v>0;return a.a.createElement(i.a,{open:!0,onClose:d},a.a.createElement(s.a,null,"Set min/max score for track",a.a.createElement(o.a,{className:t.closeButton,onClick:d},a.a.createElement(p.a,null))),a.a.createElement(l.a,{style:{overflowX:"hidden"}},a.a.createElement("div",{className:t.root},a.a.createElement(c.a,null,"Enter min/max score: "),E?null:a.a.createElement(c.a,{color:"error"},"Max is greater than or equal to min"),k?null:a.a.createElement(c.a,{color:"error"},"Min score should be greater than 0 for log scale"),a.a.createElement(u.a,{value:v,onChange:e=>{y(e.target.value)},placeholder:"Enter min score"}),a.a.createElement(u.a,{value:w,onChange:e=>{_(e.target.value)},placeholder:"Enter max score"}),a.a.createElement(h.a,{variant:"contained",color:"primary",type:"submit",style:{marginLeft:20},disabled:!E,onClick:()=>{n.setMinScore(""===v||Number.isNaN(+v)?void 0:+v),n.setMaxScore(""===w||Number.isNaN(+w)?void 0:+w),d()}},"Submit"))))}},1319:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(688),l=n(663),c=n(746),u=n(687),h=n(673),d=n(13);t.default=({tracks:e,onClose:t})=>{const[n,f]=Object(r.useState)("MultiWiggle "+Date.now()),p=e.every((e=>"QuantitativeTrack"===e.type));return a.a.createElement(i.a,{open:!0,onClose:()=>t(!1)},a.a.createElement(s.a,null,"Confirm multi-wiggle track create"),a.a.createElement(o.a,null,a.a.createElement(l.a,null,p?null:"Not every track looks like a QuantitativeTrack. This could have unexpected behavior, confirm if it looks ok.","Listing:"),a.a.createElement("ul",null,e.map((e=>a.a.createElement("li",{key:e.trackId},Object(d.readConfObject)(e,"name")," - ",e.type)))),a.a.createElement(c.a,{value:n,onChange:e=>f(e.target.value),helperText:"Track name"}),a.a.createElement(l.a,null,"Confirm creation of track?")),a.a.createElement(u.a,null,a.a.createElement(h.a,{onClick:()=>t(!1),color:"primary"},"Cancel"),a.a.createElement(h.a,{onClick:()=>t(!0,{name:n}),color:"primary",variant:"contained",autoFocus:!0},"Submit")))}},1320:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(746),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g);const b=Object(p.makeStyles)()((e=>({root:{width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));t.default=Object(i.observer)((function(e){const{classes:t}=b(),{model:n,handleClose:i}=e,[p,g]=Object(r.useState)(""),v=p.match(/^[A-Za-z][A-Za-z0-9]$/);return a.a.createElement(s.a,{open:!0,onClose:i},a.a.createElement(o.a,null,"Color by tag",a.a.createElement(l.a,{"aria-label":"close",className:t.closeButton,onClick:i},a.a.createElement(m.a,null))),a.a.createElement(c.a,{style:{overflowX:"hidden"}},a.a.createElement(u.a,null,"Enter tag to color by: "),a.a.createElement(u.a,{color:"textSecondary"},"Examples: XS or TS for RNA-seq inferred read strand, ts (lower-case) for minimap2 read strand, HP for haplotype, RG for read group, etc."),a.a.createElement(h.a,{value:p,onChange:e=>g(e.target.value),placeholder:"Enter tag name",inputProps:{maxLength:2,"data-testid":"color-tag-name-input"},error:2===p.length&&!v,helperText:2!==p.length||v?"":"Not a valid tag",autoComplete:"off","data-testid":"color-tag-name"}),a.a.createElement(d.a,null,a.a.createElement(f.a,{variant:"contained",color:"primary",onClick:()=>{n.setColorScheme({type:"tag",tag:p}),i()},disabled:!v},"Submit"),a.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:i},"Cancel"))))}))},1321:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(746),o=n(684),l=n(690),c=n(660),u=n(688),h=n(663),d=n(918),f=n(510),p=n(687),g=n(673),m=n(22),b=n(37),v=n.n(b);const y=Object(m.makeStyles)()((e=>({paper:{padding:e.spacing(2),margin:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},field:{margin:e.spacing(2)}}))),w=["read paired","read mapped in proper pair","read unmapped","mate unmapped","read reverse strand","mate reverse strand","first in pair","second in pair","not primary alignment","read fails platform/vendor quality checks","read is PCR or optical duplicate","supplementary alignment"];function _(e){const{flag:t=0,setFlag:n}=e;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{type:"number",value:t,onChange:e=>n(+e.target.value)}),w.map(((e,r)=>{const i=t&1<<r,s=`${e}_${i}`;return a.a.createElement("div",{key:s},a.a.createElement("input",{type:"checkbox",checked:Boolean(i),onChange:e=>{e.target.checked?n(t|1<<r):n(t&~(1<<r))}}),a.a.createElement("label",{htmlFor:s},e))})))}t.default=Object(i.observer)((function(e){var t,n;const{model:i,handleClose:m}=e,{classes:b}=y(),{filterBy:w}=i,[E,k]=Object(r.useState)(null==w?void 0:w.flagInclude),[S,C]=Object(r.useState)(null==w?void 0:w.flagExclude),[x,O]=Object(r.useState)((null===(t=null==w?void 0:w.tagFilter)||void 0===t?void 0:t.tag)||""),[N,A]=Object(r.useState)((null===(n=null==w?void 0:w.tagFilter)||void 0===n?void 0:n.value)||""),[B,R]=Object(r.useState)((null==w?void 0:w.readName)||""),I=x.match(/^[A-Za-z][A-Za-z0-9]$/),j="https://broadinstitute.github.io/picard/explain-flags.html";return a.a.createElement(o.a,{open:!0,onClose:m},a.a.createElement(l.a,null,"Filter options",a.a.createElement(c.a,{"aria-label":"close",className:b.closeButton,onClick:m},a.a.createElement(v.a,null))),a.a.createElement(u.a,null,a.a.createElement(h.a,null,"Set filter bitmask options. Refer to ",a.a.createElement(d.a,{href:j},j)," ","for details"),a.a.createElement(f.a,{className:b.paper,variant:"outlined"},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",null,a.a.createElement(h.a,null,"Read must have ALL these flags"),a.a.createElement(_,{flag:E,setFlag:k})),a.a.createElement("div",null,a.a.createElement(h.a,null,"Read must have NONE of these flags"),a.a.createElement(_,{flag:S,setFlag:C})))),a.a.createElement(f.a,{className:b.paper,variant:"outlined"},a.a.createElement(h.a,null,"Filter by tag name and value. Use * in the value field to get all reads containing any value for that tag. Example: filter tag name SA with value * to get all split/supplementary reads. Other examples include HP for haplotype, or RG for read group"),a.a.createElement(s.a,{className:b.field,value:x,onChange:e=>{O(e.target.value)},placeholder:"Enter tag name",inputProps:{maxLength:2,"data-testid":"color-tag-name-input"},error:2===x.length&&!I,helperText:2!==x.length||I?"":"Not a valid tag","data-testid":"color-tag-name"}),a.a.createElement(s.a,{className:b.field,value:N,onChange:e=>{A(e.target.value)},placeholder:"Enter tag value",inputProps:{"data-testid":"color-tag-name-input"},"data-testid":"color-tag-value"})),a.a.createElement(f.a,{className:b.paper,variant:"outlined"},a.a.createElement(h.a,null,"Filter by read name"),a.a.createElement(s.a,{className:b.field,value:B,onChange:e=>{R(e.target.value)},placeholder:"Enter read name",inputProps:{"data-testid":"color-tag-readname-input"},"data-testid":"color-tag-readname"})),a.a.createElement(p.a,null,a.a.createElement(g.a,{variant:"contained",color:"primary",autoFocus:!0,type:"submit",onClick:()=>{i.setFilterBy({flagInclude:E,flagExclude:S,readName:B,tagFilter:""!==x?{tag:x,value:N}:void 0}),m()}},"Submit"),a.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:()=>m()},"Cancel"))))}))},1322:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(746),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g);const b=Object(p.makeStyles)()((e=>({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));t.default=Object(i.observer)((function(e){const{classes:t}=b(),{model:n,handleClose:i}=e,[p,g]=Object(r.useState)(""),v=p.match(/^[A-Za-z][A-Za-z0-9]$/);return a.a.createElement(s.a,{open:!0,onClose:i},a.a.createElement(o.a,null,"Sort by tag",a.a.createElement(l.a,{"aria-label":"close",className:t.closeButton,onClick:i},a.a.createElement(m.a,null))),a.a.createElement(c.a,null,a.a.createElement(u.a,null,"Set the tag to sort by"),a.a.createElement(u.a,{color:"textSecondary"},"Examples: HP for haplotype, RG for read group, etc."),a.a.createElement(h.a,{value:p,onChange:e=>g(e.target.value),placeholder:"Enter tag name",inputProps:{maxLength:2,"data-testid":"sort-tag-name-input"},error:2===p.length&&!v,helperText:2!==p.length||v?"":"Not a valid tag",autoComplete:"off","data-testid":"sort-tag-name"}),a.a.createElement(d.a,null,a.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,onClick:()=>{n.setSortedBy("tag",p),i()}},"Submit"),a.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:()=>i()},"Cancel"))))}))},1323:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(746),d=n(695),f=n(903),p=n(687),g=n(673),m=n(22),b=n(37),v=n.n(b);const y=Object(m.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));t.default=Object(i.observer)((function(e){const{classes:t}=y(),{model:n,handleClose:i}=e,{featureHeightSetting:m,noSpacing:b}=n,[w,_]=Object(r.useState)(`${m}`),[E,k]=Object(r.useState)(b),S=""!==w&&!Number.isNaN(+w);return a.a.createElement(s.a,{open:!0,onClose:i},a.a.createElement(o.a,null,"Set feature height",a.a.createElement(l.a,{className:t.closeButton,onClick:i},a.a.createElement(v.a,null))),a.a.createElement(c.a,null,a.a.createElement(u.a,null,"Adjust the feature height and whether there is any spacing between features. Setting feature height to 1 and removing spacing makes the display very compact."),a.a.createElement(h.a,{value:w,helperText:"Feature height",onChange:e=>{_(e.target.value)}}),a.a.createElement(d.a,{control:a.a.createElement(f.a,{checked:!!E,onChange:()=>k((e=>!e))}),label:"Remove spacing between features in y-direction?"}),a.a.createElement(p.a,null,a.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,disabled:!S,onClick:()=>{n.setFeatureHeight(""===w||Number.isNaN(+w)?void 0:+w),n.setNoSpacing(E),i()}},"Submit"),a.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:()=>i()},"Cancel"))))}))},1324:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(746),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g);const b=Object(p.makeStyles)()((e=>({root:{width:500},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},field:{margin:e.spacing(2)}})));t.default=Object(i.observer)((function(e){const{model:t,handleClose:n}=e,{classes:i}=b(),{maxHeight:p=""}=t,[g,v]=Object(r.useState)(`${p}`);return a.a.createElement(s.a,{open:!0,onClose:n},a.a.createElement(o.a,null,"Filter options",a.a.createElement(l.a,{"aria-label":"close",className:i.closeButton,onClick:n},a.a.createElement(m.a,null))),a.a.createElement(c.a,{className:i.root},a.a.createElement(u.a,null,'Set max height for the track. For example, you can increase this if the layout says "Max height reached"'),a.a.createElement(h.a,{value:g,onChange:e=>{v(e.target.value)},placeholder:"Enter max height for layout"}),a.a.createElement(d.a,null,a.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,onClick:()=>{t.setMaxHeight(""===g||Number.isNaN(+g)?void 0:+g),n()}},"Submit"),a.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:()=>n()},"Cancel"))))}))},1325:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(682),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g);const b=Object(p.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},table:{border:"1px solid #888",margin:e.spacing(4),"& td":{padding:e.spacing(1)}}})));function v({modifications:e}){const{classes:t}=b();return a.a.createElement("table",{className:t.table},a.a.createElement("tbody",null,e.map((([e,t])=>a.a.createElement("tr",{key:e},a.a.createElement("td",null,e),a.a.createElement("td",null,t),a.a.createElement("td",{style:{width:"1em",background:t}}))))))}t.default=Object(i.observer)((function(e){const{classes:t}=b(),{model:n,handleClose:r}=e,{colorBy:i,modificationTagMap:p}=n,g=[...p.entries()];return a.a.createElement(s.a,{open:!0,onClose:r},a.a.createElement(o.a,null,"Color by modifications",a.a.createElement(l.a,{"aria-label":"close",className:t.closeButton,onClick:r},a.a.createElement(m.a,null))),a.a.createElement(c.a,null,a.a.createElement(u.a,null,"You can choose to color the modifications in the BAM/CRAM MM/ML specification using this dialog. Choosing modifications colors the modified positions and can color multiple modification types. Choosing the methylation setting colors methylated and unmethylated CpG."),a.a.createElement(u.a,null,"Note: you can revisit this dialog to see the current mapping of colors to modification type for the modification coloring mode"),a.a.createElement("div",{style:{margin:20}},"modifications"===(null==i?void 0:i.type)?a.a.createElement("div",null,g.length?a.a.createElement(a.a.Fragment,null,"Current modification-type-to-color mapping",a.a.createElement(v,{modifications:[...p.entries()]})):a.a.createElement("div",null,a.a.createElement(u.a,null,"Note: color by modifications is already enabled. Loading current modifications..."),a.a.createElement(h.a,{size:15}))):null,"methylation"===(null==i?void 0:i.type)?a.a.createElement(v,{modifications:[["methylated","red"],["unmethylated","blue"]]}):null),a.a.createElement(d.a,null,a.a.createElement(f.a,{variant:"contained",color:"primary",style:{margin:5},onClick:()=>{n.setColorScheme({type:"modifications"}),r()}},"Modifications"),a.a.createElement(f.a,{variant:"contained",color:"primary",style:{margin:5},onClick:()=>{n.setColorScheme({type:"methylation"}),r()}},"Methylation"),a.a.createElement(f.a,{variant:"contained",color:"secondary",style:{margin:5},onClick:()=>r()},"Cancel"))))}))},1326:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(696),s=n(695),o=n(903),l=n(663),c=n(918),u=n(510),h=n(22),d=n(20),f=n(17),p=n(350),g=n.n(p),m=n(83),b=n(143);const v=Object(h.makeStyles)()((()=>({compact:{paddingRight:0,paddingTop:0,paddingBottom:0}}))),y=["clipPos","flags"];function w(e){const{classes:t}=v(),{feature:n}=e,{flags:r}=n;return a.a.createElement(m.BaseCard,{...e,title:"Flags"},a.a.createElement(m.SimpleValue,{name:"Flag",value:r}),a.a.createElement(i.a,null,["read paired","read mapped in proper pair","read unmapped","mate unmapped","read reverse strand","mate reverse strand","first in pair","second in pair","not primary alignment","read fails platform/vendor quality checks","read is PCR or optical duplicate","supplementary alignment"].map(((e,n)=>{const i=r&1<<n,l=`${e}_${i}`;return a.a.createElement(s.a,{key:l,control:a.a.createElement(o.a,{className:t.compact,checked:Boolean(i),name:e,readOnly:!0}),label:e})}))))}function _({value:e}){const[t,n]=Object(r.useState)(!1),[i,s]=Object(r.useState)(!1),o=String(e);return o.length>100?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{type:"button",onClick:()=>{g()(o),s(!0),setTimeout((()=>{s(!1)}),700)}},i?"Copied to clipboard":"Copy"),a.a.createElement("button",{type:"button",onClick:()=>n((e=>!e))},t?"Show less":"Show more"),a.a.createElement("div",null,t?o:`${o.slice(0,100)}...`)):a.a.createElement("div",null,o)}function E(e){const{tag:t,model:n}=e,r=Object(f.getSession)(n);return a.a.createElement(m.BaseCard,{...e,title:"Supplementary alignments"},a.a.createElement(l.a,null,"List of supplementary alignment locations"),a.a.createElement("ul",null,t.split(";").filter((e=>!!e)).map(((e,t)=>{const[i,s,o,l]=e.split(","),u=function(e){const t=Object(b.e)(e);let n=0;for(let e=0;e<t.length;e+=2){const r=+t[e],a=t[e+1];"H"!==a&&"S"!==a&&"I"!==a&&(n+=r)}return n}(l),h=Math.floor(u/5),d=+s,f=+s+u,p=`${i}:${Math.max(1,d-h)}-${f+h}`,g=`${i}:${d.toLocaleString("en-US")}-${f.toLocaleString("en-US")} (${o})`;return a.a.createElement("li",{key:`${p}-${t}`},a.a.createElement(c.a,{onClick:e=>{e.preventDefault();const{view:t}=n;try{if(!t)throw new Error("No view associated with this view anymore");t.navToLocString(p)}catch(e){console.error(e),r.notify(`${e}`)}},href:"#"},g))}))))}function k({locString:e,model:t}){const n=Object(f.getSession)(t);return a.a.createElement(c.a,{onClick:()=>{const{view:r}=t;try{r?r.navToLocString(e):n.notify("No view associated with this feature detail panel anymore","warning")}catch(e){console.error(e),n.notify(`${e}`)}},href:"#"},e)}t.default=Object(d.observer)((function(e){const{model:t}=e,n=JSON.parse(JSON.stringify(t.featureData)),r=n.tags&&n.tags.SA||n.SA;return a.a.createElement(u.a,{"data-testid":"alignment-side-drawer"},a.a.createElement(m.FeatureDetails,{...e,omit:y,feature:n,formatter:(e,n)=>"next_segment_position"===n?a.a.createElement(k,{model:t,locString:e}):a.a.createElement(_,{value:e})}),r?a.a.createElement(E,{model:t,tag:r}):null,a.a.createElement(w,{feature:n,...e}))}))},1327:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n(906),a=n(631),i=n(42),s=n(51),o=n(53),l=n(72),c=n.n(l),u=n(430),h=n(76),d=n(13),f=n(613);class p extends i.BaseFeatureDataAdapter{async configurePre(e){const t=new r.a({filehandle:Object(s.openLocation)(Object(d.readConfObject)(this.config,"bigBedLocation"),this.pluginManager)}),n=await t.getHeader(e);return{bigbed:t,header:n,parser:new a.a({autoSql:n.autoSql})}}async configure(e){return this.cached||(this.cached=this.configurePre(e).catch((e=>{throw this.cached=void 0,e}))),this.cached}async getRefNames(e){const{header:t}=await this.configure(e);return Object.keys(t.refsByName)}async getHeader(e){const{parser:t,header:n}=await this.configure(e),{version:r,fileType:a}=n,{fields:i,...s}=t.autoSql;return{version:r,fileType:a,autoSql:{...s},fields:Object.fromEntries(i.map((({name:e,comment:t})=>[e,t])))}}getFeatures(e,t={}){const{refName:n,start:r,end:a}=e,{signal:i}=t;return Object(o.ObservableCreate)((async e=>{try{const{parser:s,bigbed:o}=await this.configure(t);(await o.getFeatureStream(n,r,a,{signal:i,basesPerSpan:a-r})).pipe(Object(u.a)(),Object(h.a)((e=>{const t=s.parseLine(`${n}\t${e.start}\t${e.end}\t${e.rest}`,{uniqueId:e.uniqueId}),{blockCount:r,blockSizes:a,blockStarts:i,chromStarts:o}=t;if(r){const n=o||i||[],s=a,l=e.start;t.subfeatures=[];for(let a=0;a<r;a+=1){const r=(n[a]||0)+l,i=r+(s[a]||0);t.subfeatures.push({uniqueId:`${e.uniqueId}-${a}`,start:r,end:i,type:"block"})}}if(void 0===e.uniqueId)throw new Error("invalid bbi feature");const{chromStart:l,chromEnd:u,chrom:h,...d}=t,p=new c.a({id:`${this.id}-${e.uniqueId}`,data:{...d,start:e.start,end:e.end,refName:n}});return function(e){return e.get("thickStart")&&e.get("blockCount")&&0!==e.get("strand")}(p)?Object(f.b)(p):p}))).subscribe(e)}catch(t){e.error(t)}}),t.signal)}freeResources(){}}},1328:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(631),a=n(42),i=n(51),s=n(53),o=n(614),l=n(613);class c extends a.BaseFeatureDataAdapter{constructor(e,t,n){super(e,t,n);const a=this.getConf("bedGzLocation"),s=this.getConf(["index","indexType"]),l=this.getConf(["index","location"]),c=this.getConf("autoSql"),u=this.pluginManager;this.bed=new o.a({filehandle:Object(i.openLocation)(a,u),csiFilehandle:"CSI"===s?Object(i.openLocation)(l,u):void 0,tbiFilehandle:"CSI"!==s?Object(i.openLocation)(l,u):void 0,chunkCacheSize:52428800}),this.columnNames=this.getConf("columnNames"),this.scoreColumn=this.getConf("scoreColumn"),this.parser=new r.a({autoSql:c})}async getRefNames(e={}){return this.bed.getReferenceSequenceNames(e)}async getHeader(){return this.bed.getHeader()}async getNames(){if(this.columnNames.length)return this.columnNames;const e=(await this.bed.getHeader()).split("\n").filter((e=>!!e)),t=e[e.length-1];return(null==t?void 0:t.includes("\t"))?t.slice(1).split("\t").map((e=>e.trim())):void 0}getFeatures(e,t={}){return Object(s.ObservableCreate)((async n=>{const r=await this.bed.getMetadata(),{columnNumbers:a}=r,i=a.ref-1,s=a.start-1,o=a.end-1,c=await this.getNames();await this.bed.getLines(e.refName,e.start,e.end,{lineCallback:(e,t)=>{n.next(Object(l.a)(e,i,s,o,this.scoreColumn,this.parser,`${this.id}-${t}`,c))},signal:t.signal}),n.complete()}),t.signal)}freeResources(){}}c.capabilities=["getFeatures","getRefNames"]},1329:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n(631),a=n(42),i=n(51),s=n(53),o=n(613),l=n(618),c=n(97);class u extends a.BaseFeatureDataAdapter{constructor(){super(...arguments),this.intervalTrees={}}async loadDataP(e={}){const t=this.pluginManager,n=this.getConf("bedLocation"),a=await Object(i.openLocation)(n,t).readFile(e),s=function(e){return 31===e[0]&&139===e[1]&&8===e[2]}(a)?await Object(c.b)(a):a;if(s.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");const o=new TextDecoder("utf8",{fatal:!0}).decode(s).split("\n").filter((e=>!!e)),l=[];let u=0;for(;u<o.length&&o[u].startsWith("#");u++)l.push(o[u]);const h=l.join("\n"),d={};for(;u<o.length;u++){const e=o[u],t=e.indexOf("\t"),n=e.slice(0,t);d[n]||(d[n]=[]),d[n].push(e)}const f=this.getConf("autoSql");return{header:h,features:d,parser:new r.a({autoSql:f}),columnNames:this.getConf("columnNames"),scoreColumn:this.getConf("scoreColumn"),colRef:this.getConf("colRef"),colStart:this.getConf("colStart"),colEnd:this.getConf("colEnd")}}async loadData(e={}){return this.bedFeatures||(this.bedFeatures=this.loadDataP(e).catch((e=>{throw this.bedFeatures=void 0,e}))),this.bedFeatures}async getRefNames(e={}){const{features:t}=await this.loadData(e);return Object.keys(t)}async getHeader(e={}){const{header:t}=await this.loadData(e);return t}async getNames(){const{header:e,columnNames:t}=await this.loadData();if(t.length)return t;const n=e.split("\n").filter((e=>!!e)),r=n[n.length-1];return(null==r?void 0:r.includes("\t"))?r.slice(1).split("\t").map((e=>e.trim())):void 0}async loadFeatureIntervalTreeHelper(e){const{colRef:t,colStart:n,colEnd:r,features:a,parser:i,scoreColumn:s}=await this.loadData(),c=a[e];if(!c)return;const u=await this.getNames(),h=new l.a,d=c.map(((a,l)=>{const c=`${this.id}-${e}-${l}`;return Object(o.a)(a,t,n,r,s,i,c,u)}));for(let e=0;e<d.length;e++){const t=d[e];h.insert([t.get("start"),t.get("end")],t)}return h}async loadFeatureIntervalTree(e){return this.intervalTrees[e]||(this.intervalTrees[e]=this.loadFeatureIntervalTreeHelper(e).catch((t=>{throw this.intervalTrees[e]=void 0,t}))),this.intervalTrees[e]}getFeatures(e,t={}){return Object(s.ObservableCreate)((async t=>{const{start:n,end:r,refName:a}=e,i=await this.loadFeatureIntervalTree(a);null==i||i.search([n,r]).forEach((e=>t.next(e))),t.complete()}),t.signal)}freeResources(){}}u.capabilities=["getFeatures","getRefNames"]},1330:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GenomesFile=t.HubFile=t.TrackDbFile=t.RaStanza=t.RaFile=void 0;const a=r(n(620));t.RaFile=a.default;const i=r(n(621));t.RaStanza=i.default;const s=r(n(1231));t.TrackDbFile=s.default;const o=r(n(1232));t.HubFile=o.default;const l=r(n(1233));t.GenomesFile=l.default},1331:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n(434),i=n(51),s=n(53),o=n(72),l=n.n(o),c=n(614),u=n(889),h=n(13);t.default=class extends r.BaseFeatureDataAdapter{constructor(e,t,n){super(e,t,n);const r=Object(h.readConfObject)(e,"gffGzLocation"),a=Object(h.readConfObject)(e,["index","indexType"]),s=Object(h.readConfObject)(e,["index","location"]),o=Object(h.readConfObject)(e,"dontRedispatch");this.dontRedispatch=o||["chromosome","contig","region"],this.gff=new c.a({filehandle:Object(i.openLocation)(r,this.pluginManager),csiFilehandle:"CSI"===a?Object(i.openLocation)(s,this.pluginManager):void 0,tbiFilehandle:"CSI"!==a?Object(i.openLocation)(s,this.pluginManager):void 0,chunkCacheSize:52428800,renameRefSeqs:e=>e})}async getRefNames(e={}){return this.gff.getReferenceSequenceNames(e)}async getHeader(){return this.gff.getHeader()}getFeatures(e,t={}){return Object(s.ObservableCreate)((async n=>{const r=await this.gff.getMetadata();this.getFeaturesHelper(e,t,r,n,!0)}),t.signal)}async getFeaturesHelper(e,t={},n,r,i,s=e){try{const o=[];if(await this.gff.getLines(e.refName,e.start,e.end,((e,t)=>{o.push(this.parseLine(n.columnNumbers,e,t))})),i&&o.length){let a=1/0,i=-1/0;if(o.forEach((e=>{const t=e.fields[2];if(!this.dontRedispatch.includes(t)){const t=e.start-1;t<a&&(a=t),e.end>i&&(i=e.end)}})),i>e.end||a<e.start)return void this.getFeaturesHelper({...e,start:a,end:i},t,n,r,!1,e)}const l=o.map((e=>(e.fields[8]&&"."!==e.fields[8]?e.fields[8].includes("_lineHash")||(e.fields[8]+=`;_lineHash=${e.lineHash}`):e.fields[8]=`_lineHash=${e.lineHash}`,e.fields.join("\t")))).join("\n");u.a.parseStringSync(l,{parseFeatures:!0,parseComments:!1,parseDirectives:!1,parseSequences:!1}).forEach((e=>this.formatFeatures(e).forEach((e=>{Object(a.doesIntersect2)(e.get("start"),e.get("end"),s.start,s.end)&&r.next(e)})))),r.complete()}catch(e){r.error(e)}}parseLine(e,t,n){const r=t.split("\t");return{start:+r[e.start-1],end:+r[e.end-1],lineHash:n,fields:r}}formatFeatures(e){return e.map((e=>new l.a({data:this.featureData(e),id:`${this.id}-offset-${e.attributes._lineHash[0]}`})))}featureData(e){const t={...e};t.start-=1,"+"===e.strand?t.strand=1:"-"===e.strand?t.strand=-1:"."===e.strand?t.strand=0:t.strand=void 0,t.phase=Number(e.phase),t.refName=e.seq_id,null===e.score&&delete t.score,null===e.phase&&delete t.score;const n=["start","end","seq_id","score","type","source","phase","strand"],r=e.attributes||{};return Object.keys(r).forEach((e=>{let a=e.toLowerCase();if(n.includes(a)&&(a+="2"),null!==r[e]){let n=r[e];Array.isArray(n)&&1===n.length&&([n]=n),t[a]=n}})),t.refName=t.seq_id,e.child_features&&e.child_features.length&&(t.subfeatures=e.child_features.map((e=>e.map((e=>this.featureData(e))))).flat()),delete t.child_features,delete t.data,delete t.derived_features,delete t._linehash,delete t.attributes,delete t.seq_id,t}freeResources(){}}},1332:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n(51),i=n(53),s=n(618),o=n(72),l=n.n(o),c=n(97),u=n(889);t.default=class extends r.BaseFeatureDataAdapter{async loadDataP(){const e=this.pluginManager,t=await Object(a.openLocation)(this.getConf("gffLocation"),e).readFile(),n=function(e){return 31===e[0]&&139===e[1]&&8===e[2]}(t)?await Object(c.b)(t):t;if(n.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");const r=new TextDecoder("utf8",{fatal:!0}).decode(n),i=r.split("\n"),o=[];for(let e=0;e<i.length&&i[e].startsWith("#");e++)o.push(i[e]);return{header:o.join("\n"),intervalTree:u.a.parseStringSync(r,{parseFeatures:!0,parseComments:!1,parseDirectives:!1,parseSequences:!1}).flat().map(((e,t)=>new l.a({data:this.featureData(e),id:`${this.id}-offset-${t}`}))).reduce(((e,t)=>{const n=t.get("refName");return e[n]||(e[n]=new s.a),e[n].insert([t.get("start"),t.get("end")],t),e}),{})}}async loadData(){return this.gffFeatures||(this.gffFeatures=this.loadDataP().catch((e=>{throw this.gffFeatures=void 0,e}))),this.gffFeatures}async getRefNames(e={}){const{intervalTree:t}=await this.loadData();return Object.keys(t)}async getHeader(){const{header:e}=await this.loadData();return e}getFeatures(e,t={}){return Object(i.ObservableCreate)((async t=>{var n;try{const{start:r,end:a,refName:i}=e,{intervalTree:s}=await this.loadData();null===(n=s[i])||void 0===n||n.search([r,a]).forEach((e=>t.next(e))),t.complete()}catch(e){t.error(e)}}),t.signal)}featureData(e){const t={...e};t.start-=1,"+"===e.strand?t.strand=1:"-"===e.strand?t.strand=-1:"."===e.strand?t.strand=0:t.strand=void 0,t.phase=Number(e.phase),t.refName=e.seq_id,null===e.score&&delete t.score,null===e.phase&&delete t.score;const n=["start","end","seq_id","score","type","source","phase","strand"],r=e.attributes||{};return Object.keys(r).forEach((e=>{let a=e.toLowerCase();if(n.includes(a)&&(a+="2"),null!==r[e]){let n=r[e];Array.isArray(n)&&1===n.length&&([n]=n),t[a]=n}})),t.refName=t.seq_id,e.child_features&&e.child_features.length&&(t.subfeatures=e.child_features.map((e=>e.map((e=>this.featureData(e))))).flat()),delete t.child_features,delete t.data,delete t.derived_features,delete t.attributes,delete t.seq_id,t}freeResources(){}}},1333:function(e,t,n){"use strict";n.r(t);var r=n(926),a=n(51),i=n(1249);t.default=class extends i.default{async setupPre(){const e=this.getConf("fastaLocation"),t=this.getConf("faiLocation"),n=this.getConf("gziLocation"),i={fasta:Object(a.openLocation)(e,this.pluginManager),fai:Object(a.openLocation)(t,this.pluginManager),gzi:Object(a.openLocation)(n,this.pluginManager)};return{fasta:new r.a(i)}}}},1334:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n(51);t.default=class extends r.BaseAdapter{async setupPre(){const e=this.pluginManager,t=Object(a.openLocation)(this.getConf("chromSizesLocation"),e),n=await t.readFile("utf8");return Object.fromEntries(n.split("\n").map((e=>e.trim())).filter((e=>!!e)).map((e=>{const[t,n]=e.split("\t");return[t,+n]})))}async setup(){return this.setupP||(this.setupP=this.setupPre().catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRegions(){const e=await this.setup();return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})))}getHeader(){return{}}freeResources(){}}},1335:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(42),a=n(53),i=n(17),s=n(812);class o extends r.BaseFeatureDataAdapter{constructor(){super(...arguments),this.windowSize=1e3,this.windowDelta=1e3,this.gcMode="content"}async configure(){var e;const t=await(null===(e=this.getSubAdapter)||void 0===e?void 0:e.call(this,this.getConf("sequenceAdapter")));if(!t)throw new Error("Error getting subadapter");return t.dataAdapter}async getRefNames(){return(await this.configure()).getRefNames()}getFeatures(e,t){return Object(a.ObservableCreate)((async n=>{var r;const a=await this.configure(),o=1===this.windowSize?1:this.windowSize/2,l=1===this.windowSize;let{start:c,end:u}=e;if(c=Math.max(0,c-o),u+=o,u<0||c>u)return void n.complete();const h=a.getFeatures({...e,start:c,end:u},t),d=(null===(r=(await h.pipe(Object(s.a)()).toPromise())[0])||void 0===r?void 0:r.get("seq"))||"";for(let e=o;e<d.length-o;e+=this.windowDelta){const t=l?d[e]:d.slice(e-o,e+o);let r=0,a=0,s=0;for(let e=0;e<t.length;e++)"c"===t[e]||"C"===t[e]?r++:"g"!==t[e]&&"G"!==t[e]||a++,"N"!==t[e]&&s++;const u=c;let h;"content"===this.gcMode?h=(a+r)/(s||1):"skew"===this.gcMode&&(h=(a-r)/(a+r||1)),n.next(new i.SimpleFeature({uniqueId:`${this.id}_${u+e}`,start:u+e,end:u+e+this.windowDelta,score:h}))}n.complete()}))}freeResources(){}}o.capabilities=["hasLocalStats"]},1336:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n(53),i=n(17),s=n(812);t.default=class extends r.BaseFeatureDataAdapter{async configure(){var e;const t=await(null===(e=this.getSubAdapter)||void 0===e?void 0:e.call(this,this.getConf("sequenceAdapter")));if(!t)throw new Error("Error getting subadapter");return t.dataAdapter}async getRefNames(){return(await this.configure()).getRefNames()}getFeatures(e,t){return Object(a.ObservableCreate)((async n=>{var r;const a=await this.configure();let{start:o,end:l}=e;if(o=Math.max(0,o-1e3),l+=1e3,l<0||o>l)return void n.complete();const c=a.getFeatures({...e,start:o,end:l},t),u=(null===(r=(await c.pipe(Object(s.a)()).toPromise())[0])||void 0===r?void 0:r.get("seq"))||"",h=this.getConf("search"),d=this.getConf("searchForward"),f=this.getConf("searchReverse"),p=this.getConf("caseInsensitive"),g=new RegExp(h,"g"+(p?"i":""));if(h){if(d){const t=u.matchAll(g);for(const r of t){const t=o+(r.index||0);Object(i.doesIntersect2)(t,t+h.length,e.start,e.end)&&n.next(new i.SimpleFeature({uniqueId:`${this.id}-match-${t}-p`,refName:e.refName,start:t,end:t+r[0].length,name:r[0],strand:1}))}}if(f){const t=Object(i.revcom)(u).matchAll(g);for(const r of t){const t=l-(r.index||0);Object(i.doesIntersect2)(t,t+h.length,e.start,e.end)&&n.next(new i.SimpleFeature({uniqueId:`${this.id}-match-${t}-n`,refName:e.refName,start:t-r[0].length,name:r[0],end:t,strand:-1}))}}}n.complete()}))}freeResources(){}}},1337:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n(42),a=n(51),i=n(53),s=n(618),o=n(97),l=n(357),c=n(473);class u extends r.BaseFeatureDataAdapter{async getHeader(){const{header:e}=await this.setup();return e}async getMetadata(){const{header:e}=await this.setup();return new l.a({header:e}).getMetadata()}async setupP(){const e=this.pluginManager,t=await Object(a.openLocation)(this.getConf("vcfLocation"),e).readFile(),n=function(e){return 31===e[0]&&139===e[1]&&8===e[2]}(t)?await Object(o.b)(t):t;if(n.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");const r=(new TextDecoder).decode(n),{header:i,lines:l}=(e=>{const t=[],n=[];return e.split("\n").map((e=>e.trim())).filter((e=>!!e)).forEach((e=>{e.startsWith("#")?t.push(e):e&&n.push(e)})),{header:t.join("\n"),lines:n}})(r);return{header:i,intervalTree:l.map(((e,t)=>{var n;const[r,a,,i,,,,s]=e.split("\t"),o=+a-1;return{line:e,refName:r,start:o,end:+((null===(n=s.match(/END=(\d+)/))||void 0===n?void 0:n[1].trim())||o+i.length),id:t}})).reduce(((e,t)=>{const n=t.refName;return e[n]||(e[n]=new s.a),e[n].insert([t.start,t.end],t),e}),{})}}async setup(){return this.vcfFeatures||(this.vcfFeatures=this.setupP().catch((e=>{throw this.vcfFeatures=void 0,e}))),this.vcfFeatures}async getRefNames(e={}){const{intervalTree:t}=await this.setup();return Object.keys(t)}getFeatures(e,t={}){return Object(i.ObservableCreate)((async t=>{var n;try{const{start:r,end:a,refName:i}=e,{header:s,intervalTree:o}=await this.setup(),u=new l.a({header:s});null===(n=o[i])||void 0===n||n.search([r,a]).forEach((e=>t.next(new c.a({variant:u.parseLine(e.line),parser:u,id:`${this.id}-${e.id}`})))),t.complete()}catch(e){t.error(e)}}),t.signal)}freeResources(){}}u.capabilities=["getFeatures","getRefNames"]},1338:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n(51),i=n(17),s=n(53),o=n(614),l=n(357),c=n(13),u=n(473);t.default=class extends r.BaseFeatureDataAdapter{async configurePre(){const e=Object(c.readConfObject)(this.config,"vcfGzLocation"),t=Object(c.readConfObject)(this.config,["index","location"]),n=Object(c.readConfObject)(this.config,["index","indexType"]),r=Object(a.openLocation)(e,this.pluginManager),i="CSI"===n,s=new o.a({filehandle:r,csiFilehandle:i?Object(a.openLocation)(t,this.pluginManager):void 0,tbiFilehandle:i?void 0:Object(a.openLocation)(t,this.pluginManager),chunkCacheSize:52428800,chunkSizeLimit:1e9}),u=await s.getHeader();return{filehandle:r,vcf:s,parser:new l.a({header:u})}}async configure(){return this.configured||(this.configured=this.configurePre().catch((e=>{throw this.configured=void 0,e}))),this.configured}async getRefNames(e={}){const{vcf:t}=await this.configure();return t.getReferenceSequenceNames(e)}async getHeader(){const{vcf:e}=await this.configure();return e.getHeader()}async getMetadata(){const{parser:e}=await this.configure();return e.getMetadata()}getFeatures(e,t={}){return Object(s.ObservableCreate)((async n=>{const{refName:r,start:a,end:i}=e,{vcf:s,parser:o}=await this.configure();await s.getLines(r,a,i,{lineCallback:(e,t)=>{n.next(new u.a({variant:o.parseLine(e),parser:o,id:`${this.id}-vcf-${t}`}))},...t}),n.complete()}),t.signal)}getFeaturesInMultipleRegions(e,t={}){return Object(s.ObservableCreate)((async n=>{const{vcf:r}=await this.configure(),a=await Object(i.bytesForRegions)(e,r.index),{filehandle:s}=await this.configure(),o=await s.stat();let l=Math.round(a/o.size*100);l>100&&(l=100),l>60&&console.warn(`getFeaturesInMultipleRegions fetching ${l}% of VCF file, but whole-file streaming not yet implemented`),super.getFeaturesInMultipleRegions(e,t).subscribe(n)}))}freeResources(){}}},1339:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),i=n(847),s=n(684),o=n(690),l=n(660),c=n(688),u=n(663),h=n(918),d=n(37),f=n.n(d),p=n(22);const g=Object(p.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},content:{minWidth:800}})));function m({open:e,onClose:t}){const{classes:n}=g();return a.a.createElement(s.a,{open:e,onClose:t,maxWidth:"xl"},a.a.createElement(o.a,null,"JBrowse v",i.a,a.a.createElement(l.a,{className:n.closeButton,onClick:()=>t(),size:"large"},a.a.createElement(f.a,null))),a.a.createElement(c.a,{className:n.content},a.a.createElement(u.a,null,"JBrowse is a GMOD project  2019-2021, The Evolutionary Software Foundation"),a.a.createElement(u.a,null,"Here are some resources and documentation. Please report the version number above when asking questions. Thanks!"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/discussions",target:"_blank",rel:"noopener noreferrer"},"Question & answer forum")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},"Report a bug")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://jbrowse.org/jb2/docs/user_guide",target:"_blank",rel:"noopener noreferrer"},"User guide")),a.a.createElement("li",null,a.a.createElement(h.a,{href:"https://jbrowse.org/jb2/docs/",target:"_blank",rel:"noopener noreferrer"},"Documentation")))))}},1340:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(688),l=n(689),c=n(704),u=n(705),h=n(687),d=n(673),f=n(20);t.default=Object(f.observer)((function({modalInfo:e={},setModalInfo:t}){const{name:n,dereferenceTypeCount:r,safelyBreakConnection:f}=e;return a.a.createElement(i.a,{open:!0},a.a.createElement(s.a,null,'Close connection "',n,'"'),a.a.createElement(o.a,null,r?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,null,"Closing this connection will close:"),a.a.createElement(c.a,null,Object.entries(r).map((([e,t])=>a.a.createElement(u.a,{key:e},`${t} ${e}`))))):null,a.a.createElement(l.a,null,"Are you sure you want to close this connection?")),a.a.createElement(h.a,null,a.a.createElement(d.a,{onClick:()=>t(),color:"primary"},"Cancel"),a.a.createElement(d.a,{variant:"contained",onClick:e?()=>{null==f||f(),t()}:()=>{},color:"primary"},"OK")))}))},1341:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(688),l=n(689),c=n(687),u=n(673),h=n(20);t.default=Object(h.observer)((function({deleteDialogDetails:e,session:t,handleClose:n}){const{connectionConf:r,name:h}=e;return a.a.createElement(i.a,{open:!0},a.a.createElement(s.a,null,'Delete connection "',h,'"'),a.a.createElement(o.a,null,a.a.createElement(l.a,null,"Are you sure you want to delete this connection?")),a.a.createElement(c.a,null,a.a.createElement(u.a,{onClick:()=>n(),color:"primary"},"Cancel"),a.a.createElement(u.a,{variant:"contained",color:"primary",onClick:()=>{var e;r&&(null===(e=t.deleteConnection)||void 0===e||e.call(t,r)),n()}},"OK")))}))},1342:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(688),c=n(663),u=n(724),h=n(687),d=n(673),f=n(22),p=n(37),g=n.n(p),m=n(20),b=n(13);const v=Object(f.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{margin:e.spacing(4),width:500}})));t.default=Object(m.observer)((function({session:e,handleClose:t,breakConnection:n}){const{classes:r}=v(),{adminMode:f,connections:p,sessionConnections:m}=e;return a.a.createElement(i.a,{open:!0,onClose:t,maxWidth:"lg"},a.a.createElement(s.a,null,"Delete connections",a.a.createElement(o.a,{className:r.closeButton,onClick:()=>t()},a.a.createElement(g.a,null))),a.a.createElement(l.a,null,a.a.createElement(c.a,null,"Click the X icon to delete the connection from your config completely"),a.a.createElement("div",{className:r.connectionContainer},p.map((e=>{const t=Object(b.readConfObject)(e,"name");return a.a.createElement(c.a,{key:`conn-${t}`},f||(null==m?void 0:m.includes(e))?a.a.createElement(o.a,{onClick:()=>n(e,!0)},a.a.createElement(g.a,{color:"error"})):a.a.createElement(u.a,{title:"Unable to delete connection in config file as non-admin user"},a.a.createElement(o.a,null,a.a.createElement(g.a,{color:"disabled"}))),t)})),p.length?null:a.a.createElement(c.a,null,"No connections found"))),a.a.createElement(h.a,null,a.a.createElement(d.a,{onClick:()=>t(),variant:"contained",color:"primary"},"Close")))}))},1343:function(e,t,n){"use strict";n.r(t),n.d(t,"ellipses",(function(){return y}));var r=n(1),a=n.n(r),i=n(684),s=n(690),o=n(660),l=n(688),c=n(663),u=n(695),h=n(903),d=n(687),f=n(673),p=n(22),g=n(37),m=n.n(g),b=n(20),v=n(13);function y(e){return e.length>20?`${e.slice(0,20)}...`:e}const w=Object(p.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},connectionContainer:{width:500,margin:e.spacing(4)}})));t.default=Object(b.observer)((function({session:e,handleClose:t,breakConnection:n}){const{classes:r}=w(),{connections:p,connectionInstances:g=[]}=e;return a.a.createElement(i.a,{open:!0,onClose:t,maxWidth:"lg"},a.a.createElement(s.a,null,"Turn on/off connections",a.a.createElement(o.a,{className:r.closeButton,onClick:()=>t()},a.a.createElement(m.a,null))),a.a.createElement(l.a,null,a.a.createElement(c.a,null,"Use the checkbox to turn on/off connections"),a.a.createElement("div",{className:r.connectionContainer},p.map((t=>{const r=Object(v.readConfObject)(t,"name"),i=Object(v.readConfObject)(t,"assemblyNames"),s=g.find((e=>r===e.name));return a.a.createElement(u.a,{key:t.connectionId,control:a.a.createElement(h.a,{checked:!!s,onChange:()=>{var r;s?n(t):null===(r=e.makeConnection)||void 0===r||r.call(e,t)},color:"primary"}),label:`${r} (${y(i.join(","))})`})})),p.length?null:a.a.createElement(c.a,null,"No connections found"))),a.a.createElement(d.a,null,a.a.createElement(f.a,{onClick:()=>t(),variant:"contained",color:"primary"},"Close")))}))},1345:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(692),s=n(515),o=n(711),l=n(22),c=n(191),u=n.n(c),h=n(1223),d=n(17),f=n(20),p=n(545),g=n.n(p),m=n(152),b=n.n(m),v=n(619),y=n.n(v),w=n(10),_=n(659),E=n(636),k=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function S(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],a=t[n],!(r===a||k(r)&&k(a)))return!1;var r,a;return!0}var C=function(e,t){var n;void 0===t&&(t=S);var r,a=[],i=!1;return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return i&&n===this&&t(s,a)||(r=e.apply(this,s),i=!0,n=this,a=s),r}},x=(n(12),"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()});function O(e){cancelAnimationFrame(e.id)}function N(e,t){var n=x();var r={id:requestAnimationFrame((function a(){x()-n>=t?e.call(null):r.id=requestAnimationFrame(a)}))};return r}var A=null;function B(e){if(void 0===e&&(e=!1),null===A||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?A="positive-descending":(t.scrollLeft=1,A=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),A}return A}var R=function(e,t){return e};function I(e){var t,n=e.getItemOffset,a=e.getEstimatedTotalSize,i=e.getItemSize,s=e.getOffsetForIndexAndAlignment,o=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,h=e.validateProps;return t=function(e){function t(t){var r;return(r=e.call(this,t)||this)._instanceProps=c(r.props,Object(_.a)(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:Object(_.a)(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=C((function(e,t,n,a){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:a})})),r._callOnScroll=void 0,r._callOnScroll=C((function(e,t,n){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,a=r.props,s=a.direction,o=a.itemSize,l=a.layout,c=r._getItemStyleCache(u&&o,u&&l,u&&s);if(c.hasOwnProperty(e))t=c[e];else{var h=n(r.props,e,r._instanceProps),d=i(r.props,e,r._instanceProps),f="horizontal"===s||"horizontal"===l,p="rtl"===s,g=f?h:0;c[e]=t={position:"absolute",left:p?void 0:g,right:p?g:void 0,top:f?0:h,height:f?"100%":d,width:f?d:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=C((function(e,t,n){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,a=t.scrollLeft,i=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===a)return null;var t=r.props.direction,s=a;if("rtl"===t)switch(B()){case"negative":s=-a;break;case"positive-descending":s=i-n-a}return s=Math.max(0,Math.min(s,i-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:s,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,a=t.scrollHeight,i=t.scrollTop;r.setState((function(e){if(e.scrollOffset===i)return null;var t=Math.max(0,Math.min(i,a-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){null!==r._resetIsScrollingTimeoutId&&O(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=N(r._resetIsScrolling,150)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}Object(E.a)(t,e),t.getDerivedStateFromProps=function(e,t){return j(e,t),h(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props.itemCount,r=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1)),this.scrollTo(s(this.props,e,t,r,this._instanceProps))},d.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var a=this._outerRef;"horizontal"===t||"horizontal"===r?a.scrollLeft=n:a.scrollTop=n}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,a=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(B()){case"negative":i.scrollLeft=-a;break;case"positive-ascending":i.scrollLeft=a;break;default:var s=i.clientWidth,o=i.scrollWidth;i.scrollLeft=o-s-a}else i.scrollLeft=a;else i.scrollTop=a}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&O(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,n=e.className,i=e.direction,s=e.height,o=e.innerRef,l=e.innerElementType,c=e.innerTagName,u=e.itemCount,h=e.itemData,d=e.itemKey,f=void 0===d?R:d,p=e.layout,g=e.outerElementType,m=e.outerTagName,b=e.style,v=e.useIsScrolling,y=e.width,_=this.state.isScrolling,E="horizontal"===i||"horizontal"===p,k=E?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),C=S[0],x=S[1],O=[];if(u>0)for(var N=C;N<=x;N++)O.push(Object(r.createElement)(t,{data:h,key:f(N,h),index:N,isScrolling:v?_:void 0,style:this._getItemStyle(N)}));var A=a(this.props,this._instanceProps);return Object(r.createElement)(g||m||"div",{className:n,onScroll:k,ref:this._outerRefSetter,style:Object(w.a)({position:"relative",height:s,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},b)},Object(r.createElement)(l||c||"div",{children:O,ref:o,style:{height:E?"100%":A,pointerEvents:_?"none":void 0,width:E?A:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],a=e[3];this._callOnItemsRendered(t,n,r,a)}if("function"==typeof this.props.onScroll){var i=this.state,s=i.scrollDirection,o=i.scrollOffset,l=i.scrollUpdateWasRequested;this._callOnScroll(s,o,l)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,a=r.isScrolling,i=r.scrollDirection,s=r.scrollOffset;if(0===t)return[0,0,0,0];var c=o(this.props,s,this._instanceProps),u=l(this.props,c,s,this._instanceProps),h=a&&"backward"!==i?1:Math.max(1,n),d=a&&"forward"!==i?1:Math.max(1,n);return[Math.max(0,c-h),Math.max(0,Math.min(t-1,u+d)),c,u]},t}(r.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var j=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},M=function(e,t,n){var r=e.itemSize,a=n.itemMetadataMap,i=n.lastMeasuredIndex;if(t>i){var s=0;if(i>=0){var o=a[i];s=o.offset+o.size}for(var l=i+1;l<=t;l++){var c=r(l);a[l]={offset:s,size:c},s+=c}n.lastMeasuredIndex=t}return a[t]},T=function(e,t,n,r,a){for(;r<=n;){var i=r+Math.floor((n-r)/2),s=M(e,i,t).offset;if(s===a)return i;s<a?r=i+1:s>a&&(n=i-1)}return r>0?r-1:0},L=function(e,t,n,r){for(var a=e.itemCount,i=1;n<a&&M(e,n,t).offset<r;)n+=i,i*=2;return T(e,t,Math.min(n,a-1),Math.floor(n/2),r)},P=function(e,t){var n=e.itemCount,r=t.itemMetadataMap,a=t.estimatedItemSize,i=t.lastMeasuredIndex,s=0;if(i>=n&&(i=n-1),i>=0){var o=r[i];s=o.offset+o.size}return s+(n-i-1)*a},z=I({getItemOffset:function(e,t,n){return M(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:P,getOffsetForIndexAndAlignment:function(e,t,n,r,a){var i=e.direction,s=e.height,o=e.layout,l=e.width,c="horizontal"===i||"horizontal"===o?l:s,u=M(e,t,a),h=P(e,a),d=Math.max(0,Math.min(h-c,u.offset)),f=Math.max(0,u.offset-c+u.size);switch("smart"===n&&(n=r>=f-c&&r<=d+c?"auto":"center"),n){case"start":return d;case"end":return f;case"center":return Math.round(f+(d-f)/2);default:return r>=f&&r<=d?r:r<f?f:d}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var r=t.itemMetadataMap,a=t.lastMeasuredIndex;return(a>0?r[a].offset:0)>=n?T(e,t,a,0,n):L(e,t,Math.max(0,a),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,r){for(var a=e.direction,i=e.height,s=e.itemCount,o=e.layout,l=e.width,c="horizontal"===a||"horizontal"===o?l:i,u=M(e,t,r),h=n+c,d=u.offset+u.size,f=t;f<s-1&&d<h;)f++,d+=M(e,f,r).size;return f},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,r){void 0===r&&(r=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});var F=n(886),q=n.n(F);var $=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}},D=function(){},U=function(e,t){return void 0===t&&(t=null),{child:null,isShown:!t||t.public.isOpen&&t.isShown,parent:t,public:e,sibling:null,visited:!1}},H=function(e,t){return(0,t.getRecordData)(e).data.id},W=function(e){return function(t,n,r){return r.refresh?function(e,t,n){var r=e.createRecord,a=t.buildingTaskTimeout,i=t.placeholder,s=t.async,o=void 0!==s&&s,l=t.treeWalker,c=o&&void 0!==n.records,u=n.records,h=[],d=new Map,f=a?{timeout:a}:void 0,p=new WeakMap,g=l(),m=g.next().value,b=r(m.data,n,void 0,c?u.get(m.data.id):void 0);d.set(b.public.data.id,b),p.set(b,m);var v=b,y=!0,w=b,_=void 0!==i&&!(null===i&&!n.order),E=_?function(e){return e.timeRemaining()>0}:function(){return!0},k=function e(t){for(;null!==v;){if(!E(t))return void requestIdleCallback(e,f);if(v.visited)v.visited=!1,v=null!==v.sibling?v.sibling:v.parent,w=v;else{var a=g.next(p.get(v)).value;if(void 0===a){y?y=!1:(v.isShown&&h.push(v.public.data.id),v.visited=null!==v.child,v=null!==v.child?v.child:null!==v.sibling?v.sibling:v.parent),w=v;continue}var i=r(a.data,n,y?void 0:v,c?u.get(a.data.id):void 0);d.set(i.public.data.id,i),p.set(i,a),y||w!==v?w.sibling=i:w.child=i,w=i}}_&&n.setState({order:h,records:d,updateRequest:{}})};return _?requestIdleCallback(k,f):k(),void 0!==i&&o&&n.order?n:{order:h,records:d}}(e,t,n):function(e,t){var n=e.order,r=e.records,a=t.opennessState;if("object"!=typeof a)return null;for(var i in a)if(r.has(i)){var s=a[i],o=r.get(i),l="boolean"==typeof s?{open:s}:s,c=l.open,u=l.subtreeCallback,h=void 0===u?D:u,d=D,f=D;o.isShown&&(c?function(){for(var e=n.indexOf(i),t=o;null!==t;){if(null!==t.sibling){t=t.sibling;break}t=t.parent}var r=null===t?n.length-1-e:n.indexOf(t.public.data.id)-1-e,a=[[e+1,r]];d=function(t){if(t.isShown=!t.parent||t.parent.public.isOpen&&t.parent.isShown,t.isShown){var n=a[a.length-1];n.push(t.public.data.id),32770===n.length&&a.push([e+1+32768*a.length,0])}},f=function(){for(var e=0;e<a.length;e++){var t;(t=n).splice.apply(t,a[e])}}}():o.public.isOpen&&function(){var e=n.indexOf(i),t=0;d=function(e){e.isShown&&(t+=1),e.isShown=!e.parent||e.parent.public.isOpen&&e.parent.isShown},f=function(){n.splice(e+1,t)}}());for(var p=o;null!==p;)p.visited?(p.visited=!1,p=p===o?null:null!==p.sibling?p.sibling:p.parent):(p.public.isOpen=p===o?c:p.public.isOpen,h(p.public,o.public),p!==o&&d(p),p.visited=null!==p.child,p=null!==p.child?p.child:p===o?null:null!==p.sibling?p.sibling:p.parent);f()}return{order:n,records:r,updateRequest:{}}}(n,r)}},V=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).getRecordData=a.getRecordData.bind(q()(a)),a.state={list:Object(r.createRef)(),recomputeTree:a.recomputeTree.bind(q()(a)),setState:a.setState.bind(q()(a))},a}y()(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.listRef,r=void 0===n?null:n,a=e.treeWalker,i=t.computeTree,s=t.list,o=t.order,l=t.treeWalker;return b()({attachRefs:$([s,r])},a===l&&o?null:i(e,t,{refresh:!0}),{treeWalker:a})};var n=t.prototype;return n.getItemData=function(){var e=this.props,t=e.children,n=e.itemData;return{component:t,getRecordData:this.getRecordData,treeData:n}},n.getRecordData=function(e){var t=this.state,n=t.order;return t.records.get(n[e]).public},n.recomputeTree=function(e){var t=this;return new Promise((function(n){t.setState((function(n){return n.computeTree(t.props,n,{opennessState:e})}),n)}))},n.scrollTo=function(e){var t;null==(t=this.state.list.current)||t.scrollTo(e)},n.scrollToItem=function(e,t){var n;null==(n=this.state.list.current)||n.scrollToItem(this.state.order.indexOf(e),t)},t}(r.PureComponent);V.defaultProps={rowComponent:function(e){var t=e.index,n=e.data,r=n.component,i=n.getRecordData,s=n.treeData,o=e.style,l=e.isScrolling,c=i(t);return a.a.createElement(r,Object.assign({isScrolling:l,style:o,treeData:s},c))}};var Z=V,G=(W({createRecord:function(e,t,n,r){var a=t.recomputeTree;return U({data:e,isOpen:r?r.public.isOpen:e.isOpenByDefault,setOpen:function(t){var n;return a(((n={})[e.id]=t,n))}},n)}}),W({createRecord:function(e,t,n,r){var a=t.recomputeTree,i=t.resetAfterId,s=U({data:e,height:r?r.public.height:e.defaultHeight,isOpen:r?r.public.isOpen:e.isOpenByDefault,resize:function(e,t){s.public.height=e,i(s.public.data.id,t)},setOpen:function(t){var n;return a(((n={})[e.id]=t,n))}},n);return s}})),X=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).getItemSize=r.getItemSize.bind(q()(r)),r.state=b()({},r.state,{computeTree:G,resetAfterId:r.resetAfterId.bind(q()(r))}),r}y()(t,e);var n=t.prototype;return n.resetAfterId=function(e,t){var n;void 0===t&&(t=!1);var r=this.state,a=r.list,i=r.order;null==(n=a.current)||n.resetAfterIndex(i.indexOf(e),t)},n.recomputeTree=function(t){var n=this;return e.prototype.recomputeTree.call(this,t).then((function(){var e;null==(e=n.state.list.current)||e.resetAfterIndex(0,!0)}))},n.render=function(){var e=this.props,t=(e.children,e.placeholder),n=e.itemSize,r=e.rowComponent,i=(e.treeWalker,g()(e,["children","placeholder","itemSize","rowComponent","treeWalker"])),s=this.state,o=s.attachRefs,l=s.order;return t&&0===l.length?t:a.a.createElement(z,Object.assign({},i,{itemCount:l.length,itemData:this.getItemData(),itemKey:H,itemSize:null!=n?n:this.getItemSize,ref:o}),r)},n.getItemSize=function(e){return this.getRecordData(e).height},t}(Z),K=n(660),Y=n(902),J=n(746),Q=n(701),ee=n(887),te=n.n(ee),ne=n(435),re=n.n(ne),ae=n(1225),ie=n.n(ae),se=n(144),oe=n(115),le=n.n(oe),ce=n(13),ue=n(21);const he=Object(r.lazy)((()=>n.e(0).then(n.bind(null,1340)))),de=Object(r.lazy)((()=>n.e(0).then(n.bind(null,1341)))),fe=Object(r.lazy)((()=>n.e(0).then(n.bind(null,1342)))),pe=Object(r.lazy)((()=>n.e(0).then(n.bind(null,1343)))),ge=Object(l.makeStyles)()((e=>({searchBox:{margin:e.spacing(2)},menuIcon:{marginRight:e.spacing(1),marginBottom:0}})));var me=Object(f.observer)((function({model:e,setHeaderHeight:t,setAssemblyIdx:n,assemblyIdx:i}){const{classes:s}=ge(),o=Object(d.getSession)(e),[l,c]=Object(r.useState)(),[u,h]=Object(r.useState)(),[f,p]=Object(r.useState)(),[g,m]=Object(r.useState)(),[b,v]=Object(r.useState)(),[y,w]=Object(r.useState)(!1),[_,E]=Object(r.useState)(!1),{assemblyNames:k}=e;function S(e,t){const n=Object(ce.readConfObject)(e,"name"),r=o.prepareToBreakConnection(e);if(r){const[t,a]=r;Object.keys(a).length>0?m({connectionConf:e,safelyBreakConnection:t,dereferenceTypeCount:a,name:n}):t()}t&&v({name:n,connectionConf:e})}const C=[{label:"Turn on/off connections...",onClick:()=>E(!0)}];Object(d.isSessionModelWithConnections)(o)&&(C.unshift({label:"Add connection",onClick:()=>{Object(d.isSessionModelWithWidgets)(o)&&o.showWidget(o.addWidget("AddConnectionWidget","addConnectionWidget"))}}),C.push({label:"Delete connections...",onClick:()=>w(!0)}));const x=[{label:"Add track...",onClick:()=>{Object(d.isSessionModelWithWidgets)(o)&&o.showWidget(o.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))}},...k.length>1?[{label:"Select assembly...",subMenu:k.map(((e,t)=>({label:e,onClick:()=>n(t)})))}]:[]],O=Object(ue.getEnv)(e).pluginManager.evaluateExtensionPoint("TrackSelector-multiTrackMenuItems",[],{session:o});return a.a.createElement("div",{ref:e=>t((null==e?void 0:e.getBoundingClientRect().height)||0),"data-testid":"hierarchical_track_selector"},a.a.createElement("div",{style:{display:"flex"}},Object(d.isSessionWithAddTracks)(o)&&a.a.createElement(K.a,{className:s.menuIcon,onClick:e=>p(e.currentTarget)},a.a.createElement(re.a,null)),o.makeConnection&&a.a.createElement(K.a,{className:s.menuIcon,onClick:e=>c(e.currentTarget)},a.a.createElement(se.Cable,null)),e.selection.length?a.a.createElement(K.a,{className:s.menuIcon,onClick:e=>h(e.currentTarget)},a.a.createElement(Y.a,{badgeContent:e.selection.length,color:"primary"},a.a.createElement(ie.a,null))):null,a.a.createElement(J.a,{className:s.searchBox,label:"Filter tracks",value:e.filterText,onChange:t=>e.setFilterText(t.target.value),fullWidth:!0,InputProps:{endAdornment:a.a.createElement(Q.a,{position:"end"},a.a.createElement(K.a,{color:"secondary",onClick:e.clearFilterText},a.a.createElement(te.a,null)))}})),a.a.createElement(le.a,{anchorEl:l,open:Boolean(l),onMenuItemClick:(e,t)=>{t(),c(void 0)},onClose:()=>c(void 0),menuItems:C}),a.a.createElement(le.a,{anchorEl:f,open:Boolean(f),onMenuItemClick:(e,t)=>{t(),p(void 0)},onClose:()=>p(void 0),menuItems:x}),a.a.createElement(le.a,{anchorEl:u,open:Boolean(u),onMenuItemClick:(e,t)=>{t(),h(void 0)},onClose:()=>h(void 0),menuItems:[{label:"Clear",onClick:()=>e.clearSelection()},...O.map((t=>({...t,..."onClick"in t?{onClick:()=>t.onClick(e)}:{}})))]}),a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null)},g?a.a.createElement(he,{modalInfo:g,setModalInfo:m}):null,b?a.a.createElement(de,{handleClose:()=>v(void 0),deleteDialogDetails:b,session:o}):null,y?a.a.createElement(fe,{handleClose:()=>w(!1),breakConnection:S,session:o}):null,_?a.a.createElement(pe,{handleClose:()=>E(!1),session:o,breakConnection:S}):null))})),be=n(663),ve=n(724),ye=n(695),we=n(903),_e=n(524),Ee=n.n(_e),ke=n(764),Se=n.n(ke),Ce=n(1226),xe=n.n(Ce);function Oe(e){return((null==e?void 0:e.children.map((e=>e.children.length?Oe(e):e.conf)))||[]).flat(1/0)}const Ne=Object(l.makeStyles)()((e=>({compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:"#eee"}},contrastColor:{color:e.palette.secondary.contrastText},accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:e.palette.tertiary.main,color:e.palette.tertiary.contrastText,width:"100%",display:"flex",paddingLeft:5},accordionText:{margin:"auto 0"}})));function Ae(e,t=new Map){e.id&&e.children.length&&t.set(e.id,e);for(let n=0;n<e.children.length;n++){Ae(e.children[n],t)}return t}function Be(e=""){return e.endsWith("(Unsupported)")||e.endsWith("(Unknown)")}function Re(e){var t,n;const{data:i,isOpen:s,style:o,setOpen:l}=e,{checked:c,conf:u,drawerPosition:h,id:f,isLeaf:p,model:g,name:m,nestingLevel:b,onChange:v,selected:y,toggleCollapse:w,tree:_}=i,{classes:E}=Ne(),[k,S]=Object(r.useState)(null),[C,x]=Object(r.useState)(),O=10*b+(p?10:0),N=u&&Object(ce.readConfObject)(u,["description"])||"";return a.a.createElement("div",{style:o,className:p?void 0:E.accordionBase},new Array(b).fill(0).map(((e,t)=>a.a.createElement("div",{key:`mark-${t}`,style:{left:10*t+4,height:null==o?void 0:o.height},className:E.nestingLevelMarker}))),a.a.createElement("div",{className:p?void 0:E.accordionCard,onClick:()=>{k||(w(f),l(!s))},style:{marginLeft:O,whiteSpace:"nowrap",width:"100%"}},a.a.createElement("div",{className:p?void 0:E.accordionColor},p?a.a.createElement(a.a.Fragment,null,a.a.createElement(ve.a,{title:N+(y?" (in selection)":""),placement:"left"===h?"right":"left"},a.a.createElement(ye.a,{className:E.checkboxLabel,control:a.a.createElement(we.a,{className:E.compactCheckbox,checked:c,onChange:()=>v(f),disabled:Be(m),inputProps:{"data-testid":`htsTrackEntry-${f}`}}),label:a.a.createElement("div",{style:{background:y?"#cccc":void 0,padding:1}},m)})),a.a.createElement(K.a,{onClick:e=>x({target:e.currentTarget,id:f,conf:u}),style:{padding:0},color:"secondary","data-testid":`htsTrackEntryMenu-${f}`},a.a.createElement(xe.a,null))):a.a.createElement("div",{className:E.accordionText},a.a.createElement(be.a,null,s?a.a.createElement(Ee.a,null):a.a.createElement(Se.a,null),m,a.a.createElement(K.a,{onClick:e=>{S(e.currentTarget),e.stopPropagation()},className:E.contrastColor},a.a.createElement(xe.a,null)))),k?a.a.createElement(le.a,{anchorEl:k,menuItems:[{label:"Add to selection",onClick:()=>g.addToSelection(Oe(Ae(_).get(f)))},{label:"Remove from selection",onClick:()=>g.removeFromSelection(Oe(Ae(_).get(f)))}],onMenuItemClick:(e,t)=>{t(),S(null)},open:Boolean(k),onClose:()=>S(null)}):null,C?a.a.createElement(le.a,{anchorEl:null==C?void 0:C.target,menuItems:[...(null===(n=(t=Object(d.getSession)(g)).getTrackActionMenuItems)||void 0===n?void 0:n.call(t,C.conf))||[],{label:"Add to selection",onClick:()=>g.addToSelection([C.conf])},...y?[{label:"Remove from selection",onClick:()=>g.removeFromSelection([C.conf])}]:[]],onMenuItemClick:(e,t)=>{t(),x(void 0)},open:Boolean(C),onClose:()=>x(void 0)}):null)))}const Ie=Object(l.makeStyles)()((e=>({fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)}})));function je(e,t,n,r){const a=!!e.conf;return{data:{defaultHeight:a?22:40,isLeaf:a,isOpenByDefault:!0,nestingLevel:t,selected:!!r[e.id],...e,...n},nestingLevel:t,node:e}}const Me=Object(f.observer)((({height:e,tree:t,model:n})=>{const{filterText:i,selection:s,view:o}=n,l=Object(r.useRef)(null),c=Object(d.getSession)(n),{drawerPosition:u}=c,h=Object(r.useMemo)((()=>Object.fromEntries(s.map((e=>[e.trackId,e])))),[s]),f=Object(r.useMemo)((()=>({onChange:e=>o.toggleTrack(e),toggleCollapse:e=>n.toggleCategory(e),tree:t,model:n,drawerPosition:u})),[o,n,u,t]),p=Object(r.useCallback)((function*(){for(let e=0;e<t.children.length;e++){const n=t.children[e];yield je(n,0,f,h)}for(;;){const e=yield;for(let t=0;t<e.node.children.length;t++){const n=e.node.children[t];yield je(n,e.nestingLevel+1,f,h)}}}),[t,f,h]);return Object(r.useEffect)((()=>{l.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})}),[t,i]),a.a.createElement(a.a.Fragment,null,a.a.createElement(X,{ref:l,treeWalker:p,height:e},Re))})),Te=({tree:e,model:t,offset:n})=>"undefined"==typeof jest?a.a.createElement(h.a,{disableWidth:!0},(({height:r})=>a.a.createElement(Me,{height:r-n,model:t,tree:e}))):a.a.createElement(Me,{height:9e3,model:t,tree:e}),Le=({overrideDimensions:e,children:t})=>e?a.a.createElement("div",{style:{...e}},t):a.a.createElement(a.a.Fragment,null,t),Pe=Object(f.observer)((({model:e,toolbarHeight:t,overrideDimensions:n})=>{const{classes:l}=Ie(),c=Object(d.getSession)(e),[h,f]=Object(r.useState)(null);function p(){f(null)}const g=Object(d.isSessionModelWithConnections)(c),m=Object(d.isSessionWithAddTracks)(c);return a.a.createElement(Le,{overrideDimensions:n},a.a.createElement(ze,{model:e,toolbarHeight:t}),m||g?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{color:"secondary",className:l.fab,onClick:e=>f(e.currentTarget)},a.a.createElement(u.a,null)),a.a.createElement(s.a,{anchorEl:h,open:Boolean(h),onClose:()=>f(null)},g?a.a.createElement(o.a,{onClick:()=>{p(),Object(d.isSessionModelWithWidgets)(c)&&c.showWidget(c.addWidget("AddConnectionWidget","addConnectionWidget"))}},"Add connection"):null,m?a.a.createElement(o.a,{onClick:()=>{p(),Object(d.isSessionModelWithWidgets)(c)&&c.showWidget(c.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))}},"Add track"):null)):null)})),ze=Object(f.observer)((({model:e,toolbarHeight:t=0})=>{const[n,i]=Object(r.useState)(0),[s,o]=Object(r.useState)(0),{assemblyNames:l}=e,c=l[n];return c?a.a.createElement(a.a.Fragment,null,a.a.createElement(me,{model:e,setHeaderHeight:o,setAssemblyIdx:i,assemblyIdx:n}),a.a.createElement(Te,{tree:e.hierarchy(c),model:e,offset:t+s})):null}));t.default=Pe},1346:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(476),a=n.n(r),i=n(145),s=n.n(i),o=n(88),l=n.n(o);async function c(e,t,n={}){const{defaultContent:r={}}=n;let a;try{return a=await t(e,{encoding:"utf8"}),JSON.parse(a)}catch(e){if("ENOENT"===e.code||404===e.status)return r;throw e}}class u{constructor({readFile:e,cacheSize:t=100}){if(this.topList=[],this.chunkCache=new l.a({cache:new s.a({maxSize:t}),fill:this.readChunkItems.bind(this)}),this.readFile=e,!this.readFile)throw new Error('must provide a "readFile" function')}importExisting(e,t,n,r,a){this.topList=e,this.attrs=t,this.start=t.makeFastGetter("Start"),this.end=t.makeFastGetter("End"),this.lazyClass=a,this.baseURL=n,this.lazyUrlTemplate=r}binarySearch(e,t,n){let r,a=-1,i=e.length;for(;i-a>1;)r=a+i>>>1,n(e[r])>=t?i=r:a=r;return n===this.end?i:a}readChunkItems(e){return c(a.a.resolve(this.baseURL,this.lazyUrlTemplate.replace(/\{Chunk\}/gi,e)),this.readFile,{defaultContent:[]})}async*iterateSublist(e,t,n,r,a,i,s){const o=this.attrs.makeGetter("Chunk"),l=this.attrs.makeGetter("Sublist"),c=[];for(let u=this.binarySearch(e,t,a);u<e.length&&u>=0&&r*i(e[u])<r*n;u+=r){if(e[u][0]===this.lazyClass){const t=o(e[u]),n=this.chunkCache.get(t,t).then((e=>[e,t]));c.push(n)}else yield[e[u],s.concat(u)];const h=l(e[u]);h&&(yield*this.iterateSublist(h,t,n,r,a,i,s.concat(u)))}for(let e=0;e<c.length;e+=1){const[o,l]=await c[e];o&&(yield*this.iterateSublist(o,t,n,r,a,i,[...s,l]))}}async*iterate(e,t){const n=e>t?-1:1,r=e>t?this.start:this.end,a=e>t?this.end:this.start;this.topList.length>0&&(yield*this.iterateSublist(this.topList,e,t,n,r,a,[0]))}async histogram(e,t,n){const r=new Array(n);r.fill(0);const a=(t-e)/n;for await(const i of this.iterate(e,t)){const t=Math.max(0,(this.start(i)-e)/a|0),s=Math.min(n,(this.end(i)-e)/a|0);for(let e=t;e<=s;e+=1)r[e]+=1}return r}}var h=class{constructor(e){this.classes=e,this.fields=[];for(let t=0;t<e.length;t+=1){this.fields[t]={};for(let n=0;n<e[t].attributes.length;n+=1)this.fields[t][e[t].attributes[n]]=n+1;void 0===e[t].proto&&(e[t].proto={}),void 0===e[t].isArrayAttr&&(e[t].isArrayAttr={})}}attrIndices(e){return this.classes.map((t=>t.attributes.indexOf(e)+1||t.attributes.indexOf(e.toLowerCase())+1||void 0))}get(e,t){if(t in this.fields[e[0]])return e[this.fields[e[0]][t]];const n=t.toLowerCase();if(n in this.fields[e[0]])return e[this.fields[e[0]][n]];const r=this.classes[e[0]].attributes.length+1;return r>=e.length||!(t in e[r])?t in this.classes[e[0]].proto?this.classes[e[0]].proto[t]:void 0:e[r][t]}makeSetter(e){return(t,n)=>{this.set(t,e,n)}}makeGetter(e){return t=>this.get(t,e)}makeFastGetter(e){const t=this.attrIndices(e);return function(e){if(void 0!==t[e[0]])return e[t[e[0]]]}}accessors(){return this._accessors||(this._accessors=this._makeAccessors()),this._accessors}_makeAccessors(){const e={},t={get(e){const t=this.get.field_accessors[e.toLowerCase()];if(t)return t.call(this)},set(e,t){const n=this.set.field_accessors[e];if(n)return n.call(this,t)},tags(){return n[this[0]]||[]}};t.get.field_accessors={},t.set.field_accessors={},this.classes.forEach(((t,n)=>{(t.attributes||[]).forEach(((t,r)=>{e[t]=e[t]||[],e[t][n]=r+1,t=t.toLowerCase(),e[t]=e[t]||[],e[t][n]=r+1}))}));const n=this.classes.map((e=>e.attributes));return Object.keys(e).forEach((n=>{const r=e[n];t.get.field_accessors[n]=r?function(){return this[r[this[0]]]}:function(){}})),t}};class d{constructor({urlTemplate:e,chunkSize:t,length:n,cacheSize:r=100,readFile:a},i){if(this.urlTemplate=e,this.chunkSize=t,this.length=n,this.baseUrl=void 0===i?"":i,this.readFile=a,!a)throw new Error("must provide readFile callback");this.chunkCache=new l.a({cache:new s.a({maxSize:r}),fill:this.getChunk.bind(this)})}index(e,t,n){this.range(e,e,t,void 0,n)}async*range(e,t){e=Math.max(0,e),t=Math.min(t,this.length-1);const n=Math.floor(e/this.chunkSize),r=Math.floor(t/this.chunkSize),a=[];for(let e=n;e<=r;e+=1)a.push(this.chunkCache.get(e,e));for(let n=0;n<a.length;n+=1){const[r,i]=await a[n];yield*this.filterChunkData(e,t,r,i)}}async getChunk(e){let t=this.urlTemplate.replace(/\{Chunk\}/gi,e);this.baseUrl&&(t=a.a.resolve(this.baseUrl,t));return[e,await c(t,this.readFile)]}*filterChunkData(e,t,n,r){const a=n*this.chunkSize,i=Math.max(0,e-a),s=Math.min(t-a,this.chunkSize-1);for(let e=i;e<=s;e+=1)yield[e+a,r[e]]}}function f(){return this._uniqueID}function p(){return this._parent}function g(){return this.get("subfeatures")}var m=class{constructor({baseUrl:e,urlTemplate:t,readFile:n,cacheSize:r=10}){if(this.baseUrl=e,this.urlTemplates={root:t},this.readFile=n,!this.readFile)throw new Error('must provide a "readFile" function argument');this.dataRootCache=new l.a({cache:new s.a({maxSize:r}),fill:this.fetchDataRoot.bind(this)})}makeNCList(){return new u({readFile:this.readFile})}loadNCList(e,t,n){e.nclist.importExisting(t.intervals.nclist,e.attrs,n,t.intervals.urlTemplate,t.intervals.lazyClass)}getDataRoot(e){return this.dataRootCache.get(e,e)}fetchDataRoot(e){const t=a.a.resolve(this.baseUrl,this.urlTemplates.root.replace(/{\s*refseq\s*}/g,e));return c(t,this.readFile).then((e=>this.parseTrackInfo(e,t)))}parseTrackInfo(e,t){const n={nclist:this.makeNCList(),stats:{featureCount:e.featureCount||0}};e.intervals&&(n.attrs=new h(e.intervals.classes),this.loadNCList(n,e,t));const{histograms:r}=e;if(r&&r.meta){for(let e=0;e<r.meta.length;e+=1)r.meta[e].lazyArray=new d({...r.meta[e].arrayParams,readFile:this.readFile},t);n._histograms=r}return n._histograms&&Object.keys(n._histograms).forEach((e=>{n._histograms[e].forEach((e=>{Object.keys(e).forEach((t=>{"string"==typeof e[t]&&String(Number(e[t]))===e[t]&&(e[t]=Number(e[t]))}))}))})),n}async getRegionStats(e){return(await this.getDataRoot(e.ref)).stats}async getRegionFeatureDensities({refName:e,start:t,end:n,numBins:r,basesPerBin:a}){const i=await this.getDataRoot(e);if(r)a=(n-t)/r;else{if(!a)throw new TypeError("numBins or basesPerBin arg required for getRegionFeatureDensities");r=Math.ceil((n-t)/a)}const s=(i._histograms.stats||[]).find((e=>e.basesPerBin>=a));let o=i._histograms.meta[0];for(let e=0;e<i._histograms.meta.length;e+=1)a>=i._histograms.meta[e].basesPerBin&&(o=i._histograms.meta[e]);let l=a/o.basesPerBin;if(l>.9&&Math.abs(l-Math.round(l))<1e-4){const e=Math.floor(t/o.basesPerBin);l=Math.round(l);const n=[];for(let e=0;e<r;e+=1)n[e]=0;for await(const[t,a]of o.lazyArray.range(e,e+l*r-1))n[Math.floor((t-e)/l)]+=a;return{bins:n,stats:s}}return{bins:await i.nclist.histogram(t,n,r),stats:s}}async*getFeatures({refName:e,start:t,end:n}){const r=await this.getDataRoot(e),a=r.attrs&&r.attrs.accessors();for await(const[i,s]of r.nclist.iterate(t,n)){if(!i.decorated){const t=s.join(",");this.decorateFeature(a,i,`${e},${t}`)}yield i}}decorateFeature(e,t,n,r){t.get=e.get,t.tags=e.tags,t._uniqueID=n,t.id=f,t._parent=r,t.parent=p,t.children=g,(t.get("subfeatures")||[]).forEach(((r,a)=>{this.decorateFeature(e,r,`${n}-${a}`,t)})),t.decorated=!0}},b=n(42),v=n(53),y=n(17),w=n(92),_=n(13);const E={refName:"seq_id"},k={seq_id:"refName"};class S{constructor(e,t,n){this.ncFeature=e,this.uniqueId=n||e.id(),this.parentHandle=t}set(){throw new Error("not implemented")}jb2TagToJb1Tag(e){return(E[e]||e).toLowerCase()}jb1TagToJb2Tag(e){const t=e.toLowerCase();return k[t]||t}get(e){const t=this.ncFeature.get(this.jb2TagToJb1Tag(e));return t&&"subfeatures"===e?t.map((e=>new S(e,this))):t}tags(){return this.ncFeature.tags().map((e=>this.jb1TagToJb2Tag(e)))}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){const e={uniqueId:this.id()};return this.ncFeature.tags().forEach((t=>{const n=this.jb1TagToJb2Tag(t),r=this.ncFeature.get(t);"subfeatures"===n?e.subfeatures=(r||[]).map((e=>new S(e,this).toJSON())):e[n]=r})),e}}class C extends b.BaseFeatureDataAdapter{constructor(e,t,n){super(e,t,n);const r=Object(_.readConfObject)(e,"refNames"),a=Object(_.readConfObject)(e,"rootUrlTemplate");this.configRefNames=r,this.nclist=new m({baseUrl:"",urlTemplate:a.uri,readFile:e=>new w.RemoteFile(String(a.baseUri?new URL(e,a.baseUri).toString():e)).readFile()})}getFeatures(e,t={}){return Object(v.ObservableCreate)((async n=>{const{signal:r}=t;for await(const a of this.nclist.getFeatures(e,t))Object(y.checkAbortSignal)(r),n.next(this.wrapFeature(a));n.complete()}))}wrapFeature(e){return new S(e,void 0,`${this.id}-${e.id()}`)}async hasDataForRefName(e){const t=await this.nclist.getDataRoot(e);return!!(t&&t.stats&&t.stats.featureCount)}getRefNames(){return Promise.resolve(this.configRefNames||[])}freeResources(){}}},1347:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(510),o=n(691),l=n(83),c=n(357),u=n(663),h=n(695),d=n(903),f=n(746),p=n(895);function g(e){const{feature:t,descriptions:n}=e,[i,s]=Object(r.useState)({}),[o,c]=Object(r.useState)(!1),{samples:g={}}=t,m=Object.entries(g);if(!m.length)return null;const b=["sample",...Object.keys(m[0][1])].map((e=>{var t,r;return{field:e,description:null===(r=null===(t=n.FORMAT)||void 0===t?void 0:t[e])||void 0===r?void 0:r.Description}}));let v,y=[];const w=Object.keys(i);try{y=m.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],String(e[1])]))),sample:e[0],id:e[0]}))).filter((e=>!w.length||w.every((t=>{const n=e[t],r=i[t];return!r||n.match(new RegExp(r,"i"))}))))}catch(e){v=e}return a.a.createElement(l.BaseCard,{...e,title:"Samples"},v?a.a.createElement(u.a,{color:"error"},`${v}`):null,a.a.createElement(h.a,{control:a.a.createElement(d.a,{checked:o,onChange:()=>c((e=>!e))}),label:"Show sample filters"}),o?a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),b.map((({field:e})=>a.a.createElement(f.a,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:i[e]||"",onChange:t=>s({...i,[e]:t.target.value})})))):null,a.a.createElement("div",{style:{height:600,width:"100%",overflow:"auto"}},a.a.createElement(p.a,{rows:y,columns:b,disableSelectionOnClick:!0,rowHeight:25,disableColumnMenu:!0})))}function m({rows:e,columns:t}){const n=e.length<100;return e.length?a.a.createElement("div",{style:{height:25*Math.min(e.length,100)+80+(n?0:50),width:"100%"}},a.a.createElement(p.a,{rowHeight:25,rows:e,columns:t})):null}function b({feature:e,descriptions:t}){var n,r,i,s;const o=(null===(s=null===(i=null===(r=null===(n=null==t?void 0:t.INFO)||void 0===n?void 0:n.CSQ)||void 0===r?void 0:r.Description)||void 0===i?void 0:i.match(/.*Format: (.*)/))||void 0===s?void 0:s[1].split("|"))||[],c=e.INFO.CSQ||[],u=c.map(((e,t)=>({id:t,...Object.fromEntries(e.split("|").map(((e,t)=>[o[t],e])))})))||[],h=o.map((e=>({field:e})));return c.length?a.a.createElement(l.BaseCard,{title:"CSQ table"},a.a.createElement(m,{rows:u,columns:h})):null}function v({feature:e,descriptions:t}){var n,r,i,s;const o=(null===(s=null===(i=null===(r=null===(n=null==t?void 0:t.INFO)||void 0===n?void 0:n.ANN)||void 0===r?void 0:r.Description)||void 0===i?void 0:i.match(/.*Functional annotations:'(.*)'$/))||void 0===s?void 0:s[1].split("|"))||[],c=e.INFO.ANN||[],u=c.map(((e,t)=>({id:t,...Object.fromEntries(e.split("|").map(((e,t)=>[o[t],e])))})))||[],h=o.map((e=>({field:e})));return c.length?a.a.createElement(l.BaseCard,{title:"ANN table"},a.a.createElement(m,{rows:u,columns:h})):null}var y=n(918),w=n(72),_=n.n(w),E=n(17),k=n(21),S=n(684),C=n(690),x=n(660),O=n(688),N=n(687),A=n(673),B=n(22),R=n(37),I=n.n(R);const j=Object(B.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},block:{display:"block"}})));var M=Object(i.observer)((function({model:e,handleClose:t,feature:n,viewType:i}){const{classes:s}=j(),[l,c]=Object(r.useState)(!0),[u,f]=Object(r.useState)(!0);return a.a.createElement(S.a,{open:!0,onClose:t},a.a.createElement(C.a,null,"Breakpoint split view options",t?a.a.createElement(x.a,{className:s.closeButton,onClick:()=>t()},a.a.createElement(I.a,null)):null),a.a.createElement(o.a,null),a.a.createElement(O.a,null,a.a.createElement(h.a,{className:s.block,control:a.a.createElement(d.a,{checked:l,onChange:()=>c((e=>!e))}),label:"Copy tracks into the new view"}),a.a.createElement(h.a,{className:s.block,control:a.a.createElement(d.a,{checked:u,onChange:()=>f((e=>!e))}),label:"Mirror tracks vertically in vertically stacked view"})),a.a.createElement(N.a,null,a.a.createElement(A.a,{onClick:()=>{const{view:r}=e,a=Object(E.getSession)(e);try{const e=i.snapshotFromBreakendFeature(n,r);e.views[0].offsetPx-=r.width/2+100,e.views[1].offsetPx-=r.width/2+100,e.featureData=n;const t=Object(k.getSnapshot)(r.tracks);e.views[0].tracks=t,e.views[1].tracks=u?t.slice().reverse():t,a.addView("BreakpointSplitView",e)}catch(e){console.error(e),a.notify(`${e}`)}t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),a.a.createElement(A.a,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))}));function T(e){const{model:t,locStrings:n,feature:i}=e,s=Object(E.getSession)(t),{pluginManager:o}=Object(k.getEnv)(s),[c,h]=Object(r.useState)(!1);let d;try{d=o.getViewType("BreakpointSplitView")}catch(e){}const f=new _.a(i);return a.a.createElement(l.BaseCard,{...e,title:"Breakends"},a.a.createElement(u.a,null,"Link to linear view of breakend endpoints"),a.a.createElement("ul",null,n.map((e=>a.a.createElement("li",{key:`${JSON.stringify(e)}`},a.a.createElement(y.a,{href:"#",onClick:n=>{var r;n.preventDefault();const{view:a}=t;try{if(!a)throw new Error("No view associated with this feature detail panel anymore");null===(r=a.navToLocString)||void 0===r||r.call(a,e)}catch(e){console.error(e),s.notify(`${e}`)}}},`LGV - ${e}`))))),d?a.a.createElement("div",null,a.a.createElement(u.a,null,"Launch split views with breakend source and target"),a.a.createElement("ul",null,n.map((e=>a.a.createElement("li",{key:`${JSON.stringify(e)}`},a.a.createElement(y.a,{href:"#",onClick:e=>{e.preventDefault(),h(!0)}},`${i.refName}:${i.start} // ${e} (split view)`))))),c?a.a.createElement(M,{model:t,feature:f,viewType:d,handleClose:()=>{h(!1)}}):null):null)}t.default=Object(i.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:r}=t,i=JSON.parse(JSON.stringify(n)),{samples:u,...h}=i;return a.a.createElement(s.a,{"data-testid":"variant-side-drawer"},a.a.createElement(l.FeatureDetails,{feature:h,descriptions:{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail",...r},...e}),a.a.createElement(o.a,null),a.a.createElement(b,{feature:h,descriptions:r}),a.a.createElement(o.a,null),a.a.createElement(v,{feature:h,descriptions:r}),a.a.createElement(o.a,null),"breakend"===i.type?a.a.createElement(T,{feature:i,locStrings:i.ALT.map((e=>{var t;return(null===(t=Object(c.b)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===i.type?a.a.createElement(T,{feature:i,model:t,locStrings:[`${i.INFO.CHR2[0]}:${i.INFO.END}`]}):null,a.a.createElement(g,{feature:i,...e,descriptions:r}))}))},1348:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(13),s=n(652),o=n(658),l=n(663),c=n(657),u=n(696),h=n(22),d=n(20),f=n(21),p=n(1220),g=n(465),m=n.n(g),b=n(43),v=n(133),y=n(746),w=n(651),_=n(702),E=n(676),k=n(680),S=n(660),C=n(679),x=n(701),O=n(697),N=n(694),A=n(695),B=n(903),R=n(711),I=n(510),j=n(328),M=n.n(j),T=n(191),L=n.n(T),P=n(765),z=n.n(P),F=n(704),q=n(705),$=n(673);var D=Object(d.observer)((({slot:e})=>{const[t,n]=Object(r.useState)(""),[i,s]=Object(r.useState)(!1);return a.a.createElement(a.a.Fragment,null,e.name?a.a.createElement(_.a,null,e.name):null,a.a.createElement(F.a,{disablePadding:!0},e.value.map(((t,n)=>a.a.createElement(q.a,{key:n,disableGutters:!0},a.a.createElement(y.a,{value:t,onChange:t=>e.setAtIndex(n,t.target.value),InputProps:{endAdornment:a.a.createElement(x.a,{position:"end"},a.a.createElement(S.a,{color:"secondary",onClick:()=>e.removeAtIndex(n)},a.a.createElement(M.a,null)))}})))),i?a.a.createElement(q.a,{disableGutters:!0},a.a.createElement(y.a,{value:t,placeholder:"add new",onChange:e=>n(e.target.value),InputProps:{endAdornment:a.a.createElement(x.a,{position:"end"},a.a.createElement(a.a.Fragment,null,a.a.createElement($.a,{color:"primary",variant:"contained",style:{margin:2},"data-testid":`stringArrayAdd-${e.name}`,onClick:()=>{s(!1),e.add(t),n("")}},"OK"),a.a.createElement($.a,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{s(!1),n("")}},"Cancel")))}})):null,a.a.createElement($.a,{color:"primary",variant:"contained",style:{margin:4},disabled:i,onClick:()=>s(!0)},"Add item")),a.a.createElement(O.a,null,e.description))})),U=n(724),H=n(17),W=n(521),V=n(833),Z=n.n(V);const G='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',X=Object(h.makeStyles)()((e=>({callbackEditor:{marginTop:"16px",borderBottom:`1px solid ${e.palette.divider}`,width:"100%",fontFamily:G},textAreaFont:{fontFamily:G},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}})));var K=Object(d.observer)((function({slot:e}){const{classes:t}=X(),[n,i]=Object(r.useState)(e.value),[s,o]=Object(r.useState)(),l=Object(H.useDebounce)(n,400);return Object(r.useEffect)((()=>{var t;try{const n=l.startsWith("jexl:")?l:`jexl:${l}`;if("jexl:"===n)throw new Error("Empty jexl expression is not valid");Object(W.stringToJexlExpression)(n,null===(t=Object(f.getEnv)(e).pluginManager)||void 0===t?void 0:t.jexl),e.set(n),o(void 0)}catch(e){console.error({e:e}),o(e)}}),[l,e]),a.a.createElement(a.a.Fragment,null,s?a.a.createElement("p",{className:t.error},`${s}`):null,a.a.createElement("div",{className:t.callbackContainer},a.a.createElement(y.a,{multiline:!0,className:t.callbackEditor,value:n.startsWith("jexl:")?n.split("jexl:")[1]:n,onChange:e=>i(e.target.value),style:{background:s?"#fdd":void 0},InputProps:{classes:{input:t.textAreaFont}}}),a.a.createElement("p",null,e.description),a.a.createElement(U.a,{title:a.a.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",a.a.createElement("br",null)," Names of available context items: ",e.contextVariable),arrow:!0},a.a.createElement(S.a,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},a.a.createElement(Z.a,null)))))}));const Y=Object(r.lazy)((()=>n.e(0).then(n.t.bind(null,877,7)))),J=e=>{const{value:t="#000",label:n="",TextFieldProps:i={},onChange:s}=e,[o,l]=Object(r.useState)(!1);return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(y.a,{value:t,label:n,onClick:()=>l(!o),onChange:e=>s(e.target.value),...i}),a.a.createElement("div",{style:{marginTop:10}},a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(Y,{color:t,onChange:e=>s(e)}))))};var Q=Object(d.observer)((function(e){const{slot:t}=e;return a.a.createElement(J,{label:t.name,value:t.value,onChange:e=>t.set(e),TextFieldProps:{helperText:t.description,fullWidth:!0}})})),ee=n(603);function te(e){const{helperText:t}=e;return a.a.createElement(y.a,{...e,helperText:a.a.createElement(b.SanitizedHTML,{html:t||""}),FormHelperTextProps:{component:"div"},fullWidth:!0})}const ne=Object(d.observer)((({slot:e})=>a.a.createElement(te,{label:e.name,helperText:e.description,value:e.value,onChange:t=>e.set(t.target.value)}))),re=Object(d.observer)((({slot:e})=>a.a.createElement(y.a,{label:e.name,helperText:e.description,multiline:!0,value:e.value,onChange:t=>e.set(t.target.value)}))),ae=()=>a.a.createElement(w.a,null,a.a.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})),ie=Object(h.makeStyles)()((e=>({card:{marginTop:e.spacing(1)}}))),se=Object(d.observer)((({slot:e})=>{const{classes:t}=ie(),[n,i]=Object(r.useState)("");return a.a.createElement(a.a.Fragment,null,a.a.createElement(_.a,null,e.name),Array.from(e.value,(([n,r])=>a.a.createElement(E.a,{raised:!0,key:n,className:t.card},a.a.createElement(k.a,{title:n,action:a.a.createElement(S.a,{color:"secondary",onClick:()=>e.remove(n)},a.a.createElement(M.a,null))}),a.a.createElement(C.a,null,a.a.createElement(D,{slot:{name:e.name,value:r,description:`Values associated with entry ${n}`,setAtIndex:(t,r)=>e.setAtKeyIndex(n,t,r),removeAtIndex:t=>e.removeAtKeyIndex(n,t),add:t=>e.addToKey(n,t)}}))))),a.a.createElement(E.a,{raised:!0,className:t.card},a.a.createElement(k.a,{disableTypography:!0,title:a.a.createElement(y.a,{fullWidth:!0,value:n,placeholder:"add new",onChange:e=>i(e.target.value),InputProps:{endAdornment:a.a.createElement(x.a,{position:"end"},a.a.createElement(S.a,{disabled:""===n,onClick:()=>{e.add(n,[]),i("")},color:"secondary"},a.a.createElement(L.a,null)))}})})),a.a.createElement(O.a,null,e.description))})),oe=Object(d.observer)((({slot:e})=>{const{classes:t}=ie(),[n,i]=Object(r.useState)("");return a.a.createElement(a.a.Fragment,null,a.a.createElement(_.a,null,e.name),Array.from(e.value,(([n,r])=>a.a.createElement(E.a,{raised:!0,key:n,className:t.card},a.a.createElement(k.a,{title:n,action:a.a.createElement(S.a,{color:"secondary",onClick:()=>e.remove(n)},a.a.createElement(M.a,null))}),a.a.createElement(C.a,null,a.a.createElement(le,{slot:{value:r,set:t=>e.add(n,t)}}))))),a.a.createElement(E.a,{raised:!0,className:t.card},a.a.createElement(k.a,{disableTypography:!0,title:a.a.createElement(y.a,{fullWidth:!0,value:n,placeholder:"add new",onChange:e=>i(e.target.value),InputProps:{endAdornment:a.a.createElement(x.a,{position:"end"},a.a.createElement(S.a,{disabled:""===n,onClick:()=>{e.add(n,0),i("")},color:"secondary"},a.a.createElement(L.a,null)))}})})),a.a.createElement(O.a,null,e.description))})),le=Object(d.observer)((({slot:e})=>{const[t,n]=Object(r.useState)(e.value);return Object(r.useEffect)((()=>{var n;const r=parseFloat(t);Number.isNaN(r)?null===(n=e.reset)||void 0===n||n.call(e):e.set(r)}),[e,t]),a.a.createElement(te,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>n(e.target.value)})})),ce=Object(d.observer)((({slot:e})=>{const[t,n]=Object(r.useState)(e.value);return Object(r.useEffect)((()=>{const n=parseInt(t,10);Number.isNaN(n)||e.set(n)}),[e,t]),a.a.createElement(te,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>n(e.target.value)})})),ue=Object(d.observer)((({slot:e})=>a.a.createElement(N.a,null,a.a.createElement(A.a,{label:e.name,control:a.a.createElement(B.a,{checked:e.value,onChange:t=>e.set(t.target.checked)})}),a.a.createElement(O.a,null,e.description)))),he=Object(d.observer)((({slot:e,slotSchema:t})=>{const n=Object(f.getPropertyMembers)(Object(v.getSubType)(t)),r=Object(v.getUnionSubTypes)(Object(v.getUnionSubTypes)(Object(v.getSubType)(Object(v.getPropertyType)(n,"value")))[1]).map((e=>e.value));return a.a.createElement(te,{value:e.value,label:e.name,select:!0,helperText:e.description,onChange:t=>e.set(t.target.value)},r.map((e=>a.a.createElement(R.a,{key:e,value:e},e))))})),de=Object(d.observer)((({slot:e})=>{var t;return a.a.createElement(b.FileSelector,{location:e.value,setLocation:t=>e.set(t),name:e.name,description:e.description,rootModel:null===(t=Object(f.getEnv)(e).pluginManager)||void 0===t?void 0:t.rootModel})})),fe={string:ne,text:re,fileLocation:de,stringArray:D,stringArrayMap:se,numberMap:oe,number:le,integer:ce,color:Q,stringEnum:he,boolean:ue,frozen:ee.a,configRelationships:ee.a},pe=Object(h.makeStyles)()((e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}})));var ge=Object(d.observer)((({slot:e,slotSchema:t})=>{const{classes:n}=pe(),{type:r}=e;let i=e.isCallback?K:fe[r];return i||(console.warn(`no slot editor defined for ${r}, editing as string`),i=ne),r in fe||console.warn(`SlotEditor needs to implement ${r}`),a.a.createElement(I.a,{className:n.paper},a.a.createElement("div",{className:n.paperContent},a.a.createElement(i,{slot:e,slotSchema:t})),a.a.createElement("div",{className:n.slotModeSwitch},e.contextVariable.length?a.a.createElement(S.a,{onClick:()=>e.isCallback?e.convertToValue():e.convertToCallback(),title:"convert to "+(e.isCallback?"regular value":"callback"),color:"secondary"},e.isCallback?a.a.createElement(ae,null):a.a.createElement(z.a,null)):null))}));var me=Object(d.observer)((({typeNameChoices:e,slot:t,slotName:n,onChange:r})=>{const{classes:i}=pe();return a.a.createElement(I.a,{className:i.paper},a.a.createElement("div",{className:i.paperContent},a.a.createElement(y.a,{value:t.type,label:"Type",select:!0,helperText:`Type of ${n} to use`,fullWidth:!0,onChange:r},e.map((e=>a.a.createElement(R.a,{key:e,value:e},e))))))}));const be=Object(h.makeStyles)()((e=>({expandIcon:{color:"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:`1px solid ${e.palette.text.primary}`},noOverflow:{width:"100%",overflowX:"auto"}}))),ve=Object(d.observer)((e=>{const{classes:t}=be(),{slotName:n,slotSchema:r,schema:h,slot:d=h[n],path:f=[]}=e;let g;if(Object(i.isConfigurationSchemaType)(r)){if(d.length)return d.map(((t,r)=>{const i=`${Object(p.singular)(n)} ${r+1}`;return a.a.createElement(ve,{...e,key:i,slot:t,slotName:i})}));const b=Object(i.getTypeNamesFromExplicitlyTypedUnion)(r);return b.length&&(g=a.a.createElement(me,{typeNameChoices:b,slotName:n,slot:d,onChange:e=>{e.target.value!==d.type&&h.setSubschema(n,{type:e.target.value})}})),a.a.createElement(s.a,{defaultExpanded:!0,className:t.accordion},a.a.createElement(o.a,{expandIcon:a.a.createElement(m.a,{className:t.expandIcon})},a.a.createElement(l.a,null,[...f,n].join(""))),a.a.createElement(c.a,{className:t.expansionPanelDetails},g,a.a.createElement(u.a,{className:t.noOverflow},a.a.createElement(ye,{schema:d,path:[...f,n]}))))}return Object(i.isConfigurationSlotType)(r)?a.a.createElement(ge,{key:n,slot:d,slotSchema:r}):null})),ye=Object(d.observer)((({schema:e,path:t=[]})=>{const n=Object(f.getMembers)(e).properties;return a.a.createElement(a.a.Fragment,null,Object.entries(n).map((([n,r])=>a.a.createElement(ve,{key:n,slotName:n,slotSchema:r,path:t,schema:e}))))})),we=Object(d.observer)((({model:e})=>{const{classes:t}=be(),{target:n}=e,r=n&&Object(i.readConfObject)(n,"trackId"),u=n&&Object(i.readConfObject)(n,"name");return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{key:r,defaultExpanded:!0,className:t.accordion},a.a.createElement(o.a,{expandIcon:a.a.createElement(m.a,{className:t.expandIcon})},a.a.createElement(l.a,null,null!=u?u:"Configuration")),a.a.createElement(c.a,{className:t.expansionPanelDetails,"data-testid":"configEditor"},n?a.a.createElement(ye,{schema:n}):"no target set")),a.a.createElement("div",{style:{height:300}}))}));t.default=we},1349:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var r=n(1163).a,a=n(56);class i{constructor(e){if(e.cram?this.cram=e.cram:this.cram=new r({url:e.cramUrl,path:e.cramPath,filehandle:e.cramFilehandle,seqFetch:e.seqFetch,checkSequenceMD5:e.checkSequenceMD5,cacheSize:e.cacheSize}),!(this.cram instanceof r))throw new Error("invalid arguments: no cramfile");if(this.index=e.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=e.fetchSizeLimit||3e6}async getRecordsForRange(e,t,n,r={}){if(r.viewAsPairs=r.viewAsPairs||!1,r.pairAcrossChr=r.pairAcrossChr||!1,r.maxInsertSize=r.maxInsertSize||2e5,"string"==typeof e)throw new a.e("string sequence names not yet supported");const i=e,s=await this.index.getEntriesForRange(i,t,n),o=s.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(o>this.fetchSizeLimit)throw new a.d(`data size of ${o.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const l=r=>r.sequenceId===e&&r.alignmentStart<=n&&r.alignmentStart+r.lengthOnRef-1>=t,c=await Promise.all(s.map((e=>this.getRecordsInSlice(e,l))));let u=Array.prototype.concat(...c);if(r.viewAsPairs){const e={},t={};for(let n=0;n<u.length;n+=1){const r=u[n].readName,a=u[n].uniqueId;e[r]||(e[r]=0),e[r]+=1,t[a]=1}const n={};Object.entries(e).forEach((([e,t])=>{1===t&&(n[e]=!0)}));const a=[];for(let e=0;e<u.length;e+=1){const t=u[e].readName;if(n[t]&&u[e].mate&&(u[e].mate.sequenceId===i||r.pairAcrossChr)&&Math.abs(u[e].alignmentStart-u[e].mate.alignmentStart)<r.maxInsertSize){const t=this.index.getEntriesForRange(u[e].mate.sequenceId,u[e].mate.alignmentStart,u[e].mate.alignmentStart+1);a.push(t)}}const s=await Promise.all(a);let o=[];for(let e=0;e<s.length;e+=1)o.push(...s[e]);o=o.sort(((e,t)=>e.toString().localeCompare(t.toString()))).filter(((e,t,n)=>!t||e.toString()!==n[t-1].toString()));const l=[],c=[],h=o.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(h>this.fetchSizeLimit)throw new Error(`mate data size of ${h.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);o.forEach((e=>{let r=this.cram.featureCache.get(e.toString());r||(r=this.getRecordsInSlice(e,(()=>!0)),this.cram.featureCache.set(e.toString(),r)),l.push(r);const a=r.then((e=>{const r=[];for(let a=0;a<e.length;a+=1){const i=e[a];n[i.readName]&&!t[i.uniqueId]&&r.push(i)}return r}));c.push(a)}));const d=await Promise.all(c);if(d.length){const e=d.reduce(((e,t)=>e.concat(t)));u=u.concat(e)}}return u}getRecordsInSlice({containerStart:e,sliceStart:t,sliceBytes:n},r){return this.cram.getContainerAtPosition(e).getSlice(t,n).getRecords(r)}hasDataForReferenceSequence(e){return this.index.hasDataForReferenceSequence(e)}}var s=n(88),o=n.n(s),l=n(606),c=n.n(l),u=n(848),h=n(861);class d{constructor(e){Object.assign(this,e)}toString(){return`${this.start}:${this.span}:${this.containerStart}:${this.sliceStart}:${this.sliceBytes}`}}function f(e,t){if(t.some((e=>void 0===e)))throw new a.c("invalid .crai index file");const[n,r,i,s,o,l]=t;e[n]||(e[n]=[]),e[n].push(new d({start:r,span:i,containerStart:s,sliceStart:o,sliceBytes:l}))}class p{constructor(e){const t=Object(h.a)(e.url,e.path,e.filehandle);this._parseCache=new o.a({cache:new c.a({maxSize:1}),fill:(e,t)=>this.parseIndex({signal:t})}),this.readFile=t.readFile.bind(t)}parseIndex(){const e={};return this.readFile().then((e=>31===e[0]&&139===e[1]?Object(u.a)(e):e)).then((t=>{if(t.length>4&&21578050===t.readUInt32LE(0))throw new a.c("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");let n=[],r="";for(let i=0;i<t.length;i+=1){const s=t[i];if(s>=48&&s<=57||!r&&45===s)r+=String.fromCharCode(s);else if(9===s)n.push(Number.parseInt(r,10)),r="";else if(10===s)n.push(Number.parseInt(r,10)),r="",f(e,n),n=[];else if(13!==s&&32!==s)throw new a.c("invalid .crai index file")}return r&&n.push(Number.parseInt(r,10)),6===n.length&&f(e,n),Object.entries(e).forEach((([t,n])=>{e[t]=n.sort(((e,t)=>e.start-t.start||e.span-t.span))})),e}))}getIndex(e={}){return this._parseCache.get("index",null,e.signal)}async hasDataForReferenceSequence(e){return!!(await this.getIndex())[e]}async getEntriesForRange(e,t,n){const r=(await this.getIndex())[e];if(!r)return[];const a=e=>{const r=e.start,a=e.start+e.span;return r>n?-1:a<=t?1:0},i=[];for(let e=0;e<r.length;e+=1)0===a(r[e])&&i.push(r[e]);return i}}var g=n(42),m=n(17),b=n(51),v=n(53),y=n(812);class w{constructor(e,t){this.record=e,this._store=t}_get_name(){return this.record.readName}_get_start(){return this.record.alignmentStart-1}_get_end(){return this.record.alignmentStart+this.record.lengthOnRef-1}_get_cram_read_features(){return this.record.readFeatures}_get_type(){return"match"}_get_score(){return this.record.mappingQuality}_get_flags(){return this.record.flags}_get_strand(){return this.record.isReverseComplemented()?-1:1}_read_group_id(){const e=this._store.samHeader.readGroups;return e?e[this.record.readGroupId]:void 0}_get_qual(){return(this.record.qualityScores||[]).join(" ")}qualRaw(){return this.record.qualityScores}_get_seq_id(){return this._store.refIdToName(this.record.sequenceId)}_get_refName(){return this._get_seq_id()}_get_is_paired(){return!!this.record.mate}_get_pair_orientation(){return this.record.isPaired()?this.record.getPairOrientation():void 0}_get_template_length(){return this.record.templateLength||this.record.templateSize}_get_next_seq_id(){return this.record.mate?this._store.refIdToName(this.record.mate.sequenceId):void 0}_get_next_pos(){return this.record.mate?this.record.mate.alignmentStart:void 0}_get_next_segment_position(){return this.record.mate?`${this._store.refIdToName(this.record.mate.sequenceId)}:${this.record.mate.alignmentStart}`:void 0}_get_tags(){const e=this._read_group_id(),{tags:t}=this.record;return void 0!==e?{...t,RG:e}:t}_get_seq(){return this.record.getReadBases()}_get_CIGAR(){let e="",t="",n="M",r=0;const a=this.record._refRegion.seq,i=this.record._refRegion.start;let s=this.record.alignmentStart,o=0;if(void 0!==this.record.readFeatures)for(let l=0;l<this.record.readFeatures.length;l++){const{code:c,refPos:u,sub:h,data:d}=this.record.readFeatures[l];if(o=u-s,e+=a.substring(s-i,u-i),s=u,r&&"M"!==n&&(t+=r+n,r=0),o&&(n="M",r+=o),"b"===c){const t=d.split(","),n=String.fromCharCode(...t);e+=n,s+=n.length,r+=n.length}else"B"===c||"X"===c?(e+=h,s++,r++):"D"===c||"N"===c?(s+=d,r&&(t+=r+n),t+=d+c,r=0):"I"===c||"S"===c?(e+=d,r&&(t+=r+n),t+=d.length+c,r=0):"i"===c?(e+=d,r&&(t+=r+n),t+="1I",r=0):"P"===c?(r&&(t+=r+n),t+=`${d}P`):"H"===c&&(r&&(t+=r+n),t+=`${d}H`,r=0)}else o=this.record.readLength-e.length;return e.length!==this.record.readLength&&(o=this.record.readLength-e.length,e+=a.substring(s-i,s-i+o),r&&"M"!==n&&(t+=r+n,r=0),n="M",r+=o),r&&(t+=r+n),t}tags(){return Object.getOwnPropertyNames(w.prototype).filter((e=>e.startsWith("_get_")&&"_get_mismatches"!==e&&"_get_cram_read_features"!==e)).map((e=>e.replace("_get_","")))}id(){return`${this._store.id}-${this.record.uniqueId}`}get(e){const t=`_get_${e}`;if(this[t])return this[t]()}parent(){}children(){}set(){}pairedFeature(){return!1}_get_clipPos(){const e=this.get("mismatches");if(e.length){const t=-1===this.get("strand")?e[e.length-1]:e[0],{type:n,cliplen:r}=t;if("softclip"===n||"hardclip"===n)return r}return 0}toJSON(){const e={};return this.tags().forEach((t=>{const n=this.get(t);void 0!==n&&(e[t]=n)})),{...e,name:this.get("name"),type:this.get("type"),uniqueId:this.id()}}_get_mismatches(){const e=this.get("cram_read_features"),t=this.qualRaw();if(!e)return[];const n=this.get("start"),r=new Array(e.length);let a=0;for(let i=0;i<e.length;i++){const s=e[i],{code:o,pos:l,data:c,sub:u,ref:h}=s,d=s.refPos-1-n;if("X"===o)r[a++]={start:d,length:1,base:u,qual:null==t?void 0:t[l],altbase:h,type:"mismatch"};else if("I"===o)r[a++]={start:d,type:"insertion",base:`${c.length}`,length:0};else if("N"===o)r[a++]={type:"skip",length:c,start:d,base:"N"};else if("S"===o){const e=c.length;r[a++]={start:d,type:"softclip",base:`S${e}`,cliplen:e,length:1}}else if("P"===o);else if("H"===o){const e=c;r[a++]={start:d,type:"hardclip",base:`H${e}`,cliplen:e,length:1}}else"D"===o?r[a++]={type:"deletion",length:c,start:d,base:"*"}:"b"===o||"q"===o||"B"===o||"i"===o&&(r[a++]={start:d,type:"insertion",base:c,length:1})}return r.slice(0,a)}}class _ extends g.BaseFeatureDataAdapter{constructor(){super(...arguments),this.samHeader={},this.seqIdToOriginalRefName=[]}async configure(){const e=this.getConf("cramLocation"),t=this.getConf("craiLocation");if(!e)throw new Error("missing cramLocation argument");if(!t)throw new Error("missing craiLocation argument");const n=new i({cramFilehandle:Object(b.openLocation)(e,this.pluginManager),index:new p({filehandle:Object(b.openLocation)(t,this.pluginManager)}),seqFetch:this.seqFetch.bind(this),checkSequenceMD5:!1,fetchSizeLimit:2e8}),r=this.getConf(["sequenceAdapter","type"]);if(!this.getSubAdapter)throw new Error("Error getting subadapter");const a=this.getConf("sequenceAdapter"),{dataAdapter:s}=await this.getSubAdapter(a);if(!(s instanceof g.BaseFeatureDataAdapter))throw new Error(`CRAM feature adapters cannot use sequence adapters of type '${r}'`);return{cram:n,sequenceAdapter:s}}async getHeader(e){const{cram:t}=await this.configure();return t.cram.getHeaderText(e)}async seqFetch(e,t,n){t-=1;const{sequenceAdapter:r}=await this.configure(),a=this.refIdToOriginalName(e)||this.refIdToName(e);if(!a)return;const i=(await r.getFeatures({refName:a,start:t,end:n,assemblyName:""}).pipe(Object(y.a)()).toPromise()).sort(((e,t)=>e.get("start")-t.get("start"))).map((e=>{const r=e.get("start"),a=e.get("end"),i=Math.max(t-r,0),s=Math.min(n-r,a-r)-i;return(e.get("seq")||e.get("residues")).substr(i,s)})).join("");if(i.length!==n-t)throw new Error(`sequence fetch failed: fetching ${a}:${(t-1).toLocaleString()}-${n.toLocaleString()} returned ${i.length.toLocaleString()} bases, but should have returned ${(n-t).toLocaleString()}`);return i}async setupPre(e){const{statusCallback:t=(()=>{})}=e||{},n=await this.configure();t("Downloading index");const{cram:r}=n,a=await r.cram.getSamHeader(null==e?void 0:e.signal),i=[],s={};a.filter((e=>"SQ"===e.tag)).forEach(((e,t)=>{e.data.forEach((e=>{if("SN"===e.tag){const n=e.value;s[n]=t,i[t]=n}}))}));const o=a.filter((e=>"RG"===e.tag)).map((e=>{var t;return null===(t=e.data.find((e=>"ID"===e.tag)))||void 0===t?void 0:t.value})),l={idToName:i,nameToId:s,readGroups:o};return t(""),this.samHeader=l,{samHeader:l,...n}}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRefNames(e){const{samHeader:t}=await this.setup(e);if(!t.idToName)throw new Error("CRAM file has no header lines");return t.idToName}refNameToId(e){return this.samHeader.nameToId?this.samHeader.nameToId[e]:this.seqIdToRefName?this.seqIdToRefName.indexOf(e):void 0}refIdToName(e){return this.samHeader.idToName?this.samHeader.idToName[e]:this.seqIdToRefName?this.seqIdToRefName[e]:void 0}refIdToOriginalName(e){return this.seqIdToOriginalRefName[e]}getFeatures(e,t){const{signal:n,filterBy:r,statusCallback:a=(()=>{})}=t||{},{refName:i,start:s,end:o,originalRefName:l}=e;return Object(v.ObservableCreate)((async e=>{const{cram:c,sequenceAdapter:u}=await this.setup(t);a("Downloading alignments"),this.seqIdToRefName||(this.seqIdToRefName=await u.getRefNames(t));const h=this.refNameToId(i);if(void 0!==h){l&&(this.seqIdToOriginalRefName[h]=l);const a=await c.getRecordsForRange(h,s,o,t);Object(m.checkAbortSignal)(n);const{flagInclude:i=0,flagExclude:u=0,tagFilter:d,readName:f}=r||{};let p=a.filter((e=>{const t=e.flags;return(t&i)===i&&!(t&u)}));d&&(p=p.filter((e=>{const t=e[d.tag];return"*"===t?void 0!==t:t===d.value}))),f&&(p=p.filter((e=>e.readName===f))),p.forEach((t=>{e.next(this.cramRecordToFeature(t))}))}else console.warn("Unknown refName",i);a(""),e.complete()}),n)}freeResources(){}cramRecordToFeature(e){return new w(e,this)}async estimateRegionsStats(e,t){return{bytes:await this.bytesForRegions(e,t),fetchSizeLimit:this.getConf("fetchSizeLimit")}}async bytesForRegions(e,t){const{cram:n}=await this.configure();return(await Promise.all(e.map((e=>{const{refName:t,start:r,end:a}=e,i=this.refNameToId(t);return n.index.getEntriesForRange(i,r,a)})))).flat().reduce(((e,t)=>e+t.sliceBytes),0)}}},1350:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Z}));var r=n(1),a=n.n(r),i=n(20),s=n(22),o=n(684),l=n(690),c=n(660),u=n(688),h=n(687),d=n(673),f=n(1222),p=n.n(f),g=n(37),m=n.n(g),b=n(191),v=n.n(b),y=n(744),w=n(737),_=n(738),E=n(510),k=n(734),S=n(740),C=n(663),x=n(736),O=n(1221),N=n.n(O),A=n(328),B=n.n(A),R=n(13);const I=Object(s.makeStyles)()((()=>({table:{minWidth:500,minHeight:150},buttonCell:{padding:3},button:{display:"inline-block",padding:3,minHeight:0,minWidth:0}})));var j=Object(i.observer)((({rootModel:e,setIsAssemblyBeingEdited:t,setAssemblyBeingEdited:n})=>{const{classes:r}=I();const i=e.jbrowse.assemblies.map((i=>{const s=Object(R.readConfObject)(i,"name"),o=Object(R.readConfObject)(i,"displayName"),l=Object(R.readConfObject)(i,"aliases");return a.a.createElement(y.a,{key:s},a.a.createElement(w.a,null,s),a.a.createElement(w.a,null,o),a.a.createElement(w.a,null,l?l.toString():""),a.a.createElement(w.a,{className:r.buttonCell},a.a.createElement(c.a,{"data-testid":`${s}-edit`,className:r.button,onClick:()=>{t(!0),n(i)}},a.a.createElement(N.a,{color:"primary"})),a.a.createElement(c.a,{"data-testid":`${s}-delete`,className:r.button,onClick:()=>{!function(t){e.jbrowse.removeAssemblyConf(t)}(s)}},a.a.createElement(B.a,{color:"error"}))))}));return a.a.createElement(_.a,{component:E.a},a.a.createElement(k.a,{className:r.table},a.a.createElement(S.a,null,a.a.createElement(y.a,null,a.a.createElement(w.a,null,a.a.createElement(C.a,{variant:"h5"},"Name")),a.a.createElement(w.a,null,a.a.createElement(C.a,{variant:"h5"},"Display name")),a.a.createElement(w.a,null,a.a.createElement(C.a,{variant:"h5"},"Aliases")),a.a.createElement(w.a,null,a.a.createElement(C.a,{variant:"h5"},"Actions")))),a.a.createElement(x.a,null,i)))})),M=n(775),T=n.n(M),L=n(746),P=n(711),z=n(917);const F=Object(s.makeStyles)()((e=>({root:{flexGrow:1,overflow:"hidden",padding:e.spacing(0,3)},paper:{margin:`${e.spacing(1)}px auto`,padding:e.spacing(2)},createButton:{marginTop:"1em",justifyContent:"center"},paperContent:{flex:"auto",margin:`${e.spacing(1)}px auto`,padding:e.spacing(1),overflow:"auto"}}))),q=Object(i.observer)((({adapterSelection:e,setAdapterSelection:t,adapterTypes:n})=>a.a.createElement(L.a,{value:e,label:"Type",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:e=>{t(e.target.value)}},n.map((e=>a.a.createElement(P.a,{key:e,value:e},e)))))),$=Object(i.observer)((({adapterSelection:e,fastaLocation:t,setFastaLocation:n,faiLocation:r,setFaiLocation:i,gziLocation:s,setGziLocation:o,twoBitLocation:l,setTwoBitLocation:c,chromSizesLocation:u,setChromSizesLocation:h})=>"IndexedFastaAdapter"===e||"BgzipFastaAdapter"===e?a.a.createElement(z.a,{container:!0,spacing:2},a.a.createElement(z.a,{item:!0},a.a.createElement(T.a,{name:"fastaLocation",location:t,setLocation:e=>n(e)})),a.a.createElement(z.a,{item:!0},a.a.createElement(T.a,{name:"faiLocation",location:r,setLocation:e=>i(e)})),"BgzipFastaAdapter"===e?a.a.createElement(z.a,{item:!0},a.a.createElement(T.a,{name:"gziLocation",location:s,setLocation:e=>o(e)})):null):"TwoBitAdapter"===e?a.a.createElement(z.a,{container:!0,spacing:2},a.a.createElement(z.a,{item:!0},a.a.createElement(T.a,{name:"twoBitLocation",location:l,setLocation:e=>c(e)})),a.a.createElement(z.a,{item:!0},a.a.createElement(T.a,{name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:u,setLocation:e=>h(e)}))):null)),D={uri:""};var U=Object(i.observer)((({rootModel:e,setFormOpen:t})=>{const{classes:n}=F(),i=["IndexedFastaAdapter","BgzipFastaAdapter","TwoBitAdapter"],[s,o]=Object(r.useState)(""),[l,c]=Object(r.useState)(""),[u,h]=Object(r.useState)(i[0]),[f,p]=Object(r.useState)(D),[g,m]=Object(r.useState)(D),[b,y]=Object(r.useState)(D),[w,_]=Object(r.useState)(D),[k,S]=Object(r.useState)(D);return a.a.createElement("div",{className:n.root},a.a.createElement(E.a,{className:n.paper},a.a.createElement(L.a,{id:"assembly-name",inputProps:{"data-testid":"assembly-name"},label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:s,onChange:e=>o(e.target.value)}),a.a.createElement(L.a,{id:"assembly-name",inputProps:{"data-testid":"assembly-display-name"},label:"Assembly display name",helperText:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:l,onChange:e=>c(e.target.value)}),a.a.createElement(q,{adapterSelection:u,setAdapterSelection:h,adapterTypes:i}),a.a.createElement("div",{className:n.paperContent},a.a.createElement($,{adapterSelection:u,fastaLocation:f,setFastaLocation:p,faiLocation:g,setFaiLocation:m,gziLocation:b,setGziLocation:y,twoBitLocation:w,setTwoBitLocation:_,chromSizesLocation:k,setChromSizesLocation:S}))),a.a.createElement(z.a,{container:!0,className:n.createButton},a.a.createElement(z.a,{item:!0},a.a.createElement(d.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(v.a,null),onClick:function(){if(""===s)e.session.notify("Can't create an assembly without a name");else{let n;t(!1),"IndexedFastaAdapter"===u?n={name:s,displayName:l,sequence:{adapter:{type:"IndexedFastaAdapter",fastaLocation:f,faiLocation:g}}}:"BgzipFastaAdapter"===u?n={name:s,displayName:l,sequence:{adapter:{type:"BgzipFastaAdapter",fastaLocation:f,faiLocation:g,gziLocation:b}}}:"TwoBitAdapter"===u&&(n={name:s,displayName:l,sequence:{adapter:{type:"TwoBitAdapter",twoBitLocation:w,chromSizesLocation:k}}}),e.jbrowse.addAssemblyConf(n),e.session.notify(`Successfully added ${s} assembly to JBrowse 2`,"success")}}},"Create new assembly"))))})),H=n(482);var W=Object(i.observer)((({assembly:e})=>a.a.createElement(H.a,{model:{target:e}})));const V=Object(s.makeStyles)()((e=>({titleBox:{color:"#fff",backgroundColor:e.palette.primary.main,textAlign:"center"},dialogContent:{width:"100%"},backButton:{color:"#fff",position:"absolute",left:e.spacing(4),top:e.spacing(4)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));var Z=Object(i.observer)((({rootModel:e,onClose:t})=>{const{classes:n}=V(),[i,s]=Object(r.useState)(!1),[f,g]=Object(r.useState)(!1),[b,y]=Object(r.useState)(),w=!i&&!f;return a.a.createElement(o.a,{open:!0,onClose:()=>t(!1)},a.a.createElement(l.a,{className:n.titleBox},w?"Assembly manager":null,i?a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{"aria-label":"back",className:n.backButton,onClick:()=>s(!1)},a.a.createElement(p.a,null)),"Add new assembly"):null,f?a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{"aria-label":"back",className:n.backButton,onClick:()=>g(!1)},a.a.createElement(p.a,null)),function(e){if(void 0!==e)return e.name;return null}(b)):null,a.a.createElement(c.a,{"aria-label":"close",className:n.closeButton,onClick:()=>t(!1)},a.a.createElement(m.a,null))),a.a.createElement(u.a,null,a.a.createElement("div",{className:n.dialogContent},w?a.a.createElement(j,{rootModel:e,setIsAssemblyBeingEdited:g,setAssemblyBeingEdited:y}):null,f?a.a.createElement(W,{assembly:b}):null,i?a.a.createElement(U,{rootModel:e,setFormOpen:s}):null)),a.a.createElement(h.a,null,w?a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{color:"secondary",variant:"contained",onClick:()=>t(!1)},"Close"),a.a.createElement(d.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(v.a,null),onClick:()=>s(!0)},"Add new assembly")):null))}))},1351:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(21),o=n(663),l=n(673),c=n(746),u=n(701),h=n(660),d=n(652),f=n(658),p=n(22),g=n(17),m=n(465),b=n.n(m),v=n(887),y=n.n(v),w=n(1230),_=n.n(w),E=n(704),k=n(724),S=n(684),C=n(690),x=n(688),O=n(687),N=n(705),A=n(37),B=n.n(A),R=n(888),I=n.n(R),j=n(86);const M=Object(p.makeStyles)()((()=>({closeDialog:{position:"absolute",right:0,top:0},dialogContainer:{margin:15},lockedPluginTooltip:{marginRight:"0.5rem"}})));function T(){const{classes:e}=M();return a.a.createElement(k.a,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},a.a.createElement(I.a,null))}function L({onClose:e,plugin:t}){const{classes:n}=M();return a.a.createElement(S.a,{open:!0,onClose:()=>e()},a.a.createElement(C.a,null,a.a.createElement(h.a,{className:n.closeDialog,"aria-label":"close-dialog",onClick:()=>e()},a.a.createElement(B.a,null))),a.a.createElement(x.a,null,a.a.createElement(o.a,null,"Please confirm that you want to remove ",t,". Note: if any resources in this session still use this plugin, it may cause your session to crash"),a.a.createElement(O.a,null,a.a.createElement(l.a,{variant:"contained",color:"primary",onClick:()=>{window.setTimeout((()=>{e(t)}),500)}},"Confirm"),a.a.createElement(l.a,{variant:"contained",color:"secondary",onClick:()=>{e()}},"Cancel"))))}var P=Object(i.observer)((function({plugin:e,model:t,pluginManager:n}){const[i,l]=Object(r.useState)(),c=Object(g.getSession)(t),{sessionPlugins:u}=c,d=null==u?void 0:u.some((t=>n.pluginMetadata[e.name].url===t.url)),f=Object(s.getParent)(t,3),{jbrowse:p,adminMode:m}=f;return a.a.createElement(a.a.Fragment,null,i?a.a.createElement(L,{plugin:i,onClose:t=>{if(t){const t=n.pluginMetadata[e.name];m?p.removePlugin(t):Object(j.isSessionWithSessionPlugins)(c)&&c.removeSessionPlugin(t)}l(void 0)}}):null,a.a.createElement(N.a,{key:e.name},m||d?a.a.createElement(h.a,{"aria-label":"removePlugin","data-testid":`removePlugin-${e.name}`,onClick:()=>l(e.name)},a.a.createElement(B.a,null)):a.a.createElement(T,null),a.a.createElement(o.a,null,e.name)))}));var z=Object(i.observer)((function({pluginManager:e,model:t}){const{plugins:n}=e,r=n.filter((t=>{var n;return null===(n=e.pluginMetadata[t.name])||void 0===n?void 0:n.isCore})).map((e=>e.name)),i=n.filter((e=>!r.includes(e.name)));return a.a.createElement(E.a,null,i.length?i.filter((e=>e.name.toLowerCase().includes(t.filterText.toLowerCase()))).map((n=>a.a.createElement(P,{key:n.name,plugin:n,model:t,pluginManager:e}))):a.a.createElement(o.a,null,"No plugins currently installed"))})),F=n(676),q=n(679),$=n(918),D=n(678),U=n(1228),H=n.n(U),W=n(191),V=n.n(W),Z=n(1229),G=n.n(Z);const X=Object(p.makeStyles)()((()=>({card:{margin:"1em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center",margin:"0.4em 0em"}})));var K=Object(i.observer)((function({plugin:e,model:t,adminMode:n}){const{classes:i}=X(),c=Object(g.getSession)(t),{pluginManager:u}=Object(s.getEnv)(t),h=Boolean(u.runtimePluginDefinitions.find((t=>t.url===e.url))),[d,f]=Object(r.useState)(!1),p=h||d,m=Object(s.getParent)(t,3),{jbrowse:b}=m;return a.a.createElement(F.a,{variant:"outlined",key:e.name,className:i.card},a.a.createElement(q.a,null,a.a.createElement("div",{className:i.dataField},a.a.createElement(o.a,{variant:"h5"},a.a.createElement($.a,{href:`${e.location}#readme`,target:"_blank",rel:"noopener"},e.name))),a.a.createElement("div",{className:i.dataField},a.a.createElement(H.a,{style:{marginRight:"0.5em"}}),a.a.createElement(o.a,null,e.authors.join(", "))),a.a.createElement(o.a,{className:i.bold},"Description:"),a.a.createElement(o.a,null,e.description)),a.a.createElement(D.a,null,a.a.createElement(l.a,{variant:"contained",color:"primary",disabled:p,startIcon:h?a.a.createElement(G.a,null):a.a.createElement(V.a,null),onClick:()=>{n?b.addPlugin({name:e.name,url:e.url}):Object(j.isSessionWithSessionPlugins)(c)&&c.addSessionPlugin(e),f(!0)}},h?"Installed":"Install")))})),Y=n(689),J=n(653);const Q=Object(p.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},dialogContent:{display:"flex",flexDirection:"column"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}})));var ee=Object(i.observer)((function({open:e,onClose:t,model:n}){const{classes:i,cx:o}=Q(),[u,d]=Object(r.useState)(""),[f,p]=Object(r.useState)(""),[g,m]=Object(r.useState)(""),[v,y]=Object(r.useState)(""),[w,_]=Object(r.useState)(!1);function E(e){const{name:t,value:n}=e.target;"umdName"===t&&d(n),"umdUrl"===t&&p(n),"esmUrl"===t&&m(n),"cjsUrl"===t&&y(n)}const{jbrowse:k}=Object(s.getRoot)(n),N=Boolean(u&&f||g||v);function A(){if(!N)return;const e={};u&&f&&(e.name=u,e.umdUrl=f),g&&(e.esmUrl=g),v&&(e.cjsUrl=v),k.addPlugin(e)}function R(){d(""),p(""),m(""),y(""),t()}return a.a.createElement(S.a,{open:e,onClose:R},a.a.createElement(C.a,null,"Add custom plugin",a.a.createElement(h.a,{size:"medium",className:i.closeButton,onClick:()=>t()},a.a.createElement(B.a,null))),a.a.createElement("form",{onSubmit:A},a.a.createElement(x.a,{className:i.dialogContent},a.a.createElement(Y.a,null,"Enter the name of the plugin and its URL. The name should match what is defined in the plugin's build."),a.a.createElement(c.a,{id:"umd-name-input",name:"umdName",label:"Plugin name",variant:"outlined",value:u,onChange:E}),a.a.createElement(c.a,{id:"umd-url-input",name:"umdUrl",label:"Plugin URL",variant:"outlined",value:f,onChange:E}),a.a.createElement(Y.a,{onClick:function(){_(!w)}},a.a.createElement(h.a,{className:o(i.expand,{[i.expandOpen]:w}),"aria-expanded":w,"aria-label":"show more"},a.a.createElement(b.a,null)),"Advanced options"),a.a.createElement(J.a,{in:w},a.a.createElement("div",{className:i.dialogContent},a.a.createElement(Y.a,null,"The above fields assume that the plugin is built in UMD format. If your plugin is in another format, or you have additional builds you want to add (such as a CJS build for using NodeJS APIs in desktop), you can enter the URLs for those builds below."),a.a.createElement(c.a,{id:"esm-url-input",name:"esmUrl",label:"ESM build URL",variant:"outlined",value:g,onChange:E}),a.a.createElement(c.a,{id:"cjs-url-input",name:"cjsUrl",label:"CJS build URL",variant:"outlined",value:v,onChange:E})))),a.a.createElement(O.a,null,a.a.createElement(l.a,{variant:"contained",onClick:R},"Cancel"),a.a.createElement(l.a,{variant:"contained",color:"primary",onClick:A,disabled:!N},"Submit"))))}));const te=Object(p.makeStyles)()((e=>({root:{margin:e.spacing(1)},expandIcon:{color:"#fff"},adminBadge:{margin:"0.5em",borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"0.5em",display:"flex",justifyContent:"center"}})));t.default=Object(i.observer)((function({model:e}){const{classes:t}=te(),[n,i]=Object(r.useState)(),[p,m]=Object(r.useState)(),[v,w]=Object(r.useState)(!1),{adminMode:E}=Object(g.getSession)(e),{pluginManager:k}=Object(s.getEnv)(e);return Object(r.useEffect)((()=>{const e=new AbortController,{signal:t}=e;return(async()=>{try{const e=await fetch("https://jbrowse.org/plugin-store/plugins.json",{signal:t});if(!e.ok){const t=await e.text();throw new Error(`Failed to fetch plugin data: ${e.status} ${e.statusText} ${t}`)}const n=await e.json();t.aborted||i(n.plugins)}catch(e){console.error(e),m(e)}})(),()=>{e.abort()}}),[]),a.a.createElement("div",{className:t.root},E&&a.a.createElement(a.a.Fragment,null,!g.isElectron&&a.a.createElement("div",{className:t.adminBadge},a.a.createElement(_.a,{style:{marginRight:"0.3em"}}),a.a.createElement(o.a,null,"You are using the ",a.a.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),a.a.createElement("div",{className:t.customPluginButton},a.a.createElement(l.a,{variant:"contained",color:"primary",onClick:()=>w(!0)},"Add custom plugin")),a.a.createElement(ee,{open:v,onClose:()=>w(!1),model:e})),a.a.createElement(c.a,{label:"Filter plugins",value:e.filterText,onChange:t=>e.setFilterText(t.target.value),fullWidth:!0,InputProps:{endAdornment:a.a.createElement(u.a,{position:"end"},a.a.createElement(h.a,{color:"secondary",onClick:()=>e.clearFilterText()},a.a.createElement(y.a,null)))}}),a.a.createElement(d.a,{defaultExpanded:!0},a.a.createElement(f.a,{expandIcon:a.a.createElement(b.a,{className:t.expandIcon})},a.a.createElement(o.a,{variant:"h5"},"Installed plugins")),a.a.createElement("div",{style:{margin:"1em"}},a.a.createElement(z,{pluginManager:k,model:e}))),a.a.createElement(d.a,{defaultExpanded:!0},a.a.createElement(f.a,{expandIcon:a.a.createElement(b.a,{className:t.expandIcon})},a.a.createElement(o.a,{variant:"h5"},"Available plugins")),p?a.a.createElement(o.a,{color:"error"},`${p}`):n?n.filter((t=>!!(g.isElectron||t.esmUrl||t.url||t.umdUrl)&&t.name.toLowerCase().includes(e.filterText.toLowerCase()))).map((t=>a.a.createElement(K,{key:t.name,plugin:t,model:e,adminMode:!!E}))):a.a.createElement(o.a,null,"Loading...")))}))},1352:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(694),o=n(921),l=n(711),c=n(697),u=n(17),h=n(21),d=n(663),f=n(731),p=n(726),g=n(728),m=n(730),b=n(673),v=n(901),y=n(22),w=n(13),_=n(667),E=n(510),k=n(702),S=n(676),C=n(679),x=n(704),O=n(705),N=n(746),A=n(701),B=n(660),R=n(918),I=n(695),j=n(903),M=n(328),T=n.n(M),L=n(191),P=n.n(L),z=n(39);const F=Object(y.makeStyles)()((e=>({spacing:{marginBottom:e.spacing(3)},paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)},card:{marginTop:e.spacing(1)}})));function q({trackAdapter:e,trackType:t}){var n;const{classes:r}=F();return"SNPCoverageAdapter"===e.type?a.a.createElement(d.a,{className:r.spacing},"Selected ",a.a.createElement("code",null,t),". Using adapter"," ",a.a.createElement("code",null,e.type)," with subadapter"," ",a.a.createElement("code",null,null===(n=e.subadapter)||void 0===n?void 0:n.type),". Please enter a track name and, if necessary, update the track type."):a.a.createElement(d.a,{className:r.spacing},"Using adapter ",a.a.createElement("code",null,e.type)," and guessing track type"," ",a.a.createElement("code",null,t),". Please enter a track name and, if necessary, update the track type.")}const $=Object(i.observer)((({model:e})=>{const{classes:t}=F(),[n,i]=Object(r.useState)(""),[s,o]=Object(r.useState)(""),[l,c]=Object(r.useState)(["Name","ID"]),[u,h]=Object(r.useState)(["CDS","exon"]),d=[{label:"Indexing attributes",values:l},{label:"Feature types to exclude",values:u}];return Object(r.useEffect)((()=>{e.setTextIndexingConf({attributes:l,exclude:u})}),[e,l,u]),a.a.createElement(E.a,{className:t.paper},a.a.createElement(k.a,null,"Indexing configuration"),d.map(((e,r)=>a.a.createElement(S.a,{raised:!0,key:e.label,className:t.card},a.a.createElement(C.a,null,a.a.createElement(k.a,null,e.label),a.a.createElement(x.a,{disablePadding:!0},e.values.map(((t,n)=>a.a.createElement(O.a,{key:n,disableGutters:!0},a.a.createElement(N.a,{value:t,InputProps:{endAdornment:a.a.createElement(A.a,{position:"end"},a.a.createElement(B.a,{color:"secondary",onClick:()=>{const t=e.values.filter(((e,t)=>t!==n));0===r?c(t):h(t)}},a.a.createElement(T.a,null)))}})))),a.a.createElement(O.a,{disableGutters:!0},a.a.createElement(N.a,{value:0===r?n:s,placeholder:"add new",onChange:e=>{0===r?i(e.target.value):o(e.target.value)},InputProps:{endAdornment:a.a.createElement(A.a,{position:"end"},a.a.createElement(B.a,{onClick:()=>{if(0===r){const e=l;e.push(n),c(e),i("")}else{const e=u;e.push(s),h(e),o("")}},disabled:0===r?""===n:""===s,color:"secondary","data-testid":"stringArrayAdd-Feat"},a.a.createElement(P.a,null)))}}))))))))})),D=Object(i.observer)((({model:e})=>{const{classes:t}=F(),{trackAdapter:n}=e,{pluginManager:r}=Object(h.getEnv)(e),i=function(e){return e.getElementTypesInGroup("adapter")}(r);return a.a.createElement(N.a,{className:t.spacing,value:"UNKNOWN"!==(null==n?void 0:n.type)?null==n?void 0:n.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:t=>e.setAdapterHint(t.target.value),SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}}},i.filter((e=>{var t,n;return!(null===(t=e.adapterMetadata)||void 0===t?void 0:t.hiddenFromGUI)&&!(null===(n=e.adapterMetadata)||void 0===n?void 0:n.category)})).map((e=>{var t,n;return a.a.createElement(l.a,{key:e.name,value:e.name},(null===(t=e.adapterMetadata)||void 0===t?void 0:t.displayName)?null===(n=e.adapterMetadata)||void 0===n?void 0:n.displayName:e.name)})),function(e){let t="";const n=[];return e.forEach((e=>{var r,i,s,o,c,u,h,d;(null===(r=e.adapterMetadata)||void 0===r?void 0:r.category)&&(t!==(null===(i=e.adapterMetadata)||void 0===i?void 0:i.category)&&(t=null===(s=e.adapterMetadata)||void 0===s?void 0:s.category,n.push(a.a.createElement(_.a,{key:null===(o=e.adapterMetadata)||void 0===o?void 0:o.category,value:null===(c=e.adapterMetadata)||void 0===c?void 0:c.category},null===(u=e.adapterMetadata)||void 0===u?void 0:u.category))),n.push(a.a.createElement(l.a,{key:e.name,value:e.name},(null===(h=e.adapterMetadata)||void 0===h?void 0:h.displayName)?null===(d=e.adapterMetadata)||void 0===d?void 0:d.displayName:e.name)))})),n}(i.filter((e=>{var t;return!(null===(t=e.adapterMetadata)||void 0===t?void 0:t.hiddenFromGUI)}))))}));function U({model:e}){const{classes:t}=F();return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{className:t.spacing},"JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",a.a.createElement(R.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse to see if they support this data type or"," ",a.a.createElement(R.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."),a.a.createElement(D,{model:e}))}const H=Object(i.observer)((({model:e})=>{const{classes:t}=F(),n=Object(u.getSession)(e),{trackType:r}=e,i=Object(h.getEnv)(n).pluginManager.getElementTypesInGroup("track");return a.a.createElement(N.a,{className:t.spacing,value:r,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:t=>{e.setTrackType(t.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}}},i.map((({name:e})=>a.a.createElement(l.a,{key:e,value:e},e))))})),W=Object(i.observer)((({model:e})=>{const t=Object(u.getSession)(e),{assembly:n}=e;return a.a.createElement(N.a,{value:n,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:t=>e.setAssembly(t.target.value),SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}},t.assemblies.map((e=>Object(w.readConfObject)(e,"name"))).map((e=>a.a.createElement(l.a,{key:e,value:e},e))))}));var V=Object(i.observer)((function({model:e}){const{classes:t}=F(),[n,i]=Object(r.useState)(!0),{trackName:o,trackAdapter:l,trackType:c,warningMessage:h,adapterHint:f}=e;if(e.unsupported)return a.a.createElement(d.a,{className:t.spacing},"This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",a.a.createElement(R.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse or"," ",a.a.createElement(R.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type.");if((null==l?void 0:l.type)===z.UNKNOWN)return a.a.createElement(U,{model:e});if(""===f&&l&&e.setAdapterHint(l.type),!(null==l?void 0:l.type))return a.a.createElement(d.a,null,"Could not recognize this data type.");const p=Object(u.supportedIndexingAdapters)(null==l?void 0:l.type);return a.a.createElement("div",null,l?a.a.createElement(q,{trackAdapter:l,trackType:c}):null,h?a.a.createElement(d.a,{style:{color:"orange"}},h):null,a.a.createElement(N.a,{className:t.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:o,onChange:t=>e.setTrackName(t.target.value),inputProps:{"data-testid":"trackNameInput"}}),a.a.createElement(D,{model:e}),a.a.createElement(H,{model:e}),a.a.createElement(W,{model:e}),u.isElectron&&p&&a.a.createElement(s.a,null,a.a.createElement(I.a,{label:"Index track for text searching?",control:a.a.createElement(j.a,{checked:n,onChange:t=>{i(t.target.checked),e.setTextIndexTrack(t.target.checked)}})})),u.isElectron&&n&&p?a.a.createElement($,{model:e}):null)})),Z=n(43);const G=Object(y.makeStyles)()((e=>({paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}})));var X=Object(i.observer)((function({model:e}){const{classes:t}=G(),n=Object(h.getRoot)(e);return a.a.createElement(E.a,{className:t.paper},a.a.createElement(Z.FileSelector,{name:"Main file",description:"",location:e.trackData,setLocation:e.setTrackData,setName:e.setTrackName,rootModel:n}),a.a.createElement("div",{className:t.spacer}),a.a.createElement(Z.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:e.indexTrackData,setLocation:e.setIndexTrackData,setName:e.setTrackName,rootModel:n}))}));const K=Object(y.makeStyles)()((e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:`${e.spacing(2)}px 0px ${e.spacing(2)}px 0px`}}))),Y=["Enter track data","Confirm track type"];var J=Object(i.observer)((function({model:e}){const[t,n]=Object(r.useState)(0),{classes:i}=K(),{pluginManager:s}=Object(h.getEnv)(e),{rootModel:o}=s,{jobsManager:l}=o,c=Object(u.getSession)(e),{assembly:y,trackAdapter:_,trackData:E,trackName:k,trackType:S,textIndexTrack:C,textIndexingConf:x}=e,[O,N]=Object(r.useState)();async function A(){if(t!==Y.length-1)return void n(t+1);const r=[`${k.toLowerCase().replace(/ /g,"_")}-${Date.now()}`,""+(c.adminMode?"":"-sessionTrack")].join(""),a=c.assemblyManager.get(y);if(_&&"UNKNOWN"!==_.type){if(c.addTrackConf({trackId:r,type:S,name:k,assemblyNames:[y],adapter:{..._,sequenceAdapter:Object(w.getConf)(a,["sequence","adapter"])}}),e.view){if(e.view.showTrack(r),u.isElectron&&C&&Object(u.supportedIndexingAdapters)(_.type)){const e=k+"-index",t={indexingParams:{...x||{attributes:["Name","ID"],exclude:["CDS","exon"]},assemblies:[y],tracks:[r],indexType:"perTrack",name:e,timestamp:(new Date).toISOString()},name:e,cancelCallback:()=>l.abortJob()};l.queueJob(t)}}else c.notify("Open a new view, or use the track selector in an existing view, to view this track","info");e.clearData(),c.hideWidget(e)}else N("Failed to add track.\nThe configuration of this file is not currently supported.")}function B(){N(void 0),n(t-1)}function R(){switch(t){case 0:return!E;case 1:return!(k&&S&&(null==_?void 0:_.type)&&y);default:return!0}}return a.a.createElement("div",{className:i.root},a.a.createElement(f.a,{className:i.stepper,activeStep:t,orientation:"vertical"},Y.map(((n,r)=>a.a.createElement(p.a,{key:n},a.a.createElement(g.a,null,n),a.a.createElement(m.a,null,function(t){switch(t){case 0:return a.a.createElement(X,{model:e});case 1:return a.a.createElement(V,{model:e});default:return a.a.createElement(d.a,null,"Unknown step")}}(r),a.a.createElement("div",{className:i.actionsContainer},a.a.createElement(b.a,{disabled:0===t,onClick:B,className:i.button},"Back"),a.a.createElement(b.a,{disabled:R(),variant:"contained",color:"primary",onClick:A,className:i.button,"data-testid":"addTrackNextButton"},t===Y.length-1?"Add":"Next")),O?a.a.createElement("div",{className:i.alertContainer},a.a.createElement(v.a,{severity:"error"},O)):null))))))}));t.default=Object(i.observer)((function({model:e}){const[t,n]=Object(u.useLocalStorage)("trackSelector-choice","Default"),{pluginManager:r}=Object(h.getEnv)(e),i=r.getElementTypesInGroup("add track workflow"),d={Default:J,...Object.fromEntries(i.map((e=>[e.name,e.ReactComponent])))},f=d[t]?t:"Default",p=d[f];return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,null,a.a.createElement(o.a,{value:f,onChange:e=>n(e.target.value)},Object.keys(d).map((e=>a.a.createElement(l.a,{key:e,value:e},e)))),a.a.createElement(c.a,null,"Type of add track workflow")),a.a.createElement("br",null),a.a.createElement(p,{model:e}))}))},1353:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(17),s=n(663),o=n(731),l=n(726),c=n(728),u=n(730),h=n(673),d=n(22),f=n(20),p=n(21),g=n(482);var m=Object(f.observer)((e=>{const{connectionType:t,model:n,session:i}=e,s=t.configEditorComponent||g.a;return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(s,{model:{target:n},session:i}))})),b=n(746),v=n(660),y=n(711),w=n(1227),_=n.n(w);var E=function(e){const{connectionTypeChoices:t,connectionType:n,setConnectionType:i}=e;return Object(r.useEffect)((()=>{n||i(t[0])})),a.a.createElement("form",{autoComplete:"off"},n?a.a.createElement(b.a,{value:n.name,label:"connectionType",helperText:n.description?a.a.createElement(a.a.Fragment,null,n.description,n.url?a.a.createElement(v.a,{href:n.url,rel:"noopener noreferrer",target:"_blank",color:"secondary"},a.a.createElement(_.a,null)):null):null,select:!0,fullWidth:!0,onChange:e=>i(t.find((t=>t.name===e.target.value))),variant:"outlined"},t.map((e=>a.a.createElement(y.a,{key:e.name,value:e.name},e.displayName||e.name)))):null)};const k=Object(d.makeStyles)()((e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}}))),S=["Select a Connection Type","Configure Connection"];t.default=Object(f.observer)((function({model:e}){const[t,n]=Object(r.useState)(),[d,f]=Object(r.useState)(),[g,b]=Object(r.useState)(0),{classes:v}=k(),y=Object(i.getSession)(e),{pluginManager:w}=Object(p.getEnv)(y);function _(){g===S.length-1?function(){const t=y.addConnectionConf(d);y.makeConnection&&y.makeConnection(t);y.hideWidget(e)}():b(g+1)}function C(){b(g-1)}return a.a.createElement("div",{className:v.root},a.a.createElement(o.a,{className:v.stepper,activeStep:g,orientation:"vertical"},S.map((r=>a.a.createElement(l.a,{key:r},a.a.createElement(c.a,null,r),a.a.createElement(u.a,null,function(){switch(g){case 0:return a.a.createElement(E,{connectionTypeChoices:w.getElementTypesInGroup("connection"),connectionType:t,setConnectionType:t=>{n(t),t&&f(t.configSchema.create({connectionId:`${t.name}-${Date.now()}`},Object(p.getEnv)(e)))}});case 1:return t&&d?a.a.createElement(m,{connectionType:t,model:d,session:y}):null;default:return a.a.createElement(s.a,null,"Unknown step")}}(),a.a.createElement("div",{className:v.actionsContainer},a.a.createElement(h.a,{disabled:0===g,onClick:C,className:v.button},"Back"),a.a.createElement(h.a,{disabled:!(0===g&&t||1===g&&d),variant:"contained",color:"primary",onClick:_,className:v.button,"data-testid":"addConnectionNext"},g===S.length-1?"Connect":"Next"))))))))}))},1354:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n(43),o=n(17),l=n(660),c=n(22),u=n(507),h=n(601),d=n.n(h),f=n(470),p=n.n(f),g=n(1250),m=n.n(g),b=n(1251),v=n.n(b),y=n(1252),w=n.n(y),_=n(888),E=n.n(_),k=n(144),S=n(595),C=n(46);const x=Object(c.makeStyles)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function O(e,t,n,r){e.flipped&&([n,r]=[r,n]);const a=e.bpToXY(n,t),i=e.bpToXY(r,t);return["M",...a,"A",t,t,"0",Math.abs(r-n)/e.bpPerRadian>Math.PI?"1":"0","1",...i].join(" ")}const N=Object(i.observer)((({model:e,slice:t})=>{const n=Object(C.a)(),{radiusPx:r}=e,i=r+1,{endRadians:s,startRadians:l,region:c}=t,u=Object(o.polarToCartesian)(i,l),h=Object(o.polarToCartesian)(i,s),d=(s-l)*i,f=s-l>Math.PI?"1":"0",p=(s+l)/2,g=`[${Number(c.regions.length).toLocaleString()}]`;return a.a.createElement(a.a.Fragment,null,a.a.createElement(A,{text:g,view:e,maxWidthPx:d,radians:p,radiusPx:i,title:`${Number(c.regions.length).toLocaleString()} more regions`,color:n.palette.text.primary}),a.a.createElement("path",{d:["M",...u,"A",i,i,"0",f,"1",...h].join(" "),stroke:n.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"}))})),A=Object(i.observer)((({view:e,text:t,maxWidthPx:n,radians:r,radiusPx:i,title:s,color:l})=>{const{classes:c}=x(),u=Object(o.polarToCartesian)(i+5,r);if(!t)return null;if(6.5*t.length<n)return a.a.createElement("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${u}) rotate(${Object(o.radToDeg)(r)+90})`,style:{fill:l}},t,a.a.createElement("title",null,s||t));if(n>4){return Object(o.radToDeg)(r+e.offsetRadians-Math.PI/2)>=180?a.a.createElement("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${u}) rotate(${Object(o.radToDeg)(r)})`,style:{fill:l}},t,a.a.createElement("title",null,s||t)):a.a.createElement("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${u}) rotate(${Object(o.radToDeg)(r)+180})`,style:{fill:l}},t,a.a.createElement("title",null,s||t))}return null})),B=Object(i.observer)((({model:e,slice:t})=>{const n=Object(C.a)(),{radiusPx:r}=e,{region:i,endRadians:s,startRadians:l}=t,c=(s+l)/2,u=(s-l)*r;let h;const d=Object(o.getSession)(e).assemblyManager.get(t.region.assemblyName);if(d&&(h=d.getRefNameColor(i.refName)),h)try{h=Object(S.makeContrasting)(h,n.palette.background.paper)}catch(e){h=n.palette.text.primary}else h=n.palette.text.primary;return a.a.createElement(a.a.Fragment,null,a.a.createElement(A,{text:i.refName,view:e,maxWidthPx:u,radians:c,radiusPx:r,color:h}),a.a.createElement("path",{d:O(t,r+1,i.start,i.end),stroke:h,strokeWidth:2,fill:"none"},a.a.createElement("title",null,i.refName)))}));var R=Object(i.observer)((({model:e,slice:t})=>t.region.elided?a.a.createElement(N,{key:Object(o.assembleLocString)(t.region.regions[0]),model:e,slice:t}):a.a.createElement(B,{key:Object(o.assembleLocString)(t.region),model:e,slice:t}))),I=n(916),j=n(917),M=n(673);const T=Object(c.makeStyles)()((e=>({importFormContainer:{marginBottom:e.spacing(4)}})));var L=Object(i.observer)((({model:e})=>{const{classes:t}=T(),n=Object(o.getSession)(e),{error:i}=e,{assemblyNames:l,assemblyManager:c}=n,[u,h]=Object(r.useState)(l[0]),[d,f]=Object(r.useState)(i),p=c.get(u),g=l.length?null==p?void 0:p.error:"No configured assemblies",m=(null==p?void 0:p.regions)||[],b=g||d;return a.a.createElement(I.a,{className:t.importFormContainer},b?a.a.createElement(j.a,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.a.createElement(j.a,{item:!0},a.a.createElement(s.ErrorMessage,{error:b}))):null,a.a.createElement(j.a,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.a.createElement(j.a,{item:!0},a.a.createElement(s.AssemblySelector,{onChange:e=>{f(void 0),h(e)},session:n,selected:u})),a.a.createElement(j.a,{item:!0},a.a.createElement(M.a,{disabled:!(null==m?void 0:m.length),onClick:()=>e.setDisplayedRegions(m),variant:"contained",color:"primary"},m.length?"Open":"Loading"))))}));const P=Object(c.makeStyles)()((e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden",background:"white"},scroller:{overflow:"auto"},sliceRoot:{background:"none",boxSizing:"content-box",display:"block"},iconButton:{padding:"4px",margin:"0 2px 0 2px"},controls:{overflow:"hidden",whiteSpace:"nowrap",position:"absolute",background:u.a[200],boxSizing:"border-box",borderRight:"1px solid #a2a2a2",borderBottom:"1px solid #a2a2a2",left:0,top:0},importFormContainer:{marginBottom:e.spacing(4)}}))),z=Object(i.observer)((({model:e})=>a.a.createElement(a.a.Fragment,null,e.staticSlices.map((t=>a.a.createElement(R,{key:Object(o.assembleLocString)(t.region.elided?t.region.regions[0]:t.region),model:e,slice:t}))),e.tracks.map((t=>{const n=t.displays[0];return a.a.createElement(n.RenderingComponent,{key:n.id,display:n,view:e})}))))),F=Object(i.observer)((({model:e,showingFigure:t})=>{const{classes:n}=P();return a.a.createElement("div",{className:n.controls},a.a.createElement(l.a,{onClick:e.zoomOutButton,className:n.iconButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:!t||e.atMaxBpPerPx||e.lockedFitToWindow,color:"secondary"},a.a.createElement(d.a,null)),a.a.createElement(l.a,{onClick:e.zoomInButton,className:n.iconButton,title:"zoom in",disabled:!t||e.atMinBpPerPx,color:"secondary"},a.a.createElement(p.a,null)),a.a.createElement(l.a,{onClick:e.rotateCounterClockwiseButton,className:n.iconButton,title:"rotate counter-clockwise",disabled:!t,color:"secondary"},a.a.createElement(m.a,null)),a.a.createElement(l.a,{onClick:e.rotateClockwiseButton,className:n.iconButton,title:"rotate clockwise",disabled:!t,color:"secondary"},a.a.createElement(v.a,null)),a.a.createElement(l.a,{onClick:e.toggleFitToWindowLock,className:n.iconButton,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock,color:"secondary"},e.lockedFitToWindow?a.a.createElement(E.a,null):a.a.createElement(w.a,null)),e.hideTrackSelectorButton?null:a.a.createElement(l.a,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",color:"secondary"},a.a.createElement(k.TrackSelector,null)))})),q=Object(i.observer)((({model:e})=>{const{classes:t}=P(),n=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight,r=!n&&!e.disableImportForm,i=n&&!r;return a.a.createElement("div",{className:t.root,style:{width:e.width,height:e.height},"data-testid":e.id},e.error?a.a.createElement(s.ErrorMessage,{error:e.error}):a.a.createElement(a.a.Fragment,null,r?a.a.createElement(L,{model:e}):null,a.a.createElement(a.a.Fragment,null,i?a.a.createElement("div",{className:t.scroller,style:{width:e.width,height:e.height}},a.a.createElement("div",{style:{transform:[`rotate(${e.offsetRadians}rad)`].join(" "),transition:"transform 0.5s",transformOrigin:e.centerXY.map((e=>`${e}px`)).join(" ")}},a.a.createElement("svg",{style:{position:"absolute",left:0,top:0},className:t.sliceRoot,width:`${e.figureWidth}px`,height:`${e.figureHeight}px`,version:"1.1"},a.a.createElement("g",{transform:`translate(${e.centerXY})`},a.a.createElement(z,{model:e}))))):null,a.a.createElement(F,{model:e,showingFigure:i}),e.hideVerticalResizeHandle?null:a.a.createElement(s.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))))}));t.default=q},1357:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n(1),a=n.n(r),i=n(20),s=n(684),o=n(690),l=n(688),c=n(663),u=n(687),h=n(673);var d=Object(i.observer)((({rootModel:e,onClose:t})=>{if(!e)return null;if("object"!=typeof(n=e)||!n||!("jbrowse"in n))return console.error("Incorrect rootmodel"),null;var n;const{jbrowse:r,session:i}=e;return a.a.createElement(s.a,{open:!0,onClose:t},a.a.createElement(o.a,null,"Set default session"),a.a.createElement(l.a,null,a.a.createElement(c.a,null,'Select "Set current session as default" to make your current session saved to the config file. You can also hit "Clear default session", which would remove the default session from the config.')),a.a.createElement(u.a,null,a.a.createElement(h.a,{variant:"contained",onClick:()=>{r.setDefaultSessionConf({name:"New session"}),t()}},"Clear default session"),a.a.createElement(h.a,{color:"secondary",variant:"contained",onClick:()=>t()},"Cancel"),a.a.createElement(h.a,{color:"primary",variant:"contained",onClick:()=>{r.setDefaultSessionConf(i),t()}},"Set current session as default")))}))},1359:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n(42),a=n(51),i=n(53),s=n(72),o=n.n(s),l=n(894),c=n(13);class u extends r.BaseSequenceAdapter{constructor(e,t,n){super(e,t,n),this.chromSizesData=this.initChromSizes(),this.twobit=new l.a({filehandle:Object(a.openLocation)(Object(c.readConfObject)(e,"twoBitLocation"),this.pluginManager)})}async initChromSizes(){const e=Object(c.readConfObject)(this.config,"chromSizesLocation");if("/path/to/default.chrom.sizes"!==e.uri&&""!==e.uri){const t=Object(a.openLocation)(e,this.pluginManager),n=await t.readFile("utf8");return Object.fromEntries(null==n?void 0:n.split("\n").filter((e=>!!e.trim())).map((e=>{const[t,n]=e.split("\t");return[t,+n]})))}}async getRefNames(){const e=await this.chromSizesData;return e?Object.keys(e):this.twobit.getSequenceNames()}async getRegions(){const e=await this.chromSizesData;if(e)return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})));const t=await this.twobit.getSequenceSizes();return Object.keys(t).map((e=>({refName:e,start:0,end:t[e]})))}getFeatures({refName:e,start:t,end:n}){return Object(i.ObservableCreate)((async r=>{const a=await this.twobit.getSequenceSize(e),i=void 0!==a?Math.min(a,n):n,s=await this.twobit.getSequence(e,t,i);s&&r.next(new o.a({id:`${e} ${t}-${i}`,data:{refName:e,start:t,end:i,seq:s}})),r.complete()}))}freeResources(){}}},1360:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var r=n(1),a=n.n(r),i=n(510),s=n(684),o=n(690),l=n(660),c=n(688),u=n(673),h=n(687),d=n(22),f=n(17),p=n(895),g=n(1213),m=n.n(g),b=n(597),v=n.n(b),y=n(877),w=n.n(y),_=n(83);function E(e,t,n=1){const r=t.map((t=>e.findIndex((e=>e.name===t)))).sort(((e,t)=>e-t));let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=Math.max(a,i-n);s>=a&&e.splice(s,0,e.splice(i,1)[0]),a+=1}return e}function k(e,t,n=1){const r=t.map((t=>e.findIndex((e=>e.name===t)))).sort(((e,t)=>t-e));let a=e.length-1;for(let t=0;t<r.length;t++){const i=r[t],s=Math.min(a,i+n);s<=a&&e.splice(s,0,e.splice(i,1)[0]),a-=1}return e}var S=n(37),C=n.n(S),x=n(1218),O=n.n(x),N=n(1219),A=n.n(N),B=n(835),R=n.n(B),I=n(1217),j=n.n(I);const M=Object(d.makeStyles)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},content:{minWidth:800}})));function T(e){return a.a.createElement(m.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},a.a.createElement(i.a,{...e}))}function L({model:e,handleClose:t}){const{classes:n}=M(),{sources:i}=e,[d,p]=Object(r.useState)(v()(i||[])),[g,m]=Object(f.useLocalStorage)("multiwiggle-showTips",!0);return a.a.createElement(s.a,{PaperComponent:T,open:!0,onClose:t,maxWidth:"xl","aria-labelledby":"draggable-dialog-title"},a.a.createElement(o.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Multi-wiggle color/arrangement editor"," ",a.a.createElement(l.a,{className:n.closeButton,onClick:t},a.a.createElement(C.a,null))),a.a.createElement(c.a,{className:n.content},a.a.createElement(u.a,{variant:"contained",style:{float:"right"},onClick:()=>m(!g)},g?"Hide tips":"Show tips"),a.a.createElement("br",null),g?a.a.createElement(a.a.Fragment,null,"Helpful tips",a.a.createElement("ul",null,a.a.createElement("li",null,"You can select rows in the table with the checkboxes"),a.a.createElement("li",null,"Multi-select is enabled with shift-click and control-click"),a.a.createElement("li",null,'The "Move selected items up/down" can re-arrange subtracks'),a.a.createElement("li",null,"Sorting the data grid itself can also re-arrange subtracks"),a.a.createElement("li",null,"Changes are applied when you hit Submit"),a.a.createElement("li",null,"You can click and drag the dialog box to move it on the screen"),a.a.createElement("li",null,"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"))):null,a.a.createElement(P,{rows:d,onChange:p,showTips:g})),a.a.createElement(h.a,null,a.a.createElement(u.a,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),p(e.sources||[])}},"Clear custom settings"),a.a.createElement(u.a,{variant:"contained",color:"secondary",onClick:()=>{t(),p([...e.sources||[]])}},"Cancel"),a.a.createElement(u.a,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(d),t()}},"Submit")))}function P({rows:e,onChange:t,showTips:n}){const[i,s]=Object(r.useState)(null),[o,l]=Object(r.useState)([]),{name:c,color:h,baseUri:d,...g}=e[0],m=[{field:"color",headerName:"Color",renderCell:n=>{const{value:r,id:i}=n;return a.a.createElement(w.a,{color:r||"blue",onChange:n=>{const r=e.find((e=>e.name===i));r&&(r.color=n),t([...e])}})}},{field:"name",sortingOrder:[null],headerName:"Name",width:Object(f.measureGridWidth)(e.map((e=>e.name)))},...Object.keys(g).map((t=>({field:t,sortingOrder:[null],renderCell:e=>{const{value:t}=e;return Object(f.isUriLocation)(t)?a.a.createElement(_.UriLink,{value:t}):Object(f.getStr)(t)},width:Object(f.measureGridWidth)(e.map((e=>e[t])))})))],[b,v]=Object(r.useState)("blue"),[S,C]=Object(r.useState)({idx:0,field:null});return a.a.createElement("div",null,a.a.createElement(u.a,{disabled:!o.length,onClick:e=>s(e.currentTarget)},"Change color of selected items"),a.a.createElement(u.a,{onClick:()=>t(E([...e],o)),disabled:!o.length},a.a.createElement(j.a,null),n?"Move selected items up":null),a.a.createElement(u.a,{onClick:()=>t(k([...e],o)),disabled:!o.length},a.a.createElement(R.a,null),n?"Move selected items down":null),a.a.createElement(u.a,{onClick:()=>t(E([...e],o,e.length)),disabled:!o.length},a.a.createElement(O.a,null),n?"Move selected items to top":null),a.a.createElement(u.a,{onClick:()=>t(k([...e],o,e.length)),disabled:!o.length},a.a.createElement(A.a,null),n?"Move selected items to bottom":null),a.a.createElement(y.ColorPopover,{anchorEl:i,color:b,onChange:n=>{v(n),o.forEach((t=>{const r=e.find((e=>e.name===t));r&&(r.color=n)})),t([...e])},onClose:()=>s(null)}),a.a.createElement("div",{style:{height:400,width:"100%"}},a.a.createElement(p.a,{getRowId:e=>e.name,checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:e=>l(e),rows:e,rowHeight:25,headerHeight:33,columns:m,sortModel:[],onSortModelChange:n=>{const r=n[0],a=(S.idx+1)%2,i=(null==r?void 0:r.field)||S.field;C({idx:a,field:i}),t(i?[...e].sort(((e,t)=>{const n=Object(f.getStr)(e[i]),r=Object(f.getStr)(t[i]);return 1===a?n.localeCompare(r):r.localeCompare(n)})):e)}})))}},145:function(e,t,n){"use strict";class r{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}e.exports=r},146:function(e,t,n){"use strict";var r=n(478),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var i=Object.create(n(354));i.inherits=n(192);var s=n(890),o=n(625);i.inherits(h,s);for(var l=a(o.prototype),c=0;c<l.length;c++){var u=l[c];h.prototype[u]||(h.prototype[u]=o.prototype[u])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},191:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=s},192:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},351:function(e,t,n){(function(t){e.exports=class{constructor(e,n=0,r=0){0!=r?(this.buf=t.allocUnsafe(r),this.length=r):(this.buf=e,this.length=e.length),this.pos=n}EOF(){return this.pos>=this.length}ReadData(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}ReadByte(){const e=this.buf[this.pos];return this.pos++,e}ReadChar(){const e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}ReadUint16(){var e=this.ReadByte();return e|=this.ReadByte()<<8}ReadUint32(){const e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}ReadString(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}ReadUint7(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}ReadITF8(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}WriteByte(e){this.buf[this.pos++]=e}WriteChar(e){this.buf[this.pos++]=e.charCodeAt(0)}WriteString(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}WriteData(e,t){for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]}WriteStream(e){this.WriteData(e.buf,e.pos)}WriteUint16(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}WriteUint32(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}WriteUint7(e){var t=0,n=e;do{t+=7,n>>=7}while(n>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}WriteITF8(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}WriteByteNeg(e){this.buf[--this.pos]=e}}}).call(this,n(35).Buffer)},352:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u}));var r=n(1186),a=n.n(r),i=n(56);function s(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1}function o(e,t){let n=t;const r=e[n];let a;if(r<128?(a=r,n+=1):r<192?(a=16383&(r<<8|e[n+1]),n+=2):r<224?(a=2097151&(r<<16|e[n+1]<<8|e[n+2]),n+=3):r<240?(a=268435455&(r<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),n+=4):(a=(15&r)<<28|e[n+1]<<20|e[n+2]<<12|e[n+3]<<4|15&e[n+4],n+=5),n>e.length)throw new i.b("Attempted to read beyond end of buffer; this file seems truncated.");return[a,n-t]}function l(e,t,n=0,r=0){const{offset:a,result:i}=t.parse(e);return i._endPosition=a+r,i._size=a-n,i}function c(e,t){const n=e.prototype[t],r=`_memo_${t}`;e.prototype[t]=function(){if(!(r in this)){const e=n.call(this);this[r]=e,Promise.resolve(e).catch((()=>{delete this[r]}))}return this[r]}}function u(e){return a()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}},353:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(849);async function a(t){try{let n,a=0,i=0;const s=[];let o,l=0;do{const e=t.subarray(a);if(o=new r.Inflate,({strm:n}=o),o.push(e,r.Z_SYNC_FLUSH),o.err)throw new Error(o.msg);a+=n.next_in,s[i]=o.result,l+=s[i].length,i+=1}while(n.avail_in);const c=new Uint8Array(l);for(let e=0,t=0;e<s.length;e++)c.set(s[e],t),t+=s[e].length;return e.from(c)}catch(e){if(`${e}`.match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw e}}async function i(t,n){try{let a;const{minv:i,maxv:s}=n;let o=i.blockPosition,l=i.dataPosition;const c=[],u=[],h=[];let d=0,f=0;do{const e=t.subarray(o-i.blockPosition),n=new r.Inflate;if(({strm:a}=n),n.push(e,r.Z_SYNC_FLUSH),n.err)throw new Error(n.msg);const p=n.result;c.push(p);let g=p.length;u.push(o),h.push(l),1===c.length&&i.dataPosition&&(c[0]=c[0].subarray(i.dataPosition),g=c[0].length);const m=o;if(o+=a.next_in,l+=g,m>=s.blockPosition){c[f]=c[f].subarray(0,s.blockPosition===i.blockPosition?s.dataPosition-i.dataPosition+1:s.dataPosition+1),u.push(o),h.push(l),d+=c[f].length;break}d+=c[f].length,f++}while(a.avail_in);const p=new Uint8Array(d);for(let e=0,t=0;e<c.length;e++)p.set(c[e],t),t+=c[e].length;return{buffer:e.from(p),cpositions:u,dpositions:h}}catch(e){if(`${e}`.match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw e}}}).call(this,n(35).Buffer)},354:function(e,t,n){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(35).Buffer.isBuffer},474:function(e,t,n){"use strict";var r=n(56),a=n(475);class i{constructor(){this.F=void 0,this.C=void 0}}function s(e,t,n,r){return n*(e>>r)+(e&(1<<r)-1)-t}const o={FC:i,AriDecoder:class{constructor(){this.fc=new Array(256);for(let e=0;e<this.fc.length;e+=1)this.fc[e]=new i;this.R=null}},Symbol:class{constructor(){this.start=void 0,this.freq=void 0}},symbolInit:function(e,t,n){if(!(t<=65536))throw new r.c("assertion failed: start <= 1<<16");if(!(n<=65536-t))throw new r.c("assertion failed: freq <= 1<<16");e.start=t,e.freq=n},advanceStep:s,advanceSymbolStep:function(e,t,n){return s(e,t.start,t.freq,n)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,n,r){return function(e,t,n,r,i){if((e=r*(e>>i)+(e&(1<<i)-1)-n)<a.a)do{e=e<<8|255&t.get()}while(e<a.a);return e}(e,t,n.start,n.freq,r)},renormalize:function(e,t){if(e<a.a)do{e=e<<8|255&t.get()}while(e<a.a);return e}};t.a=o},475:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));const r=12,a=1<<r,i=1<<23},476:function(e,t,n){"use strict";var r=n(1190),a=n(1192);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=y(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(1193);function y(e,t,n){if(e&&a.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(o);if(y=y.trim(),!n&&1===e.split("#").length){var w=l.exec(y);if(w)return this.path=y,this.href=y,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(y);if(_){var E=(_=_[0]).toLowerCase();this.protocol=E,y=y.substr(_.length)}if(n||_||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===y.substr(0,2);!k||_&&m[_]||(y=y.substr(2),this.slashes=!0)}if(!m[_]&&(k||_&&!b[_])){for(var S,C,x=-1,O=0;O<d.length;O++){-1!==(N=y.indexOf(d[O]))&&(-1===x||N<x)&&(x=N)}-1!==(C=-1===x?y.lastIndexOf("@"):y.lastIndexOf("@",x))&&(S=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(S)),x=-1;for(O=0;O<h.length;O++){var N;-1!==(N=y.indexOf(h[O]))&&(-1===x||N<x)&&(x=N)}-1===x&&(x=y.length),this.host=y.slice(0,x),y=y.slice(x),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var B=this.hostname.split(/\./),R=(O=0,B.length);O<R;O++){var I=B[O];if(I&&!I.match(f)){for(var j="",M=0,T=I.length;M<T;M++)I.charCodeAt(M)>127?j+="x":j+=I[M];if(!j.match(f)){var L=B.slice(0,O),P=B.slice(O+1),z=I.match(p);z&&(L.push(z[1]),P.unshift(z[2])),P.length&&(y="/"+P.join(".")+y),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[E])for(O=0,R=u.length;O<R;O++){var $=u[O];if(-1!==y.indexOf($)){var D=encodeURIComponent($);D===$&&(D=escape($)),y=y.split($).join(D)}}var U=y.indexOf("#");-1!==U&&(this.hash=y.substr(U),y=y.slice(0,U));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),t&&(this.query=v.parse(this.query)),y=y.slice(0,H)):t&&(this.search="",this.query={}),y&&(this.pathname=y),b[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var W=this.search||"";this.path=F+W}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=e[u])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!b[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",v=n.search||"";n.path=g+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||y||n.host&&e.pathname,E=_,k=n.pathname&&n.pathname.split("/")||[],S=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===k[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=k.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=k.slice(-1)[0],x=(n.host||e.host||k.length>1)&&("."===C||".."===C)||""===C,O=0,N=k.length;N>=0;N--)"."===(C=k[N])?k.splice(N,1):".."===C?(k.splice(N,1),O++):O&&(k.splice(N,1),O--);if(!_&&!E)for(;O--;O)k.unshift("..");!_||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var A,B=""===k[0]||k[0]&&"/"===k[0].charAt(0);S&&(n.hostname=n.host=B?"":k.length?k.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(_=_||n.host&&k.length)&&!B&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},478:function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,a)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return t.nextTick((function(){e.apply(null,i)}))}}}:e.exports=t}).call(this,n(114))},56:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l}));class r extends Error{}class a extends Error{}class i extends r{}class s extends i{}class o extends r{}class l extends r{}},605:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},606:function(e,t,n){"use strict";class r{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}e.exports=r},607:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(865),a=n.n(r),i=n(866),s=n(867),o=n(868),l=n(608);class c extends o.a{parsePseudoBin(e,t){return{lineCount:Object(l.c)(a.a.fromBytesLE(Array.prototype.slice.call(e,t+16,t+24),!0))}}async lineCount(e,t={}){const n=(await this.parse(t)).indices[e];if(!n)return-1;const r=n.stats||{};return void 0===r.lineCount?-1:r.lineCount}fetchBai(e={}){return this.baiP||(this.baiP=this.filehandle.readFile(e).catch((e=>{throw this.baiP=void 0,e}))),this.baiP}async _parse(){const e={bai:!0,maxBlockSize:65536},t=await this.fetchBai();if(21578050!==t.readUInt32LE(0))throw new Error("Not a BAI file");e.refCount=t.readInt32LE(4);e.indices=new Array(e.refCount);let n=8;for(let r=0;r<e.refCount;r+=1){const a=t.readInt32LE(n);let o;n+=4;const l={};for(let r=0;r<a;r+=1){const r=t.readUInt32LE(n);if(n+=4,37450===r)n+=4,o=this.parsePseudoBin(t,n),n+=32;else{if(r>37450)throw new Error("bai index contains too many bins, please use CSI");{const a=t.readInt32LE(n);n+=4;const o=new Array(a);for(let l=0;l<a;l+=1){const a=Object(i.b)(t,n),c=Object(i.b)(t,n+8);n+=16,this._findFirstData(e,a),o[l]=new s.a(a,c,r)}l[r]=o}}}const c=t.readInt32LE(n);n+=4;const u=new Array(c);for(let r=0;r<c;r+=1)u[r]=Object(i.b)(t,n),n+=8,this._findFirstData(e,u[r]);e.indices[r]={binIndex:l,linearIndex:u,stats:o}}return e}async indexCov(e,t,n,r={}){const a=16384,i=void 0!==t,s=(await this.parse(r)).indices[e];if(!s)return[];const{linearIndex:o=[],stats:l}=s;if(!o.length)return[];const c=void 0!==n?(u=n)-u%(h=a)+h:(o.length-1)*a;var u,h;const d=void 0!==t?function(e,t){return e-e%t}(t,a):0;let f;f=new Array(i?(c-d)/a:o.length-1);const p=o[o.length-1].blockPosition;if(c>(o.length-1)*a)throw new Error("query outside of range of linear index");let g=o[d/a].blockPosition;for(let e=d/a,t=0;e<c/a;e++,t++)f[t]={score:o[e+1].blockPosition-g,start:e*a,end:e*a+a},g=o[e+1].blockPosition;return f.map((e=>({...e,score:e.score*l.lineCount/p})))}reg2bins(e,t){return[[0,0],[1+(e>>26),1+((t-=1)>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const a=await this.parse(r);if(!a)return[];const i=a.indices[e];if(!i)return[];const o=this.reg2bins(t,n),c=[];for(const[e,t]of o)for(let n=e;n<=t;n++)if(i.binIndex[n]){const e=i.binIndex[n];for(let t=0;t<e.length;++t)c.push(new s.a(e[t].minv,e[t].maxv,n))}const u=i.linearIndex.length;let h=null;const d=Math.min(t>>14,u-1),f=Math.min(n>>14,u-1);for(let e=d;e<=f;++e){const t=i.linearIndex[e];t&&(!h||t.compareTo(h)<0)&&(h=t)}return Object(l.e)(c,h)}}},608:function(e,t,n){"use strict";function r(e){return new Promise((t=>setTimeout(t,e)))}function a(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}function i(e){if(e&&e.aborted){if("undefined"!=typeof DOMException)throw new DOMException("aborted","AbortError");{const e=new Error("aborted");throw e.code="ERR_ABORTED",e}}}async function s(e){await Promise.resolve(),i(e)}function o(e={}){return"aborted"in e?{signal:e}:e}function l(e,t){const n=[];let r=null;return 0===e.length?e:(e.sort(((e,t)=>{const n=e.minv.blockPosition-t.minv.blockPosition;return 0!==n?n:e.minv.dataPosition-t.minv.dataPosition})),e.forEach((e=>{var a,i;(!t||e.maxv.compareTo(t)>0)&&(null===r?(n.push(e),r=e):(a=r,(i=e).minv.blockPosition-a.maxv.blockPosition<65e3&&i.maxv.blockPosition-a.minv.blockPosition<5e6?e.maxv.compareTo(r.maxv)>0&&(r.maxv=e.maxv):(n.push(e),r=e)))})),n)}n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l}))},609:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(865),a=n.n(r),i=n(97),s=n(866),o=n(867),l=n(608),c=n(868);function u(e,t){return Math.floor(e/2**t)}class h extends c.a{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e){const t=await this.parse();if(!t)return-1;if(!t.indices[e])return-1;const{stats:n}=t.indices[e];return n?n.lineCount:-1}async indexCov(){return[]}parseAuxData(e,t,n){if(n<30)return{};const r={};if(r.formatFlags=e.readInt32LE(t),r.coordinateType=65536&r.formatFlags?"zero-based-half-open":"1-based-closed",r.format={0:"generic",1:"SAM",2:"VCF"}[15&r.formatFlags],!r.format)throw new Error(`invalid Tabix preset format flags ${r.formatFlags}`);r.columnNumbers={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},r.metaValue=e.readInt32LE(t+16),r.metaChar=r.metaValue?String.fromCharCode(r.metaValue):"",r.skipLines=e.readInt32LE(t+20);const a=e.readInt32LE(t+24);return Object.assign(r,this._parseNameBytes(e.subarray(t+28,t+28+a))),r}_parseNameBytes(e){let t=0,n=0;const r=[],a={};for(let i=0;i<e.length;i+=1)if(!e[i]){if(n<i){let s=e.toString("utf8",n,i);s=this.renameRefSeq(s),r[t]=s,a[s]=t}n=i+1,t+=1}return{refNameToId:a,refIdToName:r}}async _parse(e){const t={csi:!0,maxBlockSize:65536},n=await this.filehandle.readFile(e),r=await Object(i.b)(n);if(21582659===r.readUInt32LE(0))t.csiVersion=1;else{if(38359875!==r.readUInt32LE(0))throw new Error("Not a CSI file");t.csiVersion=2}this.minShift=r.readInt32LE(4),this.depth=r.readInt32LE(8),this.maxBinNumber=((1<<3*(this.depth+1))-1)/7;const a=r.readInt32LE(12);a&&Object.assign(t,this.parseAuxData(r,16,a)),t.refCount=r.readInt32LE(16+a),t.indices=new Array(t.refCount);let c=16+a+4;for(let n=0;n<t.refCount;n+=1){await Object(l.a)(e.signal);const a=r.readInt32LE(c);c+=4;const i={};let u;for(let e=0;e<a;e+=1){const e=r.readUInt32LE(c);if(e>this.maxBinNumber)u=this.parsePseudoBin(r,c+4),c+=48;else{const n=Object(s.b)(r,c+4);this._findFirstData(t,n);const a=r.readInt32LE(c+12);c+=16;const l=new Array(a);for(let t=0;t<a;t+=1){const n=Object(s.b)(r,c),a=Object(s.b)(r,c+8);c+=16,l[t]=new o.a(n,a,e)}i[e]=l}}t.indices[n]={binIndex:i,stats:u}}return t}parsePseudoBin(e,t){return{lineCount:Object(l.c)(a.a.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const a=await this.parse(r),i=null==a?void 0:a.indices[e];if(!i)return[];const c=this.reg2bins(t,n),u=[];for(const[e,t]of c)for(let n=e;n<=t;n++)if(i.binIndex[n]){const e=i.binIndex[n];for(let t=0;t<e.length;++t)u.push(new o.a(e[t].minv,e[t].maxv,n))}return Object(l.e)(u,new s.a(0,0))}reg2bins(e,t){(e-=1)<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,r=0,a=this.minShift+3*this.depth;const i=[];for(;n<=this.depth;a-=3,r+=1*2**(3*n),n+=1){const n=r+u(e,a),s=r+u(t,a);if(s-n+i.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);i.push([n,s])}return i}}},610:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return _}));var r=n(604),a=n.n(r),i=n(97),s=n(825),o=n.n(s),l=n(92),c=n(88),u=n.n(c),h=n(1201),d=n.n(h),f=n(607),p=n(609),g=n(638),m=n(870),b=n(608);const v=21840194,y=65536;function w(e){return[].concat(...e)}class _{constructor({bamFilehandle:e,bamPath:t,bamUrl:n,baiPath:r,baiFilehandle:a,baiUrl:i,csiPath:s,csiFilehandle:o,csiUrl:c,fetchSizeLimit:h,chunkSizeLimit:g,yieldThreadTime:m=100,renameRefSeqs:b=(e=>e)}){if(this.featureCache=new u.a({cache:new d.a({maxSize:50}),fill:async({chunk:e,opts:t},n)=>{const{data:r,cpositions:a,dpositions:i}=await this._readChunk({chunk:e,opts:{...t,signal:n}});return await this.readBamFeatures(r,a,i,e)}}),this.renameRefSeq=b,e)this.bam=e;else if(t)this.bam=new l.LocalFile(t);else{if(!n)throw new Error("unable to initialize bam");this.bam=new l.RemoteFile(n)}if(o)this.index=new p.a({filehandle:o});else if(s)this.index=new p.a({filehandle:new l.LocalFile(s)});else if(c)this.index=new p.a({filehandle:new l.RemoteFile(c)});else if(a)this.index=new f.a({filehandle:a});else if(r)this.index=new f.a({filehandle:new l.LocalFile(r)});else if(i)this.index=new f.a({filehandle:new l.RemoteFile(i)});else if(t)this.index=new f.a({filehandle:new l.LocalFile(`${t}.bai`)});else{if(!n)throw new Error("unable to infer index format");this.index=new f.a({filehandle:new l.RemoteFile(`${n}.bai`)})}this.fetchSizeLimit=h||5e8,this.chunkSizeLimit=g||3e8,this.yieldThreadTime=m}async getHeader(t={}){const n=Object(b.d)(t),r=await this.index.parse(n),a=r.firstDataLine?r.firstDataLine.blockPosition+65535:void 0;let s;if(a){const t=await this.bam.read(e.alloc(a+y),0,a+y,0,n),{bytesRead:r}=t;if(({buffer:s}=t),!r)throw new Error("Error reading header");s=r<a?s.subarray(0,r):s.subarray(0,a)}else s=await this.bam.readFile(n);const o=await Object(i.b)(s);if(o.readInt32LE(0)!==v)throw new Error("Not a BAM file");const l=o.readInt32LE(4);this.header=o.toString("utf8",8,8+l);const{chrToIndex:c,indexToChr:u}=await this._readRefSeqs(l+8,65535,n);return this.chrToIndex=c,this.indexToChr=u,Object(m.a)(this.header)}async getHeaderText(e={}){return await this.getHeader(e),this.header}async _readRefSeqs(t,n,r={}){if(t>n)return this._readRefSeqs(t,2*n,r);const a=n+y,{bytesRead:s,buffer:o}=await this.bam.read(e.alloc(a),0,n,0,r);if(!s)throw new Error("Error reading refseqs from header");const l=await Object(i.b)(o.subarray(0,Math.min(s,n))),c=l.readInt32LE(t);let u=t+4;const h={},d=[];for(let e=0;e<c;e+=1){const a=l.readInt32LE(u),i=this.renameRefSeq(l.toString("utf8",u+4,u+4+a-1)),s=l.readInt32LE(u+a+4);if(h[i]=e,d.push({refName:i,length:s}),u=u+8+a,u>l.length)return console.warn(`BAM header is very big.  Re-fetching ${n} bytes.`),this._readRefSeqs(t,2*n,r)}return{chrToIndex:h,indexToChr:d}}async getRecordsForRange(e,t,n,r={viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5}){return w(await async function(e){const t=[];for await(const n of e)t.push(n);return t}(this.streamRecordsForRange(e,t,n,r)))}async*streamRecordsForRange(e,t,n,r={}){const{signal:a}=r,i=this.chrToIndex&&this.chrToIndex[e];let s;if(i>=0){if(s=await this.index.blocksForRange(i,t-1,n,r),!s)throw new Error("Error in index fetch")}else s=[];for(let e=0;e<s.length;e+=1){await Object(b.a)(a);const t=s[e].fetchedSize();if(t>this.chunkSizeLimit)throw new Error(`Too many BAM features. BAM chunk size ${t} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit}`)}const o=s.map((e=>e.fetchedSize())).reduce(((e,t)=>e+t),0);if(o>this.fetchSizeLimit)throw new Error(`data size of ${o.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);yield*this._fetchChunkFeatures(s,i,t,n,r)}async*_fetchChunkFeatures(e,t,n,r,a){const{viewAsPairs:i=!1}=a,s=[];let o=!1;for(let i=0;i<e.length;i++){const l=e[i],c=await this.featureCache.get(l.toString(),{chunk:l,opts:a},a.signal),u=[];for(let e=0;e<c.length;e+=1){const a=c[e];if(a.seq_id()===t){if(a.get("start")>=r){o=!0;break}a.get("end")>=n&&u.push(a)}}if(s.push(u),yield u,o)break}Object(b.b)(a.signal),i&&(yield this.fetchPairs(t,s,a))}async fetchPairs(e,t,n){const{pairAcrossChr:r=!1,maxInsertSize:a=2e5}=n,i={},s={};t.map((e=>{const t={};for(let n=0;n<e.length;n++){const r=e[n].name(),a=e[n].id();t[r]||(t[r]=0),t[r]++,s[a]=1}o()(t).forEach((([e,t])=>{1===t&&(i[e]=!0)}))}));const l=[];t.map((t=>{for(let s=0;s<t.length;s++){const o=t[s],c=o.name(),u=o.get("start"),h=o._next_pos(),d=o._next_refid();i[c]&&(r||d===e&&Math.abs(u-h)<a)&&l.push(this.index.blocksForRange(d,h,h+1,n))}}));const c=w(await Promise.all(l)).sort().filter(((e,t,n)=>!t||e.toString()!==n[t-1].toString())),u=c.map((e=>e.fetchedSize())).reduce(((e,t)=>e+t),0);if(u>this.fetchSizeLimit)throw new Error(`data size of ${u.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const h=c.map((async e=>{const{data:t,cpositions:r,dpositions:a,chunk:o}=await this._readChunk({chunk:e,opts:n}),l=await this.readBamFeatures(t,r,a,o),c=[];for(let e=0;e<l.length;e+=1){const t=l[e];i[t.get("name")]&&!s[t.id()]&&c.push(t)}return c}));return w(await Promise.all(h))}async _readChunk({chunk:t,opts:n}){const r=t.fetchedSize(),{buffer:a,bytesRead:s}=await this.bam.read(e.alloc(r),0,r,t.minv.blockPosition,n),{buffer:o,cpositions:l,dpositions:c}=await Object(i.c)(a.subarray(0,Math.min(s,r)),t);return{data:o,cpositions:l,dpositions:c,chunk:t}}async readBamFeatures(e,t,n,r){let i=0;const s=[];let o=0,l=+Date.now();for(;i+4<e.length;){const c=i+4+e.readInt32LE(i)-1;if(n){for(;i+r.minv.dataPosition>=n[o++];);o--}if(c<e.length){const u=new g.a({bytes:{byteArray:e,start:i,end:c},fileOffset:t?256*t[o]+(i-n[o])+r.minv.dataPosition+1:a.a.signed(e.slice(i,c))});s.push(u),this.yieldThreadTime&&+Date.now()-l>this.yieldThreadTime&&(await Object(b.f)(1),l=+Date.now())}i=c+1}return s}async hasRefSeq(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.hasRefSeq(t)}async lineCount(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.lineCount(t)}async indexCov(e,t,n){await this.index.parse();const r=this.chrToIndex&&this.chrToIndex[e];return this.index.indexCov(r,t,n)}async blocksForRange(e,t,n,r){await this.index.parse();const a=this.chrToIndex&&this.chrToIndex[e];return this.index.blocksForRange(a,t,n,r)}}}).call(this,n(35).Buffer)},611:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));class r{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+"\n"}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach((e=>{const t=this.references.get(e);t&&(t.requested=!0)}))}getUnresolvedReferences(){return Array.from(this.references).filter((([e,t])=>!t.resolved&&!t.requested)).map((([e,t])=>e))}}const a=new Map,i="___parser_",s={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},o={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},l={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class c{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new c}primitiveGenerateN(e,t){const n=o[e],r=l[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${n}(offset, ${r});`),t.pushCode(`offset += ${s[e]};`)}primitiveN(e,t,n){return this.setNextParser(e,t,n)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,n){return n.length=e,this.setNextParser("bit",t,n)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return a.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if("string"==typeof t.type&&!a.has(t.type)&&!(t.type in s))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const e in t.choices){const n=parseInt(e,10),r=t.choices[n];if(isNaN(n))throw new Error(`Choice key "${e}" is not a number.`);if("string"==typeof r&&!a.has(r)&&!(r in s))throw new Error(`Choice type "${r}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof c||a.has(t.type)))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof c||e))throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if("string"==typeof t.type&&!(t.type in s)&&!a.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new r(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${i+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${i+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((t=>{var n;null===(n=a.get(t))||void 0===n||n.addAliasedCode(e)}))}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(s).indexOf(this.type)>=0)e=s[this.type];else if("string"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){let t=NaN;"string"==typeof this.options.type?t=s[this.options.type]:this.options.type instanceof c&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"seek"===this.type?e=this.options.length:"nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,n){const r=new c;return r.type=e,r.varName=t,r.options=n,r.endian=this.endian,this.head?this.head.next=r:this.next=r,this.head=r,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}"bit"!==this.type&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&"bit"!==this.type&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=e.addImport(this.options.assert);e.pushCode(`if (!${n}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const t=e.generateTmpVariable();e.pushCode(`var ${t} = 0;`);const n=(t=0)=>{let n=0;for(let r=t;r<e.bitFields.length;r++){const t=e.bitFields[r].options.length;if(n+t>32)break;n+=t}return n},r=n=>(n<=8?(e.pushCode(`${t} = dataView.getUint8(offset);`),n=8):n<=16?(e.pushCode(`${t} = dataView.getUint16(offset);`),n=16):n<=24?(e.pushCode(`${t} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),n=24):(e.pushCode(`${t} = dataView.getUint32(offset);`),n=32),e.pushCode(`offset += ${n/8};`),n);let a=0;const i="be"===this.endian;let s=0,o=0;e.bitFields.forEach(((l,c)=>{let u=l.options.length;if(u>o){if(o){const n=-1>>>32-o;e.pushCode(`${l.varName} = (${t} & 0x${n.toString(16)}) << ${u-o};`),u-=o}a=0,o=s=r(n(c)-o)}const h=i?s-a-u:a,d=-1>>>32-u;e.pushCode(`${l.varName} ${u<l.options.length?"|=":"="} ${t} >> ${h} & 0x${d.toString(16)};`),32===l.options.length&&e.pushCode(`${l.varName} >>>= 0`),l.options.assert&&l.generateAssert(e),l.options.formatter&&l.generateFormatter(e,l.varName,l.options.formatter),a+=u,o-=u})),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable(),r=this.options.encoding,a="hex"===r.toLowerCase(),i='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const s=this.options.length;e.pushCode(`var ${n} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${s});`);const o=`offset - ${n} < ${s} ? offset - 1 : offset`;e.pushCode(a?`${t} = Array.from(buffer.subarray(${n}, ${o}), ${i}).join('');`:`${t} = new TextDecoder('${r}').decode(buffer.subarray(${n}, ${o}));`)}else if(this.options.length){const n=e.generateOption(this.options.length);e.pushCode(a?`${t} = Array.from(buffer.subarray(offset, offset + ${n}), ${i}).join('');`:`${t} = new TextDecoder('${r}').decode(buffer.subarray(offset, offset + ${n}));`),e.pushCode(`offset += ${n};`)}else this.options.zeroTerminated?(e.pushCode(`var ${n} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(a?`${t} = Array.from(buffer.subarray(${n}, offset - 1), ${i}).join('');`:`${t} = new TextDecoder('${r}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${n} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(a?`${t} = Array.from(buffer.subarray(${n}, offset), ${i}).join('');`:`${t} = new TextDecoder('${r}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if("function"==typeof this.options.readUntil){const n=this.options.readUntil,r=e.generateTmpVariable(),a=e.generateTmpVariable();e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${a} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${a} = dataView.getUint8(offset);`);const i=e.addImport(n);e.pushCode(`if (${i}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${r}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${t} = buffer.subarray(offset);`);else{const n=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${n});`),e.pushCode(`offset += ${n};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),r=this.options.type,u=e.generateTmpVariable(),h=e.generateVariable(this.varName),d=e.generateTmpVariable(),f=this.options.key,p="string"==typeof f;if(p?e.pushCode(`${h} = {};`):e.pushCode(`${h} = [];`),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode(`for (var ${u} = 0; offset < buffer.length; ${u}++) {`):void 0!==n?e.pushCode(`for (var ${u} = offset + ${n}; offset < ${u}; ) {`):e.pushCode(`for (var ${u} = ${t}; ${u} > 0; ${u}--) {`),"string"==typeof r)if(a.get(r)){const a=e.generateTmpVariable();if(e.pushCode(`var ${a} = ${i+r}(offset, {`),e.useContextVariables){const r=e.generateVariable();e.pushCode(`$parent: ${r},`),e.pushCode(`$root: ${r}.$root,`),this.options.readUntil||void 0!==n||e.pushCode(`$index: ${t} - ${u},`)}e.pushCode("});"),e.pushCode(`var ${d} = ${a}.result; offset = ${a}.offset;`),r!==this.alias&&e.addReference(r)}else{const t=o[r],n=l[r];e.pushCode(`var ${d} = dataView.get${t}(offset, ${n});`),e.pushCode(`offset += ${s[r]};`)}else if(r instanceof c){e.pushCode(`var ${d} = {};`);const a=e.generateVariable();e.pushScope(d),e.useContextVariables&&(e.pushCode(`${d}.$parent = ${a};`),e.pushCode(`${d}.$root = ${a}.$root;`),this.options.readUntil||void 0!==n||e.pushCode(`${d}.$index = ${t} - ${u};`)),r.generate(e),e.useContextVariables&&(e.pushCode(`delete ${d}.$parent;`),e.pushCode(`delete ${d}.$root;`),e.pushCode(`delete ${d}.$index;`)),e.popScope()}if(p?e.pushCode(`${h}[${d}.${f}] = ${d};`):e.pushCode(`${h}.push(${d});`),e.pushCode("}"),"function"==typeof this.options.readUntil){const t=this.options.readUntil,n=e.addImport(t);e.pushCode(`while (!${n}.call(${e.generateVariable()}, ${d}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,n){if("string"==typeof n){const t=e.generateVariable(this.varName);if(a.has(n)){const r=e.generateTmpVariable();e.pushCode(`var ${r} = ${i+n}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${t}.$parent,`),e.pushCode(`$root: ${t}.$root,`)),e.pushCode("});"),e.pushCode(`${t} = ${r}.result; offset = ${r}.offset;`),n!==this.alias&&e.addReference(n)}else{const r=o[n],a=l[n];e.pushCode(`${t} = dataView.get${r}(offset, ${a});`),e.pushCode(`offset += ${s[n]}`)}}else n instanceof c&&(e.pushPath(t),n.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),n=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){const t=e.generateVariable();e.pushCode(`${n}.$parent = ${t};`),e.pushCode(`${n}.$root = ${t}.$root;`)}e.pushCode(`switch(${t}) {`);for(const t in this.options.choices){const n=parseInt(t,10),r=this.options.choices[n];e.pushCode(`case ${n}:`),this.generateChoiceCase(e,this.varName,r),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof c){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const n=e.generateVariable();e.pushCode(`${t}.$parent = ${n};`),e.pushCode(`${t}.$root = ${n}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(a.has(this.options.type)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${i+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable();if("function"==typeof this.options.readUntil){const t=this.options.readUntil,r=e.generateTmpVariable(),a=e.generateTmpVariable();e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${a} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${a} = dataView.getUint8(offset);`);const i=e.addImport(t);e.pushCode(`if (${i}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${r}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${n} = buffer.subarray(offset);`);else{const t=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${t});`),e.pushCode(`offset += ${t};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`);const r=e.generateTmpVariable(),s=e.generateTmpVariable(),o=e.generateTmpVariable(),l=e.addImport(this.options.wrapper);if(e.pushCode(`${n} = ${l}.call(this, ${n}).subarray(0);`),e.pushCode(`var ${r} = buffer;`),e.pushCode(`var ${s} = offset;`),e.pushCode(`var ${o} = dataView;`),e.pushCode(`buffer = ${n};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof c)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(a.has(this.options.type)){const n=e.generateTmpVariable();e.pushCode(`var ${n} = ${i+this.options.type}(0);`),e.pushCode(`${t} = ${n}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${r};`),e.pushCode(`dataView = ${o};`),e.pushCode(`offset = ${s};`)}generateFormatter(e,t,n){if("function"==typeof n){const r=e.addImport(n);e.pushCode(`${t} = ${r}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,n=e.generateOption(this.options.offset),r=e.generateTmpVariable(),u=e.generateVariable(this.varName);if(e.pushCode(`var ${r} = offset;`),e.pushCode(`offset = ${n};`),this.options.type instanceof c){if(e.pushCode(`${u} = {};`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`${u}.$parent = ${t};`),e.pushCode(`${u}.$root = ${t}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${u}.$parent;`),e.pushCode(`delete ${u}.$root;`))}else if(a.has(this.options.type)){const t=e.generateTmpVariable();if(e.pushCode(`var ${t} = ${i+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${u} = ${t}.result; offset = ${t}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(s).indexOf(this.options.type)>=0){const n=o[t],r=l[t];e.pushCode(`${u} = dataView.get${n}(offset, ${r});`),e.pushCode(`offset += ${s[t]};`)}e.pushCode(`offset = ${r};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}}},612:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=f,t.addEvent=function(e,t,n,r){if(!e)return;var a=l({capture:!0},r);e.addEventListener?e.addEventListener(t,n,a):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&f(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){var n=d(e,t,"px");return c({},(0,i.browserPrefixToKey)("transform",i.default),n)},t.createSVGTransform=function(e,t){return d(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,a.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,a.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=d,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,a.int)(n.paddingTop),t-=(0,a.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,a.int)(n.paddingLeft),t-=(0,a.int)(n.paddingRight)},t.matchesSelector=h,t.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(h(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-r.left)/n,i=(e.clientY+t.scrollTop-r.top)/n;return{x:a,y:i}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,a.int)(n.borderTopWidth),t+=(0,a.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,a.int)(n.borderLeftWidth),t+=(0,a.int)(n.borderRightWidth)},t.removeClassName=p,t.removeEvent=function(e,t,n,r){if(!e)return;var a=l({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&p(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var a=n(477),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(1215));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="";function h(e,t){return u||(u=(0,a.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,a.isFunction)(e[t])}))),!!(0,a.isFunction)(e[u])&&e[u](t)}function d(e,t,n){var r=e.x,a=e.y,i="translate(".concat(r).concat(n,",").concat(a).concat(n,")");if(t){var s="".concat("string"==typeof t.x?t.x:t.x+n),o="".concat("string"==typeof t.y?t.y:t.y+n);i="translate(".concat(s,", ").concat(o,")")+i}return i}function f(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function p(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},613:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(17);function a(e){const t=e.children(),n=e.get("thickStart"),a=e.get("thickEnd");if(!n&&!a)return e;const i=t?t.filter((e=>"block"===e.get("type"))).sort(((e,t)=>e.get("start")-t.get("start"))):[],s=[];i.forEach((t=>{const r=t.get("start"),i=t.get("end");if(n>=i){const t=e.get("strand")>0?"five":"three";s.push({type:`${t}_prime_UTR`,start:r,end:i})}else if(n>r&&n<i&&a>=i){const t=e.get("strand")>0?"five":"three";s.push({type:`${t}_prime_UTR`,start:r,end:n},{type:"CDS",start:n,end:i})}else if(n<=r&&a>=i)s.push({type:"CDS",start:r,end:i});else if(n>r&&n<i&&a<i){const t=e.get("strand")>0?"five":"three",o=e.get("strand")>0?"three":"five";s.push({type:`${t}_prime_UTR`,start:r,end:n},{type:"CDS",start:n,end:a},{type:`${o}_prime_UTR`,start:a,end:i})}else if(n<=r&&a>r&&a<i){const t=e.get("strand")>0?"three":"five";s.push({type:"CDS",start:r,end:a},{type:`${t}_prime_UTR`,start:a,end:i})}else if(a<=r){const t=e.get("strand")>0?"three":"five";s.push({type:`${t}_prime_UTR`,start:r,end:i})}}));const o=Object.fromEntries(e.tags().map((t=>[t,e.get(t)])));o.subfeatures=s,o.type="mRNA",o.uniqueId=e.id(),delete o.chromStarts,delete o.chromStart,delete o.chromEnd,delete o.chrom,delete o.blockStarts,delete o.blockSizes,delete o.blockCount,delete o.thickStart,delete o.thickEnd;return new r.SimpleFeature({data:o,id:e.id()})}function i(e,t,n,i,s,o,l,c){const u=e.split("\t"),h=u[t],d=+u[n],f=n===i?1:0,p=+u[i]+f,g=c?function(e,t){return Object.fromEntries(t.split("\t").map(((t,n)=>[e[n],t])))}(c,e):o.parseLine(e,{uniqueId:l}),{blockCount:m,blockSizes:b,blockStarts:v,chromStarts:y}=g;if(m){const e=y||v||[],t=b,n=d;g.subfeatures=[];for(let r=0;r<m;r+=1){const a=(e[r]||0)+n,i=a+(t[r]||0);g.subfeatures.push({uniqueId:`${l}-${r}`,start:a,end:i,type:"block"})}}s&&(g.score=+g[s]),delete g.chrom,delete g.chromStart,delete g.chromEnd;const w=new r.SimpleFeature({...g,start:d,end:p,refName:h,uniqueId:l});return w.get("thickStart")?a(w):w}},614:function(e,t,n){"use strict";var r=n(881);n.d(t,"a",(function(){return r.a}));n(616),n(617)},615:function(e,t,n){"use strict";function r(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));class a extends Error{}function i(e){if(e&&e.aborted){if("undefined"!=typeof DOMException)throw new DOMException("aborted","AbortError");{const e=new a("aborted");throw e.code="ERR_ABORTED",e}}}function s(e,t){const n=[];let r=null;return 0===e.length?e:(e.sort((function(e,t){const n=e.minv.blockPosition-t.minv.blockPosition;return 0!==n?n:e.minv.dataPosition-t.minv.dataPosition})),e.forEach((e=>{var a,i;(!t||e.maxv.compareTo(t)>0)&&(null===r?(n.push(e),r=e):(a=r,(i=e).minv.blockPosition-a.maxv.blockPosition<65e3&&i.maxv.blockPosition-a.minv.blockPosition<5e6?e.maxv.compareTo(r.maxv)>0&&(r.maxv=e.maxv):(n.push(e),r=e)))})),n)}},616:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(882),a=n.n(r),i=n(883),s=n(884),o=n(97),l=n(615),c=n(885);class u extends c.a{async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const r=n.refNameToId[e];if(!n.indices[r])return-1;const{stats:a}=n.indices[r];return a?a.lineCount:-1}async _parse(e={}){const t=await Object(o.b)(await this.filehandle.readFile(e));if(Object(l.a)(e.signal),21578324!==t.readUInt32LE(0))throw new Error("Not a TBI file");const n=t.readInt32LE(4),r=t.readInt32LE(8),a=65536&r?"zero-based-half-open":"1-based-closed",c={0:"generic",1:"SAM",2:"VCF"}[15&r];if(!c)throw new Error(`invalid Tabix preset format flags ${r}`);const u={ref:t.readInt32LE(12),start:t.readInt32LE(16),end:t.readInt32LE(20)},h=t.readInt32LE(24),d=37449,f=h?String.fromCharCode(h):null,p=t.readInt32LE(28),g=t.readInt32LE(32),{refNameToId:m,refIdToName:b}=this._parseNameBytes(t.slice(36,36+g));let v,y=36+g;return{indices:new Array(n).fill(0).map((()=>{const e=t.readInt32LE(y);y+=4;const n={};let r;for(let a=0;a<e;a+=1){const e=t.readUInt32LE(y);if(y+=4,e>37450)throw new Error("tabix index contains too many bins, please use a CSI index");if(37450===e){const e=t.readInt32LE(y);y+=4,2===e&&(r=this.parsePseudoBin(t,y)),y+=16*e}else{const r=t.readInt32LE(y);y+=4;const a=new Array(r);for(let n=0;n<r;n+=1){const r=Object(i.b)(t,y),o=Object(i.b)(t,y+8);y+=16,v=this._findFirstData(v,r),a[n]=new s.a(r,o,e)}n[e]=a}}const a=t.readInt32LE(y);y+=4;const o=new Array(a);for(let e=0;e<a;e+=1)o[e]=Object(i.b)(t,y),y+=8,v=this._findFirstData(v,o[e]);return{binIndex:n,linearIndex:o,stats:r}})),metaChar:f,maxBinNumber:d,maxRefLength:536870912,skipLines:p,firstDataLine:v,columnNumbers:u,coordinateType:a,format:c,refIdToName:b,refNameToId:m,maxBlockSize:65536}}parsePseudoBin(e,t){return{lineCount:Object(l.b)(a.a.fromBytesLE(e.slice(t+16,t+24),!0))}}_parseNameBytes(e){let t=0,n=0;const r=[],a={};for(let i=0;i<e.length;i+=1)if(!e[i]){if(n<i){let s=e.toString("utf8",n,i);s=this.renameRefSeq(s),r[t]=s,a[s]=t}n=i+1,t+=1}return{refNameToId:a,refIdToName:r}}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const a=await this.parse(r);if(!a)return[];const o=a.refNameToId[e],c=a.indices[o];if(!c)return[];(c.linearIndex.length?c.linearIndex[t>>14>=c.linearIndex.length?c.linearIndex.length-1:t>>14]:new i.a(0,0))||console.warn("querying outside of possible tabix range");const u=(h=t,d=n,[[0,0],[1+((h+=1)>>26),1+((d-=1)>>26)],[9+(h>>23),9+(d>>23)],[73+(h>>20),73+(d>>20)],[585+(h>>17),585+(d>>17)],[4681+(h>>14),4681+(d>>14)]]);var h,d;const f=[];for(const[e,t]of u)for(let n=e;n<=t;n++)if(c.binIndex[n]){const e=c.binIndex[n];for(let t=0;t<e.length;++t)f.push(new s.a(e[t].minv,e[t].maxv,n))}const p=c.linearIndex.length;let g=null;const m=Math.min(t>>14,p-1),b=Math.min(n>>14,p-1);for(let e=m;e<=b;++e){const t=c.linearIndex[e];t&&(!g||t.compareTo(g)<0)&&(g=t)}return Object(l.c)(f,g)}}},617:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(882),a=n.n(r),i=n(97),s=n(883),o=n(884),l=n(615),c=n(885);function u(e,t){return Math.floor(e/2**t)}class h extends c.a{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const r=n.refNameToId[e];if(!n.indices[r])return-1;const{stats:a}=n.indices[r];return a?a.lineCount:-1}async indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,t,n){if(n<30)return{refIdToName:[],refNameToId:{}};const r=e.readInt32LE(t),a=65536&r?"zero-based-half-open":"1-based-closed",i={0:"generic",1:"SAM",2:"VCF"}[15&r];if(!i)throw new Error(`invalid Tabix preset format flags ${r}`);const s={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},o=e.readInt32LE(t+16),l=o?String.fromCharCode(o):"",c=e.readInt32LE(t+20),u=e.readInt32LE(t+24),{refIdToName:h,refNameToId:d}=this._parseNameBytes(e.slice(t+28,t+28+u));return{refIdToName:h,refNameToId:d,skipLines:c,metaChar:l,columnNumbers:s,format:i,coordinateType:a}}_parseNameBytes(e){let t=0,n=0;const r=[],a={};for(let i=0;i<e.length;i+=1)if(!e[i]){if(n<i){let s=e.toString("utf8",n,i);s=this.renameRefSeq(s),r[t]=s,a[s]=t}n=i+1,t+=1}return{refNameToId:a,refIdToName:r}}async _parse(e={}){const t=await Object(i.b)(await this.filehandle.readFile(e));let n;if(21582659===t.readUInt32LE(0))n=1;else{if(38359875!==t.readUInt32LE(0))throw new Error("Not a CSI file");n=2}this.minShift=t.readInt32LE(4),this.depth=t.readInt32LE(8),this.maxBinNumber=((1<<3*(this.depth+1))-1)/7;const r=2**(this.minShift+3*this.depth),a=t.readInt32LE(12);let l={refIdToName:[],refNameToId:{}};a&&(l=this.parseAuxData(t,16,a));const c=t.readInt32LE(16+a);let u,h=16+a+4;const d=new Array(c).fill(0).map((()=>{const e=t.readInt32LE(h);h+=4;const n={};let r;for(let a=0;a<e;a+=1){const e=t.readUInt32LE(h);if(e>this.maxBinNumber)r=this.parsePseudoBin(t,h+4),h+=48;else{const r=Object(s.b)(t,h+4);u=this._findFirstData(u,r);const a=t.readInt32LE(h+12);h+=16;const i=new Array(a);for(let n=0;n<a;n+=1){const r=Object(s.b)(t,h),a=Object(s.b)(t,h+8);h+=16,i[n]=new o.a(r,a,e)}n[e]=i}}return{binIndex:n,stats:r}}));return{...l,csi:!0,refCount:c,maxBlockSize:65536,firstDataLine:u,csiVersion:n,indices:d,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:r}}parsePseudoBin(e,t){return{lineCount:Object(l.b)(a.a.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const a=await this.parse(r);if(!a)return[];const i=a.refNameToId[e],c=a.indices[i];if(!c)return[];const u=this.reg2bins(t,n),h=[];for(const[e,t]of u)for(let n=e;n<=t;n++)if(c.binIndex[n]){const e=c.binIndex[n];for(let t=0;t<e.length;++t)h.push(new o.a(e[t].minv,e[t].maxv,n))}return Object(l.c)(h,new s.a(0,0))}reg2bins(e,t){(e-=1)<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,r=0,a=this.minShift+3*this.depth;const i=[];for(;n<=this.depth;a-=3,r+=1*2**(3*n),n+=1){const n=r+u(e,a),s=r+u(t,a);if(s-n+i.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);i.push([n,s])}return i}}},618:function(e,t,n){"use strict";class r{constructor(e,t,n=null,r=null,a=null,i=1){this.left=n,this.right=r,this.parent=a,this.color=i,this.item={key:e,value:t},e&&e instanceof Array&&2==e.length&&(Number.isNaN(e[0])||Number.isNaN(e[1])||(this.item.key=new class e{constructor(e,t){this.low=e,this.high=t}clone(){return new e(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(t){return new e(void 0===this.low?t.low:Math.min(this.low,t.low),void 0===this.high?t.high:Math.max(this.high,t.high))}output(){return[this.low,this.high]}static comparable_max(e,t){return e.merge(t)}static comparable_less_than(e,t){return e<t}}(Math.min(e[0],e[1]),Math.max(e[0],e[1])))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return void 0===this.item.key&&void 0===this.item.value&&null===this.left&&null===this.right&&1===this.color}less_than(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.less_than(e.item.key);{let t=this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value;return this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&t}}equal_to(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.equal_to(e.item.key);{let t=this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value==e.item.value;return this.item.key.equal_to(e.item.key)&&t}}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){return(0,this.item.key.constructor.comparable_less_than)(void 0!==this.left.max.high?this.left.max.high:this.left.max,e.item.key.low)}not_intersect_right_subtree(e){const t=this.item.key.constructor.comparable_less_than;let n=void 0!==this.right.max.low?this.right.max.low:this.right.item.key.low;return t(e.item.key.high,n)}}class a{constructor(){this.root=null,this.nil_node=new r}get size(){let e=0;return this.tree_walk(this.root,(()=>e++)),e}get keys(){let e=[];return this.tree_walk(this.root,(t=>e.push(t.item.key.output?t.item.key.output():t.item.key))),e}get values(){let e=[];return this.tree_walk(this.root,(t=>e.push(t.item.value))),e}get items(){let e=[];return this.tree_walk(this.root,(t=>e.push({key:t.item.key.output?t.item.key.output():t.item.key,value:t.item.value}))),e}isEmpty(){return null==this.root||this.root==this.nil_node}clear(){this.root=null}insert(e,t=e){if(void 0===e)return;let n=new r(e,t,this.nil_node,this.nil_node,null,0);return this.tree_insert(n),this.recalc_max(n),n}exist(e,t=e){let n=new r(e,t);return!!this.tree_search(this.root,n)}remove(e,t=e){let n=new r(e,t),a=this.tree_search(this.root,n);return a&&this.tree_delete(a),a}search(e,t=((e,t)=>e===t?t.output():e)){let n=new r(e),a=[];return this.tree_search_interval(this.root,n,a),a.map((e=>t(e.item.value,e.item.key)))}intersect_any(e){let t=new r(e);return this.tree_find_any_interval(this.root,t)}forEach(e){this.tree_walk(this.root,(t=>e(t.item.key,t.item.value)))}map(e){const t=new a;return this.tree_walk(this.root,(n=>t.insert(n.item.key,e(n.item.value,n.item.key)))),t}recalc_max(e){let t=e;for(;null!=t.parent;)t.parent.update_max(),t=t.parent}tree_insert(e){let t=this.root,n=null;if(null==this.root||this.root==this.nil_node)this.root=e;else{for(;t!=this.nil_node;)n=t,t=e.less_than(t)?t.left:t.right;e.parent=n,e.less_than(n)?n.left=e:n.right=e}this.insert_fixup(e)}insert_fixup(e){let t,n;for(t=e;t!=this.root&&0==t.parent.color;)t.parent==t.parent.parent.left?(n=t.parent.parent.right,0==n.color?(t.parent.color=1,n.color=1,t.parent.parent.color=0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.rotate_left(t)),t.parent.color=1,t.parent.parent.color=0,this.rotate_right(t.parent.parent))):(n=t.parent.parent.left,0==n.color?(t.parent.color=1,n.color=1,t.parent.parent.color=0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.rotate_right(t)),t.parent.color=1,t.parent.parent.color=0,this.rotate_left(t.parent.parent)));this.root.color=1}tree_delete(e){let t,n;t=e.left==this.nil_node||e.right==this.nil_node?e:this.tree_successor(e),n=t.left!=this.nil_node?t.left:t.right,n.parent=t.parent,t==this.root?this.root=n:(t==t.parent.left?t.parent.left=n:t.parent.right=n,t.parent.update_max()),this.recalc_max(n),t!=e&&(e.copy_data(t),e.update_max(),this.recalc_max(e)),1==t.color&&this.delete_fixup(n)}delete_fixup(e){let t,n=e;for(;n!=this.root&&null!=n.parent&&1==n.color;)n==n.parent.left?(t=n.parent.right,0==t.color&&(t.color=1,n.parent.color=0,this.rotate_left(n.parent),t=n.parent.right),1==t.left.color&&1==t.right.color?(t.color=0,n=n.parent):(1==t.right.color&&(t.color=0,t.left.color=1,this.rotate_right(t),t=n.parent.right),t.color=n.parent.color,n.parent.color=1,t.right.color=1,this.rotate_left(n.parent),n=this.root)):(t=n.parent.left,0==t.color&&(t.color=1,n.parent.color=0,this.rotate_right(n.parent),t=n.parent.left),1==t.left.color&&1==t.right.color?(t.color=0,n=n.parent):(1==t.left.color&&(t.color=0,t.right.color=1,this.rotate_left(t),t=n.parent.left),t.color=n.parent.color,n.parent.color=1,t.left.color=1,this.rotate_right(n.parent),n=this.root));n.color=1}tree_search(e,t){if(null!=e&&e!=this.nil_node)return t.equal_to(e)?e:t.less_than(e)?this.tree_search(e.left,t):this.tree_search(e.right,t)}tree_search_interval(e,t,n){null!=e&&e!=this.nil_node&&(e.left==this.nil_node||e.not_intersect_left_subtree(t)||this.tree_search_interval(e.left,t,n),e.intersect(t)&&n.push(e),e.right==this.nil_node||e.not_intersect_right_subtree(t)||this.tree_search_interval(e.right,t,n))}tree_find_any_interval(e,t){let n=!1;return null!=e&&e!=this.nil_node&&(e.left==this.nil_node||e.not_intersect_left_subtree(t)||(n=this.tree_find_any_interval(e.left,t)),n||(n=e.intersect(t)),n||e.right==this.nil_node||e.not_intersect_right_subtree(t)||(n=this.tree_find_any_interval(e.right,t))),n}local_minimum(e){let t=e;for(;null!=t.left&&t.left!=this.nil_node;)t=t.left;return t}local_maximum(e){let t=e;for(;null!=t.right&&t.right!=this.nil_node;)t=t.right;return t}tree_successor(e){let t,n,r;if(e.right!=this.nil_node)t=this.local_minimum(e.right);else{for(n=e,r=e.parent;null!=r&&r.right==n;)n=r,r=r.parent;t=r}return t}rotate_left(e){let t=e.right;e.right=t.left,t.left!=this.nil_node&&(t.left.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,null!=e&&e!=this.nil_node&&e.update_max(),t=e.parent,null!=t&&t!=this.nil_node&&t.update_max()}rotate_right(e){let t=e.left;e.left=t.right,t.right!=this.nil_node&&(t.right.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.right=e,e.parent=t,null!=e&&e!=this.nil_node&&e.update_max(),t=e.parent,null!=t&&t!=this.nil_node&&t.update_max()}tree_walk(e,t){null!=e&&e!=this.nil_node&&(this.tree_walk(e.left,t),t(e),this.tree_walk(e.right,t))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,(function(t){0==t.color&&(1==t.left.color&&1==t.right.color||(e=!1))})),e}testBlackHeightProperty(e){let t=0,n=0,r=0;if(1==e.color&&t++,n=e.left!=this.nil_node?this.testBlackHeightProperty(e.left):1,r=e.right!=this.nil_node?this.testBlackHeightProperty(e.right):1,n!=r)throw new Error("Red-black height property violated");return t+=n,t}}t.a=a},619:function(e,t,n){var r=n(1224);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},620:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(621));class i extends Map{constructor(e,t={checkIndent:!0}){super();const{checkIndent:n}=t;let r;this._checkIndent=n,r="string"==typeof e?e.trimEnd().split(/(?:[\t ]*\r?\n){2,}/):e||[],this._stanzaAndCommentOrder=[],r.forEach((e=>{this.add(e)}))}add(e){if(""===e)throw new Error("Invalid stanza, was empty");if(e.trim().startsWith("#")){const t=e.trimEnd().split(/\r?\n/).map((e=>e.trim()));if(t.every((e=>e.startsWith("#"))))return this._stanzaAndCommentOrder.push(t.join("\n")),this}const t=new a.default(e,{checkIndent:this._checkIndent});if(this.nameKey){if(t.nameKey!==this.nameKey)throw new Error(`The first line in each stanza must have the same key. Saw both ${this.nameKey} and ${t.nameKey}`)}else this.nameKey=t.nameKey;if(!t.name)throw new Error(`No stanza name: ${t.name}`);if(this.has(t.name))throw new Error(`Got duplicate stanza name: ${t.name}`);return this._stanzaAndCommentOrder.push(t.name),super.set(t.name,t)}update(e,t){if(!(t instanceof a.default))throw new Error(`Value of ${e} is not an RaStanza`);super.set(e,t)}delete(e){return this._stanzaAndCommentOrder.includes(e)&&(this._stanzaAndCommentOrder=this._stanzaAndCommentOrder.filter((t=>t!==e))),super.delete(e)}clear(){this._stanzaAndCommentOrder.length=0,this.nameKey=void 0,super.clear()}toString(){if(0===this.size)return"";const e=[];return this._stanzaAndCommentOrder.forEach((t=>{if(t.startsWith("#"))e.push(`${t}\n`);else{const n=this.get(t);n&&e.push(n.toString())}})),e.join("\n")}}t.default=i},621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Map{constructor(e,t={checkIndent:!0}){super();const{checkIndent:n}=t;let r;this._checkIndent=n,r="string"==typeof e?e.trimEnd().split(/\r?\n/):e||[],this._keyAndCommentOrder=[],r.forEach((e=>{this.add(e)}))}add(e){if(""===e)throw new Error("Invalid stanza, contained blank lines");if(e.trim().startsWith("#"))return this._keyAndCommentOrder.push(e.trim()),this;if(e.trimEnd().endsWith("\\")){const t=e.trimEnd().slice(0,-1);return this._continuedLine?this._continuedLine+=t.trimStart():this._continuedLine=t,this}let t=e;if(this._continuedLine&&(t=this._continuedLine+t.trimStart(),this._continuedLine=void 0),this.indent||this._checkIndent){const e=t.match(/^([ \t]+)/);if(void 0===this.indent)e?[,this.indent]=e:this.indent="";else if(""===this.indent&&null!==e||this.indent&&e&&this.indent!==e[1])throw new Error("Inconsistent indentation of stanza")}else this.indent="";const n=t.trim(),r=n.indexOf(" ");if(-1===r){if(!this.nameKey)throw new Error("First line in a stanza must have both a key and a value");return this.has(n)?this:(this._keyAndCommentOrder.push(n),super.set(n,""))}const a=n.slice(0,r),i=n.slice(r+1);if(this.has(a)&&i!==this.get(a))throw new Error(`Got duplicate key with a different value in stanza: "${a}" key has both ${this.get(a)} and ${i}`);return this._keyAndCommentOrder.push(a),this.nameKey||(this.nameKey=a,this.name=n.slice(r+1)),super.set(a,i)}set(e,t){if("string"!=typeof t)throw new Error(`Value of ${e} must be a string, got ${typeof t}`);return super.set(e,t)}delete(e){if(e===this.nameKey)throw new Error("Cannot delete the first line in a stanza (you can still overwrite it with set()).");return this._keyAndCommentOrder.includes(e)&&(this._keyAndCommentOrder=this._keyAndCommentOrder.filter((t=>t!==e))),super.delete(e)}clear(){this._keyAndCommentOrder.length=0,this._continuedLine=void 0,this.indent=void 0,this.name=void 0,this.nameKey=void 0,super.clear()}toString(){if(0===this.size)return"";const e=[];return this._keyAndCommentOrder.forEach((t=>{t.startsWith("#")?e.push(`${this.indent}${t}`):e.push(`${this.indent}${t} ${this.get(t)}`.trimEnd())})),`${e.join("\n")}\n`}}t.default=r},622:function(e,t,n){"use strict";var r,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}b(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,n)}(e,a,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var a,i,s,o;if(c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(a=u(e))>0&&s.length>a&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):m(a,a.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){r.once&&e.removeEventListener(t,a),n(i)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,i,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},623:function(e,t,n){(t=e.exports=n(890)).Stream=t,t.Readable=t,t.Writable=n(625),t.Duplex=n(146),t.Transform=n(893),t.PassThrough=n(1242)},624:function(e,t,n){var r=n(35),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(a,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},625:function(e,t,n){"use strict";(function(t,r,a){var i=n(478);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var o,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i.nextTick;v.WritableState=b;var c=Object.create(n(354));c.inherits=n(192);var u={deprecate:n(1240)},h=n(891),d=n(624).Buffer,f=a.Uint8Array||function(){};var p,g=n(892);function m(){}function b(e,t){o=o||n(146),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,a){--t.pendingcb,n?(i.nextTick(a,r),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,n,r,t,a);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?l(w,e,n,s,a):w(e,n,s,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(o=o||n(146),!(p.call(v,this)||this instanceof o))return new v(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function y(e,t,n,r,a,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var o=0,l=!0;n;)a[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;a.allBuffers=l,y(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=E(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,h),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===v&&(e&&e._writableState instanceof b)}})):p=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,a=this._writableState,s=!1,o=!a.objectMode&&(r=e,d.isBuffer(r)||r instanceof f);return o&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=m),a.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var a=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),i.nextTick(r,s),a=!1),a}(this,a,e,n))&&(a.pendingcb++,s=function(e,t,n,r,a,i){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,a);r!==s&&(n=!0,a="buffer",r=s)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,o,r,a,i);return l}(this,a,o,e,t,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(114),n(754).setImmediate,n(71))},626:function(e,t,n){"use strict";var r=n(1241).Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=s(t[r]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--r<n||-2===a)return 0;if((a=s(t[r]))>=0)return a>0&&(e.lastNeed=a-2),a;if(--r<n||-2===a)return 0;if((a=s(t[r]))>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},627:function(e,t,n){"use strict";function r(e){return e.replace(/%([0-9A-Fa-f]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))}function a(e,t){return String(t).replace(e,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}`))}function i(e){return a(/[\n;\r\t=%&,\x00-\x1f\x7f-\xff]/g,e)}function s(e){return a(/[\n\r\t%\x00-\x1f\x7f-\xff]/g,e)}function o(e){if(!e||!e.length||"."===e)return{};const t={};return e.replace(/\r?\n$/,"").split(";").forEach((e=>{const n=e.split("=",2);if(!n[1]||!n[1].length)return;n[0]=n[0].trim();let a=t[n[0].trim()];a||(a=[],t[n[0]]=a),a.push(...n[1].split(",").map((e=>e.trim())).map(r))})),t}function l(e){const t=e.split("\t").map((e=>"."===e||""===e?null:e));return{seq_id:t[0]&&r(t[0]),source:t[1]&&r(t[1]),type:t[2]&&r(t[2]),start:null===t[3]?null:parseInt(t[3],10),end:null===t[4]?null:parseInt(t[4],10),score:null===t[5]?null:parseFloat(t[5]),strand:t[6],phase:t[7],attributes:null===t[8]?null:o(t[8])}}function c(e){const t=/^\s*##\s*(\S+)\s*(.*)/.exec(e);if(!t)return null;const[,n]=t;let[,,r]=t;const a={directive:n};if(r.length&&(r=r.replace(/\r?\n$/,""),a.value=r),"sequence-region"===n){const e=r.split(/\s+/,3);return{...a,seq_id:e[0],start:e[1]&&e[1].replace(/\D/g,""),end:e[2]&&e[2].replace(/\D/g,"")}}if("genome-build"===n){const[e,t]=r.split(/\s+/,2);return{...a,source:e,buildName:t}}return a}function u(e){const t=[];return Object.entries(e).forEach((([e,n])=>{if(!n)return;let r;r=n.hasOwnProperty("toString")?i(n.toString()):Array.isArray(n)?n.map(i).join(","):i(n),t.push(`${i(e)}=${r}`)})),t.length?t.join(";"):"."}function h(e,t){const n=null===e.attributes||void 0===e.attributes?".":u(e.attributes),r=`${[null===e.seq_id?".":s(e.seq_id),null===e.source?".":s(e.source),null===e.type?".":s(e.type),null===e.start?".":s(e.start),null===e.end?".":s(e.end),null===e.score?".":s(e.score),null===e.strand?".":s(e.strand),null===e.phase?".":s(e.phase),n].join("\t")}\n`;return t[r]?"":(t[r]=!0,r)}function d(e,t){if(Array.isArray(e))return e.map((e=>d(e,t))).join("");const n=[h(e,t)];var r;return void 0!==(r=e).child_features&&void 0!==r.derived_features&&n.push(...e.child_features.map((e=>d(e,t))),...e.derived_features.map((e=>d(e,t)))),n.join("")}function f(e){return d(e,{})}function p(e){let t=`##${e.directive}`;return e.value&&(t+=` ${e.value}`),t+="\n",t}function g(e){return`# ${e.comment}\n`}function m(e){return`>${e.id}${e.description?` ${e.description}`:""}\n${e.sequence}\n`}function b(e){function t(e){return"attributes"in e?f(e):"directive"in e?p(e):"sequence"in e?m(e):"comment"in e?g(e):"# (invalid item found during format)\n"}return Array.isArray(e)?e.map(t):t(e)}n.r(t),n.d(t,"unescape",(function(){return r})),n.d(t,"escape",(function(){return i})),n.d(t,"escapeColumn",(function(){return s})),n.d(t,"parseAttributes",(function(){return o})),n.d(t,"parseFeature",(function(){return l})),n.d(t,"parseDirective",(function(){return c})),n.d(t,"formatAttributes",(function(){return u})),n.d(t,"formatFeature",(function(){return f})),n.d(t,"formatDirective",(function(){return p})),n.d(t,"formatComment",(function(){return g})),n.d(t,"formatSequence",(function(){return m})),n.d(t,"formatItem",(function(){return b}))},628:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(92);function a(e,t){return e.offset+e.lineBytes*Math.floor(t/e.lineLength)+t%e.lineLength}class i{constructor({fasta:e,fai:t,path:n,faiPath:a,chunkSizeLimit:i=1e6}){if(e)this.fasta=e;else{if(!n)throw new Error("Need to pass filehandle for fasta or path to localfile");this.fasta=new r.LocalFile(n)}if(t)this.fai=t;else if(a)this.fai=new r.LocalFile(a);else{if(!n)throw new Error("Need to pass filehandle for  or path to localfile");this.fai=new r.LocalFile(`${n}.fai`)}this.chunkSizeLimit=i}async _getIndexes(e){return this.indexes||(this.indexes=async function(e,t){const n=await e.readFile(t);if(!n||!n.length)throw new Error("No data read from FASTA index (FAI) file");let r,a=0;const i=n.toString("utf8").split(/\r?\n/).filter((e=>/\S/.test(e))).map((e=>e.split("\t"))).filter((e=>""!==e[0])).map((e=>(r&&r.name===e[0]||(r={name:e[0],id:a},a+=1),{id:r.id,name:e[0],length:+e[1],start:0,end:+e[1],offset:+e[2],lineLength:+e[3],lineBytes:+e[4]})));return{name:Object.fromEntries(i.map((e=>[e.name,e]))),id:Object.fromEntries(i.map((e=>[e.id,e])))}}(this.fai,e)),this.indexes}async getSequenceNames(e){return Object.keys((await this._getIndexes(e)).name)}async getSequenceSizes(e){const t={},n=await this._getIndexes(e),r=Object.values(n.id);for(let e=0;e<r.length;e+=1)t[r[e].name]=r[e].length;return t}async getSequenceSize(e,t){var n;return null===(n=(await this._getIndexes(t)).name[e])||void 0===n?void 0:n.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t)).name[e]}async getResiduesById(e,t,n,r){const a=(await this._getIndexes(r)).id[e];if(a)return this._fetchFromIndexEntry(a,t,n,r)}async getResiduesByName(e,t,n,r){const a=(await this._getIndexes(r)).name[e];if(a)return this._fetchFromIndexEntry(a,t,n,r)}async getSequence(e,t,n,r){return this.getResiduesByName(e,t,n,r)}async _fetchFromIndexEntry(t,n=0,r,i){let s=r;if(n<0)throw new TypeError("regionStart cannot be less than 0");if((void 0===s||s>t.length)&&(s=t.length),n>=s)return"";const o=a(t,n),l=a(t,s)-o;if(l>this.chunkSizeLimit)throw new Error(`data size of ${l.toLocaleString()} bytes exceeded chunk size limit of ${this.chunkSizeLimit.toLocaleString()} bytes`);const c=e.allocUnsafe(l);return await this.fasta.read(c,0,l,o,i),c.toString("utf8").replace(/\s+/g,"")}}}).call(this,n(35).Buffer)},631:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"bigChain",(function(){return s})),n.d(r,"bigGenePred",(function(){return o})),n.d(r,"bigInteract",(function(){return l})),n.d(r,"bigLink",(function(){return c})),n.d(r,"bigMaf",(function(){return u})),n.d(r,"bigNarrowPeak",(function(){return h})),n.d(r,"bigPsl",(function(){return d})),n.d(r,"defaultBedSchema",(function(){return f})),n.d(r,"mafFrames",(function(){return p})),n.d(r,"mafSummary",(function(){return g}));var a=n(880),i=n.n(a);const s='table bigChain\n"bigChain pairwise alignment"\n    (\n    string chrom;       "Reference sequence chromosome or scaffold"\n    uint   chromStart;  "Start position in chromosome"\n    uint   chromEnd;    "End position in chromosome"\n    string name;        "Name or ID of item, ideally both human readable and unique"\n    uint score;         "Score (0-1000)"\n    char[1] strand;     "+ or - for strand"\n    uint tSize;         "size of target sequence"\n    string qName;       "name of query sequence"\n    uint qSize;         "size of query sequence"\n    uint qStart;        "start of alignment on query sequence"\n    uint qEnd;          "end of alignment on query sequence"\n    uint chainScore;    "score from chain"\n    )',o='table bigGenePred\n"bigGenePred gene models"\n   (\n   string chrom;       "Reference sequence chromosome or scaffold"\n   uint   chromStart;  "Start position in chromosome"\n   uint   chromEnd;    "End position in chromosome"\n   string name;        "Name or ID of item, ideally both human readable and unique"\n   uint score;         "Score (0-1000)"\n   char[1] strand;     "+ or - for strand"\n   uint thickStart;    "Start of where display should be thick (start codon)"\n   uint thickEnd;      "End of where display should be thick (stop codon)"\n   uint reserved;       "RGB value (use R,G,B string in input file)"\n   int blockCount;     "Number of blocks"\n   int[blockCount] blockSizes; "Comma separated list of block sizes"\n   int[blockCount] chromStarts; "Start positions relative to chromStart"\n   string name2;       "Alternative/human readable name"\n   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"\n   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"\n   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"\n   string type;        "Transcript type"\n   string geneName;    "Primary identifier for gene"\n   string geneName2;   "Alternative/human readable gene name"\n   string geneType;    "Gene type"\n   )',l='table interact\n"interaction between two regions"\n    (\n    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"\n    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"\n    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"\n    string name;         "Name of item, for display.  Usually \'sourceName/targetName/exp\' or empty"\n    uint score;          "Score (0-1000)"\n    double value;        "Strength of interaction or other data value. Typically basis for score"\n    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"\n    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"\n    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."\n    uint sourceStart;    "Start position in chromosome of source/lower/this region"\n    uint sourceEnd;      "End position in chromosome of source/lower/this region"\n    string sourceName;   "Identifier of source/lower/this region"\n    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"\n    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"\n    uint targetStart;    "Start position in chromosome of target/upper/this region"\n    uint targetEnd;      "End position in chromosome of target/upper/this region"\n    string targetName;   "Identifier of target/upper/this region"\n    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"\n\n    )',c='table bigLink\n"bigLink pairwise alignment"\n    (\n    string chrom;       "Reference sequence chromosome or scaffold"\n    uint   chromStart;  "Start position in chromosome"\n    uint   chromEnd;    "End position in chromosome"\n    string name;        "Name or ID of item, ideally both human readable and unique"\n    uint qStart;        "start of alignment on query sequence"\n    )',u='table bedMaf\n"Bed3 with MAF block"\n    (\n    string chrom;      "Reference sequence chromosome or scaffold"\n    uint   chromStart; "Start position in chromosome"\n    uint   chromEnd;   "End position in chromosome"\n    lstring mafBlock;   "MAF block"\n    )',h='table bigNarrowPeak\n"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."\n(\n    string chrom;        "Reference sequence chromosome or scaffold"\n    uint   chromStart;   "Start position in chromosome"\n    uint   chromEnd;     "End position in chromosome"\n    string name;\t "Name given to a region (preferably unique). Use . if no name is assigned"\n    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "\n    char[1]  strand;     "+ or - or . for unknown"\n    float  signalValue;  "Measurement of average enrichment for the region"\n    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."\n    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."\n    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."\n)',d='table bigPsl\n"bigPsl pairwise alignment"\n    (\n    string chrom;       "Reference sequence chromosome or scaffold"\n    uint   chromStart;  "Start position in chromosome"\n    uint   chromEnd;    "End position in chromosome"\n    string name;        "Name or ID of item, ideally both human readable and unique"\n    uint score;         "Score (0-1000)"\n    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"\n    uint thickStart;    "Start of where display should be thick (start codon)"\n    uint thickEnd;      "End of where display should be thick (stop codon)"\n    uint reserved;       "RGB value (use R,G,B string in input file)"\n    int blockCount;     "Number of blocks"\n    int[blockCount] blockSizes; "Comma separated list of block sizes"\n    int[blockCount] chromStarts; "Start positions relative to chromStart"\n\n    uint    oChromStart;"Start position in other chromosome"\n    uint    oChromEnd;  "End position in other chromosome"\n    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"\n    uint    oChromSize; "Size of other chromosome."\n    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"\n\n    lstring  oSequence;  "Sequence on other chrom (or empty)"\n    string   oCDS;       "CDS in NCBI format"\n\n    uint    chromSize;"Size of target chromosome"\n\n    uint match;        "Number of bases matched."\n    uint misMatch; " Number of bases that don\'t match "\n    uint repMatch; " Number of bases that match but are part of repeats "\n    uint nCount;   " Number of \'N\' bases "\n    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"\n    )',f='table defaultBedSchema\n"BED12"\n    (\n    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."\n    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."\n    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."\n    string   name;   "Defines the name of the BED line."\n    float   score;   "Feature score, doesn\'t care about the 0-1000 limit as in bed"\n    char   strand;   "Defines the strand. Either \'.\' (=no strand) or \'+\' or \'-\'"\n    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."\n    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."\n    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "\n    uint blockCount; " The number of blocks (exons) in the BED line."\n    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."\n    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."\n    )',p='table mafFrames\n"codon frame assignment for MAF components"\n    (\n    string chrom;      "Reference sequence chromosome or scaffold"\n    uint   chromStart; "Start range in chromosome"\n    uint   chromEnd;   "End range in chromosome"\n    string src;        "Name of sequence source in MAF"\n    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"\n    char[1] strand;    "+ or -"\n    string name;       "Name of gene used to define frame"\n    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"\n    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"\n    ubyte  isExonStart;  "does this start the CDS portion of an exon?"\n    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"\n    )',g='table mafSummary\n"Positions and scores for alignment blocks"\n    (\n    string chrom;      "Reference sequence chromosome or scaffold"\n    uint   chromStart; "Start position in chromosome"\n    uint   chromEnd;   "End position in chromosome"\n    string src;        "Sequence name or database of alignment"\n    float  score;      "Floating point score."\n    char[1] leftStatus;  "Gap/break annotation for preceding block"\n    char[1] rightStatus; "Gap/break annotation for following block"\n    )';var m=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,Object(a.parse)(t.trim())])));function b(e){const t=["uint","int","float","long"];return{...e,fields:e.fields.map((e=>({...e,isArray:e.size&&"char"!==e.type,arrayIsNumeric:e.size&&t.includes(e.type),isNumeric:!e.size&&t.includes(e.type)})))}}const v={".":0,"-":-1,"+":1};t.a=class{constructor(e={}){if(e.autoSql)this.autoSql=b(i.a.parse(e.autoSql));else if(e.type){if(!m[e.type])throw new Error("Type not found");this.autoSql=b(m[e.type])}else this.autoSql=b(m.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:n}=this,{uniqueId:r}=t,a=Array.isArray(e)?e:e.split("\t");let i={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&function(e){var t;return e.length>=12&&!Number.isNaN(parseInt(e[9],10))&&(null===(t=e[10])||void 0===t?void 0:t.split(",").filter((e=>!!e)).length)===parseInt(e[9],10)}(a))for(let e=0;e<n.fields.length;e++){const t=n.fields[e];let r=a[e];const{isNumeric:s,isArray:o,arrayIsNumeric:l,name:c}=t;if(null==r)break;if("."!==r){if(s){const e=Number(r);r=Number.isNaN(e)?r:e}else o&&(r=r.split(","),""===r[r.length-1]&&r.pop(),l&&(r=r.map((e=>Number(e)))));i[c]=r}}else{const e=["chrom","chromStart","chromEnd","name"];i=Object.fromEntries(a.map(((t,n)=>[e[n]||"field"+n,t]))),i.chromStart=+i.chromStart,i.chromEnd=+i.chromEnd,Number.isNaN(Number.parseFloat(i.field4))||(i.score=+i.field4,delete i.field4),"+"!==i.field5&&"-"!==i.field5||(i.strand=i.field5,delete i.field5)}return r&&(i.uniqueId=r),i.strand=v[i.strand]||0,i.chrom=decodeURIComponent(i.chrom),i}}},638:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=1,a=2,i=4,s=8,o=16,l=32,c=64,u=128,h=256,d=512,f=1024,p=2048;const g="=ACMGRSVTWYHKDBN".split(""),m="MIDNSHP=X???????".split("");class b{constructor(e){this.data={},this._tagList=[],this._allTagsParsed=!1;const{bytes:t,fileOffset:n}=e,{byteArray:r,start:a}=t;this.data={},this.bytes=t,this._id=n,this._refID=r.readInt32LE(a+4),this.data.start=r.readInt32LE(a+8),this.flags=(4294901760&r.readInt32LE(a+16))>>16}get(e){return this[e]?(this.data[e]||(this.data[e]=this[e]()),this.data[e]):this._get(e.toLowerCase())}end(){return this.get("start")+this.get("length_on_ref")}seq_id(){return this._refID}_get(e){return e in this.data||(this.data[e]=this._parseTag(e)),this.data[e]}_tags(){this._parseAllTags();let e=["seq"];this.isSegmentUnmapped()||e.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&e.push("next_segment_position","pair_orientation"),e=e.concat(this._tagList||[]),Object.keys(this.data).forEach((t=>{"_"!==t[0]&&"next_seq_id"!==t&&e.push(t)}));const t={};return e.filter((e=>{if(e in this.data&&void 0===this.data[e]||"CG"===e||"cg"===e)return!1;const n=e.toLowerCase(),r=t[n];return t[n]=!0,!r}))}parent(){}children(){return this.get("subfeatures")}id(){return this._id}mq(){const e=(65280&this.get("_bin_mq_nl"))>>8;return 255===e?void 0:e}score(){return this.get("mq")}qual(){var e;return null===(e=this.qualRaw())||void 0===e?void 0:e.join(" ")}qualRaw(){if(this.isSegmentUnmapped())return;const{start:e,byteArray:t}=this.bytes,n=e+36+this.get("_l_read_name")+4*this.get("_n_cigar_op")+this.get("_seq_bytes"),r=this.get("seq_length");return t.subarray(n,n+r)}strand(){return this.isReverseComplemented()?-1:1}multi_segment_next_segment_strand(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}name(){return this.get("_read_name")}_read_name(){const e=this.get("_l_read_name"),{byteArray:t,start:n}=this.bytes;return t.toString("ascii",n+36,n+36+e-1)}_parseTag(e){if(this._allTagsParsed)return;const{byteArray:t,start:n}=this.bytes;let r=this._tagOffset||n+36+this.get("_l_read_name")+4*this.get("_n_cigar_op")+this.get("_seq_bytes")+this.get("seq_length");const a=this.bytes.end;let i;for(;r<a&&i!==e;){const n=String.fromCharCode(t[r],t[r+1]);i=n.toLowerCase();const s=String.fromCharCode(t[r+2]);let o;switch(r+=3,s){case"A":o=String.fromCharCode(t[r]),r+=1;break;case"i":o=t.readInt32LE(r),r+=4;break;case"I":o=t.readUInt32LE(r),r+=4;break;case"c":o=t.readInt8(r),r+=1;break;case"C":o=t.readUInt8(r),r+=1;break;case"s":o=t.readInt16LE(r),r+=2;break;case"S":o=t.readUInt16LE(r),r+=2;break;case"f":o=t.readFloatLE(r),r+=4;break;case"Z":case"H":for(o="";r<=a;){const e=t[r++];if(0===e)break;o+=String.fromCharCode(e)}break;case"B":{o="";const e=t[r++],a=String.fromCharCode(e),i=t.readInt32LE(r);if(r+=4,"i"===a)if("CG"===n)for(let e=0;e<i;e++){const e=t.readInt32LE(r);o+=(e>>4)+m[15&e],r+=4}else for(let e=0;e<i;e++)o+=t.readInt32LE(r),e+1<i&&(o+=","),r+=4;if("I"===a)if("CG"===n)for(let e=0;e<i;e++){const e=t.readUInt32LE(r);o+=(e>>4)+m[15&e],r+=4}else for(let e=0;e<i;e++)o+=t.readUInt32LE(r),e+1<i&&(o+=","),r+=4;if("s"===a)for(let e=0;e<i;e++)o+=t.readInt16LE(r),e+1<i&&(o+=","),r+=2;if("S"===a)for(let e=0;e<i;e++)o+=t.readUInt16LE(r),e+1<i&&(o+=","),r+=2;if("c"===a)for(let e=0;e<i;e++)o+=t.readInt8(r),e+1<i&&(o+=","),r+=1;if("C"===a)for(let e=0;e<i;e++)o+=t.readUInt8(r),e+1<i&&(o+=","),r+=1;if("f"===a)for(let e=0;e<i;e++)o+=t.readFloatLE(r),e+1<i&&(o+=","),r+=4;break}default:console.warn(`Unknown BAM tag type '${s}', tags may be incomplete`),o=void 0,r=a}if(this._tagOffset=r,this._tagList.push(n),i===e)return o;this.data[i]=o}this._allTagsParsed=!0}_parseAllTags(){this._parseTag("")}_parseCigar(e){return e.match(/\d+\D/g).map((e=>[e.match(/\D/)[0].toUpperCase(),parseInt(e,10)]))}isPaired(){return!!(this.flags&r)}isProperlyPaired(){return!!(this.flags&a)}isSegmentUnmapped(){return!!(this.flags&i)}isMateUnmapped(){return!!(this.flags&s)}isReverseComplemented(){return!!(this.flags&o)}isMateReverseComplemented(){return!!(this.flags&l)}isRead1(){return!!(this.flags&c)}isRead2(){return!!(this.flags&u)}isSecondary(){return!!(this.flags&h)}isFailedQc(){return!!(this.flags&d)}isDuplicate(){return!!(this.flags&f)}isSupplementary(){return!!(this.flags&p)}cigar(){if(this.isSegmentUnmapped())return;const{byteArray:e,start:t}=this.bytes,n=this.get("_n_cigar_op");let r=t+36+this.get("_l_read_name");const a=this.get("seq_length");let i="",s=0,o=e.readInt32LE(r),l=o>>4,c=m[15&o];if("S"===c&&l===a)return r+=4,o=e.readInt32LE(r),l=o>>4,c=m[15&o],"N"!==c&&console.warn("CG tag with no N tag"),this.data.length_on_ref=l,this.get("CG");for(let t=0;t<n;++t)o=e.readInt32LE(r),l=o>>4,c=m[15&o],i+=l+c,"H"!==c&&"S"!==c&&"I"!==c&&(s+=l),r+=4;return this.data.length_on_ref=s,i}_flags(){}length_on_ref(){return this.data.length_on_ref||this.get("cigar"),this.data.length_on_ref}_n_cigar_op(){return 65535&this.get("_flag_nc")}_l_read_name(){return 255&this.get("_bin_mq_nl")}_seq_bytes(){return this.get("seq_length")+1>>1}getReadBases(){return this.seq()}seq(){const{byteArray:e,start:t}=this.bytes,n=t+36+this.get("_l_read_name")+4*this.get("_n_cigar_op"),r=this.get("_seq_bytes"),a=this.get("seq_length");let i="",s=0;for(let t=0;t<r;++t){const r=e[n+t];i+=g[(240&r)>>4],s++,s<a&&(i+=g[15&r],s++)}return i}getPairOrientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let n=" ",r=" ";this.isRead1()?(n="1",r="2"):this.isRead2()&&(n="2",r="1");const a=[];return this.template_length()>0?(a[0]=e,a[1]=n,a[2]=t,a[3]=r):(a[2]=e,a[3]=n,a[0]=t,a[1]=r),a.join("")}return null}_bin_mq_nl(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}_flag_nc(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}seq_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}_next_refid(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}_next_pos(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}template_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}toJSON(){const e={};return Object.keys(this).forEach((t=>{"_"!==t.charAt(0)&&"bytes"!==t&&(e[t]=this[t])})),e}}},848:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(849);function a(t){return e.from(Object(r.inflate)(t))}}).call(this,n(35).Buffer)},849:function(e,t,n){"use strict";var r={};(0,n(121).assign)(r,n(1164),n(1167),n(854)),e.exports=r},850:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--s);a%=65521,i%=65521}return a|i<<16|0}},851:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,a){var i=r,s=a+n;e^=-1;for(var o=a;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}},852:function(e,t,n){"use strict";var r=n(121),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new r.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,t.string2buf=function(e){var t,n,a,i,s,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),s=0,i=0;s<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,a,i,o=t||e.length,c=new Array(2*o);for(r=0,n=0;n<o;)if((a=e[n++])<128)c[r++]=a;else if((i=s[a])>4)c[r++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&n<o;)a=a<<6|63&e[n++],i--;i>1?c[r++]=65533:a<65536?c[r++]=a:(a-=65536,c[r++]=55296|a>>10&1023,c[r++]=56320|1023&a)}return l(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},853:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},854:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},855:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=n(35).Buffer,i=n(1177),s=n(1178).Context,o=n(1179);"undefined"!=typeof window&&(window.Buffer=a),"undefined"!=typeof self&&(self.Buffer=a);var l={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8,UInt64:8,Int64:8},c={},u="___parser_",h=[];!function(){var e;for(e=1;e<=32;e++)h.push(e)}();var d={};Object.keys(l).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(e){d[e.toLowerCase()]=e}));var f=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};f.start=function(){return new f},Object.keys(l).forEach((function(e){f.prototype[e.toLowerCase()]=function(t,n){return this.setNextParser(e.toLowerCase(),t,n)};var t=e.replace(/BE|LE/,"").toLowerCase();t in f.prototype||(f.prototype[t]=function(e,n){return this[t+this.endian](e,n)})})),h.forEach((function(e){f.prototype["bit".concat(e.toString())]=function(t,n){return n||(n={}),n.length=e,this.setNextParser("bit",t,n)}})),f.prototype.namely=function(e){return c[e]=this,this.alias=e,this},f.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},f.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},f.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},f.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!c[t.type]&&Object.keys(l).indexOf(d[t.type])<0)throw new Error('Specified primitive type "'.concat(t.type,'" is not supported.'));return this.setNextParser("array",e,t)},f.prototype.choice=function(e,t){if(1===arguments.length&&"object"===r(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(n){if(!t.choices[n])throw new Error("Choice Case ".concat(n," of ").concat(e," is not valid."));if("string"==typeof t.choices[n]&&!c[t.choices[n]]&&Object.keys(l).indexOf(d[t.choices[n]])<0)throw new Error('Specified primitive type "'.concat(t.choices[n],'" is not supported.'))}),this),this.setNextParser("choice",e,t)},f.prototype.nest=function(e,t){if(1===arguments.length&&"object"===r(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof f||c[t.type]))throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof f||e))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},f.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: ".concat(e))}return this},f.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},f.prototype.getCode=function(){var e=new s;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)",u+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},f.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},f.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {",u+this.alias),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},f.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){c[t].addAliasedCode(e)}))},f.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { ".concat(this.getCode()," })");this.compiled=i.runInThisContext(e)},f.prototype.sizeOf=function(){var e=NaN;if(Object.keys(l).indexOf(this.type)>=0)e=l[this.type];else if("String"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var t=NaN;"string"==typeof this.options.type?t=l[d[this.options.type]]:this.options.type instanceof f&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},f.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,o)},f.prototype.setNextParser=function(e,t,n){var r=new f;return r.type=d[e],r.varName=t,r.options=n||r.options,r.endian=this.endian,this.head?this.head.next=r:this.next=r,this.head=r,this},f.prototype.generate=function(e){this.type&&(this["generate".concat(this.type)](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},f.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(r(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},f.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(l).forEach((function(e){f.prototype["generate".concat(e)]=function(t){"UInt64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):"Int64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",l[e])}})),f.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var n=0;e.bitFields.forEach((function(e){n+=e.options.length}));var r=e.generateTmpVariable();if(n<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",r),n=8;else if(n<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",r),n=16;else if(n<=24){var a=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",a),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",i),e.pushCode("var {2} = ({0} << 8) | {1};",a,i,r),n=24}else{if(!(n<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",r),n=32}e.pushCode("offset += {0};",n/8);var s=0,o="be"===this.endian;e.bitFields.forEach((function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,r,o?n-s-t.options.length:s,(1<<t.options.length)-1),s+=t.options.length})),e.bitFields=[]}},f.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},f.prototype.generateString=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",n,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,n,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,n)):this.options.greedy&&(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,n)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},f.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},f.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),r=this.options.type,a=e.generateTmpVariable(),i=e.generateVariable(this.varName),s=e.generateTmpVariable(),o=this.options.key,h="string"==typeof o;if(h?e.pushCode("{0} = {};",i):e.pushCode("{0} = [];",i),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",a):void 0!==n?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",a,n):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",a,t),"string"==typeof r)if(c[r]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,u+r),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",s,p),r!==this.alias&&e.addReference(r)}else e.pushCode("var {0} = buffer.read{1}(offset);",s,d[r]),e.pushCode("offset += {0};",l[d[r]]);else r instanceof f&&(e.pushCode("var {0} = {};",s),e.pushScope(s),r.generate(e),e.popScope());h?e.pushCode("{0}[{2}.{1}] = {2};",i,o,s):e.pushCode("{0}.push({1});",i,s),e.pushCode("}"),"function"==typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,s)},f.prototype.generateChoiceCase=function(e,t,n){if("string"==typeof n)if(c[n]){var r=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",r,u+n),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),r),n!==this.alias&&e.addReference(n)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),d[n]),e.pushCode("offset += {0};",l[d[n]]);else n instanceof f&&(e.pushPath(t),n.generate(e),e.popPath(t))},f.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach((function(t){var n=this.options.choices[t];Number.isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,n),e.pushCode("break;")}),this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},f.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof f)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(c[this.options.type]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,u+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,n),this.options.type!==this.alias&&e.addReference(this.options.type)}},f.prototype.generateFormatter=function(e,t,n){"function"==typeof n&&e.pushCode("{0} = ({1}).call(this, {0});",t,n)},f.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},f.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},f.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},f.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n    var ".concat(n," = buffer[offset];\n    if (").concat(n," < 0x80) {\n      ").concat(t," = ").concat(n,";\n      offset += 1;\n    } else if (").concat(n," < 0xc0) {\n      ").concat(t," = ((").concat(n,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(n," < 0xe0) {\n      ").concat(t," = ((").concat(n,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(n," < 0xf0) {\n      ").concat(t," = ((").concat(n,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(n," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},f.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},f.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n  var ".concat(n," = buffer[offset];\n  if (").concat(n," < 0x80) {\n    ").concat(t," = ").concat(n,";\n    offset += 1;\n  } else if (").concat(n," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(n," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(n," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(n," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(n," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(n," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(n," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(n," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=f},856:function(e,t,n){(function(t){const r=n(351);function a(e,t){return e&(1<<t)-1}function i(e,t){for(var n=0;t>=e[n+1];)n++;return n}function s(e,t){for(var n=1<<t,r=new Array(n),a=0,i=0;i<n;i++){for(;i>=e[a+1];)a++;r[i]=a}return r}function o(e,t,n,r){return n*(e>>r)+(e&(1<<r)-1)-t}function l(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function c(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function u(e,t,n,r,a){return e=function(e,t,n,r){for(var a=(1<<31-r)*n;e>=a;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,r,a),e=(Math.floor(e/r)<<a)+e%r+n}function h(e,t,n){0==n&&(n=4);for(var a=new Array(n),i=new Array(n),s=0;s<n;s++)i[s]=Math.floor(t.length/n)+(t.length%n>s),a[s]=new Array(i[s]);for(var o=0,l=0;l<t.length;l+=n,o++)for(var c=0;c<n;c++)o<a[c].length&&(a[c][o]=t[l+c]);var u=new Array(n),h=0;for(s=0;s<n;s++){var d=f(a[s],0),p=f(a[s],1);u[s]=p.length<d.length?p:d,h+=u[s].length}var g=new r("",0,h+5*n+1);g.WriteByte(n);for(s=0;s<n;s++)g.WriteUint7(u[s].length);for(s=0;s<n;s++)g.WriteData(u[s],u[s].length);return g.buf.slice(0,g.buf.pos)}function d(e,n){var c=e.ReadByte(),u=1&c,h=8&c,f=32&c,m=64&c,v=128&c;if(16&c||(n=e.ReadUint7()),h)return function(e,n){for(var r=e.ReadByte(),a=new Array(r),i=new Array(r),s=0;s<r;s++)a[s]=e.ReadUint7();var o=new Array(r);for(s=0;s<r;s++)i[s]=Math.floor(n/r)+(n%r>s),o[s]=d(e,i[s]);var l=new t.allocUnsafe(n);for(s=0;s<r;s++)for(var c=0;c<i[s];c++)l[c*r+s]=o[s][c];return l}(e,n);if(v)var y=n,[w,_,n]=function(e){for(var t=e.ReadByte(),n=new Array(t),r=0;r<t;r++)n[r]=e.ReadByte();return[n,t,e.ReadUint7()]}(e);if(m)var E=n,[k,S,n]=function(e){var t=e.ReadUint7(),n=e.ReadUint7();if(1&t)var a=e.ReadData((t-1)/2);else{var i=e.ReadUint7();a=e.ReadData(i),a=g(new r(a),t/2)}a=new r(a);var s=new Array(256),o=a.ReadByte();0==o&&(o=256);for(var l=0;l<o;l++)s[a.ReadByte()]=1;return[s,a,n]}(e);if(f)var C=e.ReadData(n);else if(0==u)C=g(e,n);else C=function(e,n){var c=(f=e.ReadByte())>>4,u=e;if(1&f){var h=e.ReadUint7(),d=e.ReadUint7(),f=new r(e.ReadData(d));u=new r(g(f,h))}var m=new Array(256),v=new Array(256);!function(e,t,n,r){for(var a=0;a<256;a++){t[a]=new Array(256),n[a]=new Array(256);for(var i=0;i<256;i++)t[a][i]=0}var s=p(e);for(a=0;a<256;a++)if(s[a]){var o=0;for(i=0;i<256;i++)s[i]&&(o>0?o--:(t[a][i]=e.ReadUint7(),0==t[a][i]&&(o=e.ReadByte())));b(t[a],r),n[a][0]=0;for(i=0;i<256;i++)n[a][i+1]=n[a][i]+t[a][i]}}(u,m,v,c);for(var y=new Array(256),w=0;w<256;w++)y[w]=s(v[w],c);for(var _=new Array(4),E=new Array(4),k=0;k<4;k++)_[k]=e.ReadUint32(),E[k]=0;var S=new t.allocUnsafe(n),C=Math.floor(n/4);for(w=0;w<C;w++)for(k=0;k<4;k++){var x=a(_[k],c),O=y[E[k]][x];S[w+k*C]=O,_[k]=o(_[k],v[E[k]][O],m[E[k]][O],c),_[k]=l(e,_[k]),E[k]=O}w*=4;for(;w<n;){x=a(_[3],c),O=i(v[E[3]],x);S[w++]=O,_[3]=o(_[3],v[E[3]][O],m[E[3]][O],c),_[3]=l(e,_[3]),E[3]=O}return S}(e,n);return m&&(C=function(e,n,a,i){new r(e);for(var s=new t.allocUnsafe(i),o=0,l=0;o<i;l++){var c=e[l];if(n[c])for(var u=a.ReadUint7(),h=0;h<=u;h++)s[o++]=c;else s[o++]=c}return s}(C,k,S,E)),v&&(C=function(e,n,r,a){var i=new t.allocUnsafe(a),s=0;if(r<=1)for(var o=0;o<a;o++)i[o]=n[0];else if(r<=2)for(o=0;o<a;o++){if(o%8==0)var l=e[s++];i[o]=n[1&l],l>>=1}else if(r<=4)for(o=0;o<a;o++)o%4==0&&(l=e[s++]),i[o]=n[3&l],l>>=2;else if(r<=16)for(o=0;o<a;o++)o%2==0&&(l=e[s++]),i[o]=n[15&l],l>>=4;return i}(C,w,_,y)),C}function f(e,n){var a=new r("",0,10);a.WriteByte(n);var i=1&n,s=8&n,o=32&n,l=64&n,d=128&n,f=n>>8;if(16&n||a.WriteUint7(e.length),s)return t.concat([a.buf.slice(0,a.pos),h(0,e,f)]);var p=new t.alloc(0);d&&([p,e]=function(e){for(var n=new Array(256),a=0;a<256;a++)n[a]=0;for(a=0;a<e.length;a++)n[e[a]]++;var i=new Array(256),s=0;for(a=0;a<256;a++)n[a]>0&&(i[a]=s++);if(!(s>16)){if(s<=1)var o=new t.allocUnsafe(0);else if(s<=2){o=new t.allocUnsafe(Math.ceil(e.length/8));var l=-1;for(a=0;a<e.length;a++)a%8==0&&(o[++l]=0),o[l]+=i[e[a]]<<a%8}else if(s<=4)for(o=new t.allocUnsafe(Math.ceil(e.length/4)),l=-1,a=0;a<e.length;a++)a%4==0&&(o[++l]=0),o[l]+=i[e[a]]<<a%4*2;else for(o=new t.allocUnsafe(Math.ceil(e.length/2)),l=-1,a=0;a<e.length;a++)a%2==0&&(o[++l]=0),o[l]+=i[e[a]]<<a%2*4;var c=new r("",0,s+5);for(c.WriteByte(s),l=0,a=0;a<256;a++)n[a]>0&&(n[a]=l++,c.WriteByte(a));return c.WriteUint7(o.length),[c.buf.slice(0,c.pos),o]}}(e));var g=new t.alloc(0);if(l&&([g,e]=function(e){for(var n=new Array(256),a=0;a<256;a++)n[a]=0;var i=-1;for(a=0;a<e.length;a++)n[e[a]]+=e[a]==i?1:-1,i=e[a];var s=0;for(a=0;a<256;a++)n[a]>0&&s++;for(s||(s=1,n[0]=1),(u=new r("",0,s+1+e.length)).WriteByte(s),a=0;a<256;a++)n[a]>0&&u.WriteByte(a);var o=new t.allocUnsafe(e.length),l=0;for(a=0;a<e.length;a++)if(o[l++]=e[a],n[e[a]]>0){i=e[a];for(var c=0;a+c+1<e.length&&e[a+c+1]==i;)c++;u.WriteUint7(c),a+=c}var u,h=y(u.buf.slice(0,u.pos)),d=new r("",0,16);return d.WriteUint7(2*u.pos),d.WriteUint7(l),d.WriteUint7(h.length),[u=t.concat([d.buf.slice(0,d.pos),h]),o.slice(0,l)]}(e)),e.length<4&&1==i&&(i=0,a.buf[0]&=-2),o)var w=e;else if(0==i)w=y(e);else w=function(e){const n=e.length;for(var a=new r("",0,198156),i=new Array(256),s=new Array(256),o=new Array(256),l=0;l<256;l++)s[l]=new Array(256),o[l]=new Array(256);var h=12;(function(e,t,n){for(var r=0;r<256;r++){n[r]=0;for(var a=0;a<256;a++)t[r][a]=0}var i=0;for(r=0;r<e.length;r++)n[i]++,t[i][e[r]]++,i=e[r];n[i]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,n[0]+=3})(e,s,i),function(e,t,n){for(var r=0;r<256;r++)if(t[r]){var a=Math.ceil(Math.log2(t[r]));a>n&&(a=n),m(e[r],a)}}(s,i,h);var d=new r("",0,198156);!function(e,t,n){v(e,n);for(var r=0;r<256;r++)if(n[r])for(var a=0,i=0;i<256;i++)if(n[i])if(a)a--;else if(e.WriteUint7(t[r][i]),!t[r][i]){for(var s=i+1;s<256;s++)if(n[s]){if(0!=t[r][s])break;a++}e.WriteByte(a)}}(d,s,i);var f=y(d.buf.slice(0,d.pos));f.length<d.pos?(a.WriteByte(1|h<<4),a.WriteUint7(d.pos),a.WriteUint7(f.length),a.WriteData(f,f.length)):(a.WriteByte(0|h<<4),a.WriteData(d.buf,d.pos));!function(e,t,n){for(var r=0;r<256;r++)t[r]&&b(e[r],n)}(s,i,h);for(l=0;l<256;l++)if(i[l]){o[l][0]=0;for(var p=1;p<256;p++)o[l][p]=o[l][p-1]+s[l][p-1]}var g=new Array(4),w=new Array(4);for(p=0;p<4;p++)g[p]=32768,w[p]=0;var _=new r("",1.05*n+100>>0,1.05*n+100>>0),E=Math.floor(n/4),k=new Array(4),S=new Array(4);for(p=0;p<4;p++)k[p]=(p+1)*E-2,S[p]=e[k[p]+1];S[3]=e[n-1];for(l=n-2;l>4*E-2;l--)g[3]=u(g[3],_,o[e[l]][S[3]],s[e[l]][S[3]],h),S[3]=e[l];for(;k[0]>=0;)for(p=3;p>=0;p--){var C=e[k[p]];g[p]=u(g[p],_,o[C][S[p]],s[C][S[p]],h),S[p]=C,k[p]--}for(p=3;p>=0;p--)g[p]=u(g[p],_,o[0][S[p]],s[0][S[p]],h);for(l=3;l>=0;l--)c(g[l],_);return t.concat([a.buf.slice(0,a.pos),_.buf.slice(_.pos,_.length)],a.pos+_.length-_.pos)}(e);return t.concat([a.buf.slice(0,a.pos),p,g,w])}function p(e){for(var t=new Array(256),n=0;n<256;n++)t[n]=0;var r=0,a=e.ReadByte(),i=a;do{t[a]=1,r>0?(r--,a++):(a=e.ReadByte())==i+1&&(r=e.ReadByte()),i=a}while(0!=a);return t}function g(e,n){var r=new Array(256),i=new Array(256);!function(e,t,n){for(var r=0;r<256;r++)t[r]=0;var a=p(e);for(r=0;r<256;r++)a[r]>0&&(t[r]=e.ReadUint7());for(b(t,12),n[0]=0,r=0;r<=255;r++)n[r+1]=n[r]+t[r]}(e,r,i);for(var c=s(i,12),u=new Array(4),h=0;h<4;h++)u[h]=e.ReadUint32();var d=new t.allocUnsafe(n);for(h=0;h<n;h++){var f=h%4,g=c[a(u[f],12)];d[h]=g,u[f]=o(u[f],i[g],r[g],12),u[f]=l(e,u[f])}return d}function m(e,t){for(var n=0,r=0;r<256;r++)n+=e[r];const a=1<<t;var i=a/n;do{var s=0,o=0,l=0;n=0;for(r=0;r<256;r++)0!=e[r]&&(s<e[r]&&(s=e[r],o=r),e[r]=Math.floor(e[r]*i),0==e[r]&&(e[r]=1),n+=e[r]);n<a?e[o]+=a-n:n-a<e[o]/2&&e[o]>2?e[o]-=n-a:n!=a&&(i=a/n,l=1)}while(l)}function b(e,t){for(var n=0,r=0;r<256;r++)n+=e[r];if(0!=n&&n!=1<<t){for(var a=0;n<1<<t;)n*=2,a++;for(r=0;r<256;r++)e[r]<<=a}}function v(e,t){for(var n=0,r=0;r<256;r++)if(t[r])if(n>0)n--;else if(e.WriteByte(r),r>0&&t[r-1]>0){for(n=r+1;n<256&&t[n];n++);n-=r+1,e.WriteByte(n)}e.WriteByte(0)}function y(e){const n=e.length;var a=new r("",0,780),i=new Array(256);!function(e,t){for(var n=0;n<256;n++)t[n]=0;for(n=0;n<e.length;n++)t[e[n]]++}(e,i);var s=Math.ceil(Math.log2(n));s>12&&(s=12),m(i,s),function(e,t){v(e,t);for(var n=0;n<256;n++)t[n]&&e.WriteUint7(t[n])}(a,i),m(i,12);var o=new Array(256);o[0]=0;for(var l=1;l<256;l++)o[l]=o[l-1]+i[l-1];var h=new Array(4);for(l=0;l<4;l++)h[l]=32768;var d=new r("",1.05*n+100>>0,1.05*n+100>>0);for(l=n-1;l>=0;l--)h[l%4]=u(h[l%4],d,o[e[l]],i[e[l]],12);for(l=3;l>=0;l--)c(h[l],d);return t.concat([a.buf.slice(0,a.pos),d.buf.slice(d.pos,d.length)],a.pos+d.length-d.pos)}e.exports={decode:function(e){return d(new r(e),0)},encode:f}}).call(this,n(35).Buffer)},857:function(e,t,n){(function(t){const r=n(858),a=n(351),i=n(859),s=n(1182),o=128;e.exports=class{decode(e){return this.stream=new a(e),this.decodeStream(this.stream)}decodeStream(e,t=0){var n=this.stream.ReadByte();16&n||(t=this.stream.ReadUint7());var r,a=t,i=1&n;if(8&n)return this.decodeStripe(this.stream,t);n&o&&([r,a]=this.decodePackMeta(this.stream));if(32&n)var s=this.decodeCat(this.stream,a);else if(4&n)s=this.decodeExt(this.stream,a);else if(64&n)s=i?this.decodeRLE1(this.stream,a):this.decodeRLE0(this.stream,a);else s=i?this.decode1(this.stream,a):this.decode0(this.stream,a);return n&o&&(s=this.decodePack(s,r,t)),s}encode(e,n){if(this.stream=new a("",0,1.1*e.length+100),this.stream.WriteByte(n),16&n||this.stream.WriteUint7(e.length),8&n)return t.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,n>>8)]);var r,i=1&n,s=e.length;return n&o&&([r,e,s]=this.encodePack(e)),n&o&&this.stream.WriteStream(r),64&n?i?this.encodeRLE1(e,s,this.stream):this.encodeRLE0(e,s,this.stream):i?this.encode1(e,s,this.stream):this.encode0(e,s,this.stream)}decode0(e,n){var a=new t.allocUnsafe(n),s=e.ReadByte();0==s&&(s=256);var o=new i(s),l=new r(e);l.RangeStartDecode(e);for(var c=0;c<n;c++)a[c]=o.ModelDecode(e,l);return a}encode0(e,t,n){for(var a=0,s=0;s<t;s++)a<e[s]&&(a=e[s]);a++;var o=new i(a);n.WriteByte(a);var l=new r(n);for(s=0;s<t;s++)o.ModelEncode(n,l,e[s]);return l.RangeFinishEncode(n),n.buf.slice(0,n.pos)}decode1(e,n){var a=new t.allocUnsafe(n),s=e.ReadByte();0==s&&(s=256);for(var o=new Array(s),l=0;l<s;l++)o[l]=new i(s);var c=new r(e);c.RangeStartDecode(e);var u=0;for(l=0;l<n;l++)a[l]=o[u].ModelDecode(e,c),u=a[l];return a}encode1(e,t,n){for(var a=0,s=0;s<t;s++)a<e[s]&&(a=e[s]);a++;var o=new Array(a);for(s=0;s<a;s++)o[s]=new i(a);n.WriteByte(a);var l=new r(n),c=0;for(s=0;s<t;s++)o[c].ModelEncode(n,l,e[s]),c=e[s];return l.RangeFinishEncode(n),n.buf.slice(0,n.pos)}decodeExt(e,n){var r=new t.allocUnsafe(n),a=s.array(e.buf.slice(e.pos)),i=s.header(a),o=0;do{var l=s.decompress(a,i);-1!=l&&(t.from(l).copy(r,o),o+=l.length,i-=l.length)}while(-1!=l);return r}encodeExt(e,t){}decodeRLE0(e,n){var a=new t.allocUnsafe(n),s=e.ReadByte();0==s&&(s=256);for(var o=new i(s),l=new Array(258),c=0;c<=257;c++)l[c]=new i(4);var u=new r(e);u.RangeStartDecode(e);for(c=0;c<n;){a[c]=o.ModelDecode(e,u);for(var h=l[a[c]].ModelDecode(e,u),d=h,f=256;3==h;)h=l[f].ModelDecode(e,u),f=257,d+=h;for(var p=1;p<=d;p++)a[c+p]=a[c];c+=d+1}return a}encodeRLE0(e,t,n){for(var a=0,s=0;s<t;s++)a<e[s]&&(a=e[s]);a++;var o=new i(a),l=new Array(258);for(s=0;s<=257;s++)l[s]=new i(4);n.WriteByte(a);var c=new r(n);for(s=0;s<t;){o.ModelEncode(n,c,e[s]);for(var u=1;s+u<t&&e[s+u]==e[s];)u++;u--;var h=e[s];e[s];s+=u+1;var d=u>=3?3:u;for(l[h].ModelEncode(n,c,d),u-=d,h=256;3==d;)d=u>=3?3:u,l[h].ModelEncode(n,c,d),h=257,u-=d}return c.RangeFinishEncode(n),n.buf.slice(0,n.pos)}decodeRLE1(e,n){var a=new t.allocUnsafe(n),s=e.ReadByte();0==s&&(s=256);for(var o=new Array(s),l=0;l<s;l++)o[l]=new i(s);var c=new Array(258);for(l=0;l<=257;l++)c[l]=new i(4);var u=new r(e);u.RangeStartDecode(e);var h=0;for(l=0;l<n;){a[l]=o[h].ModelDecode(e,u),h=a[l];for(var d=c[a[l]].ModelDecode(e,u),f=d,p=256;3==d;)d=c[p].ModelDecode(e,u),p=257,f+=d;for(var g=1;g<=f;g++)a[l+g]=a[l];l+=f+1}return a}encodeRLE1(e,t,n){for(var a=0,s=0;s<t;s++)a<e[s]&&(a=e[s]);a++;var o=new Array(a);for(s=0;s<a;s++)o[s]=new i(a);var l=new Array(258);for(s=0;s<=257;s++)l[s]=new i(4);n.WriteByte(a);for(var c=new r(n),u=(s=0,0);s<t;){o[u].ModelEncode(n,c,e[s]);for(var h=1;s+h<t&&e[s+h]==e[s];)h++;h--;var d=e[s];u=e[s],s+=h+1;var f=h>=3?3:h;for(l[d].ModelEncode(n,c,f),h-=f,d=256;3==f;)f=h>=3?3:h,l[d].ModelEncode(n,c,f),d=257,h-=f}return c.RangeFinishEncode(n),n.buf.slice(0,n.pos)}decodePackMeta(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),n=0;n<this.nsym;n++)t[n]=e.ReadByte();return[t,e.ReadUint7()]}decodePack(e,n,r){var a=new t.allocUnsafe(r);if(this.nsym<=1)for(var i=0;i<r;i++)a[i]=n[0];else if(this.nsym<=2){i=0;for(var s=0;i<r;i++){if(i%8==0)var o=e[s++];a[i]=n[1&o],o>>=1}}else if(this.nsym<=4)for(i=0,s=0;i<r;i++){if(i%4==0)o=e[s++];a[i]=n[3&o],o>>=2}else{if(!(this.nsym<=16))return e;for(i=0,s=0;i<r;i++){if(i%2==0)o=e[s++];a[i]=n[15&o],o>>=4}}return a}packMeta(e){for(var t=new a("",0,1024),n=new Array(256),r=0;r<e.length;r++)n[e[r]]=1;var i=0;for(r=0;r<256;r++)n[r]&&(n[r]=++i);t.WriteByte(i);for(r=0;r<256;r++)n[r]&&(t.WriteByte(r),n[r]--);return[t,n,i]}encodePack(e){var n,r,a;[n,r,a]=this.packMeta(e);var i=e.length,s=0;if(a<=1)return n.WriteUint7(0),[n,new t.allocUnsafe(0),0];if(a<=2){for(var o=new t.allocUnsafe(Math.floor((i+7)/8)),l=(s=0,0);s<(-8&i);s+=8,l++)o[l]=(r[e[s+0]]<<0)+(r[e[s+1]]<<1)+(r[e[s+2]]<<2)+(r[e[s+3]]<<3)+(r[e[s+4]]<<4)+(r[e[s+5]]<<5)+(r[e[s+6]]<<6)+(r[e[s+7]]<<7);if(s<i){o[l]=0;for(var c=0;s<i;)o[l]|=r[e[s++]]<<c,c++;l++}return n.WriteUint7(l),[n,o,o.length]}if(a<=4){for(o=new t.allocUnsafe(Math.floor((i+3)/4)),s=0,l=0;s<(-4&i);s+=4,l++)o[l]=(r[e[s+0]]<<0)+(r[e[s+1]]<<2)+(r[e[s+2]]<<4)+(r[e[s+3]]<<6);if(s<i){o[l]=0;for(c=0;s<i;)o[l]|=r[e[s++]]<<c,c+=2;l++}return n.WriteUint7(l),[n,o,o.length]}if(a<=16){for(o=new t.allocUnsafe(Math.floor((i+1)/2)),s=0,l=0;s<(-2&i);s+=2,l++)o[l]=(r[e[s+0]]<<0)+(r[e[s+1]]<<4);return s<i&&(o[l++]=r[e[s++]]),n.WriteUint7(l),[n,o,o.length]}return n.WriteUint7(e.length),[n,e,e.length]}encodeStripe(e,t,n){0==n&&(n=4);for(var r=new Array(n),i=new Array(n),s=0;s<n;s++)i[s]=Math.floor(t.length/n)+(t.length%n>s),r[s]=new Array(i[s]);for(var o=0,l=0;l<t.length;l+=n,o++)for(var c=0;c<n;c++)o<r[c].length&&(r[c][o]=t[l+c]);var u=new Array(n),h=0;for(s=0;s<n;s++){var d=this.encode(r[s],0),f=this.encode(r[s],1);u[s]=f.length<d.length?f:d,h+=u[s].length}var p=new a("",0,h+5*n+1);p.WriteByte(n);for(s=0;s<n;s++)p.WriteUint7(u[s].length);for(s=0;s<n;s++)p.WriteData(u[s],u[s].length);return p.buf.slice(0,p.buf.pos)}decodeStripe(e,n){for(var r=e.ReadByte(),a=new Array(r),i=new Array(r),s=0;s<r;s++)a[s]=e.ReadUint7();var o=new Array(r);for(s=0;s<r;s++)i[s]=Math.floor(n/r)+(n%r>s),o[s]=this.decodeStream(e,i[s]);var l=new t.allocUnsafe(n);for(s=0;s<r;s++)for(var c=0;c<i[s];c++)l[c*r+s]=o[s][c];return l}decodeCat(e,n){for(var r=new t.allocUnsafe(n),a=0;a<n;a++)r[a]=e.ReadByte();return r}}}).call(this,n(35).Buffer)},858:function(e,t){e.exports=class{constructor(e){this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}RangeStartDecode(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}RangeGetFrequency(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}RangeDecode(e,t,n,r){for(this.code-=t*this.range,this.range*=n;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}RangeShiftLow(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}RangeEncode(e,t,n,r){var a=this.low;for(this.range=Math.floor(this.range/r),this.low+=t*this.range,this.low>>>=0,this.range*=n,this.low<a&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}RangeFinishEncode(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}},859:function(e,t){e.exports=class{constructor(e=256){this.total_freq=e,this.max_sym=e-1,this.S=new Array,this.F=new Array;for(var t=0;t<=this.max_sym;t++)this.S[t]=t,this.F[t]=1}ModelDecode(e,t){for(var n=t.RangeGetFrequency(this.total_freq),r=0,a=0;r+this.F[a]<=n;)r+=this.F[a++];t.RangeDecode(e,r,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var i=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var s=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=s,s=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=s}return i}ModelRenormalise(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}ModelEncode(e,t,n){for(var r=0,a=0;this.S[a]!=n;a++)r+=this.F[a];t.RangeEncode(e,r,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();n=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var i=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=i,i=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=i}}}},860:function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},861:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(476),a=n.n(r),i=n(862),s=n(863),o=n.n(s);function l(e,t,n){if(n)return n;if(e)return function(e){const{protocol:t,pathname:n}=a.a.parse(e);return"file:"===t?new o.a(unescape(n)):new i.a(e)}(e);if(t)return new o.a(t);throw new Error("no url, path, or filehandle provided, cannot open")}},862:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(1196),a=n.n(r),i=n(1197);class s{constructor(e){this.position=0,this.url=e,this.cache=new i.a({fetch:(e,t)=>this._fetch(e,t)})}async _fetch(t,n){const r={};n<1/0?r.range=`bytes=${t}-${t+n}`:n===1/0&&0!==t&&(r.range=`bytes=${t}-`);const i=await a()(this.url,{method:"GET",headers:r,redirect:"follow",mode:"cors"});if(200===i.status&&0===t||206===i.status){const t=e.from(await i.arrayBuffer()),n=/\/(\d+)$/.exec(i.headers.get("content-range"));return n[1]&&(this._stat={size:parseInt(n[1],10)}),t}throw new Error(`HTTP ${i.status} fetching ${this.url}`)}read(e,t=0,n=1/0,r=0){let a=r;return null===r&&(a=this.position,this.position+=n),this.cache.get(e,t,n,r)}async readFile(){const t=await a()(this.url,{method:"GET",redirect:"follow",mode:"cors"});return e.from(await t.arrayBuffer())}async stat(){if(!this._stat){const t=e.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}}}).call(this,n(35).Buffer)},863:function(e,t){},864:function(e,t,n){"use strict";n(607),n(609);var r=n(610);n.d(t,"a",(function(){return r.b}));var a=n(871);n.d(t,"b",(function(){return a.a}));n(638)},865:function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);r.ZERO=b;var v=o(0,!0);r.UZERO=v;var y=o(1);r.ONE=y;var w=o(1,!0);r.UONE=w;var _=o(-1);r.NEG_ONE=_;var E=c(-1,2147483647,!1);r.MAX_VALUE=E;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,v=0,y=0;return v+=(y+=s*f)>>>16,g+=(v+=i*f)>>>16,v&=65535,g+=(v+=s*h)>>>16,p+=(g+=r*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=t*f+r*h+i*u+s*o,c((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(t),f=h.mul(e);f.isNegative()||f.gt(r);)f=(h=l(t-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},866:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));class r{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function a(e,t=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new r(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}},867:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t,n,r){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=r}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}},868:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor({filehandle:e,renameRefSeq:t=(e=>e)}){this.filehandle=e,this.renameRefSeq=t}_findFirstData(e,t){const n=e.firstDataLine;e.firstDataLine=n?n.compareTo(t)>0?t:n:t}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async hasRefSeq(e,t={}){return!!((await this.parse(t)).indices[e]||{}).binIndex}}},869:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(353),a=n(1199),i=n(92);class s{constructor({filehandle:e,path:t,gziFilehandle:n,gziPath:r}){if(e)this.filehandle=e;else{if(!t)throw new TypeError("either filehandle or path must be defined");this.filehandle=new i.LocalFile(t)}if(!n&&!r&&!t)throw new TypeError("either gziFilehandle or gziPath must be defined");this.gzi=new a.a({filehandle:n,path:n||r||!t?`${t}.gzi`:r})}async stat(){const e=await this.filehandle.stat();return Object.assign(e,{size:await this.getUncompressedFileSize(),blocks:void 0,blksize:void 0})}async getUncompressedFileSize(){const[,t]=await this.gzi.getLastBlock(),{size:n}=await this.filehandle.stat(),r=e.allocUnsafe(4),{bytesRead:a}=await this.filehandle.read(r,0,4,n-28-4);if(4!==a)throw new Error("read error");return t+r.readUInt32LE(0)}async _readAndUncompressBlock(e,[t],[n]){let a=n;a||(a=(await this.filehandle.stat()).size);const i=a-t;await this.filehandle.read(e,0,i,t);return await Object(r.a)(e.slice(0,i))}async read(t,n,r,a){const i=await this.gzi.getRelevantBlocksForRead(r,a),s=e.allocUnsafe(65536);let o=n,l=0;for(let e=0;e<i.length-1;e+=1){const n=await this._readAndUncompressBlock(s,i[e],i[e+1]),[,c]=i[e],u=c>=a?0:a-c,h=Math.min(a+r,c+n.length)-c;u>=0&&u<n.length&&(n.copy(t,o,u,h),o+=h-u,l+=h-u)}return{bytesRead:l,buffer:t}}}}).call(this,n(35).Buffer)},870:function(e,t,n){"use strict";function r(e){const t=e.split(/\r?\n/),n=[];return t.forEach((e=>{const[t,...r]=e.split(/\t/),a=r.map((e=>{const[t,n]=e.split(":",2);return{tag:t,value:n}}));t&&n.push({tag:t.substr(1),data:a})})),n}n.d(t,"a",(function(){return r}))},871:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(610),a=(n(1202),n(97)),i=n(870);async function s(t,n){const r=await Promise.all(t.map((async t=>{const{url:r,headers:a}=t;if(r.startsWith("data:"))return e.from(r.split(",")[1],"base64");{const{referer:t,...i}=a,s=await fetch(r,{...n,headers:{...n.headers,...i}});if(!s.ok)throw new Error(`Failed to fetch ${s.statusText}`);return e.from(await s.arrayBuffer())}})));return e.concat(await Promise.all(r.map((e=>Object(a.b)(e)))))}class o extends r.b{constructor(e){super({bamFilehandle:"?",baiFilehandle:"?"}),this.baseUrl=e.baseUrl,this.trackId=e.trackId}async*streamRecordsForRange(e,t,n,r={viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5}){const a=`${`${this.baseUrl}/${this.trackId}`}?referenceName=${e}&start=${t}&end=${n}&format=BAM`,i=this.chrToIndex&&this.chrToIndex[e],o=await fetch(a,{...r});if(!o.ok)throw new Error(o.statusText);const l=await o.json(),c={buffer:await s(l.htsget.urls.slice(1),r),chunk:{minv:{dataPosition:0}},toString:()=>`${e}_${t}_${n}`};yield*this._fetchChunkFeatures([c],i,t,n,r)}async _readChunk(e){const{chunk:t}=e,{buffer:n,chunk:r}=t;return{data:n,cpositions:null,dpositions:null,chunk:r}}async getHeader(e={}){const t=`${this.baseUrl}/${this.trackId}?referenceName=na&class=header`,n=await fetch(t,e);if(!n.ok)throw new Error(`Failed to fetch ${n.statusText}`);const a=await n.json(),o=await s(a.htsget.urls,e);if(o.readInt32LE(0)!==r.a)throw new Error("Not a BAM file");const l=o.readInt32LE(4),c=o.toString("utf8",8,8+l),u=Object(i.a)(c),h=[],d={};return u.filter((e=>"SQ"===e.tag)).forEach(((e,t)=>{e.data.forEach((e=>{if("SN"===e.tag){const n=e.value;d[n]=t,h[t]=n}}))})),this.chrToIndex=d,this.indexToChr=h,u}}}).call(this,n(35).Buffer)},872:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(611),a=n(88),i=n.n(a),s=n(145),o=n.n(s),l=n(1203),c=n(1258),u=n(1204);function h(e,t,n,r){return e<r&&t>=n}class d{constructor(t,n,a,s,l,c){if(this.bbi=t,this.refsByName=n,this.cirTreeOffset=a,this.isBigEndian=s,this.isCompressed=l,this.blockType=c,this.featureCache=new i.a({cache:new o.a({maxSize:1e3}),fill:async(t,n)=>{const r=Number(t.length),a=Number(t.offset),{buffer:i}=await this.bbi.read(e.alloc(r),0,r,a,{signal:n});return i}}),!(a>=0))throw new Error("invalid cirTreeOffset!");const u=function(e){const t=e?"big":"little",n=(new r.a).endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),a=(new r.a).endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:(new r.a).endianess(t).array("blocksToFetch",{length:"cnt",type:(new r.a).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:(new r.a).array("recurOffsets",{length:"cnt",type:(new r.a).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=(new r.a).endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:(new r.a).endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{3:(new r.a).array("items",{length:"itemCount",type:(new r.a).floatle("score")}),2:(new r.a).array("items",{length:"itemCount",type:(new r.a).endianess(t).int32("start").floatle("score")}),1:(new r.a).array("items",{length:"itemCount",type:(new r.a).endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:n,leafParser:a}}(s);this.leafParser=u.leafParser,this.bigBedParser=u.bigBedParser}async readWigData(t,n,r,a,i){try{const{refsByName:s,bbi:o,cirTreeOffset:c,isBigEndian:u}=this,h=s[t];void 0===h&&a.complete();const d={chrId:h,start:n,end:r};if(!this.cirTreePromise){const t=Number(c);this.cirTreePromise=o.read(e.alloc(48),0,48,t,i)}const{buffer:f}=await this.cirTreePromise,p=u?f.readUInt32BE(4):f.readUInt32LE(4);let g=[],m=0;const b=(e,t,n)=>{try{const r=e.subarray(t),a=this.leafParser.parse(r);if(a.blocksToFetch&&(g=g.concat(a.blocksToFetch.filter(v).map((e=>({offset:e.blockOffset,length:e.blockSize}))))),a.recurOffsets){const e=a.recurOffsets.filter(v).map((e=>Number(e.blockOffset)));e.length>0&&w(e,n+1)}}catch(e){a.error(e)}},v=e=>{const{startChrom:t,startBase:a,endChrom:i,endBase:s}=e;return(t<h||t===h&&a<=r)&&(i>h||i===h&&s>=n)},y=async(e,t,n)=>{try{const r=t.max()-t.min(),s=t.min(),o=await this.featureCache.get(`${r}_${s}`,{length:r,offset:s},i.signal);for(let r=0;r<e.length;r+=1)t.contains(e[r])&&(b(o,e[r]-s,n),m-=1,0===m&&this.readFeatures(a,g,{...i,request:d}))}catch(e){a.error(e)}},w=(e,t)=>{try{m+=e.length;const n=4+32*Number(p);let r=new l.a(e[0],e[0]+n);for(let t=1;t<e.length;t+=1){const a=new l.a(e[t],e[t]+n);r=r.union(a)}r.getRanges().map((n=>y(e,n,t)))}catch(e){a.error(e)}};return w([Number(c)+48],1)}catch(e){a.error(e)}}parseSummaryBlock(e,t,n){const r=[];let a=t;const i=new DataView(e.buffer,e.byteOffset,e.length);for(;a<e.byteLength;){const e=i.getUint32(a,!0);a+=4;const t=i.getUint32(a,!0);a+=4;const s=i.getUint32(a,!0);a+=4;const o=i.getUint32(a,!0);a+=4;const l=i.getFloat32(a,!0);a+=4;const c=i.getFloat32(a,!0);a+=4;const u=i.getFloat32(a,!0);a+=4,a+=4,(!n||e===n.chrId&&h(t,s,n.start,n.end))&&r.push({start:t,end:s,maxScore:c,minScore:l,summary:!0,score:u/(o||1)})}return r}parseBigBedBlock(e,t,n,r){const a=[];let i=t;for(;i<e.byteLength;){const t=this.bigBedParser.parse(e.subarray(i));a.push({...t,uniqueId:`bb-${n+i}`}),i+=t.offset}return r?a.filter((e=>h(e.start,e.end,r.start,r.end))):a}parseBigWigBlock(e,t,n){const r=e.subarray(t),a=new DataView(r.buffer,r.byteOffset,r.length);let i=0;i+=4;const s=a.getInt32(i,!0);i+=8;const o=a.getUint32(i,!0);i+=4;const l=a.getUint32(i,!0);i+=4;const c=a.getUint8(i);i+=2;const u=a.getUint16(i,!0);i+=2;const d=new Array(u);switch(c){case 1:for(let e=0;e<u;e++){const t=a.getInt32(i,!0);i+=4;const n=a.getInt32(i,!0);i+=4;const r=a.getFloat32(i,!0);i+=4,d[e]={start:t,end:n,score:r}}break;case 2:for(let e=0;e<u;e++){const t=a.getInt32(i,!0);i+=4;const n=a.getFloat32(i,!0);i+=4,d[e]={score:n,start:t,end:t+l}}break;case 3:for(let e=0;e<u;e++){const t=a.getFloat32(i,!0);i+=4;const n=s+e*o;d[e]={score:t,start:n,end:n+l}}}return n?d.filter((e=>h(e.start,e.end,n.start,n.end))):d}async readFeatures(e,t,n={}){try{const{blockType:r,isCompressed:a}=this,{signal:i,request:s}=n,o=Object(u.b)(t);Object(u.a)(i),await Promise.all(o.map((async t=>{Object(u.a)(i);const{length:n,offset:o}=t,l=await this.featureCache.get(`${n}_${o}`,t,i);t.blocks.forEach((n=>{Object(u.a)(i);let o=Number(n.offset)-Number(t.offset),h=l;switch(a&&(h=Object(c.a)(l.subarray(o)),o=0),Object(u.a)(i),r){case"summary":e.next(this.parseSummaryBlock(h,o,s));break;case"bigwig":e.next(this.parseBigWigBlock(h,o,s));break;case"bigbed":e.next(this.parseBigBedBlock(h,o,256*Number(n.offset),s));break;default:console.warn(`Don't know what to do with ${r}`)}}))}))),e.complete()}catch(t){e.error(t)}}}}).call(this,n(35).Buffer)},873:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(611),a=n(92),i=n(36),s=n(346),o=n(872);const l=-2003829722,c=-2021002517;function u(e){const t=e?"big":"little",n=(new r.a).endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:(new r.a).endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),a=(new r.a).endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares");return{chromTreeParser:(new r.a).endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),totalSummaryParser:a,headerParser:n,isLeafNode:(new r.a).endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset")}}class h{constructor(e={}){const{filehandle:t,renameRefSeqs:n=(e=>e),path:r,url:i}=e;if(this.renameRefSeqs=n,t)this.bbi=t;else if(i)this.bbi=new a.RemoteFile(i);else{if(!r)throw new Error("no file given");this.bbi=new a.LocalFile(r)}}getHeader(e={}){const t="aborted"in e?{signal:e}:e;return this.headerP||(this.headerP=this._getHeader(t).catch((e=>{throw this.headerP=void 0,e}))),this.headerP}async _getHeader(e){const t=await this._getMainHeader(e),n=await this._readChromTree(t,e);return{...t,...n}}async _getMainHeader(t,n=2e3){const{buffer:r}=await this.bbi.read(e.alloc(n),0,n,0,t),a=this._isBigEndian(r),i=u(a),s=i.headerParser.parse(r),{magic:o,asOffset:l,totalSummaryOffset:h}=s;if(s.fileType=o===c?"bigbed":"bigwig",l>n||h>n)return this._getMainHeader(t,2*n);if(l){const e=Number(s.asOffset);s.autoSql=r.subarray(e,r.indexOf(0,e)).toString("utf8")}if(s.totalSummaryOffset>n)return this._getMainHeader(t,2*n);if(s.totalSummaryOffset){const e=r.subarray(Number(s.totalSummaryOffset)),t=i.totalSummaryParser.parse(e);s.totalSummary={...t,basesCovered:Number(t.basesCovered)}}return{...s,isBigEndian:a}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===l||t===c)return!1;if(t=e.readInt32BE(0),t===l||t===c)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,n){const a=t.isBigEndian,i=a?"big":"little",s=[],o={};let l=Number(t.unzoomedDataOffset);const c=Number(t.chromTreeOffset);for(;l%4!=0;)l+=1;const h=l-c,{buffer:d}=await this.bbi.read(e.alloc(h),0,h,Number(c),n),f=u(a),{keySize:p}=f.chromTreeParser.parse(d),g=(new r.a).endianess(i).string("key",{stripNull:!0,length:p}).uint32("refId").uint32("refSize").saveOffset("offset"),m=(new r.a).endianess(i).skip(p).uint64("childOffset").saveOffset("offset"),b=async e=>{let t=e;if(t>=d.length)throw new Error("reading beyond end of buffer");const n=f.isLeafNode.parse(d.subarray(t)),{isLeafNode:r,cnt:a}=n;if(t+=n.offset,r)for(let e=0;e<a;e+=1){const e=g.parse(d.subarray(t));t+=e.offset;const{key:n,refId:r,refSize:a}=e,i={name:n,id:r,length:a};o[this.renameRefSeqs(n)]=r,s[r]=i}else{const e=[];for(let n=0;n<a;n+=1){const n=m.parse(d.subarray(t)),{childOffset:r}=n;t+=n.offset,e.push(b(Number(r)-Number(c)))}await Promise.all(e)}};return await b(32),{refsByName:o,refsByNumber:s}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:n,uncompressBufSize:r,isBigEndian:a,fileType:i}=await this.getHeader(e);return new o.a(this.bbi,n,t,a,r>0,i)}async getFeatureStream(e,t,n,r={scale:1}){await this.getHeader(r);const a=this.renameRefSeqs(e);let s;if(s=r.basesPerSpan?await this.getView(1/r.basesPerSpan,r):r.scale?await this.getView(r.scale,r):await this.getView(1,r),!s)throw new Error("unable to get block view for data");return new i.a((e=>{s.readWigData(a,t,n,e,r)}))}async getFeatures(e,t,n,r={scale:1}){const a=await this.getFeatureStream(e,t,n,r);return await a.pipe(Object(s.a)(((e,t)=>e.concat(t)))).toPromise()||[]}}}).call(this,n(35).Buffer)},874:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(611),a=n(36),i=n(538),s=n(346),o=n(76),l=n(88),c=n.n(l),u=n(145),h=n.n(u),d=n(873);class f extends d.a{constructor(){super(...arguments),this.readIndicesCache=new c.a({cache:new h.a({maxSize:1}),fill:async(e,t)=>this._readIndices({...e,signal:t})})}readIndices(e={}){const t="aborted"in e?{signal:e}:e;return this.readIndicesCache.get(JSON.stringify(t),t,t.signal)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(t){const{extHeaderOffset:n,isBigEndian:a}=await this.getHeader(t),{buffer:i}=await this.bbi.read(e.alloc(64),0,64,Number(n)),s=a?"big":"little",o=(new r.a).endianess(s).uint16("size").uint16("count").uint64("offset").parse(i),{count:l,offset:c}=o;if(0===l)return[];const u=20*l,{buffer:h}=await this.bbi.read(e.alloc(u),0,u,Number(c)),d=(new r.a).endianess(s).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),f=[];for(let e=0;e<l;e+=1)f.push(d.parse(h.subarray(20*e)));return f}async searchExtraIndexBlocks(t,n={}){const{isBigEndian:a}=await this.getHeader(n),i=await this.readIndices(n);if(!i.length)return[];const s=i.map((async i=>{const{offset:s,field:o}=i,{buffer:l}=await this.bbi.read(e.alloc(32),0,32,Number(s),n),c=a?"big":"little",u=(new r.a).endianess(c).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:h,keySize:d,valSize:f}=u.parse(l),p=(new r.a).endianess(c).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:(new r.a).array("leafkeys",{length:"cnt",type:(new r.a).endianess(c).string("key",{length:d,stripNull:!0}).uint64("offset")}),1:(new r.a).array("keys",{length:"cnt",type:(new r.a).endianess(c).string("key",{length:d,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),g=async r=>{const a=Number(r),i=4+h*(d+f),{buffer:s}=await this.bbi.read(e.alloc(i),0,i,a,n),l=p.parse(s);if(l.leafkeys){let e;for(let n=0;n<l.leafkeys.length;n+=1){const{key:r}=l.leafkeys[n];if(t.localeCompare(r)<0&&e)return g(e);e=l.leafkeys[n].offset}return g(e)}for(let e=0;e<l.keys.length;e+=1)if(l.keys[e].key===t)return{...l.keys[e],field:o}};return g(Number(s)+32)}));return(await Promise.all(s)).filter((e=>!!e))}async searchExtraIndex(e,t={}){const n=await this.searchExtraIndexBlocks(e,t);if(!n.length)return[];const r=await this.getUnzoomedView(t),l=n.map((e=>new a.a((n=>{r.readFeatures(n,[e],t)})).pipe(Object(s.a)(((e,t)=>e.concat(t))),Object(o.a)((t=>{for(let n=0;n<t.length;n+=1)t[n].field=e.field;return t})))));return(await Object(i.a)(...l).toPromise()).filter((t=>{var n;return(null===(n=t.rest)||void 0===n?void 0:n.split("\t")[(t.field||0)-3])===e}))}}}).call(this,n(35).Buffer)},875:function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},876:function(e,t,n){var r=n(875),a={};for(var i in r)r.hasOwnProperty(i)&&(a[r[i]]=i);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in s)if(s.hasOwnProperty(o)){if(!("channels"in s[o]))throw new Error("missing channels property: "+o);if(!("labels"in s[o]))throw new Error("missing channel labels property: "+o);if(s[o].labels.length!==s[o].channels)throw new Error("channel and label counts mismatch: "+o);var l=s[o].channels,c=s[o].labels;delete s[o].channels,delete s[o].labels,Object.defineProperty(s[o],"channels",{value:l}),Object.defineProperty(s[o],"labels",{value:c})}s.rgb.hsl=function(e){var t,n,r=e[0]/255,a=e[1]/255,i=e[2]/255,s=Math.min(r,a,i),o=Math.max(r,a,i),l=o-s;return o===s?t=0:r===o?t=(a-i)/l:a===o?t=2+(i-r)/l:i===o&&(t=4+(r-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+o)/2,[t,100*(o===s?0:n<=.5?l/(o+s):l/(2-o-s)),100*n]},s.rgb.hsv=function(e){var t,n,r,a,i,s=e[0]/255,o=e[1]/255,l=e[2]/255,c=Math.max(s,o,l),u=c-Math.min(s,o,l),h=function(e){return(c-e)/6/u+.5};return 0===u?a=i=0:(i=u/c,t=h(s),n=h(o),r=h(l),s===c?a=r-n:o===c?a=1/3+t-r:l===c&&(a=2/3+n-t),a<0?a+=1:a>1&&(a-=1)),[360*a,100*i,100*c]},s.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},s.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,a=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-a)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-a-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=a[e];if(t)return t;var n,i,s,o=1/0;for(var l in r)if(r.hasOwnProperty(l)){var c=r[l],u=(i=e,s=c,Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)+Math.pow(i[2]-s[2],2));u<o&&(o=u,n=l)}return n},s.keyword.rgb=function(e){return r[e]},s.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),n=t[0],r=t[1],a=t[2];return r/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},s.hsl.rgb=function(e){var t,n,r,a,i,s=e[0]/360,o=e[1]/100,l=e[2]/100;if(0===o)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+o):l+o-l*o),a=[0,0,0];for(var c=0;c<3;c++)(r=s+1/3*-(c-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,a[c]=255*i;return a},s.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,a=n,i=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,a*=i<=1?i:2-i,[t,100*(0===r?2*a/(i+a):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,a=Math.floor(t)%6,i=t-Math.floor(t),s=255*r*(1-n),o=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,a){case 0:return[r,l,s];case 1:return[o,r,s];case 2:return[s,r,l];case 3:return[s,o,r];case 4:return[l,s,r];case 5:return[r,s,o]}},s.hsv.hsl=function(e){var t,n,r,a=e[0],i=e[1]/100,s=e[2]/100,o=Math.max(s,.01);return r=(2-i)*s,n=i*o,[a,100*(n=(n/=(t=(2-i)*o)<=1?t:2-t)||0),100*(r/=2)]},s.hwb.rgb=function(e){var t,n,r,a,i,s,o,l=e[0]/360,c=e[1]/100,u=e[2]/100,h=c+u;switch(h>1&&(c/=h,u/=h),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),a=c+r*((n=1-u)-c),t){default:case 6:case 0:i=n,s=a,o=c;break;case 1:i=a,s=n,o=c;break;case 2:i=c,s=n,o=a;break;case 3:i=c,s=a,o=n;break;case 4:i=a,s=c,o=n;break;case 5:i=n,s=c,o=a}return[255*i,255*s,255*o]},s.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,a=e[3]/100;return[255*(1-Math.min(1,t*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,r*(1-a)+a))]},s.xyz.rgb=function(e){var t,n,r,a=e[0]/100,i=e[1]/100,s=e[2]/100;return n=-.9689*a+1.8758*i+.0415*s,r=.0557*a+-.204*i+1.057*s,t=(t=3.2406*a+-1.5372*i+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},s.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.lab.xyz=function(e){var t,n,r,a=e[0];t=e[1]/500+(n=(a+16)/116),r=n-e[2]/200;var i=Math.pow(n,3),s=Math.pow(t,3),o=Math.pow(r,3);return n=i>.008856?i:(n-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,r=o>.008856?o:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},s.lab.lch=function(e){var t,n=e[0],r=e[1],a=e[2];return(t=360*Math.atan2(a,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+a*a),t]},s.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],a=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(a=Math.round(a/50)))return 30;var i=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===a&&(i+=60),i},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,a=e[2]/255,i=Math.max(Math.max(n,r),a),s=Math.min(Math.min(n,r),a),o=i-s;return t=o<=0?0:i===n?(r-a)/o%6:i===r?2+(a-n)/o:4+(n-r)/o+4,t/=6,[360*(t%=1),100*o,100*(o<1?s/(1-o):0)]},s.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,a=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(a=(n-.5*r)/(1-r)),[e[0],100*r,100*a]},s.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,a=0;return r<1&&(a=(n-r)/(1-r)),[e[0],100*r,100*a]},s.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var a,i=[0,0,0],s=t%1*6,o=s%1,l=1-o;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return a=(1-n)*r,[255*(n*i[0]+a),255*(n*i[1]+a),255*(n*i[2]+a)]},s.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},s.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},s.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},s.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,a=0;return r<1&&(a=(n-r)/(1-r)),[e[0],100*r,100*a]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},877:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=t.ColorPopover=t.PopoverPicker=void 0;const o=i(n(1)),l=s(n(1205)),c=n(15),u=n(22),h=i(n(836)),d=n(17),f=n(1212),p=(0,u.makeStyles)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}});function g({anchorEl:e,onChange:t,onClose:n,color:r}){return o.default.createElement(c.Popover,{open:!!e,anchorEl:e,onClose:n},o.default.createElement(m,{color:r,onChange:t}))}function m({onChange:e,color:t}){const{classes:n}=p(),[r,a]=(0,d.useLocalStorage)("colorPickerPalette","set1"),i=h[r],s=Object.keys(h),[u,g]=(0,o.useState)(t),m=(0,l.default)(t).rgb().toString(),b=t=>{g(t);try{e((0,l.default)(t).rgb().toString())}catch(e){}};return o.default.createElement("div",{style:{display:"flex",padding:10}},o.default.createElement("div",{style:{width:200,margin:5}},o.default.createElement(f.RgbaStringColorPicker,{color:m,onChange:b})),o.default.createElement("div",{style:{width:200,margin:5}},o.default.createElement(c.Select,{value:r,onChange:e=>{const t=e.target.value;a(t)}},s.map((e=>o.default.createElement(c.MenuItem,{value:e,key:e},e)))),o.default.createElement("div",{className:n.swatches},i.map(((e,t)=>o.default.createElement("button",{key:e+"-"+t,className:n.swatch,style:{background:e},onClick:()=>b(e)})))),o.default.createElement(c.TextField,{helperText:"Manually set color (hex, rgb, or css color name)",value:u,onChange:e=>b(e.target.value)})))}t.PopoverPicker=({color:e,onChange:t})=>{const[n,r]=(0,o.useState)(null),{classes:a}=p();return o.default.createElement("div",{className:a.picker},o.default.createElement("div",{className:a.swatch,style:{backgroundColor:e},onClick:e=>r(e.currentTarget)}),o.default.createElement(g,{anchorEl:n,onClose:()=>r(null),color:e,onChange:t}))},t.ColorPopover=g,t.ColorPicker=m,t.default=t.PopoverPicker},878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var a=e.state,s=!(0,r.isNum)(a.lastX),o=i(e);return s?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-a.lastX,deltaY:n-a.lastY,lastX:a.lastX,lastY:a.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var s=e.props.bounds;s="string"==typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);var o=i(e);if("string"==typeof s){var l,c=o.ownerDocument,u=c.defaultView;if(!((l="parent"===s?o.parentNode:c.querySelector(s))instanceof u.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');var h=l,d=u.getComputedStyle(o),f=u.getComputedStyle(h);s={left:-o.offsetLeft+(0,r.int)(f.paddingLeft)+(0,r.int)(d.marginLeft),top:-o.offsetTop+(0,r.int)(f.paddingTop)+(0,r.int)(d.marginTop),right:(0,a.innerWidth)(h)-(0,a.outerWidth)(o)-o.offsetLeft+(0,r.int)(f.paddingRight)-(0,r.int)(d.marginRight),bottom:(0,a.innerHeight)(h)-(0,a.outerHeight)(o)-o.offsetTop+(0,r.int)(f.paddingBottom)-(0,r.int)(d.marginBottom)}}(0,r.isNum)(s.right)&&(t=Math.min(t,s.right));(0,r.isNum)(s.bottom)&&(n=Math.min(n,s.bottom));(0,r.isNum)(s.left)&&(t=Math.max(t,s.left));(0,r.isNum)(s.top)&&(n=Math.max(n,s.top));return[t,n]},t.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,a.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var s=i(n),o=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,a.offsetXYFromParent)(r||e,o,n.props.scale)},t.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],a=Math.round(n/e[1])*e[1];return[r,a]};var r=n(477),a=n(612);function i(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){void 0}},880:function(e,t,n){"use strict";function r(e,t,n,a){this.message=e,this.expected=t,this.found=n,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}return"Expected "+function(e){var t,r,a,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(a=e[t],n[a.type](a));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,a={},i={declaration:Ne},s=Ne,o=_e("(",!1),l=_e(")",!1),c="simple",u=_e("simple",!1),h="object",d=_e("object",!1),f="table",p=_e("table",!1),g="auto",m=_e("auto",!1),b="primary",v=_e("primary",!1),y="index",w=_e("index",!1),_="unique",E=_e("unique",!1),k=function(e,t){return t},S=_e("#",!1),C=_e(";",!1),x=_e("[",!1),O=_e("]",!1),N=",",A=_e(",",!1),B=_e("int",!1),R="uint",I=_e("uint",!1),j="short",M=_e("short",!1),T="ushort",L=_e("ushort",!1),P="byte",z=_e("byte",!1),F="ubyte",q=_e("ubyte",!1),$="float",D=_e("float",!1),U="char",H=_e("char",!1),W="string",V=_e("string",!1),Z="lstring",G=_e("lstring",!1),X="enum",K=_e("enum",!1),Y="double",J=_e("double",!1),Q="bigint",ee=_e("bigint",!1),te=_e("set",!1),ne=/^[a-zA-Z_]/,re=Ee([["a","z"],["A","Z"],"_"],!1,!1),ae=/^[a-zA-Z0-9_]/,ie=Ee([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),se=(_e('"',!1),Ee(['"'],!0,!1),/^[^\n\r]/),oe=Ee(["\n","\r"],!0,!1),le=ke("integer"),ce=/^[0-9]/,ue=Ee([["0","9"]],!1,!1),he=ke("whitespace"),de=/^[ \t\n\r]/,fe=Ee([" ","\t","\n","\r"],!1,!1),pe=0,ge=0,me=[{line:1,column:1}],be=0,ve=[],ye=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=i[t.startRule]}function we(){return e.substring(ge,pe)}function _e(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ee(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ke(e){return{type:"other",description:e}}function Se(t){var n,r=me[t];if(r)return r;for(n=t-1;!me[n];)n--;for(r={line:(r=me[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return me[t]=r,r}function Ce(e,t){var n=Se(e),r=Se(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function xe(e){pe<be||(pe>be&&(be=pe,ve=[]),ve.push(e))}function Oe(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function Ne(){var t,n,r,i,s,c,u;return t=pe,ze()!==a&&(n=Ae())!==a&&ze()!==a&&(r=Be())!==a&&ze()!==a&&(i=Ie())!==a&&ze()!==a?(40===e.charCodeAt(pe)?(s="(",pe++):(s=a,0===ye&&xe(o)),s!==a&&ze()!==a?(c=function(){var e,t,n,r,i;if(e=pe,(t=Me())!==a)if(ze()!==a){for(n=[],r=pe,ze()!==a&&(i=Me())!==a?(ge=r,r=k(0,i)):(pe=r,r=a);r!==a;)n.push(r),r=pe,ze()!==a&&(i=Me())!==a?(ge=r,r=k(0,i)):(pe=r,r=a);n!==a&&(r=ze())!==a?(ge=e,o=n,(s=t).name&&o.unshift(s),e=t=o):(pe=e,e=a)}else pe=e,e=a;else pe=e,e=a;var s,o;return e}(),c!==a&&ze()!==a?(41===e.charCodeAt(pe)?(u=")",pe++):(u=a,0===ye&&xe(l)),u!==a&&ze()!==a?(ge=t,t={type:n,name:r,comment:i,fields:c}):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a),t}function Ae(){var t;return e.substr(pe,6)===c?(t=c,pe+=6):(t=a,0===ye&&xe(u)),t===a&&(e.substr(pe,6)===h?(t=h,pe+=6):(t=a,0===ye&&xe(d)),t===a&&(e.substr(pe,5)===f?(t=f,pe+=5):(t=a,0===ye&&xe(p)))),t}function Be(){var t,n,r,i;return(t=Le())===a&&(t=pe,(n=Le())!==a&&(r=Re())!==a?t=n=[n,r]:(pe=t,t=a),t===a&&(t=pe,(n=Le())!==a?(e.substr(pe,4)===g?(r=g,pe+=4):(r=a,0===ye&&xe(m)),r!==a?t=n=[n,r]:(pe=t,t=a)):(pe=t,t=a),t===a&&(t=pe,(n=Le())!==a&&(r=Re())!==a?(e.substr(pe,4)===g?(i=g,pe+=4):(i=a,0===ye&&xe(m)),i!==a?t=n=[n,r,i]:(pe=t,t=a)):(pe=t,t=a)))),t}function Re(){var t;return e.substr(pe,7)===b?(t=b,pe+=7):(t=a,0===ye&&xe(v)),t===a&&(e.substr(pe,5)===y?(t=y,pe+=5):(t=a,0===ye&&xe(w)),t===a&&(e.substr(pe,6)===_?(t=_,pe+=6):(t=a,0===ye&&xe(E)))),t}function Ie(){var e;return(e=Pe())===a&&(e=ze()),e}function je(){var t,n,r,i,s;return t=pe,(n=ze())!==a?(r=function(){var t;return 35===e.charCodeAt(pe)?(t="#",pe++):(t=a,0===ye&&xe(S)),t}(),r!==a&&(i=Pe())!==a&&(s=ze())!==a?t=n=[n,r,i,s]:(pe=t,t=a)):(pe=t,t=a),t}function Me(){var t,n,r,i,s,c,u,h;return t=pe,(n=Te())!==a&&ze()!==a&&(r=Le())!==a&&ze()!==a?(59===e.charCodeAt(pe)?(i=";",pe++):(i=a,0===ye&&xe(C)),i!==a&&ze()!==a&&(s=Ie())!==a?(ge=t,t=n={type:n,name:r,comment:s}):(pe=t,t=a)):(pe=t,t=a),t===a&&(t=pe,(n=Te())!==a&&ze()!==a?(91===e.charCodeAt(pe)?(r="[",pe++):(r=a,0===ye&&xe(x)),r!==a&&ze()!==a?(i=function(){var t;t=function(){var t,n,r;if(ye++,t=pe,ze()!==a){if(n=[],ce.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=a,0===ye&&xe(ue)),r!==a)for(;r!==a;)n.push(r),ce.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=a,0===ye&&xe(ue));else n=a;n!==a?(ge=t,t=parseInt(we(),10)):(pe=t,t=a)}else pe=t,t=a;ye--,t===a&&(a,0===ye&&xe(le));return t}(),t===a&&(t=Le());return t}(),i!==a&&ze()!==a?(93===e.charCodeAt(pe)?(s="]",pe++):(s=a,0===ye&&xe(O)),s!==a&&ze()!==a&&(c=Le())!==a&&ze()!==a?(59===e.charCodeAt(pe)?(u=";",pe++):(u=a,0===ye&&xe(C)),u!==a&&ze()!==a&&(h=Ie())!==a?(ge=t,n=function(e,t,n,r){return{type:e,size:t,name:n,comment:r}}(n,i,c,h),t=n):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a),t===a&&(t=pe,(n=Te())!==a&&ze()!==a?(40===e.charCodeAt(pe)?(r="(",pe++):(r=a,0===ye&&xe(o)),r!==a&&ze()!==a?(i=function(){var t,n,r,i,s,o;if(t=pe,(n=Le())!==a){for(r=[],i=pe,44===e.charCodeAt(pe)?(s=N,pe++):(s=a,0===ye&&xe(A)),s!==a&&ze()!==a&&(o=Le())!==a?(ge=i,i=s=k(0,o)):(pe=i,i=a);i!==a;)r.push(i),i=pe,44===e.charCodeAt(pe)?(s=N,pe++):(s=a,0===ye&&xe(A)),s!==a&&ze()!==a&&(o=Le())!==a?(ge=i,i=s=k(0,o)):(pe=i,i=a);r!==a?(ge=t,l=n,(c=r).unshift(l),t=n=c):(pe=t,t=a)}else pe=t,t=a;var l,c;return t}(),i!==a&&ze()!==a?(41===e.charCodeAt(pe)?(s=")",pe++):(s=a,0===ye&&xe(l)),s!==a&&ze()!==a&&(c=Le())!==a&&ze()!==a?(59===e.charCodeAt(pe)?(u=";",pe++):(u=a,0===ye&&xe(C)),u!==a&&ze()!==a&&(h=Ie())!==a?(ge=t,n=function(e,t,n,r){return{type:e,vals:t,name:n,comment:r}}(n,i,c,h),t=n):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a)):(pe=t,t=a),t===a&&(t=je()))),t}function Te(){var t,n,r;return"int"===e.substr(pe,3)?(t="int",pe+=3):(t=a,0===ye&&xe(B)),t===a&&(e.substr(pe,4)===R?(t=R,pe+=4):(t=a,0===ye&&xe(I)),t===a&&(e.substr(pe,5)===j?(t=j,pe+=5):(t=a,0===ye&&xe(M)),t===a&&(e.substr(pe,6)===T?(t=T,pe+=6):(t=a,0===ye&&xe(L)),t===a&&(e.substr(pe,4)===P?(t=P,pe+=4):(t=a,0===ye&&xe(z)),t===a&&(e.substr(pe,5)===F?(t=F,pe+=5):(t=a,0===ye&&xe(q)),t===a&&(e.substr(pe,5)===$?(t=$,pe+=5):(t=a,0===ye&&xe(D)),t===a&&(e.substr(pe,4)===U?(t=U,pe+=4):(t=a,0===ye&&xe(H)),t===a&&(e.substr(pe,6)===W?(t=W,pe+=6):(t=a,0===ye&&xe(V)),t===a&&(e.substr(pe,7)===Z?(t=Z,pe+=7):(t=a,0===ye&&xe(G)),t===a&&(e.substr(pe,4)===X?(t=X,pe+=4):(t=a,0===ye&&xe(K)),t===a&&(e.substr(pe,6)===Y?(t=Y,pe+=6):(t=a,0===ye&&xe(J)),t===a&&(e.substr(pe,6)===Q?(t=Q,pe+=6):(t=a,0===ye&&xe(ee)),t===a&&("set"===e.substr(pe,3)?(t="set",pe+=3):(t=a,0===ye&&xe(te)),t===a&&(t=pe,(n=Ae())!==a&&ze()!==a&&(r=Be())!==a?(ge=t,t=n=n+" "+r):(pe=t,t=a))))))))))))))),t}function Le(){var t,n,r,i,s;if(t=pe,n=pe,ne.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=a,0===ye&&xe(re)),r!==a){for(i=[],ae.test(e.charAt(pe))?(s=e.charAt(pe),pe++):(s=a,0===ye&&xe(ie));s!==a;)i.push(s),ae.test(e.charAt(pe))?(s=e.charAt(pe),pe++):(s=a,0===ye&&xe(ie));i!==a?n=r=[r,i]:(pe=n,n=a)}else pe=n,n=a;return n!==a&&(ge=t,n=we()),t=n}function Pe(){var t,n,r;for(t=pe,n=[],se.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=a,0===ye&&xe(oe));r!==a;)n.push(r),se.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=a,0===ye&&xe(oe));return n!==a&&(ge=t,n=n.join("").replace(/^"/,"").replace(/"$/,"")),t=n}function ze(){var t,n;for(ye++,t=[],de.test(e.charAt(pe))?(n=e.charAt(pe),pe++):(n=a,0===ye&&xe(fe));n!==a;)t.push(n),de.test(e.charAt(pe))?(n=e.charAt(pe),pe++):(n=a,0===ye&&xe(fe));return ye--,t===a&&(n=a,0===ye&&xe(he)),t}if((n=s())!==a&&pe===e.length)return n;throw n!==a&&pe<e.length&&xe({type:"end"}),Oe(ve,be<e.length?e.charAt(be):null,be<e.length?Ce(be,be+1):Ce(be,be))}}},881:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(88),a=n.n(r),i=n(145),s=n.n(i),o=n(92),l=n(97),c=n(615),u=n(616),h=n(617);function d(e){return new Promise((t=>{setTimeout(t,e)}))}class f{constructor({path:e,filehandle:t,tbiPath:n,tbiFilehandle:r,csiPath:i,csiFilehandle:l,chunkSizeLimit:c=5e7,renameRefSeqs:d=(e=>e),chunkCacheSize:f=5242880}){if(t)this.filehandle=t;else{if(!e)throw new TypeError("must provide either filehandle or path");this.filehandle=new o.LocalFile(e)}if(r)this.index=new u.a({filehandle:r,renameRefSeqs:d});else if(l)this.index=new h.a({filehandle:l,renameRefSeqs:d});else if(n)this.index=new u.a({filehandle:new o.LocalFile(n),renameRefSeqs:d});else if(i)this.index=new h.a({filehandle:new o.LocalFile(i),renameRefSeqs:d});else{if(!e)throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, or csiPath");this.index=new u.a({filehandle:new o.LocalFile(`${e}.tbi`),renameRefSeqs:d})}this.chunkSizeLimit=c,this.renameRefSeq=d,this.chunkCache=new a.a({cache:new s.a({maxSize:Math.floor(f/65536)}),fill:this.readChunk.bind(this)})}async getLines(e,t,n,r){let a,i,s={};if(void 0===r)throw new TypeError("line callback must be provided");if("function"==typeof r?i=r:(s=r,i=r.lineCallback),void 0===e)throw new TypeError("must provide a reference sequence name");if(!i)throw new TypeError("line callback must be provided");const o=await this.index.getMetadata(s);if(Object(c.a)(a),t||(t=0),n||(n=o.maxRefLength),!(t<=n))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(t===n)return;const l=await this.index.blocksForRange(e,t,n,s);Object(c.a)(a);for(let e=0;e<l.length;e+=1){const t=l[e].fetchedSize();if(t>this.chunkSizeLimit)throw new Error(`Too much data. Chunk size ${t.toLocaleString()} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit.toLocaleString()}.`)}let u=Date.now();for(let r=0;r<l.length;r+=1){let s;const h=l[r],{buffer:f,cpositions:p,dpositions:g}=await this.chunkCache.get(h.toString(),h,a),m=("undefined"!=typeof TextDecoder?new TextDecoder("utf-8").decode(f):f.toString()).split("\n");m.pop(),Object(c.a)(a);let b,v=h.minv.dataPosition;for(let r=0;r<m.length;r+=1){const l=m[r];for(b=0;v>=g[b];b+=1);const{startCoordinate:h,overlaps:f}=this.checkLine(o,e,t,n,l);if(void 0!==s&&void 0!==h&&s>h)throw new Error(`Lines not sorted by start coordinate (${s} > ${h}), this file is not usable with Tabix.`);if(s=h,f)i(l.trim(),256*p[b]+(v-g[b]));else if(void 0!==h&&h>=n)return;v+=l.length+1,u-Date.now()>500&&(u=Date.now(),Object(c.a)(a),await d(1))}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:t,metaChar:n,maxBlockSize:r}=await this.getMetadata(e);Object(c.a)(e.signal);const a=t&&t.blockPosition?t.blockPosition+r:r;let i=await this._readRegion(0,a,e);Object(c.a)(e.signal);try{i=await Object(l.b)(i)}catch(e){throw console.error(e),new Error(`error decompressing block ${e.code} at 0 (length ${a}) ${e}`)}if(n){let e=-1;const t="\n".charCodeAt(0),r=n.charCodeAt(0);for(let n=0;n<i.length&&(n!==e+1||i[n]===r);n+=1)i[n]===t&&(e=n);i=i.slice(0,e+1)}return i}async getHeader(e={}){const t=await this.getHeaderBuffer(e);return Object(c.a)(e.signal),t.toString("utf8")}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine({columnNumbers:e,metaChar:t,coordinateType:n,format:r},a,i,s,o){if(o.charAt(0)===t)return{overlaps:!1};let{ref:l,start:c,end:u}=e;l||(l=0),c||(c=0),u||(u=0),"VCF"===r&&(u=8);const h=Math.max(l,c,u);let d=1,f=0,p="",g=-1/0;for(let e=0;e<o.length+1;e+=1)if("\t"===o[e]||e===o.length){if(d===l){if(this.renameRefSeq(o.slice(f,e))!==a)return{overlaps:!1}}else if(d===c){if(g=parseInt(o.slice(f,e),10),"1-based-closed"===n&&(g-=1),g>=s)return{startCoordinate:g,overlaps:!1};if((0===u||u===c)&&g+1<=i)return{startCoordinate:g,overlaps:!1}}else if("VCF"===r&&4===d)p=o.slice(f,e);else if(d===u){let t;if(t="VCF"===r?this._getVcfEnd(g,p,o.slice(f,e)):parseInt(o.slice(f,e),10),t<=i)return{overlaps:!1}}if(f=e+1,d+=1,d>h)break}return{startCoordinate:g,overlaps:!0}}_getVcfEnd(e,t,n){let r=e+t.length;const a=-1!==n.indexOf("SVTYPE=TRA");if("."===n[0]||a){if(a)return e+1}else{let e=";";for(let t=0;t<n.length;t+=1){if(";"===e&&"END="===n.slice(t,t+4)){let e=n.indexOf(";",t);-1===e&&(e=n.length),r=parseInt(n.slice(t+4,e),10);break}e=n[t]}}return r}async lineCount(e,t={}){return this.index.lineCount(e,t)}async _readRegion(t,n,r={}){const{bytesRead:a,buffer:i}=await this.filehandle.read(e.alloc(n),0,n,t,r);return a<n?i.slice(0,a):i}async readChunk(e,t={}){const n=await this._readRegion(e.minv.blockPosition,e.fetchedSize(),t);try{return Object(l.c)(n,e)}catch(t){throw new Error(`error decompressing chunk ${e.toString()} ${t}`)}}}}).call(this,n(35).Buffer)},882:function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:b;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?l(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=b,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=o(1<<24),b=o(0);r.ZERO=b;var v=o(0,!0);r.UZERO=v;var y=o(1);r.ONE=y;var w=o(1,!0);r.UONE=w;var _=o(-1);r.NEG_ONE=_;var E=c(-1,2147483647,!1);r.MAX_VALUE=E;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+o)>>>16,u+=t+s,c((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(S))return e.isOdd()?S:b;if(e.eq(S))return this.isOdd()?S:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,v=0,y=0;return v+=(y+=s*f)>>>16,g+=(v+=i*f)>>>16,v&=65535,g+=(v+=s*h)>>>16,p+=(g+=r*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=s*u)>>>16,p+=t*f+r*h+i*u+s*o,c((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(y)||e.eq(_)?S:e.eq(S)?y:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:_:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),h=l(t),f=h.mul(e);f.isNegative()||f.gt(r);)f=(h=l(t-=o,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},883:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));class r{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function a(e,t=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new r(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}},884:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t,n,r){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=r}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}},885:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(88),a=n.n(r),i=n(145),s=n.n(i);class o{constructor({filehandle:e,renameRefSeqs:t=(e=>e)}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){const{indices:t,...n}=await this.parse(e);return n}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this._parseCache||(this._parseCache=new a.a({cache:new s.a({maxSize:1}),fill:()=>this._parse(e)})),this._parseCache.get("index",null,void 0)}async hasRefSeq(e,t={}){return!!((await this.parse(t)).indices[e]||{}).binIndex}}},886:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},887:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.default=s},888:function(e,t,n){"use strict";var r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27)),i=n(9),s=(0,a.default)((0,i.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");t.default=s},889:function(e,t,n){"use strict";var r=n(1234),a=n(627);t.a={parseStream:r.d,parseStringSync:r.e,formatSync:r.c,formatStream:r.b,formatFile:r.a,util:a}},890:function(e,t,n){"use strict";(function(t,r){var a=n(478);e.exports=y;var i,s=n(1236);y.ReadableState=v;n(622).EventEmitter;var o=function(e,t){return e.listeners(t).length},l=n(891),c=n(624).Buffer,u=t.Uint8Array||function(){};var h=Object.create(n(354));h.inherits=n(192);var d=n(1237),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=n(1238),m=n(892);h.inherits(y,l);var b=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(i=i||n(146));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(626).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function y(e){if(i=i||n(146),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function w(e,t,n,r,a){var i,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,S(e)}(e,s)):(a||(i=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,t)),i?e.emit("error",i):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):x(e,s)):_(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),x(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return p||(p=n(626).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var E=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(C,e):C(e))}function C(e){f("emit readable"),e.emit("readable"),B(e)}function x(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(O,e,t))}function O(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function N(e){f("readable nexttick read 0"),e.read(0)}function A(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,a=n.data;e-=a.length;for(;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(s===i.length?a+=i:a+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++r}return t.length-=r,a}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,a=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),0===(e-=s)){s===i.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++a}return t.length-=a,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):S(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,a=t.needReadable;return f("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",a=!0),t.ended||t.reading?f("reading or ended",a=!1):a&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,f("pipe count=%d opts=%j",i.pipesCount,t);var l=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:y;function c(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",c),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",g),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function u(){f("onend"),e.end()}i.endEmitted?a.nextTick(l):n.once("end",l),e.on("unpipe",c);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",h);var d=!1;var p=!1;function g(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==M(i.pipes,e))&&!d&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(t){f("onerror",t),y(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",v),y()}function v(){f("onfinish"),e.removeListener("close",b),y()}function y(){f("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",b),e.once("finish",v),e.emit("pipe",n),i.flowing||(f("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,n);return this}var s=M(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):a.nextTick(N,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(A,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(f("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a)||(n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<b.length;i++)e.on(b[i],this.emit.bind(this,b[i]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=R}).call(this,n(71),n(114))},891:function(e,t,n){e.exports=n(622).EventEmitter},892:function(e,t,n){"use strict";var r=n(478);function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},893:function(e,t,n){"use strict";e.exports=s;var r=n(146),a=Object.create(n(354));function i(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a.inherits=n(192),a.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},894:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(1248),a=n.n(r),i=n(92),s=n(855);const o=440477507;function l(e,t){const n=e.prototype[t],r=`_memo_${t}`;e.prototype[t]=function(){return r in this||(this[r]=n.call(this)),this[r]}}const c=["T","C","A","G"],u=[];for(let e=0;e<256;e++)u.push(c[e>>6&3]+c[e>>4&3]+c[e>>2&3]+c[3&e]);const h=u.map((e=>e.toLowerCase()));class d{constructor({filehandle:e,path:t}){if(e)this.filehandle=e;else{if(!t)throw new Error("must supply path or filehandle");this.filehandle=new i.LocalFile(t)}this.isBigEndian=void 0}async _getParser(e){const t=(await this._getParsers())[e];if(!t)throw new Error(`parser ${e} not found`);return t}async _detectEndianness(){const t=await this.filehandle.read(e.allocUnsafe(8),0,8,0),{buffer:n}=t;if(n.readInt32LE(0)===o)this.isBigEndian=!1,this.version=n.readInt32LE(4);else{if(n.readInt32BE(0)!==o)throw new Error("not a 2bit file");this.isBigEndian=!0,this.version=n.readInt32BE(4)}}async _getParsers(){await this._detectEndianness();const e=this.isBigEndian?"big":"little",t=this.isBigEndian?"be":"le";let n=(new s.Parser).endianess(e).uint8("nameLength").string("name",{length:"nameLength"});n=1===this.version?n.buffer("offsetBytes",{length:8}):n.uint32("offset");return{header:(new s.Parser).endianess(e).int32("magic",{assert:e=>440477507===e}).int32("version",{assert:e=>0===e||1===e}).uint32("sequenceCount",{assert:e=>e>=0}).uint32("reserved"),index:(new s.Parser).endianess(e).uint32("sequenceCount").uint32("reserved").array("index",{length:"sequenceCount",type:n}),record1:(new s.Parser).endianess(e).uint32("dnaSize").uint32("nBlockCount"),record2:(new s.Parser).endianess(e).uint32("nBlockCount").array("nBlockStarts",{length:"nBlockCount",type:`uint32${t}`}).array("nBlockSizes",{length:"nBlockCount",type:`uint32${t}`}).uint32("maskBlockCount"),record3:(new s.Parser).endianess(e).uint32("maskBlockCount").array("maskBlockStarts",{length:"maskBlockCount",type:`uint32${t}`}).array("maskBlockSizes",{length:"maskBlockCount",type:`uint32${t}`}).int32("reserved")}}async getHeader(){await this._detectEndianness();const{buffer:t}=await this.filehandle.read(e.allocUnsafe(16),0,16,0);return(await this._getParser("header")).parse(t).result}async getIndex(){const t=8+(await this.getHeader()).sequenceCount*(257+(1===this.version?8:4)),{buffer:n}=await this.filehandle.read(e.allocUnsafe(t),0,t,8),r=(await this._getParser("index")).parse(n).result.index,i={};return 1===this.version?r.forEach((({name:e,offsetBytes:t})=>{const n=a.a.fromBytes(t,!0,!this.isBigEndian);if(n.greaterThan(Number.MAX_SAFE_INTEGER))throw new Error("integer overflow. File offset greater than 2^53-1 encountered. This library can only handle offsets up to 2^53-1.");i[e]=n.toNumber()})):r.forEach((({name:e,offset:t})=>{i[e]=t})),i}async getSequenceNames(){const e=await this.getIndex();return Object.keys(e)}async getSequenceSizes(){const e=await this.getIndex(),t=Object.keys(e),n=Object.values(e).map((e=>this._getSequenceSize(e))),r=await Promise.all(n),a={};for(let e=0;e<t.length;e+=1)a[t[e]]=r[e];return a}async getSequenceSize(e){const t=(await this.getIndex())[e];if(t)return this._getSequenceSize(t)}async _getSequenceSize(e){if(void 0===e||e<0)throw new Error("invalid offset");return(await this._parseItem(e,8,"record1")).dnaSize}async _getSequenceRecord(e){if(void 0===e||e<0)throw new Error("invalid offset");const t=await this._parseItem(e,8,"record1"),n=8*t.nBlockCount+8,r=await this._parseItem(e+4,n,"record2"),a=8*r.maskBlockCount+8,i=await this._parseItem(e+4+n-4,a,"record3");return{dnaSize:t.dnaSize,nBlocks:{starts:r.nBlockStarts,sizes:r.nBlockSizes},maskBlocks:{starts:i.maskBlockStarts,sizes:i.maskBlockSizes},dnaPosition:e+4+n-4+a}}async _parseItem(t,n,r){const{buffer:a}=await this.filehandle.read(e.allocUnsafe(n),0,n,t);return(await this._getParser(r)).parse(a).result}async getSequence(t,n=0,r){const a=(await this.getIndex())[t];if(!a)return;const i=await this._getSequenceRecord(a);if(n<0)throw new TypeError("regionStart cannot be less than 0");(void 0===r||r>i.dnaSize)&&(r=i.dnaSize);const s=this._getOverlappingBlocks(n,r,i.nBlocks.starts,i.nBlocks.sizes),o=this._getOverlappingBlocks(n,r,i.maskBlocks.starts,i.maskBlocks.sizes),l=e.allocUnsafe(Math.ceil((r-n)/4)+1),c=Math.floor(n/4),{buffer:d}=await this.filehandle.read(l,0,l.length,i.dnaPosition+c);let f="";for(let e=n;e<r;e+=1){for(;o.length&&o[0].end<=e;)o.shift();const t=o[0]&&o[0].start<=e&&o[0].end>e;if(s[0]&&e>=s[0].start&&e<s[0].end){const n=s.shift();for(;e<n.end&&e<r;e+=1)f+=t?"n":"N";e-=1}else{const n=e%4,r=d[Math.floor(e/4)-c];f+=t?h[r][n]:u[r][n]}}return f}_getOverlappingBlocks(e,t,n,r){let a,i;for(let s=0;s<n.length;s+=1){const o=n[s];if(e>=o+r[s]||t<=o){if(void 0!==a){i=s;break}}else void 0===a&&(a=s)}if(void 0===a)return[];void 0===i&&(i=n.length);const s=new Array(i-a);for(let e=a;e<i;e+=1)s[e-a]={start:n[e],end:n[e]+r[e],size:r[e]};return s}}l(d,"_getParsers"),l(d,"getIndex"),l(d,"getHeader")}).call(this,n(35).Buffer)},906:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o.a}));const r=BigInt(32);"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(e,t){return function(e,t,n){const a=Number(!!n),i=Number(!n);return BigInt(e.getInt32(t,n)*i+e.getInt32(t+4,n)*a)<<r|BigInt(e.getUint32(t,n)*a+e.getUint32(t+4,n)*i)}(this,e,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(e,t){return function(e,t,n){const a=e.getUint32(t,n),i=e.getUint32(t+4,n),s=Number(!!n),o=Number(!n);return BigInt(a*o+i*s)<<r|BigInt(a*s+i*o)}(this,e,t)}),"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(e,t,n){!function(e,t,n,a){const i=Number(n>>r),s=Number(n&BigInt(4294967295));a?(e.setInt32(t+4,i,a),e.setUint32(t,s,a)):(e.setInt32(t,i,a),e.setUint32(t+4,s,a))}(this,e,t,n)}),"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(e,t,n){!function(e,t,n,a){const i=Number(n>>r),s=Number(n&BigInt(4294967295));a?(e.setUint32(t+4,i,a),e.setUint32(t,s,a)):(e.setUint32(t,i,a),e.setUint32(t+4,s,a))}(this,e,t,n)});var a=n(872),i=n(873);class s extends i.a{async getView(e,t){const{zoomLevels:n,refsByName:r,fileSize:i,isBigEndian:s,uncompressBufSize:o}=await this.getHeader(t),l=1/e;let c=n.length;i||(c-=1);for(let e=c;e>=0;e-=1){const t=n[e];if(t&&t.reductionLevel<=2*l){const e=Number(t.indexOffset);return new a.a(this.bbi,r,e,s,o>0,"summary")}}return this.getUnzoomedView(t)}}var o=n(874)},926:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return i}));n(92);var r=n(97),a=n(628);class i extends a.a{constructor({fasta:e,path:t,fai:n,faiPath:a,gzi:i,gziPath:s,chunkSizeLimit:o}){super({fasta:e,path:t,fai:n,faiPath:a,chunkSizeLimit:o}),e&&i?this.fasta=new r.a({filehandle:e,gziFilehandle:i}):t&&s&&(this.fasta=new r.a({path:t,gziPath:s}))}}},97:function(e,t,n){"use strict";var r=n(869);n.d(t,"a",(function(){return r.a}));var a=n(353);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b}))}}]);
//# sourceMappingURL=async-null.js.map
//# sourceMappingURL=async-null.js.map